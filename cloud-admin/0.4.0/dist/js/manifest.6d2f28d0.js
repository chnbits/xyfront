(window.webpackJsonp=window.webpackJsonp||[]).push([["manifest"],{"04b1":function(e,t,a){"use strict";a.r(t);var i=new VueAMap.AMapManager,n={props:["text"],template:"<div>{{text}}</div>"},o={name:"Amap",props:{item:{extra:{}},value:{},token:"",cloudId:0,eid:0},data:function(){var e=this,t=this;return{amapManager:i,geocoder:"",zoom:12,center:[0,0],loaded:!1,events:{init:function(e){e.getCity((function(e){}))},moveend:function(){},zoomchange:function(){},click:function(a){"position"!=t.item.extra.mapType&&"positionAddress"!=t.item.extra.mapType||(t.position=[a.lnglat.lng,a.lnglat.lat],t.$emit("input",e.value))},dragend:function(a){"position"!=t.item.extra.mapType&&"positionAddress"!=t.item.extra.mapType||(t.position=[a.lnglat.lng,a.lnglat.lat],t.$emit("input",e.value))}},position:[0,0],address:"",polygonList:[],polygonFee:[],polygonFeeActive:0,eventsPolygonFee:{change:function(){e.$refs["polygonFee_"+e.item.name+"_"+e.polygonFeeActive][0].$$getPath()}},polygonFeeColumns:[{title:"名称",key:"name",slot:"input",width:"200"},{title:"起送价",key:"price",slot:"input"},{title:"配送费",key:"fee",slot:"input"},{title:"操作",key:"action",slot:"buttons"}],plugin:["ToolBar","Scale","PlaceSearch",{pName:"MapType",defaultType:0,events:{init:function(){}}},{pName:"Geolocation",events:{init:function(e){e.getCurrentPosition((function(e,a){if(a&&a.position){switch(t.center=[a.position.lng,a.position.lat],t.loaded=!0,t.item.extra.mapType){case"position":t.position&&0!=t.position.length&&0!=t.position[0]||(t.position=t.center,t.getData());break;case"positionAddress":t.position&&0!=t.position.length&&0!=t.position[0]||(t.position=t.center,t.geocoder.getAddress(t.position,(function(e,a){"complete"===e&&"OK"===a.info&&(t.address=a.regeocode.formattedAddress)})),t.getData());break;case"polygonList":0==t.polygonList.length&&(t.polygonList=[{strokeColor:"#2b85e4",path:[[t.center[0]-.01,t.center[1]+.01],[t.center[0]+.01,t.center[1]+.01],[t.center[0]+.01,t.center[1]-.01],[t.center[0]-.01,t.center[1]-.01]]}],t.getData());break;case"polygonFee":0==t.polygonFee.length&&(t.polygonFee=[{name:"默认",price:"",fee:"",strokeColor:"#2b85e4",path:[[t.center[0]-.01,t.center[1]+.01],[t.center[0]+.01,t.center[1]+.01],[t.center[0]+.01,t.center[1]-.01],[t.center[0]-.01,t.center[1]-.01]]}],t.getData())}t.$nextTick()}}))}}}],contentRender:function(e){return e(n,{style:{backgroundColor:"#fff"},props:{text:"here"}})}}},created:function(){},mounted:function(){switch(this.item.extra.mapType){case"postion":this.value&&2==this.value.length&&(this.position=this.value);break;case"postionAddress":this.value&&this.value.location&&this.value.address&&(this.position=this.value.location,this.address=this.value.address);break;case"polygonList":this.value&&(this.polygonList=this.value);break;case"polygonFee":if(this.value){for(var e=0;e<this.value.length;e++){for(var t=this.value[e].path,a=0;a<t.length;a++)t[a].lng&&(t[a]=[t[a].lng,t[a].lat]);this.value[e].path=t}this.polygonFee=this.value}}this.geocoder=new AMap.Geocoder({city:"全国"})},methods:{getLocationByAddress:function(){this.address||(alert("请输入地址"),retutn),i.getMap();var e=this;this.geocoder.getLocation(this.address,(function(t,a){"complete"===t&&"OK"===a.info?e.position=[a.geocodes[0].location.lng,a.geocodes[0].location.lat]:alert(a.info)}))},rowClick:function(e,t){this.polygonFeeActive=t},getData:function(){if("position"==this.item.extra.mapType&&(this.value=this.position),"positionAddress"==this.item.extra.mapType&&(this.value={location:this.position,address:this.address}),"polygonList"==this.item.extra.mapType&&(this.value=this.polygonList),"polygonFee"==this.item.extra.mapType){this.value=this.polygonFee;for(var e=0;e<this.value.length;e++){for(var t=this.value[e].path,a=0;a<t.length;a++)t[a].lng&&(t[a]=[t[a].lng,t[a].lat]);this.value[e].path=t}}this.$emit("input",this.value)},addPolygon:function(){this.polygonList.push({strokeColor:"#2b85e4",path:[[this.center[0]-.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]-.01],[this.center[0]-.01,this.center[1]-.01]]})},addPolygonFee:function(){this.polygonFee.push({name:"",price:"",fee:"",strokeColor:"#2b85e4",path:[[this.center[0]-.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]-.01],[this.center[0]-.01,this.center[1]-.01]]})},restPolygonFee:function(){var e=this.polygonFee;e[this.polygonFeeActive].path=[[this.center[0]-.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]-.01],[this.center[0]-.01,this.center[1]-.01]],this.polygonFee=e},deleteFee:function(e){this.polygonFee.splice(e,1)},getMap:function(){}},watch:{}};a=a("2877"),o=Object(a.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["polygonFee"==e.item.extra.mapType?a("div",{staticClass:"fee-list"},[a("Table",{attrs:{border:"",columns:e.polygonFeeColumns,data:e.polygonFee},on:{"on-row-click":e.rowClick},scopedSlots:e._u([{key:"input",fn:function(t){t.row;var i=t.column,n=t.index;return[a("Input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.polygonFee[n][i.key],callback:function(t){e.$set(e.polygonFee[n],i.key,t)},expression:"polygonFee[index][column.key]"}})]}},{key:"buttons",fn:function(t){t.row,t.column;var i=t.index;return[a("i-button",{attrs:{size:"small"},on:{click:function(t){return e.deleteFee(i)}}},[e._v("删除")])]}}],null,!1,2481036953)})],1):e._e(),"positionAddress"==e.item.extra.mapType?a("div",{staticClass:"m-b-sm flex"},[a("i-input",{staticClass:"m-r-sm",attrs:{type:"input",name:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),a("i-button",{attrs:{type:"default"},on:{click:function(t){return e.getLocationByAddress()}}},[e._v("定位")])],1):e._e(),a("el-amap",{staticClass:"amap-box",staticStyle:{height:"400px"},attrs:{vid:"amap-"+e.item.name,"amap-manager":e.amapManager,zoom:e.zoom,center:e.center,plugin:e.plugin,events:e.events}},["position"==e.item.extra.mapType||"positionAddress"==e.item.extra.mapType?a("el-amap-marker",{attrs:{vid:"marker-"+e.item.name,draggable:!0,position:e.position}}):e._e(),e._l(e.polygonList,(function(t,i){return"polygonList"==e.item.extra.mapType?a("el-amap-polygon",{key:"index",ref:"polygon-"+e.item.name+"_"+i,refInFor:!0,attrs:{vid:"polygon-"+e.item.name+"_"+i,path:t.path,strokeColor:t.strokeColor,fillColor:"white",fillOpacity:"0.5",draggable:!0,editable:!0}}):e._e()})),e._l(e.polygonFee,(function(t,i){return"polygonFee"==e.item.extra.mapType?a("el-amap-polygon",{key:"index",ref:"polygonFee_"+e.item.name+"_"+i,refInFor:!0,attrs:{vid:"polygonFee_"+e.item.name+"_"+i,path:t.path,strokeColor:e.polygonFeeActive==i?"red":t.strokeColor,fillColor:"white",fillOpacity:"0.5",draggable:!0,editable:!0,events:e.eventsPolygonFee}}):e._e()}))],2),a("div",{staticClass:"toolbar m-t-xs"},[e.loaded?e._e():a("span",[e._v("正在定位")]),("position"==e.item.extra.mapType||"positionAddress"==e.item.extra.mapType)&&0<this.position.length?a("span",[e._v(" 选中: lng = "+e._s(e.position[0])+" lat = "+e._s(e.position[1])+" ")]):e._e(),a("i-button",{attrs:{type:"primary"},on:{click:function(t){return e.getData()}}},[e._v("保存变动")]),a("i-button",{staticClass:"m-l-sm",on:{click:function(t){return e.getMap()}}},[e._v("地图实例")]),a("i-button",{directives:[{name:"show",rawName:"v-show",value:"polygonList"==e.item.extra.mapType,expression:"item.extra.mapType == 'polygonList'"}],staticClass:"m-l-sm",on:{click:function(t){return e.addPolygon()}}},[e._v("增加多边形区域")]),a("i-button",{directives:[{name:"show",rawName:"v-show",value:"polygonFee"==e.item.extra.mapType,expression:"item.extra.mapType == 'polygonFee'"}],staticClass:"m-l-sm",on:{click:function(t){return e.addPolygonFee()}}},[e._v("增加配送区域")]),a("i-button",{directives:[{name:"show",rawName:"v-show",value:"polygonFee"==e.item.extra.mapType,expression:"item.extra.mapType == 'polygonFee'"}],staticClass:"m-l-sm",on:{click:function(t){return e.restPolygonFee()}}},[e._v("重置当前区域")])],1)],1)}),[],!1,null,"32f9dd02",null);t.default=o.exports},"04f0":function(e,t,a){"use strict";var i=a("10b2");a.n(i).a},"0a2f":function(e,t,a){},"0a82":function(e,t,a){},"0c40":function(e,t,a){},1039:function(e,t,a){"use strict";var i=a("5804");a.n(i).a},"10b2":function(e,t,a){},"10be":function(e,t,a){"use strict";a.r(t);var i=a("114b"),n=a("21b3");n={name:"XyBuilderListRoute",components:{XyBuilderList:i.default,BreadcurmbComp:n.default},data:function(){return{api:""}},beforeMount:function(){this.loadData()},created:function(){},methods:{loadData:function(){var e;"dylist"==this.$route.meta.dytype&&(0<(e=this).$route.params.length&&this.$route.params.forEach((function(t){e.$route.meta.api=e.$route.meta.api+"/"+e.$route.params[t]})),e.api=e.$route.meta.api)},refreshData:function(){this.$refs.xy_builder.loadData()}},watch:{$route:function(){}}},a=a("2877"),n=Object(a.a)(n,(function(){var e=this.$createElement;return(e=this._self._c||e)("Card",{attrs:{shadow:""}},[e("BreadcurmbComp",{on:{"refresh-page":this.refreshData}}),e("XyBuilderList",{ref:"xy_builder",staticClass:"bg-white",attrs:{api:this.api}})],1)}),[],!1,null,null,null);t.default=n.exports},"114b":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i),o=a("4328"),r=a.n(o);function s(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw n}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function u(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function r(e){u(o,i,n,r,s,"next",e)}function s(e){u(o,i,n,r,s,"throw",e)}r(void 0)}))}}var c,m,p,f,h;i={name:"XyBuilderList",props:{api:"",cloudId:0,eid:0,show:!1,predata:"",value:0,showActions:!1},components:{},data:function(){return{CDN_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/cloud-admin/0.4.0/dist/",currentRow:-1,currentSelecteds:[],loading:!1,page:1,limit:10,rightButtonListModal:[],filterValues:{},listData:{alertList:{},dataList:[],dataListParams:[],topButtonList:[],rightButtonList:[],rightButtonListModal:[],columns:[],dataPage:{total:0,limit:10,page:1},filterItems:[],filterValues:[],filterExtra:{},countList:[],config:{modalDefaultWidth:800}}}},watch:{api:function(){this.loadData("",!0)},show:function(e){1==e&&this.loadData("",!0)}},beforeCreate:function(){this.$options.components.XyBuilderTab=function(){return a.e("manifest").then(a.bind(null,"26ff"))},this.$options.components.XyBuilderInfo=function(){return a.e("manifest").then(a.bind(null,"5d93"))},this.$options.components.XyBuilderForm=function(){return Promise.all([a.e("vendor"),a.e("manifest")]).then(a.bind(null,"4d99"))}},created:function(){this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?(this.listData=this.predata,this.rightButtonListModal=this.rightButtonListModal.concat(this.predata.rightButtonListModal,this.predata.rightButtonList)):this.loadData(),this.limit=this.listData.dataPage.limit},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{submit:function(){var e,t;"checkbox"==(null===(e=this.listData)||void 0===e||null===(t=e.dataListParams)||void 0===t?void 0:t.selectType)?this.$emit("input",this.currentSelecteds):this.$emit("input",this.value),this.$emit("close-model")},cancel:function(){this.$emit("close-model")},radioClick:function(e){this.value=e.id},handleSelectionChange:function(e){this.currentSelecteds=e},getFilterParams:function(){var e={page:this.page,limit:this.limit};if(this.filterValues){var t=this.filterValues;if(0<this.listData.filterItems.length)for(var a in t)t.hasOwnProperty(a)&&(t[a].constructor&&t[a].constructor===Array&&(t[a]=t[a].join(",")),""!==t[a]&&(e[a]=t[a]))}return e},handleFilterExport:(h=d(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.a.stringify(this.getFilterParams()),a=this.$store.state.app.api.apiBase+this.listData.filterExtra.exportBtn[t].api+"?cloudId="+this.cloudId+"&token="+this.$store.state.user.token+"&"+a,window.open(a);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)}),changeCheckbox:(f=d(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=4,this.util.request({url:t.column.extra.url?t.column.extra.url:"/v1/admin/core/index/setStatus",method:"PUT",data:{table:this.listData.dataListParams.tableName,field:t.column.key,status:scope.row[t.column.key],keyVal:scope.row.id},header:{CloudId:this.cloudId,Eid:this.eid}});case 4:200==(a=e.sent).code?this.$Message.success(a.msg):this.$Message.error(a.msg);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)}),changeSwitch:(p=d(n.a.mark((function e(t,a,i){var o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.listData.dataList[a.$index][i.name+"_loading"]=!0,e.next=5,this.util.request({url:(null==i||null===(o=i.extra)||void 0===o?void 0:o.url)||"/v1/admin/core/index/setStatus",method:"PUT",data:{table:this.listData.dataListParams.tableName,field:i.name,status:t,keyVal:a.row.id},header:{CloudId:this.cloudId,Eid:this.eid}});case 5:200==(r=e.sent).code?this.util.showToast({title:r.msg,icon:"success",duration:1e3}):(this.util.showToast({title:r.msg,icon:"error",duration:2e3}),this.listData.dataList[a.$index][i.name]=t?0:1),this.listData.dataList[a.$index][i.name+"_loading"]=!1;case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return p.apply(this,arguments)}),pageChange:function(e){this.page=e,this.loadData()},limitChange:function(e){this.page=1,this.limit=e,this.loadData()},closeModel:function(e,t){t=1<arguments.length&&void 0!==t&&t,e.pageData.show=!1,!e.pageData.noRefresh&&t&&this.loadData()},loadData:(m=d(n.a.mark((function e(){var t,a,i=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<i.length&&void 0!==i[1]&&i[1],""!=(a=0<i.length&&void 0!==i[0]?i[0]:"")&&(this.api=a),this.loading=!0,a={},t||(a=this.getFilterParams()),this.api)return e.next=9,this.util.request({url:this.api,method:"get",data:a,header:{CloudId:this.cloudId,Eid:this.eid}});e.next=11;break;case 9:"200"==(a=e.sent).code?(this.listData=a.data.listData,t&&(this.filterValues=this.listData.filterValues),this.rightButtonListModal=this.rightButtonListModal.concat(this.listData.rightButtonListModal,this.listData.rightButtonList)):this.util.showToast({title:a.msg,icon:"error",duration:2e3});case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),showChange:function(e){var t;this.$store.state.app.uiAudio&&((t=new Audio).src=1==e?"./audio/open.wav":"./audio/close.wav",t.play())},topButtonModal:function(e){var t,a,i=this,o=this.listData.topButtonList[e];new Object,"confirm"===o.pageData.modalType?(this.$store.state.app.uiAudio&&((e=new Audio).src="./audio/open.wav",e.play()),(t=this).$Modal.confirm({okText:o.pageData.okText,cancelText:o.pageData.cancelText,title:o.pageData.title,content:o.pageData.content,onOk:(a=d(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:o.pageData.api+o.pageData.apiParams+"?"+o.pageData.queryParams,method:o.pageData.formMethod,header:{CloudId:t.cloudId,Eid:t.eid}});case 2:"200"==(a=e.sent).code?(t.$Message.success(a.msg),i.$store.state.app.uiAudio&&((r=new Audio).src="./audio/delete.wav",r.play()),o.pageData.noRefresh||t.loadData()):t.util.showToast({title:a.msg,icon:"error",duration:2e3});case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),onCancel:function(){var e;i.$store.state.app.uiAudio&&((e=new Audio).src="./audio/close.wav",e.play())}})):(o.pageData.apiBlank=o.pageData.api+o.pageData.apiParams+"?"+o.pageData.queryParams,o.pageData.show=!0)},rightButtonModal:(c=d(n.a.mark((function e(t,a,i){var o,l,u,c,m,p,f,h,v,y,g,x,b=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l in o=0,this.rightButtonListModal)this.rightButtonListModal[l].name==t.name&&(o=l);if(u=this.rightButtonListModal[o],c="",m=new Object,u.pageData.apiSuffix){p=u.pageData.apiSuffix,f=s(p);try{for(f.s();!(h=f.n()).done;)h=h.value,c=c+"/"+a.row[h]}catch(e){f.e(e)}finally{f.f()}}else c="/"+a.row.id;if(u.pageData.querySuffix){g=u.pageData.querySuffix,v=s(g);try{for(v.s();!(y=v.n()).done;)1==(y=y.value)[2]?m[y[0]]=y[1]:m[y[0]]=a.row[y[1]]}catch(e){v.e(e)}finally{v.f()}}if("replace"!=u.pageData.pageType){e.next=11;break}this.$router.replace({path:u.pageData.route+"/"+a.row.name}),e.next=24;break;case 11:e.t0=u.pageData.modalType,e.next="confirm"===e.t0?14:"list"===e.t0?18:21;break;case 14:return this.$store.state.app.uiAudio&&((g=new Audio).src="./audio/open.wav",g.play()),(x=this).$Modal.confirm({okText:u.pageData.okText,cancelText:u.pageData.cancelText,title:u.pageData.title,content:u.pageData.content,onOk:function(){var e=d(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.util.request({url:u.pageData.api+c+"?"+r.a.stringify(m),method:u.pageData.formMethod,header:{CloudId:x.cloudId,Eid:x.eid}});case 2:"200"==(t=e.sent).code?(x.util.showToast({title:t.msg,icon:"success",duration:1e3}),b.$store.state.app.uiAudio&&((a=new Audio).src="./audio/delete.wav",a.play()),u.pageData.noRefresh||x.loadData()):x.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){var e;b.$store.state.app.uiAudio&&((e=new Audio).src="./audio/close.wav",e.play())}}),e.abrupt("break",24);case 18:case 21:return u.pageData.apiBlank=u.pageData.api+c+"?"+r.a.stringify(m),u.pageData.show=!0,e.abrupt("break",24);case 24:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return c.apply(this,arguments)})}},a("60fa"),o=a("2877"),i=Object(o.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xy_builder-list-wrap list-card"},[e.listData.alertList&&e.listData.alertList.top?e._l(e.listData.alertList.top,(function(t,i){return a("el-alert",{key:i,attrs:{type:t.type,"show-icon":!1,closable:"false",effect:"dark"}},[a("div",{domProps:{innerHTML:e._s(t.desc)}})])})):e._e(),[e.listData.countList?a("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},e._l(e.listData.countList,(function(t,i){return a("el-col",{key:i,attrs:{xs:12,xl:t.item.xl?t.item.xl:6,xxl:4}},[a("el-row",{staticClass:"count-item",style:{backgroundColor:t.item.bgColor},attrs:{type:"flex",justify:"center",align:"top"}},[a("el-col",{staticClass:"left"},[a("i",{staticClass:"icon",class:t.item.icon}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.item.title,expression:"it.item.title"}]},[e._v(e._s(t.item.title))])]),a("el-col",{staticClass:"right",style:{backgroundColor:t.item.bgColorRight||"#fff",color:t.item.bgColorRight?"#fff":""}},[a("div",{staticClass:"value"},[a("span",[e._v(e._s(t.current.value))]),a("span",{staticClass:"suffix"},[e._v(e._s(t.current.suffix))])]),a("div",{staticClass:"title"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.content.value,expression:"it.content.value"}],staticClass:"value"},[e._v(e._s(t.content.value))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.content.list,expression:"it.content.list"}],staticClass:"list"},e._l(t.content.list,(function(t,i){return a("div",{key:i,staticClass:"cell"},[e._v(" "+e._s(t.title)+"："+e._s(t.value)+" ")])})),0)])])],1)],1)})),1):e._e(),e._l(e.listData.topButtonList,(function(t,i){return[a("transition",{attrs:{name:"el-zoom-in-top"}},[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],key:"top_modal_"+i,ref:"top_modal_"+i,refInFor:!0,attrs:{"append-to-body":!0,visible:t.pageData.show,width:t.pageData.width||"800px",title:t.pageData.title},on:{open:e.showChange,"update:visible":function(a){return e.$set(t.pageData,"show",a)}}},["form"==t.pageData.modalType?[a("XyBuilderForm",{ref:"top_form_"+i,refInFor:!0,attrs:{api:t.pageData.apiBlank,show:t.pageData.show,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t},"close-model":function(a){return e.closeModel(t,a)}}})]:"list"==t.pageData.modalType?[a("XyBuilderlist",{ref:"top_list_"+i,refInFor:!0,attrs:{api:t.pageData.apiBlank,show:t.pageData.show,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()],2)],1)]})),a("div",{staticClass:"tool-box",style:{display:e.listData.filterItems&&2<e.listData.filterItems.length?"block":"flex",justifyContent:"space-between"}},[e._l(e.listData.topButtonList,(function(t,i){return a("div",{key:"button"+i,staticClass:"top-button-list"},["print"==t.pageData.modalType?a("el-button",{directives:[{name:"print",rawName:"v-print",value:"#table-box",expression:"'#table-box'"}],attrs:{type:t.style.type||"default",size:t.style.size||"small"}},[e._v(" "+e._s(t.title)+" ")]):a("el-button",{staticStyle:{"margin-bottom":"10px","margin-right":"10px"},attrs:{"empty-text":"当前没有数据",type:t.style.type||"default",size:t.style.size||"small",icon:t.style.icon},on:{click:function(t){return e.topButtonModal(i)}}},[e._v(" "+e._s(t.title)+" ")])],1)})),e.listData.filterItems&&0<e.listData.filterItems.length?a("div",{staticClass:"filter-list flex-1 flex",style:{justifyContent:e.listData.filterItems&&2<e.listData.filterItems.length?"flex-start":"flex-end"},attrs:{gutter:16}},[a("el-form",{ref:"formFilter",attrs:{"label-position":"left","label-width":"80px",inline:!0,size:"small",model:e.filterValues}},[e._l(e.listData.filterItems,(function(t,i){return[a("el-form-item",{key:i,staticClass:"filter-item",attrs:{label:t.title+":"}},["text"==t.type?[a("el-input",{attrs:{type:"text",placeholder:t.extra.placeholder},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.loadData())}},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}})]:"select"==t.type?[a("el-select",{on:{"on-change":function(t){return e.loadData()}},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}},e._l(t.extra.options,(function(t,i,n){return a("el-option",{key:n,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"radio"==t.type?[a("el-radio-group",{model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}},e._l(t.extra.options,(function(t,i,n){return a("el-radio",{key:n,attrs:{label:t.value}},[a("span",[e._v(e._s(t.title))])])})),1)]:"checkbox"==t.type?[a("el-checkbox-group",{model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}},e._l(t.extra.options,(function(t,i,n){return a("el-checkbox",{key:n,attrs:{label:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"datepicker"==t.type?[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}})]:"timepicker"==t.type?[a("el-time-select",{attrs:{type:"time",placeholder:"选择时间","value-format":t.extra.format||"HH:mm:ss"},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}})]:"timerangepicker"==t.type?[a("el-time-select",{attrs:{type:"timerange","is-range":"",placeholder:"选择时间区间","value-format":t.extra.format||"HH:mm:ss"},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}})]:"datetimepicker"==t.type?[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}})]:"daterangepicker"==t.type?[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}})]:"datetimerangepicker"==t.type?[a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}})]:e._e()],2)]})),[a("el-form-item",{staticClass:"filter-item ",attrs:{"label-width":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.loadData()}}},[e._v("查询")]),e.listData.filterExtra&&e.listData.filterExtra.exportBtn?e._l(e.listData.filterExtra.exportBtn,(function(t,i){return a("el-button",{key:i,staticClass:"m-l-xs",attrs:{type:t.type||"primary"},on:{click:function(t){return e.handleFilterExport(i)}}},[e._v(" "+e._s(t.title||"导出")+" ")])})):e._e()],2)]],2)],1):e._e()],2),a("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],staticClass:"table-box",attrs:{id:"table-box"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:e.listData.dataList,"highlight-current-row":e.listData.dataListParams&&"radio"==e.listData.dataListParams.selectType,"current-row-key":e.currentRow,"row-key":"id","srow-key":e.listData.dataListParams?e.listData.dataListParams.expandKey:"id",border:"",stripe:"","default-expand-all":e.listData.dataListParams&&e.listData.dataListParams.isFold},on:{"current-change":e.radioClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{directives:[{name:"show",rawName:"v-show",value:e.listData.dataListParams&&"checkbox"==e.listData.dataListParams.selectType,expression:"listData.dataListParams && listData.dataListParams.selectType == 'checkbox'"}],attrs:{type:"selection",width:"40"}}),e._l(e.listData.columns,(function(t,i){return["html"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.extra.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{domProps:{innerHTML:e._s(i.row[t.name])}})]}}],null,!0)},[e._v("> ")])]:"group"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return e._l(t.extra.extend.fields,(function(t,n){return a("div",{key:n,staticClass:"group-colitem"},[a("div",{staticClass:"title"},[e._v(" "+e._s(t[1])+" : ")]),a("div",{staticClass:"value"},[e._v(" "+e._s(i.row[t[0]])+" ")])])}))}}],null,!0)},[e._v("> ")])]:"checkbox1"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("el-checkbox-group",{on:{"on-change":function(t){return e.changeCheckbox(i)}},model:{value:i.row[t.name],callback:function(a){e.$set(i.row,t.name,a)},expression:"scope.row[colitem.name]"}},e._l(t.extra.options,(function(i,n,o){return a("el-checkbox",{key:o,attrs:{disabled:!!t.extra.disabled&&t.extra.disabled,label:i.value}},[e._v(" "+e._s(i.title)+" ")])})),1)]}}],null,!0)},[e._v("> ")])]:"switch"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[e.listData.dataList[i.$index]?a("el-switch",{attrs:{size:"mini","av-loading":"listData.dataList[scope.$index][colitem.name + '_loading']","active-text1":t.extra.options[1].title,"inactive-text1":t.extra.options[0].title,"active-color":"#86c042","inactive-color":"#ddd","active-value":t.extra.options[1].value,"inactive-value":t.extra.options[0].value},on:{change:function(a){return e.changeSwitch(a,i,t)}},model:{value:e.listData.dataList[i.$index][t.name],callback:function(a){e.$set(e.listData.dataList[i.$index],t.name,a)},expression:"listData.dataList[scope.$index][colitem.name]"}}):e._e()]}}],null,!0)},[e._v("> ")])]:"image"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i.row[t.name]||e.CDN_URL+"/noimage.png",width:t.extra.extend&&t.extra.extend.width?t.extra.extend.width:"",height:t.extra.extend&&t.extra.extend.height?t.extra.extend.height:"35"}})]}}],null,!0)},[e._v("> ")])]:"images"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i.row[t.name]?i.row[t.name]:e.CDN_URL+"/noimage.png",width:t.extra.extend&&t.extra.extend.width?t.extra.extend.width:"",height:t.extra.extend&&t.extra.extend.height?t.extra.extend.height:"35"},on:{click:function(a){return e.handleView(i.row[t.name])}}})]}}],null,!0)},[e._v("> ")])]:"audio"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("audio",{staticStyle:{"vertical-align":"middle",width:"150px",height:"30px"},attrs:{controls:"controls",preload:"none"}},[a("source",{attrs:{src:i.row[t.name]}}),e._v(" Your browser does not support the audio element. ")])]}}],null,!0)},[e._v("> ")])]:"rate"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("el-rate",{staticStyle:{"vertical-align":"middle"},attrs:{"allow-half":"",disabled:"","show-text":!1},model:{value:i.row[t.name],callback:function(a){e.$set(i.row,t.name,a)},expression:"scope.row[colitem.name]"}})]}}],null,!0)},[e._v("> ")])]:"progress"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("el-progress",{staticStyle:{"vertical-align":"middle"},attrs:{type:t.extra.extend.type||"",percentage:i.row[t.name],vertical:t.extra.extend.vertical||!1,status:t.extra.extend&&t.extra.extend.status||"","text-inside":!0,"stroke-width":26}},[t.extra.extend.hideIcon?[e._v(" "+e._s(i.row[t.name])+"% ")]:e._e()],2)]}}],null,!0)},[e._v("> ")])]:"tags"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return["string"==typeof t.name?[e._l(i.row[t.name],(function(i){return[t.extra.options[i]?a("el-tag",{key:i,attrs:{size:"mini",hit:!1,effect:t.extra.options[i].effect||"dark",type:t.extra.options[i].type||"",color:t.extra.options[i].color||"default"}},[e._v(" "+e._s(t.extra.options[i].title||i)+" ")]):e._e()]}))]:e._e()]}}],null,!0)},[e._v("> ")])]:"tag"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return["string"==typeof t.name?[t.extra.options[i.row[t.name]]?[a("el-tag",{attrs:{hit:!1,size:"mini",effect:t.extra.options[i.row[t.name]].effect||"dark",type:t.extra.options[i.row[t.name]].type||"",color:t.extra.options[i.row[t.name]].color||"default"}},[e._v(" "+e._s(t.extra.options[i.row[t.name]].title||i.row[t.name])+" ")])]:[a("el-tag",{attrs:{size:"mini",hit:!1}},[e._v(" "+e._s(i.row[t.name])+" ")])]]:2==t.name.length?[t.extra.options[i.row[t.name[0]][t.name[1]]]?[a("el-tag",{attrs:{size:"mini",hit:!1,effect:t.extra.options[i.row[t.name[0]][t.name[1]]].effect||"dark",type:t.extra.options[i.row[t.name[0]][t.name[1]]].type||"",color:t.extra.options[i.row[t.name[0]][t.name[1]]].color||"default"}},[e._v(" "+e._s(t.extra.options[i.row[t.name[0]][t.name[1]]].title||i.row[t.name[0]][t.name[1]])+" ")])]:[a("el-tag",{attrs:{size:"mini",hit:!1}},[e._v(" "+e._s(i.row[t.name[0]][t.name[1]])+" ")])]]:3==t.name.length?[t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]]?[a("el-tag",{attrs:{size:"mini",hit:!1,effect:t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]].effect||"dark",type:t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]].type||"",color:t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]].color||"default"}},[e._v(" "+e._s(t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]].title||i.row[t.name[0]][t.name[1]][t.name[2]])+" ")])]:[a("el-tag",{attrs:{size:"mini",hit:!1}},[e._v(" "+e._s(i.row[t.name[0]][t.name[1]][t.name[2]])+" ")])]]:e._e()]}}],null,!0)},[e._v("> ")])]:"password"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[t.extra.show?[e._v(" "+e._s(i.row[t.name])+" ")]:[e._v("******")],a("i",{attrs:{type:"el-icon-view"},on:{click:function(e){t.extra.show=!t.extra.show}}})]}}],null,!0)},[e._v("> ")])]:"url"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("a",{attrs:{target:"_blank",href:i.row[t.name]}},[e._v(e._s(i.row[t.name]))])]}}],null,!0)},[e._v("> ")])]:"time"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(e._f("formatTime")(a.row[t.name],t.extra.extend&&t.extra.extend.format?t.extra.extend.format:""))+" ")]}}],null,!0)},[e._v("> ")])]:"label"==t.extra.type?[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return["string"==typeof t.name?a("span",{style:{color:t.extra.options[i.row[t.name]].color||""}},[e._v(" "+e._s(t.extra.options[i.row[t.name]].title||i.row[t.name])+" ")]):2==t.name.length?a("span",{style:{color:t.extra.options[i.row[t.name[0]][t.name[1]]]&&t.extra.options[i.row[t.name[0]][t.name[1]]].color?t.extra.options[i.row[t.name[0]][t.name[1]]].color:""}},[e._v(" "+e._s(t.extra.options[i.row[t.name[0]][t.name[1]]]&&t.extra.options[i.row[t.name[0]][t.name[1]]].title?t.extra.options[i.row[t.name[0]][t.name[1]]].title:i.row[t.name[0]][t.name[1]])+" ")]):3==t.name.length?a("span",{style:{color:t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]]&&t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]].color?t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]].color:""}},[e._v(" "+e._s(t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]]&&t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]].title?t.extra.options[i.row[t.name[0]][t.name[1]][t.name[2]]].title:i.row[t.name[0]][t.name[1]])+" ")]):e._e()]}}],null,!0)},[e._v("> ")])]:"rightButtonList"==t.extra.type?[a("el-table-column",{key:i,attrs:{fixed:t.extra.fixed||"right",prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(i){return[e._l(e.listData.rightButtonList,(function(t,n){return a("a",{key:"button"+n,class:"default"==t.style.type?"":"text-"+t.style.type,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{type:t.style.type,size:t.style.size,icon:t.style.icon},on:{click:function(a){return e.rightButtonModal(t,i)}}},[e._v(" "+e._s(t.title)+" ")])})),e._l(i.row[t.name],(function(t,n){return a("a",{key:"button"+n,class:"default"==t.style.type?"":"text-"+t.style.type,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{type:t.style.type,size:t.style.size,icon:t.style.icon},on:{click:function(a){return e.rightButtonModal(t,i)}}},[e._v(" "+e._s(t.title)+" ")])}))]}}],null,!0)},[e._v("> ")])]:[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row[t.name])+" ")]}}],null,!0)})]]}))],2)],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0<e.listData.dataPage.total,expression:"listData.dataPage.total > 0"}],staticClass:"text-left m-t-sm m-b-sm",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":e.limit,"current-page":e.page,total:e.listData.dataPage.total},on:{"current-change":e.pageChange,"size-change":e.limitChange,"update:pageSize":function(t){e.limit=t},"update:page-size":function(t){e.limit=t},"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}}),e._l(e.rightButtonListModal,(function(t,i){return[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],key:"right_modal_"+i,ref:"right_modal_"+i,refInFor:!0,attrs:{"append-to-body":!0,visible:t.pageData.show,width:t.pageData.width||700,title:t.pageData.title},on:{open:e.showChange,"update:visible":function(a){return e.$set(t.pageData,"show",a)}}},["form"==t.pageData.modalType?[a("XyBuilderForm",{ref:"right_form_"+i,refInFor:!0,attrs:{api:t.pageData.apiBlank,show:t.pageData.show,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t},"close-model":function(a){return e.closeModel(t,a)}}})]:"list"==t.pageData.modalType?[a("XyBuilderList",{ref:"right_list_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:"info"==t.pageData.modalType?[a("XyBuilderInfo",{ref:"right_info_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:"tab"==t.pageData.modalType?[a("XyBuilderTab",{ref:"right_info_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()],2)]})),1==this.showActions?a("div",[a("el-divider"),a("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",size:"default"},on:{click:function(t){return e.submit()}}},[e._v(" 确认选择 ")]),a("el-button",{attrs:{type:"text",size:"default"},on:{click:function(t){return e.cancel()}}},[e._v(" 取消操作 ")])],1):e._e()],e.listData.alertList&&e.listData.alertList.bottom?e._l(e.listData.alertList.bottom,(function(t,i){return a("alert",{key:i,attrs:{type:t.type,"show-icon":!1,closable:"false",effect:"dark"}},[a("div",{domProps:{innerHTML:e._s(t.desc)}})])})):e._e()],2)}),[],!1,null,"97b24e4a",null);t.default=i.exports},1343:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var r=e.apply(t,a);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))}}var s,l;i={name:"XyBuilderForm",components:{XyBuilderformItem:a("b271").default},props:{api:"",cloudId:0,eid:0,show:!1,predata:"",showDev:!1},data:function(){return{loading:!1,ref:"form",formData:"",labelPosition:"right",labelWidth:100,res:{},addNext:!1}},created:function(){this.ref="form_"+(new Date).getTime(),this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata&&(this.formData=this.predata)},beforeMount:function(){},mounted:function(){this.loadData()},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},computed:{},watch:{"formData.formValues":{handler:function(e){for(var t in this.formData.formItems)if(this.formData.formItems[t].extra.con){var a,i=this.formData.formItems[t].extra.con,n=0;for(a in i)switch(i[a][1]){case"=":e[i[a][0]]===i[a][2]&&n++;break;case">":e[i[a][0]]>i[a][2]&&n++;break;case">=":e[i[a][0]]>=i[a][2]&&n++;break;case"<":e[i[a][0]]<i[a][2]&&n++;break;case"<=":e[i[a][0]]<=i[a][2]&&n++;break;case"in":in_array(e[i[a][0]],i[a][2])&&n++;break;case"has":in_array(i[a][2],e[i[a][0]]);break;case"between":i[a][2][0]<e[i[a][0]]<i[a][2][1]&&n++}n===i.length?this.formData.formItems[t].extra.hide=!1:this.formData.formItems[t].extra.hide=!0}},deep:!0,immediate:!0},show:function(e){1==e&&this.loadData()}},methods:{in_array:function(e,t){for(var a in t)if(t[a]==e)return!0;return!1},loadData:(l=r(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=0<a.length&&void 0!==a[0]?a[0]:"")&&(this.api=t),this.api)return e.next=5,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=7;break;case 5:"200"==(t=e.sent).code?this.formData=t.data.formData:this.res=t;case 7:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),submit:function(){var e=this;this.loading=!0;var t,a=this;if(setTimeout((function(){a.loading=!1}),5e3),0<this.formData.formTabs.length)for(var i=0;i<this.formData.formTabs.length;i++)for(var n in this.formData.formTabs[i].formItems){var o,r=this.formData.formTabs[i].formItems[n].name;"checkboxtree"==this.formData.formTabs[i].formItems[n].type&&(o=this.$refs["formitem_"+this.formData.formTabs[i].name+"_"+this.formData.formTabs[i].formItems[n].name][0].getChecked("adminAuth"),this.formData.formValues[this.formData.formTabs[i].name].tabValues[r]=o)}else for(var s in this.formData.formItems)"checkboxtree"==this.formData.formItems[s].type&&(t=this.$refs["formitem_"+this.formData.formItems[s].name][0].getChecked("adminAuth"),this.formData.formValues[this.formData.formItems[s].name]=t);var l=!1;if(0==this.formData.formRules.length)l=!0;else if(0<this.formData.formTabs.length){for(var u="",d=0;d<this.formData.formTabs.length;d++)this.$refs[this.ref+"_"+this.formData.formTabs[d].name][0].validate((function(e){u+=e?"true":"false"}));-1==u.search("false")&&(l=!0)}else this.$refs[this.ref].validate((function(t){t?l=!0:e.$store.state.app.uiAudio&&((t=new Audio).src="/audio/alert.wav",t.play())}));return l?this.submitForm():this.loading=!1},submitForm:(s=r(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.util.request({url:this.api,method:this.formData.formMethod,data:this.formData.formValues,header:{CloudId:this.cloudId,Eid:this.eid}});case 2:if("200"==(t=e.sent).code)if(this.$Message.success(t.msg),t.data.url)0!=t.data.url.indexOf("http")?this.$router.push(t.data.url):window.open(t.data.url);else if(this.addNext)if(0<this.formData.formTabs.length)for(a=0;a<this.formData.formTabs.length;a++)this.$refs[this.ref+"_"+this.formData.formTabs[a].name][0].resetFields();else this.$refs[this.ref].resetFields();else this.$emit("close-model");else this.res=t;return this.loading=!1,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),cancel:function(){if(0<this.formData.formTabs.length)for(var e=0;e<this.formData.formTabs.length;e++)this.$refs[this.ref+"_"+this.formData.formTabs[e].name][0].resetFields();else this.$refs[this.ref].resetFields();this.$emit("close-model")}}},a("4bfa"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-wrapper"},[""!=this.formData?[e.formData.alertList&&e.formData.alertList.top?e._l(e.formData.alertList.top,(function(t,i){return a("Alert",{key:i,attrs:{type:t.type,"show-icon":!1,banner:"true"}},[a("div",{domProps:{innerHTML:e._s(t.desc)}})])})):e._e(),0<e.formData.formTabs.length?[a("Tabs",{attrs:{value:e.formData.formTabs[0].name}},[e._l(e.formData.formTabs,(function(t,i){return[null!=t.formItems?a("TabPane",{key:i+"_"+t.name,attrs:{label:t.title,name:t.name}},[a("Form",{ref:e.ref+"_"+t.name,refInFor:!0,attrs:{model:e.formData.formValues[t.name].tabValues,"label-position":e.labelPosition,"label-width":e.labelWidth},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(t.formItems,(function(i,n){return[""!=t.formRules[i.name]?[i.extra.hide||i.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:n,ref:"formitem_"+t.name+"_"+i.name,refInFor:!0,attrs:{item:i,formValues:e.formData.formValues[t.name].tabValues,cloudId:e.cloudId,eid:e.eid,prop:i.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:[i.extra.hide||i.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:n,ref:"formitem_"+t.name+"_"+i.name,refInFor:!0,attrs:{item:i,formValues:e.formData.formValues[t.name].tabValues,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]]}))],2)],1):e._e()]})),e._v("> ")],2)]:[a("Form",{ref:e.ref,attrs:{model:e.formData.formValues,"label-position":e.labelPosition,"label-width":e.labelWidth},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{attrs:{type:"flex",gutter:"0"}},[a("Col",{staticClass:"form-bottom",attrs:{span:"24"}},[e._l(e.formData.formItems,(function(t,i){return[""==t.extra.position?[t.extra.hide||t.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:i,ref:"formitem_"+t.name,refInFor:!0,attrs:{item:t,formValues:e.formData.formValues,formRules:e.formData.formRules,cloudId:e.cloudId,eid:e.eid,prop:t.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()]}))],2)],1),a("Row",{attrs:{type:"flex",gutter:"0"}},[a("Col",{attrs:{xs:24,sm:24,md:24,lg:17}},[e._l(e.formData.formItems,(function(t,i){return["left"==t.extra.position?[t.extra.hide||t.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:i,ref:"formitem_"+t.name,refInFor:!0,attrs:{item:t,formValues:e.formData.formValues,formRules:e.formData.formRules,cloudId:e.cloudId,eid:e.eid,prop:t.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()]}))],2),a("Col",{attrs:{xs:24,sm:18,md:24,lg:1}},[a("div",{staticStyle:{width:"1px",height:"100%","background-color":"#e8eaec","margin-left":"30px"}})]),a("Col",{staticClass:"form-right",attrs:{xs:24,sm:18,md:24,lg:6}},[e._l(e.formData.formItems,(function(t,i){return["right"==t.extra.position?[t.extra.hide||t.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:i,ref:"formitem_"+t.name,refInFor:!0,attrs:{item:t,formValues:e.formData.formValues,formRules:e.formData.formRules,cloudId:e.cloudId,eid:e.eid,prop:t.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()]}))],2)],1),a("Row",{attrs:{type:"flex",gutter:"0"}},[a("Col",{staticClass:"form-bottom",attrs:{span:"24"}},[e._l(e.formData.formItems,(function(t,i){return["bottom"==t.extra.position?[t.extra.hide||t.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:i,ref:"formitem_"+t.name,refInFor:!0,attrs:{item:t,formValues:e.formData.formValues,formRules:e.formData.formRules,cloudId:e.cloudId,eid:e.eid,prop:t.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()]}))],2)],1)],1)],e.formData.alertList&&e.formData.alertList.top?e._l(e.formData.alertList.bottom,(function(t,i){return a("Alert",{key:i,attrs:{type:t.type,"show-icon":!1,banner:"true"}},[a("div",{domProps:{innerHTML:e._s(t.desc)}})])})):e._e(),a("Alert",{directives:[{name:"show",rawName:"v-show",value:e.res.msg,expression:"res.msg"}],attrs:{type:"error","show-icon":"",closable:""},on:{"on-close":function(t){e.res={}}}},[e._v(e._s(e.res.msg))]),a("div",[a("Divider"),a("Button",{staticStyle:{"margin-right":"15px"},attrs:{loading:e.loading,type:"primary",size:"large"},on:{click:function(t){return e.submit()}}},[e._v(" 确认提交 ")]),a("Button",{staticStyle:{"margin-right":"15px"},attrs:{type:"text",size:"large"},on:{click:function(t){return e.cancel()}}},[e._v(" 取消操作 ")]),a("Checkbox",{directives:[{name:"show",rawName:"v-show",value:"post"==this.formData.formMethod&&this.formData.config&&this.formData.config.continue,expression:"this.formData.formMethod == 'post' && this.formData.config && (this.formData.config.continue)"}],model:{value:e.addNext,callback:function(t){e.addNext=t},expression:"addNext"}},[e._v("继续录入下一条 ")])],1)]:[a("Row",[a("i-col",{staticClass:"spin-col",attrs:{span:"24"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"22"}}),a("div",[e._v("Loading")])],1)],1)],1)]],2)}),[],!1,null,null,null);t.default=i.exports},"18e2":function(e,t,a){},"1b7e":function(e,t,a){},"1b8c":function(e,t,a){"use strict";var i=a("0c40");a.n(i).a},"1e3f":function(e,t,a){},"1e5c":function(e,t,a){"use strict";var i=a("0a2f");a.n(i).a},"21b3":function(e,t,a){"use strict";a.r(t);var i={name:"BreadcrumbComp",mixins:[{name:"Breadcrumb",data:function(){return{interval:null,timer:0,breadcrumb:{level:[],last:{title:""}}}},beforeMount:function(){var e=this,t=this.$store.state.menu.menuList.menuList.filter((function(t){return t.path+(t.pathSuffix?t.pathSuffix:"")+(t.apiParams?t.apiParams:"")==e.$route.name}));if(t[0])for(this.breadcrumb.level=[],this.breadcrumb.last=t[0];(t=this.$store.state.menu.menuList.menuList.filter((function(e){return e.path==t[0].pmenu})))[0]&&this.breadcrumb.level.unshift(t[0]),t[0].pmenu&&0<=t[0].menuType;);},created:function(){},methods:{refresh:function(){this.$emit("refresh-page")}},watch:{$route:function(){}}}],data:function(){return{}},created:function(){},methods:{},watch:{$route:function(){}}};a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-breadcrumb"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{ato:"/home"}},[a("span",{staticClass:"xyicon xyicon-home ts-13",staticStyle:{"margin-top":"-5px"}}),e._v(" 首页 ")]),e._l(e.breadcrumb.level,(function(t,i){return[0<t.menuType?a("el-breadcrumb-item",{key:i,attrs:{to:t.path}},[e._v(e._s(t.title))]):a("el-breadcrumb-item",{key:i},[e._v(e._s(t.title))])]})),a("el-breadcrumb-item",[e._v(e._s(e.breadcrumb.last.title))])],2),a("div",[a("el-button-group",[a("el-button",{attrs:{icon:"el-icon-refresh",circle:"",size:"mini"},on:{click:e.refresh}})],1)],1)],1)}),[],!1,null,null,null);t.default=i.exports},2400:function(e,t,a){},"249f":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var r=e.apply(t,a);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))}}i={name:"Images",props:{item:{},value:[],token:"",cloudId:0,eid:0},data:function(){return{uploadName:"file",header:{}}},created:function(){this.header={Authorization:this.token}},beforeMount:function(){},methods:{handleView:function(e){this.$emit("handleView",e)},handleSuccessBatch:function(e,t,a){"upload_oss"==this.item.extra.driver?(t.url=this.item.extra.data.host+"/"+this.item.extra.data.key,this.value.push({name:t.name,url:t.url}),this.item.value=a):"upload_smms"==this.item.extra.driver?"success"==e.code?(t.url=e.data.url,this.value.push({name:t.name,url:t.url}),this.item.value=a):this.$Notice.warning({title:e.message}):200==e.code?(t.url=e.data.url,this.value.push({name:t.name,url:t.url}),this.item.value=a):this.$Notice.warning({title:e.msg}),this.$emit("input",this.value)},handleRemoveBatch:function(e){var t=this.value;this.item.value.splice(t.indexOf(e),1),this.value.splice(t.indexOf(e),1)},handleBeforeUpload:function(e){var t=this;return"upload_oss"==t.item.extra.driver?new Promise(function(){var a=r(n.a.mark((function a(i,o){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.util.request({url:"/v1/upload_oss/index/sign",method:"get",header:{CloudId:t.cloudId,Eid:t.eid}});case 2:200==(r=a.sent).code?(t.item.extra.action=r.data.params.host,r.data.params.key=r.data.params.key+e.name,t.item.extra.data=r.data.params,i()):t.$Notice.warning({title:r.msg});case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()):"upload_smms"==t.item.extra.driver?new Promise(function(){var e=r(n.a.mark((function e(a,i){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.header={Authorization:"R7aVy1OLZJ1pMgWyjBkdOz9Dyh7nSFm2"},t.uploadName="smfile",t.item.extra.action="https://sm.ms/api/v2/upload",t.item.extra.data={format:"json"},a();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()):void 0},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件"+e.name+"的格式不正确, 请重新选择。"})},handleMaxSize:function(e){this.$Notice.warning({title:"文件大小不正确",desc:"文件"+e.name+"太大了, 不支持超过1M。"})}},watch:{}},a("f8e0"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.item.value,(function(t){return a("div",{staticClass:"image-list"},[""!==t.url?[a("img",{attrs:{src:t.url}}),a("div",{staticClass:"image-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return e.handleView(t.url)}}}),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return e.handleRemoveBatch(t)}}})],1)]:[t.showProgress?a("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)})),a("Upload",{ref:"upload_"+e.item.name,staticStyle:{display:"inline-block",width:"58px"},attrs:{paste:!0,"show-upload-list":!1,headers:e.header,"default-file-list":e.item.value,format:e.item.extra.format,"max-size":e.item.extra.maxSize,"on-success":e.handleSuccessBatch,"on-remove":e.handleRemoveBatch,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,data:e.item.extra.data,name:e.uploadName,multiple:"",type:"drag",action:e.item.extra.action}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],2)}),[],!1,null,"24c6f6a3",null),t.default=i.exports},"25a8":function(e,t,a){"use strict";var i=a("5bd6");a.n(i).a},"26ff":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var r,s,l={name:"XyBuilderTab",props:{api:"",cloudId:0,eid:0,show:!1,predata:""},components:{},data:function(){return{loading:!1,tabData:{tabList:[],tabType:"card",countList:[]},tabCurrent:"tab_0"}},watch:{show:function(e){1==e&&this.loadData()}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return a.e("manifest").then(a.bind(null,"114b"))},this.$options.components.XyBuilderInfo=function(){return a.e("manifest").then(a.bind(null,"5d93"))},this.$options.components.XyBuilderForm=function(){return Promise.all([a.e("vendor"),a.e("manifest")]).then(a.bind(null,"4d99"))},this.$options.components.XyBuilderStack=function(){return a.e("manifest").then(a.bind(null,"396d"))}},created:function(){for(var e in this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?this.tabData=this.predata:this.loadData(),this.tabData.tabList[0].list)this.tabData.tabList[0].list.hasOwnProperty(e)&&this.tabData.tabList[0].list[e].pageData.api&&(this.tabData.tabList[0].list[e].pageData.apiBlank=this.tabData.tabList[0].list[e].pageData.api+this.tabData.tabList[0].list[e].pageData.apiParams+(this.tabData.tabList[0].list[e].pageData.queryParams?this.tabData.tabList[0].list[e].pageData.queryParams:""))},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{tabClick:function(e){var t,a=e.split("_")[1];for(t in this.tabData.tabList[a].list)this.tabData.tabList[a].list.hasOwnProperty(t)&&this.tabData.tabList[a].list[t].pageData.api&&(this.tabData.tabList[a].list[t].pageData.apiBlank=this.tabData.tabList[a].list[t].pageData.api+this.tabData.tabList[a].list[t].pageData.apiParams+(this.tabData.tabList[a].list[t].pageData.queryParams||""),this.tabData.tabList[a].list[t].pageData.show=!0)},loadData:(r=n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=0<a.length&&void 0!==a[0]?a[0]:"")&&(this.api=t),this.loading=!0,this.api)return e.next=6,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=8;break;case 6:"200"==(t=e.sent).code?this.tabData=t.data.tabData:this.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=r.apply(e,t);function s(e){o(n,a,i,s,l,"next",e)}function l(e){o(n,a,i,s,l,"throw",e)}s(void 0)}))},function(){return s.apply(this,arguments)})}};i=a("2877"),l=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"small",type:e.tabData.tabType||"card",animated:!1},on:{"on-click":e.tabClick},model:{value:e.tabCurrent,callback:function(t){e.tabCurrent=t},expression:"tabCurrent"}},e._l(e.tabData.tabList,(function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.title,name:"tab_"+i}},[a("XyBuilderStack",{ref:"xy_builder_tab_innner_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:"",show:!0,predata:{stackList:t.list}},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)})),1)],1)}),[],!1,null,null,null);t.default=l.exports},"28a6":function(e,t,a){"use strict";var i=a("aa85");a.n(i).a},2949:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var r,s,l={name:"XyBuilderInfo",props:{api:"",cloudId:0,eid:0,show:!1,predata:""},components:{},data:function(){return{loading:!1,infoData:{infoList:""}}},watch:{show:function(e){this.infoData={},1==e&&this.loadData()}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return a.e("manifest").then(a.bind(null,"9a73"))},this.$options.components.XyBuilderStack=function(){return a.e("manifest").then(a.bind(null,"e0e2"))}},created:function(){this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?this.infoData=this.predata:this.loadData()},methods:{loadData:(r=n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=0<a.length&&void 0!==a[0]?a[0]:"")&&(this.api=t),this.loading=!0,this.api)return e.next=6,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=8;break;case 6:"200"==(t=e.sent).code?(this.infoData=t.data.infoData,this.loading=!1):this.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=r.apply(e,t);function s(e){o(n,a,i,s,l,"next",e)}function l(e){o(n,a,i,s,l,"throw",e)}s(void 0)}))},function(){return s.apply(this,arguments)})}};a("9356"),i=a("2877"),l=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],staticClass:"xy_builder-info-wrap"},[e._l(e.infoData.infoList,(function(t,i){return a("div",{key:i,staticClass:"item-group"},[a("Divider",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"group.title"}],attrs:{orientation:"left"}},[e._v(e._s(t.title))]),a("Row",e._l(t.data,(function(t,i){return a("div",{key:i},["list"==t.type?a("i-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[a("div",[a("XyBuilderList",{ref:"xy_builder_info_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,show:!0,api:t.pageData?t.pageData.api:"",predata:t.value?t.value:""},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)]):"stack"==t.type?a("i-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[a("div",[a("XyBuilderStack",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,show:!0,api:t.pageData?t.pageData.api:"",predata:t.value?t.value:""},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)]):"count"==t.type?a("i-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[t.value?a("Row",{staticStyle:{width:"100%"},attrs:{type:"flex",justify:"start",align:"top"}},e._l(t.value,(function(t,i){return a("i-col",{key:i,attrs:{xs:12,xl:t.item.xl?t.item.xl:6,xxl:4}},[a("Row",{staticClass:"count-item",style:{backgroundColor:t.item.bgColor},attrs:{type:"flex",justify:"center",align:"top"}},[a("i-col",{staticClass:"left"},[a("i",{staticClass:"icon",class:t.item.icon}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.item.title,expression:"it.item.title"}]},[e._v(e._s(t.item.title))])]),a("i-col",{staticClass:"right",style:{backgroundColor:t.item.bgColorRight?t.item.bgColorRight:"#fff",color:t.item.bgColorRight?"#fff":""}},[a("div",{staticClass:"value"},[a("span",[e._v(e._s(t.current.value))]),a("span",{staticClass:"suffix"},[e._v(e._s(t.current.suffix))])]),a("div",{staticClass:"title"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.content.value,expression:"it.content.value"}],staticClass:"value"},[e._v(e._s(t.content.value))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.content.list,expression:"it.content.list"}],staticClass:"list"},e._l(t.content.list,(function(t,i){return a("div",{key:i,staticClass:"cell"},[e._v(" "+e._s(t.title)+"："+e._s(t.value)+" ")])})),0)])])],1)],1)})),1):e._e()],1):a("i-col",{staticClass:"info-item",attrs:{xs:24,sm:{span:t.extra.sm.span?t.extra.sm.span:8,offset:t.extra.sm.offset?t.extra.sm.offset:0,pull:t.extra.sm.pull?t.extra.sm.pull:0,push:t.extra.sm.push?t.extra.sm.push:0}}},[a("div",{staticClass:"title"},[e._v(" "+e._s(t.title)+"： ")]),a("div",{staticClass:"value"},["text"==t.type?[a("span",[e._v(e._s(t.value))])]:"image"==t.type?[a("img",{attrs:{src:t.value,width:t.extra.width?t.extra.width:"40px"}})]:"label"==t.type?[a("span",{style:{color:t.extra.options[t.value]&&t.extra.options[t.value].color?t.extra.options[t.value].color:""}},[e._v(" "+e._s(t.extra.options[t.value]?t.extra.options[t.value].title:t.value)+" ")])]:"tag"==t.type?[a("Tag",{attrs:{color:t.extra.options[t.value]&&t.extra.options[t.value].color?t.extra.options[t.value].color:"default"}},[e._v(" "+e._s(t.extra.options[t.value]?t.extra.options[t.value].title:t.value)+" ")])]:"tags"==t.type?[e._l(t.value,(function(i){return[a("Tag",{key:i,attrs:{color:t.extra.options&&t.extra.options[i]&&t.extra.options[i].color?t.extra.options[i].color:"default"}},[e._v(" "+e._s(t.extra.options&&t.extra.options[i]&&t.extra.options[i].title?t.extra.options[i].title:i)+" ")])]}))]:e._e(),"time"==t.type?[a("span",[e._v(e._s(t.value))])]:e._e(),"url"==t.type?[a("a",{attrs:{href:t.value,target:"_blank"}},[e._v(e._s(t.extra.placeholder))])]:e._e()],2)])],1)})),0)],1)})),!0===e.loading?[a("Row",[a("i-col",{staticClass:"spin-col",attrs:{span:"24"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"22"}}),a("div",[e._v("Loading")])],1)],1)],1)]:e._e()],2)}),[],!1,null,"02480114",null);t.default=l.exports},"2bcd":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var r=e.apply(t,a);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))}}var s,l;i={name:"XyBuilderDoc",props:{api:"",cloudId:0,eid:0,show:!1,predata:""},components:{},data:function(){return{loading:!1,docData:{docList:""},current:{doc:[]},columns:[{title:"是否必须",key:"require"},{title:"参数名",key:"name"},{title:"参数标题",key:"title"},{title:"说明",key:"description"},{title:"示例",key:"example"}]}},watch:{show:function(e){this.docData={},1==e&&this.loadData()}},beforeCreate:function(){},created:function(){this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?this.docData=this.predata:this.loadData()},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{renderContent:function(e,t){var a=this,i=(t.root,t.node,t.data),n="";t="";return"dev"==i.devState?(n="magenta",t="开发中"):"prod"==i.devState&&(n="green",t="已完成"),e("span",{class:{"ivu-tree-title":!0},style:{display:"inline-block",width:"100%"}},[e("span",{on:{click:function(){a.showDoc([i])}}},[e("span",i.title),e("Tag",{props:{color:n},style:{margin:0,display:"inline-block",transform:"scale(0.6)",padding:"0 4px"}},[e("span",t)])])])},showDoc:function(e){this.current=e[0]},loadChildren:(l=r(n.a.mark((function e(t,a){var i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.util.request({url:this.api+"?menuLayer="+t.menuLayer+"&pmenu="+t.path,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});case 2:200==(i=e.sent).code&&a(i.data.dataList);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)}),loadData:(s=r(n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=0<a.length&&void 0!==a[0]?a[0]:"")&&(this.api=t),this.loading=!0,this.api)return e.next=6,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=8;break;case 6:200==(t=e.sent).code&&(this.docData.docList=t.data.dataList);case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})}},a("b637"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xy_builder-doc-wrap"},[a("div",{staticClass:"content"},[0==e.loading?[a("Row",{attrs:{type:"flex",justify:"center",align:"top"}},[a("Col",{staticStyle:{"border-right":"1px solide #eee"},attrs:{xs:24,sm:8,md:6,lg:4}},[a("Tree",{staticClass:"list",attrs:{data:e.docData.docList,render:e.renderContent,"load-data":e.loadChildren},on:{"on-select-change":e.showDoc}})],1),a("Col",{attrs:{xs:24,sm:16,md:18,lg:20}},e._l(e.current.doc,(function(t,i){return a("div",{key:i},[a("div",{staticClass:"line"},[a("div",{staticClass:"title"},[e._v(" 接口说明 ")]),a("Divider"),a("div",{staticClass:"content"},[e._v(" "+e._s(t.tabValues.description)+" ")])],1),a("div",{staticClass:"line"},[a("div",{staticClass:"title"},[e._v(" 接口地址 "),e.current.devState&&"dev"==e.current.devState?[a("Tag",{staticStyle:{margin:"0",display:"inline-block",transform:"scale(0.6)",padding:"0 4px"},attrs:{color:"magenta"}},[e._v("开发中")])]:e.current.devState&&"prod"==e.current.devState?[a("Tag",{staticStyle:{margin:"0",display:"inline-block",transform:"scale(0.6)",padding:"0 4px"},attrs:{color:"green"}},[e._v("已完成")])]:e._e()],2),a("Divider"),a("div",{staticClass:"content"},[e._v(" "+e._s(i)+" "+e._s(e.current.api)+" ")])],1),a("div",{staticClass:"line"},[a("div",{staticClass:"title"},[e._v(" 请求参数 ")]),a("Divider"),a("div",{staticClass:"content"},[a("Table",{attrs:{border:"",columns:e.columns,data:t.tabValues.params}})],1)],1),a("div",{staticClass:"line"},[a("div",{staticClass:"title"},[e._v(" 返回结果 ")]),a("Divider"),a("div",{staticClass:"content"})],1)])})),0)],1)]:[a("Row",{staticStyle:{"margin-top":"30px"}},[a("Col",{staticClass:"spin-col",attrs:{span:"24"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"22"}}),a("div",[e._v("Loading")])],1)],1)],1)]],2)])}),[],!1,null,null,null);t.default=i.exports},"2bd5":function(e,t,a){"use strict";a.r(t);var i=a("5d93"),n=a("21b3");n={name:"XyBuilderInfoRoute",components:{XyBuilderInfo:i.default,BreadcurmbComp:n.default},data:function(){return{api:""}},created:function(){},beforeMount:function(){this.loadData()},methods:{loadData:function(){var e;"dyinfo"==this.$route.meta.dytype&&(0<(e=this).$route.params.length&&this.$route.params.forEach((function(t){e.$route.meta.api=e.$route.meta.api+"/"+e.$route.params[t]})),e.api=e.$route.meta.api)},refreshData:function(){this.$refs.xy_builder.loadData()}},watch:{$route:function(){}}},a=a("2877"),n=Object(a.a)(n,(function(){var e=this.$createElement;return(e=this._self._c||e)("Card",{attrs:{shadow:""}},[e("BreadcurmbComp",{on:{"refresh-page":this.refreshData}}),e("XyBuilderInfo",{ref:"xy_builder",attrs:{api:this.api}})],1)}),[],!1,null,null,null);t.default=n.exports},"2c03":function(e,t,a){"use strict";a.r(t);var i=a("396d"),n=a("21b3");n={name:"XyBuilderStackRoute",components:{XyBuilderStack:i.default,BreadcurmbComp:n.default},data:function(){return{api:""}},created:function(){},beforeMount:function(){this.loadData()},methods:{loadData:function(){var e;"dystack"==this.$route.meta.dytype&&(0<(e=this).$route.params.length&&this.$route.params.forEach((function(t){e.$route.meta.api=e.$route.meta.api+"/"+e.$route.params[t]})),e.api=e.$route.meta.api)},refreshData:function(){this.$refs.xy_builder.loadData()}},watch:{$route:function(){}}},a=a("2877"),n=Object(a.a)(n,(function(){var e=this.$createElement;return(e=this._self._c||e)("Card",{attrs:{shadow:""}},[e("BreadcurmbComp",{on:{"refresh-page":this.refreshData}}),e("XyBuilderStack",{ref:"xy_builder",attrs:{api:this.api}})],1)}),[],!1,null,null,null);t.default=n.exports},"2d55":function(e,t,a){},"30e4":function(e,t,a){},"31c2":function(e,t,a){},"36d8":function(e,t,a){"use strict";a.r(t),a=a("2877"),a=Object(a.a)({},void 0,void 0,!1,null,null,null),t.default=a.exports},"396d":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}o(u={components:{"xy-title":a("6df9").a},name:"XyBuilderStack",props:{api:"",cloudId:0,eid:0,show:!1,predata:""}},"components",{}),o(u,"data",(function(){return{loading:!1,stackData:{stackList:""}}})),o(u,"watch",{show:function(e){this.stackData={},1==e&&this.loadData()}}),o(u,"beforeCreate",(function(){this.$options.components.XyBuilderList=function(){return a.e("manifest").then(a.bind(null,"114b"))},this.$options.components.XyBuilderForm=function(){return Promise.all([a.e("vendor"),a.e("manifest")]).then(a.bind(null,"4d99"))},this.$options.components.XyBuilderInfo=function(){return a.e("manifest").then(a.bind(null,"5d93"))},this.$options.components.XyBuilderTab=function(){return a.e("manifest").then(a.bind(null,"26ff"))}})),o(u,"created",(function(){this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?this.stackData=this.predata:this.loadData()})),o(u,"beforeMount",(function(){})),o(u,"mounted",(function(){})),o(u,"activated",(function(){})),o(u,"deativated",(function(){})),o(u,"beforeUpdate",(function(){})),o(u,"updated",(function(){})),o(u,"beforeDestroy",(function(){})),o(u,"destroyed",(function(){})),o(u,"methods",{loadData:(s=n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=0<a.length&&void 0!==a[0]?a[0]:"")&&(this.api=t),this.loading=!0,this.api)return e.next=6,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=8;break;case 6:"200"==(t=e.sent).code?(this.stackData=t.data.stackData,this.loading=!1):this.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=s.apply(e,t);function o(e){r(n,a,i,o,l,"next",e)}function l(e){r(n,a,i,o,l,"throw",e)}o(void 0)}))},function(){return l.apply(this,arguments)})}),i=u;var s,l,u=(a("25a8"),a("2877"));i=Object(u.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xy_builder-stack-wrap"},e._l(e.stackData.stackList,(function(t,i){return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:i,staticClass:"stackList"},[a("xy-title",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"stack.title"}],staticClass:"m-b-sm"},[e._v(e._s(t.title))]),a("el-row",[a("el-col",{staticClass:"stack-item block",attrs:{xs:24,sm:24}},["tab"==t.pageData.modalType?[a("XyBuilderTab",{ref:"xy_builder_tab_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,show:!0,predata:t.predata},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:["list"==t.pageData.modalType?a("div",[a("XyBuilderList",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show,predata:t.predata},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1):"form"==t.pageData.modalType?a("div",[a("XyBuilderForm",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show,predata:t.predata},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1):"info"==t.pageData.modalType?a("div",[a("XyBuilderInfo",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show,predata:t.predata},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1):e._e()]],2)],1)],1)})),0)}),[],!1,null,"8512a45c",null);t.default=i.exports},"3b6c":function(e,t,a){"use strict";var i=a("1e3f");a.n(i).a},"3ccb":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var r=e.apply(t,a);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))}}var s,l;i={name:"Regions",props:{modalShow:!1,modalTitle:"",action:"",valueName:{type:String,default:"id"},value:[],token:"",cloudId:0,eid:0},data:function(){return{data:[]}},created:(l=r(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.util.request({url:this.action,method:"get",data:{id:1e5,child:0,maxLevel:2,checked:this.value},header:{CloudId:this.cloudId,Eid:this.eid}});case 2:200==(t=e.sent).code&&(this.data=t.data.dataList);case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),beforeMount:function(){},methods:{onChange:function(){this.value=[];for(var e=this.$refs.tree.getCheckedNodes(),t=e.length-1;0<=t;t--)this.value.push(e[t][this.valueName]);this.$emit("input",this.value)},loadData:(s=r(n.a.mark((function e(t,a){var i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.util.request({url:this.action,method:"get",data:{id:t.id,child:0,maxLevel:2},header:{CloudId:this.cloudId,Eid:this.eid}});case 2:200==(i=e.sent).code&&a(i.data.dataList);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},watch:{}},a("4fef"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("div",[t("div",{staticClass:"regions"},[t("Button",{attrs:{type:"default"},on:{click:function(t){e.modalShow=!0}}},[e._v("编辑")]),t("Modal",{ref:"modal",attrs:{transfer:!1,"footer-hide":!0,scrollable:!1,draggable:!1,"mask-closable":!1,width:"800",title:e.modalTitle},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[t("Tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","load-data":e.loadData},on:{"on-check-change":e.onChange}}),t("img",{attrs:{src:"https://i.loli.net/2020/03/24/9Fu1lZbmepVXr2y.png",alt:"中国行政区划图"}})],1)],1)])}),[],!1,null,"cafb3a76",null);t.default=i.exports},"3fe8":function(e,t,a){"use strict";a.r(t);var i=a("2bcd"),n=a("21b3");n={name:"XyBuilderDocRoute",components:{XyBuilderDoc:i.default,BreadcurmbComp:n.default},data:function(){return{api:""}},created:function(){},beforeMount:function(){this.loadData()},methods:{loadData:function(){var e;"dydoc"==this.$route.meta.dytype&&(0<(e=this).$route.params.length&&this.$route.params.forEach((function(t){e.$route.meta.api=e.$route.meta.api+"/"+e.$route.params[t]})),e.api=e.$route.meta.api)},refreshData:function(){this.$refs.xy_builder.loadData()}},watch:{$route:function(){}}},a=a("2877"),n=Object(a.a)(n,(function(){var e=this.$createElement;return(e=this._self._c||e)("Card",{attrs:{shadow:""}},[e("BreadcurmbComp",{on:{"refresh-page":this.refreshData}}),e("XyBuilderDoc",{ref:"xy_builder",attrs:{api:this.api}})],1)}),[],!1,null,null,null);t.default=n.exports},"42cd":function(e,t,a){},"43e8":function(e,t,a){"use strict";a.r(t);var i={name:"Poster",components:{XyBuilderFormImage:a("aefe").default},props:{item:{},value:[],token:"",cloudId:0,eid:0},data:function(){return{index:0}},created:function(){this.value=[{name:"bg",type:"image",width:750,height:1181,top:0,left:0,url:"https://s1.ax1x.com/2020/04/27/JR46UJ.png"},{name:"logo",type:"image",width:134,height:133,top:20,left:42,url:"https://s2.ax1x.com/2020/01/25/1ZzWiq.png"},{name:"qrcode",type:"image",width:160,height:160,top:1e3,left:20,url:"https://s1.ax1x.com/2020/03/19/86VFEt.jpg"},{name:"avatar",type:"image",width:100,height:100,top:1190,left:600,url:"https://s1.ax1x.com/2020/03/18/8wg9k6.png"},{name:"name",type:"text",width:100,height:100,top:1230,left:450,color:"#333",fontSize:30,backgroundColor:"transparent",content:"XYShop"},{name:"scan",type:"text",width:100,height:100,top:1230,left:50,color:"#333",fontSize:30,backgroundColor:"transparent",content:"长按二维码扫一扫"}]},beforeMount:function(){},methods:{select:function(e){this.index=e},move:function(e,t){var a=this;this.index=t;var i=e.target;i.onmousedown=function(e){var t=e.clientX/.35-i.offsetLeft,n=e.clientY/.35-i.offsetTop;document.onmousemove=function(e){var i=e.clientX/.35-t;i<0&&(i=0),(e=e.clientY/.35-n)<0&&(e=0),750<i+a.value[a.index].width&&(i=750-a.value[a.index].width),1344<e+a.value[a.index].height&&(e=1344-a.value[a.index].height),a.value[a.index].left=Math.ceil(i),a.value[a.index].top=Math.ceil(e)},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},watch:{}};a("6b49"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex",staticStyle:{position:"relative",width:"300px",height:"534px"}},[a("div",{staticClass:"poster",staticStyle:{position:"absolute",transform:"scale(0.35)"}},[a("div",{staticStyle:{position:"absolute",width:"750px",height:"1334px","background-color":"#fff",border:"1px solid #ccc"}},e._l(e.value,(function(t,i){return a("div",["image"==t.type?a("img",{key:i,staticClass:"item",class:e.index==i?"current":"",style:{position:"absolute",top:t.top+"px",left:t.left+"px",width:t.width+"px",height:t.height+"px"},attrs:{src:t.url},on:{mousedown:function(t){return e.move(t,i)},click:function(t){return e.select(i)}}}):"text"==t.type?a("div",{key:i,staticClass:"item",class:e.index==i?"current":"",style:{position:"absolute",top:t.top+"px",left:t.left+"px",color:t.color,lineHeight:"1.1",fontSize:t.fontSize+"px",backgroundColor:t.backgroundColor,breakWord:t.breakWord},on:{mousedown:function(t){return e.move(t,i)},click:function(t){return e.select(i)}}},[e._v(" "+e._s(t.content)+" ")]):e._e()])})),0)]),a("div",{staticStyle:{position:"absolute",left:"300px",top:"0",width:"100%",height:"534px"}},[a("Form",{attrs:{"label-position":"top"}},[a("FormItem",{attrs:{label:"名称"}},[a("Input",{model:{value:e.value[e.index].name,callback:function(t){e.$set(e.value[e.index],"name",t)},expression:"value[index].name"}})],1),a("FormItem",{attrs:{label:"宽度"}},[a("Input",{model:{value:e.value[e.index].width,callback:function(t){e.$set(e.value[e.index],"width",t)},expression:"value[index].width"}})],1),a("FormItem",{attrs:{label:"高度"}},[a("Input",{model:{value:e.value[e.index].height,callback:function(t){e.$set(e.value[e.index],"height",t)},expression:"value[index].height"}})],1),a("FormItem",{attrs:{label:"顶部距离"}},[a("Input",{model:{value:e.value[e.index].top,callback:function(t){e.$set(e.value[e.index],"top",t)},expression:"value[index].top"}})],1),a("FormItem",{attrs:{label:"左侧距离"}},[a("Input",{model:{value:e.value[e.index].left,callback:function(t){e.$set(e.value[e.index],"left",t)},expression:"value[index].left"}})],1),"image"==this.value[e.index].type?a("FormItem",{attrs:{label:"图片"}},[a("XyBuilderFormImage",{attrs:{item:{name:e.value[e.index].name,extra:e.item.extra},img:{name:"",title:""},cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.value[e.index].url,callback:function(t){e.$set(e.value[e.index],"url",t)},expression:"value[index].url"}}),a("Input",{model:{value:e.value[e.index].url,callback:function(t){e.$set(e.value[e.index],"url",t)},expression:"value[index].url"}})],1):e._e(),"text"==this.value[e.index].type?a("FormItem",{attrs:{label:"字体大小"}},[a("Slider",{attrs:{"show-input":""},model:{value:e.value[e.index].fontSize,callback:function(t){e.$set(e.value[e.index],"fontSize",t)},expression:"value[index].fontSize"}})],1):e._e(),"text"==this.value[e.index].type?a("FormItem",{attrs:{label:"字体颜色"}},[a("ColorPicker",{attrs:{alpha:!0},model:{value:e.value[e.index].color,callback:function(t){e.$set(e.value[e.index],"color",t)},expression:"value[index].color"}})],1):e._e(),"text"==this.value[e.index].type?a("FormItem",{attrs:{label:"背景颜色"}},[a("ColorPicker",{attrs:{alpha:!0},model:{value:e.value[e.index].backgroundColor,callback:function(t){e.$set(e.value[e.index],"backgroundColor",t)},expression:"value[index].backgroundColor"}})],1):e._e()],1)],1)])}),[],!1,null,"d9aa3162",null);t.default=i.exports},"448a":function(e,t,a){"use strict";var i=a("7d60");a.n(i).a},4700:function(e,t,a){"use strict";var i=a("2d55");a.n(i).a},4797:function(e,t,a){"use strict";a.r(t);var i={data:function(){return{}}};a("1b8c"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this.$createElement;return(e=this._self._c||e)("div",{staticClass:"content"},[e("Card",{attrs:{shadow:""}},[e("div",{staticClass:"line"},[e("div",{staticClass:"title"},[this._v(" 左侧菜单加载失败 ")]),e("Divider"),e("div",{staticClass:"content"},[this._v(" 左侧菜单加载失败原因主要有1、网络故障；2、接口挂了 3、接口/api/v1/admin/core/menu/trees有语法错误。 ")])],1)])],1)}),[],!1,null,"f557efc6",null);t.default=i.exports},"4b13":function(e,t,a){"use strict";var i=a("7695");a.n(i).a},"4bfa":function(e,t,a){"use strict";var i=a("c321");a.n(i).a},"4d99":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i),o=a("4328"),r=a.n(o);function s(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function r(e){s(o,i,n,r,l,"next",e)}function l(e){s(o,i,n,r,l,"throw",e)}r(void 0)}))}}a("235e");var u={name:"Upload",props:{item:{},value:{type:[Array,String],default:function(){return[]}},uploadType:{type:String,default:"image"},img:{type:Object,default:function(){return{value:"",title:""}}},token:"",cloudId:0,eid:0},data:function(){return{uploadName:"file",header:{},fileList:[],limit:1,listType:"",dialogImageUrl:"",dialogVisible:!1}},created:function(){switch(this.uploadType){case"image":this.listType="picture";break;case"images":this.listType="picture-card"}this.header={Authorization:this.token},this.item.extra.limit?this.limit=this.item.extra.limit:"images"==this.uploadType&&(this.limit=30),"string"==typeof this.value?""==this.value?this.fileList=[]:this.fileList=[{name:this.item.name,url:this.value}]:this.fileList=this.value},beforeMount:function(){},methods:{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleExceed:function(){this.$message.warning("最多上传"+this.limit+"个文件")},handleSuccess:function(e,t,a){"upload_oss"==this.item.extra.driver?t.url=this.item.extra.data.host+"/"+this.item.extra.data.key:"upload_smms"==this.item.extra.driver?"success"==e.code?t.url=e.data.url:this.$message({message:e.message,type:"warning"}):200==e.code?t.url=e.data.url:this.$message({message:e.msg,type:"warning"}),this.fileList=a,1==this.limit?this.$emit("input",a[0].url):this.$emit("input",a)},handleRemove:function(e){this.fileList.splice(this.fileList.indexOf(e),1),1==this.limit?this.$emit("input",""):this.$emit("input",this.fileList),this.fileList},handleBeforeUpload:function(e){var t=this,a=this.item.extra.maxSize?this.item.extra.maxSize:512;return e.size/1024>a?(this.$message({message:"上传文件大小不能超过 "+a+"KB!",type:"warning"}),!1):"upload_oss"==t.item.extra.driver?new Promise(function(){var a=l(n.a.mark((function a(i,o){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.util.request({url:"/v1/upload_oss/index/sign",method:"get",header:{CloudId:t.cloudId,Eid:t.eid}});case 2:200==(r=a.sent).code?(t.item.extra.action=r.data.params.host,r.data.params.key=r.data.params.key+e.name,t.item.extra.data=r.data.params,i()):t.$message({message:r.msg,type:"warning"});case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()):"upload_smms"==t.item.extra.driver?new Promise(function(){var e=l(n.a.mark((function e(a,i){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.header={Authorization:"R7aVy1OLZJ1pMgWyjBkdOz9Dyh7nSFm2"},t.uploadName="smfile",t.item.extra.action="https://sm.ms/api/v2/upload",t.item.extra.data={format:"json"},a();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()):void 0}},watch:{}},d=(a("ad6b"),a("2877")),c=Object(d.a)(u,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("div",{staticClass:"upload-box",class:e.fileList.length>=e.limit?"hidden-up-btn":""},[t("el-upload",{directives:[{name:"show",rawName:"v-show",value:""==e.value||"images"==e.uploadType,expression:"value == '' || uploadType == 'images'"}],ref:"upload_"+e.item.name,class:"upload-"+e.uploadType,attrs:{drag:!0,"show-file-list":!0,"list-type":e.listType,headers:e.header,limit:e.limit,"file-list":e.fileList,"on-preview":e.handlePictureCardPreview,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"before-upload":e.handleBeforeUpload,data:e.item.extra.data,name:e.uploadName,type:"drag",action:e.item.extra.action}},[e.fileList.length>=e.limit&&1==e.limit&&"image"==e.uploadType?[t("img",{attrs:{src:e.fileList[0].url}})]:["image"==e.uploadType?[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"font-sm text-gray lh-1-2"},[e._v(" "+e._s(e.item.extra.tip?e.item.extra.tip:"只能上传jpg/png文件，且不超过"+e.item.extra.maxSize+"KB")+" ")])]:"images"==e.uploadType?[t("i",{staticClass:"el-icon-plus"})]:e._e()],t("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl}})])],2),e.img.title&&""!==e.img.title?t("div",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.img.title)+" ")]):e._e()],1)}),[],!1,null,"4a175856",null).exports,m={name:"Poster",components:{XyBuilderFormImage:c},props:{item:{},value:[],token:"",cloudId:0,eid:0},data:function(){return{index:0}},created:function(){this.value=[{name:"bg",type:"image",width:750,height:1181,top:0,left:0,url:"https://s1.ax1x.com/2020/04/27/JR46UJ.png"},{name:"logo",type:"image",width:134,height:133,top:20,left:42,url:"https://s2.ax1x.com/2020/01/25/1ZzWiq.png"},{name:"qrcode",type:"image",width:160,height:160,top:1e3,left:20,url:"https://s1.ax1x.com/2020/03/19/86VFEt.jpg"},{name:"avatar",type:"image",width:100,height:100,top:1190,left:600,url:"https://s1.ax1x.com/2020/03/18/8wg9k6.png"},{name:"name",type:"text",width:100,height:100,top:1230,left:450,color:"#333",fontSize:30,backgroundColor:"transparent",content:"XYShop"},{name:"scan",type:"text",width:100,height:100,top:1230,left:50,color:"#333",fontSize:30,backgroundColor:"transparent",content:"长按二维码扫一扫"}]},beforeMount:function(){},methods:{select:function(e){this.index=e},move:function(e,t){var a=this;this.index=t;var i=e.target;i.onmousedown=function(e){var t=e.clientX/.35-i.offsetLeft,n=e.clientY/.35-i.offsetTop;document.onmousemove=function(e){var i=e.clientX/.35-t;i<0&&(i=0),(e=e.clientY/.35-n)<0&&(e=0),750<i+a.value[a.index].width&&(i=750-a.value[a.index].width),1344<e+a.value[a.index].height&&(e=1344-a.value[a.index].height),a.value[a.index].left=Math.ceil(i),a.value[a.index].top=Math.ceil(e)},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},watch:{}},p=(a("c00b"),Object(d.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex",staticStyle:{position:"relative",width:"300px",height:"534px"}},[a("div",{staticClass:"poster",staticStyle:{position:"absolute",transform:"scale(0.35)"}},[a("div",{staticStyle:{position:"absolute",width:"750px",height:"1334px","background-color":"#fff",border:"1px solid #ccc"}},e._l(e.value,(function(t,i){return a("div",["image"==t.type?a("img",{key:i,staticClass:"item",class:e.index==i?"current":"",style:{position:"absolute",top:t.top+"px",left:t.left+"px",width:t.width+"px",height:t.height+"px"},attrs:{src:t.url},on:{mousedown:function(t){return e.move(t,i)},click:function(t){return e.select(i)}}}):"text"==t.type?a("div",{key:i,staticClass:"item",class:e.index==i?"current":"",style:{position:"absolute",top:t.top+"px",left:t.left+"px",color:t.color,lineHeight:"1.1",fontSize:t.fontSize+"px",backgroundColor:t.backgroundColor,breakWord:t.breakWord},on:{mousedown:function(t){return e.move(t,i)},click:function(t){return e.select(i)}}},[e._v(" "+e._s(t.content)+" ")]):e._e()])})),0)]),a("div",{staticStyle:{position:"absolute",left:"300px",top:"0",width:"100%",height:"534px"}},[a("Form",{attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.value[e.index].name,callback:function(t){e.$set(e.value[e.index],"name",t)},expression:"value[index].name"}})],1),a("el-form-item",{attrs:{label:"宽度"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.value[e.index].width,callback:function(t){e.$set(e.value[e.index],"width",t)},expression:"value[index].width"}})],1),a("el-form-item",{attrs:{label:"高度"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.value[e.index].height,callback:function(t){e.$set(e.value[e.index],"height",t)},expression:"value[index].height"}})],1),a("el-form-item",{attrs:{label:"顶部距离"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.value[e.index].top,callback:function(t){e.$set(e.value[e.index],"top",t)},expression:"value[index].top"}})],1),a("el-form-item",{attrs:{label:"左侧距离"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.value[e.index].left,callback:function(t){e.$set(e.value[e.index],"left",t)},expression:"value[index].left"}})],1),"image"==this.value[e.index].type?a("el-form-item",{attrs:{label:"图片"}},[a("XyBuilderFormImage",{attrs:{item:{name:e.value[e.index].name,extra:e.item.extra},img:{name:"",title:""},cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.value[e.index].url,callback:function(t){e.$set(e.value[e.index],"url",t)},expression:"value[index].url"}}),a("el-input",{attrs:{size:"medium"},model:{value:e.value[e.index].url,callback:function(t){e.$set(e.value[e.index],"url",t)},expression:"value[index].url"}})],1):e._e(),"text"==this.value[e.index].type?a("el-form-item",{attrs:{label:"字体大小"}},[a("el-slider",{attrs:{"show-input":""},model:{value:e.value[e.index].fontSize,callback:function(t){e.$set(e.value[e.index],"fontSize",t)},expression:"value[index].fontSize"}})],1):e._e(),"text"==this.value[e.index].type?a("el-form-item",{attrs:{label:"字体颜色"}},[a("el-color-picker",{model:{value:e.value[e.index].color,callback:function(t){e.$set(e.value[e.index],"color",t)},expression:"value[index].color"}})],1):e._e(),"text"==this.value[e.index].type?a("el-form-item",{attrs:{label:"背景颜色"}},[a("el-color-picker",{model:{value:e.value[e.index].backgroundColor,callback:function(t){e.$set(e.value[e.index],"backgroundColor",t)},expression:"value[index].backgroundColor"}})],1):e._e()],1)],1)])}),[],!1,null,"03dbe6e8",null).exports);function f(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw n}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function v(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var y,g;i={name:"XyShopSku",components:{XyBuilderFormImage:c},props:{item:{},value:{skuSpec:[],skuList:[]},token:"",cloudId:0,eid:0},data:function(){return{title:"",tag:"",columns:[{title:"规格",name:"spec",type:"select",width:"300px"},{title:"价格",name:"priceGroup",type:"group",width:"230",options:{fields:[["price","现价"],["originalPrice","原价"]]}},{title:"库存",name:"stock",type:"text"},{title:"SKU编号",name:"skuNo",type:"text"},{title:"备注",name:"remark",type:"text"},{title:"图片",name:"cover",type:"image",width:60},{title:"删除",name:"delete",type:"delete",width:70}],dataItem:{spec:"",price:"",vipPrice:"",originalPrice:"",stock:"",skuNo:"",remark:"",cover:"",delete:""},specCascader:[]}},created:function(){},mounted:function(){this.updateel,columns()},methods:{getData:function(){this.$emit("input",this.value)},loadData:function(e,t){this.specCascader[e.index+1]&&(e.loading=!0,e.children=this.specCascader[e.index+1],e.loading=!1,t())},delrow:(y=n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.value.skuList[t].id)return e.next=3,this.util.request({url:this.item.extra.apiSkuDelete+"/"+this.value.skuList[t].id,method:"DELETE",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=7;break;case 3:"200"==(a=e.sent).code?(this.value.skuList.splice(t,1),this.$Message.success(a.msg)):this.$Message.error(a.msg),e.next=8;break;case 7:this.value.skuList.splice(t,1);case 8:this.getData();case 9:case"end":return e.stop()}}),e,this)})),g=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=y.apply(e,t);function o(e){v(n,a,i,o,r,"next",e)}function r(e){v(n,a,i,o,r,"throw",e)}o(void 0)}))},function(e){return g.apply(this,arguments)}),addrow:function(){var e,t=f(this.value.skuList);try{for(t.s();!(e=t.n()).done;)""==e.value&&this.$Message.error("请填写规格")}catch(e){t.e(e)}finally{t.f()}var a=Object.assign({},this.dataItem);this.value.skuList.push(a)},closeTag:function(e,t){this.value.skuSpec[e].spec.splice(t,1)},addTag:function(e){if(!this.tag)return this.$Message.error("请填写规格"),!1;var t,a=f(this.value.skuSpec[e].spec);try{for(a.s();!(t=a.n()).done;)if(t.value.title==this.tag)return this.$Message.error("规格重复"),!1}catch(e){a.e(e)}finally{a.f()}var i=this.value;i.skuSpec[e].spec.push({title:this.tag}),this.tag="",this.value=i},addspec:function(){if(!this.title)return this.$Message.error("请填写规格名称"),!1;var e,t=f(this.value.skuSpec);try{for(t.s();!(e=t.n()).done;)if(e.value.title==this.title)return this.$Message.error("规格名称重复"),!1}catch(e){t.e(e)}finally{t.f()}this.value.skuSpec.push({title:this.title,spec:[]}),this.title=""},delspec:function(e){this.value.skuSpec.splice(e,1)},updateColumns:function(){for(var e=this.specCascader,t=0;t<this.value.skuSpec.length;t++){var a=[],i=f(this.value.skuSpec[t].spec);try{for(i.s();!(n=i.n()).done;){var n=n.value;t==this.value.skuSpec.length-1?a.push({index:t,value:n.title,label:n.title}):a.push({index:t,value:n.title,label:n.title,children:[],loading:!1})}}catch(e){i.e(e)}finally{i.f()}e[t]=a}this.specCascader=e}},watch:{value:{handler:function(){this.updateel,columns()},deep:!0,immediate:!0}}},a("1039"),o=Object(d.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sku-spec"},[e._l(e.value.skuSpec,(function(t,i){return a("el-row",{key:i,attrs:{gutter:"15",type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{size:"small"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item1.title"}})],1),a("el-col",{attrs:{span:18}},[e._l(t.spec,(function(t,n){return a("el-tag",{key:n,attrs:{name:t.title,closable:""},on:{"on-close":function(t){return e.closeTag(i,n)}}},[e._v(" "+e._s(t.title)+" ")])})),a("el-input",{staticStyle:{width:"80px","margin-right":"5px"},attrs:{size:"small",placeholder:"回车添加"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addTag(i)}},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],2),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.delspec(i)}}},[e._v("删除")])],1)],1)})),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("el-input",{staticStyle:{width:"80px","margin-right":"15px"},attrs:{size:"small",placeholder:"新规格名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addspec(t)}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("el-button",{staticStyle:{"vertical-align":"middle","margin-right":"15px"},attrs:{size:"small",type:"primary"},on:{click:e.addspec}},[e._v(" 增加规格 ")])],1)],2),a("div",{staticClass:"sku-list"},[a("el-table",{attrs:{border:"","highlight-current-row":"",data:e.value.skuList}},e._l(e.columns,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.width||"","min-width":t.minWidth||""},scopedSlots:e._u([{key:"default",fn:function(i){return["input"==t.type?[a("el-input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.value.skuList[i.$index][t.name],callback:function(a){e.$set(e.value.skuList[i.$index],t.name,a)},expression:"value.skuList[scope.$index][coco.name]"}})]:"select"==t.type?[a("el-cascader",{attrs:{data:e.specCascader[0],prop:e.loadData,size:"small"},model:{value:e.value.skuList[i.$index][t.name],callback:function(a){e.$set(e.value.skuList[i.$index],t.name,a)},expression:"value.skuList[scope.$index][coco.name]"}})]:"group"==t.type?e._l(t.options.fields,(function(t,n){return a("div",{key:n,staticClass:"sku-list-group"},[a("div",{staticClass:"title"},[e._v(e._s(t[1])+":")]),a("div",[a("el-input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.value.skuList[i.$index][t[0]],callback:function(a){e.$set(e.value.skuList[i.$index],t[0],a)},expression:"value.skuList[scope.$index][grp[0]]"}})],1)])})):"image"==t.type?[a("XyBuilderFormImage",{attrs:{item:{name:t.name,extra:e.item.extra},img:{name:"",title:""},cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.value.skuList[i.$index][t.name],callback:function(a){e.$set(e.value.skuList[i.$index],t.name,a)},expression:"value.skuList[scope.$index][coco.name]"}})]:"delete"==t.type?[a("el-button",{staticStyle:{"vertical-align":"middle"},attrs:{size:"small"},on:{click:function(t){return e.delrow(e.index)}}},[e._v(" 删除 ")])]:[e._v(" "+e._s(e.polygonFee[i.$index][t.name])+" ")]]}}],null,!0)})})),1),a("el-button",{staticStyle:{"vertical-align":"middle","margin-right":"15px"},attrs:{size:"small",type:"dashed"},on:{click:e.addrow}},[e._v(" 增加 ")])],1)])}),[],!1,null,"9db071ec",null).exports;function x(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var b,k;u={name:"SkuPrice",components:{},props:{item:{},value:[],formValues:{},token:"",cloudId:0,eid:0},data:function(){return{title:"",tag:"",columns:[{title:"规格",name:"spec",type:"text",width:"300px"},{title:"正常售价",name:"price",type:"text"},{title:"剩余库存",name:"stock",type:"text"},{title:"秒杀价",name:"curPrice",type:"input"},{title:"每次库存",name:"curStock",type:"input"}]}},created:function(){},beforeMount:function(){},methods:{getData:function(){this.$emit("input",this.value)}},watch:{"formValues.itemId":{handler:(b=n.a.mark((function e(t){var a,i,o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this,t&&null!=t)return e.next=4,a.util.request({url:"/v1/iadmin/ishop/sku/lists",method:"get",data:{itemId:t,curField:1},header:{CloudId:a.cloudId,Eid:a.eid}});e.next=6;break;case 4:if(200==(i=e.sent).code){for(o=i.data.dataList.length-1;0<=o;o--)for(r=0;r<this.value.length;r++)this.value[r].spec==i.data.dataList[o].spec&&(i.data.dataList[o].curPrice=this.value[r].curPrice,i.data.dataList[o].curStock=this.value[r].curStock);this.value=i.data.dataList,this.getData()}else this.util.showToast({title:i.msg});case 6:case"end":return e.stop()}}),e,this)})),k=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=b.apply(e,t);function o(e){x(n,a,i,o,r,"next",e)}function r(e){x(n,a,i,o,r,"throw",e)}o(void 0)}))},function(e){return k.apply(this,arguments)}),deep:!0,immediate:!0}}},a("448a"),m=Object(d.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sku-list"},[a("el-table",{attrs:{border:"","highlight-current-row":"",data:e.value}},e._l(e.columns,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.width||"","min-width":t.minWidth||""},scopedSlots:e._u([{key:"default",fn:function(i){return["input"==t.type?[a("el-input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.value[i.$index][t.name],callback:function(a){e.$set(e.value[i.$index],t.name,a)},expression:"value[scope.$index][coco.name]"}})]:[e._v(" "+e._s(e.value[i.$index][t.name])+" ")]]}}],null,!0)})})),1)],1)])}),[],!1,null,"0676bea9",null).exports;function w(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function _(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function r(e){w(o,i,n,r,s,"next",e)}function s(e){w(o,i,n,r,s,"throw",e)}r(void 0)}))}}var D,I;i={name:"Regions",props:{modalShow:!1,modalTitle:"",action:"",valueName:{type:String,default:"id"},value:[],token:"",cloudId:0,eid:0},data:function(){return{data:[],props:{label:"title",children:"children",isLeaf:"isLeaf"}}},created:(I=_(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.util.request({url:this.action,method:"get",data:{id:1e5,child:0,maxLevel:2,checked:this.value},header:{CloudId:this.cloudId,Eid:this.eid}});case 2:200==(t=e.sent).code&&(this.data=t.data.dataList);case 4:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)}),beforeMount:function(){},methods:{onChange:function(){this.value=this.$refs.tree.getCheckedKeys(),this.$emit("input",this.value)},loadNode:(D=_(n.a.mark((function e(t,a){var i=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.level)return e.abrupt("return",a([{name:"region"}]));e.next=2;break;case 2:if(1<t.level)return e.abrupt("return",a([]));e.next=4;break;case 4:setTimeout(_(n.a.mark((function e(){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.util.request({url:i.action,method:"get",data:{id:t[i.valueName],child:0,maxLevel:2},header:{CloudId:i.cloudId,Eid:i.eid}});case 2:200==(o=e.sent).code&&a(o.data.dataList);case 4:case"end":return e.stop()}}),e)}))),500);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return D.apply(this,arguments)})},watch:{}};function $(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}u={name:"XyDeliverFee",components:{XyBuilderFormRegions:Object(d.a)(i,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("div",[t("div",{staticClass:"regions"},[t("el-button",{attrs:{type:"default",size:"medium"},on:{click:function(t){e.modalShow=!0}}},[e._v("编辑")]),t("Modal",{ref:"modal",attrs:{transfer:!1,"footer-hide":!0,scrollable:!1,draggable:!1,"mask-closable":!1,width:"800",title:e.modalTitle},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[t("el-tree",{ref:"tree",attrs:{data:e.data,props:e.cusprops,load:e.loadNode,"default-checked-keys":e.value,"node-key":e.valueName,lazy:"","show-checkbox":""},on:{"check-change":e.onChange}}),t("img",{attrs:{src:"https://i.loli.net/2020/03/24/9Fu1lZbmepVXr2y.png",alt:"中国行政区划图"}})],1)],1)])}),[],!1,null,"5587e703",null).exports},props:{item:{},value:{default:{regions:[],firstAmount:1,firstFee:8,moreAmount:1,moreFee:2,isDefault:1,ruleType:1},extend:[]},formValues:{},token:"",cloudId:0,eid:0},data:function(){return{unit:"kg",columns:[],dataItem:{regions:[],firstAmount:1,firstFee:8,moreAmount:1,moreFee:2,isDefault:0,ruleType:1,delete:""}}},created:function(){switch(this.formValues[this.item.extra.unitField]){case 1:this.unit="kg";break;case 2:this.unit="件"}this.columns=[{title:"运送到",name:"regions",type:"regions",width:"250px",modalShow:!1},{title:"首重("+this.unit+")",name:"firstAmount",type:"input"},{title:"首费(元）",name:"firstFee",type:"input"},{title:"续重("+this.unit+")",name:"moreAmount",type:"input"},{title:"续费(元)",name:"moreFee",type:"input"},{title:"删除",name:"delete",type:"delete",width:"70px"}],this.value.default||(this.value={default:{regions:[],firstAmount:1,firstFee:8,moreAmount:1,moreFee:2,isDefault:1,ruleType:1},extend:[]})},beforeMount:function(){},methods:{getData:function(){this.$emit("input",this.value)},delrow:(C=n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.value.extend.splice(t,1),this.getData();case 2:case"end":return e.stop()}}),e,this)})),V=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=C.apply(e,t);function o(e){$(n,a,i,o,r,"next",e)}function r(e){$(n,a,i,o,r,"throw",e)}o(void 0)}))},function(e){return V.apply(this,arguments)}),addrow:function(){var e=Object.assign({},this.dataItem);this.value.extend.push(e)}},watch:{formValues:{handler:function(e){switch(e[this.item.extra.unitField]){case 1:this.unit="kg";break;case 2:this.unit="件"}this.columns=[{title:"运送到",name:"regions",type:"regions",width:"250px",modalShow:!1},{title:"首重("+this.unit+")",name:"firstAmount",type:"input"},{title:"首费(元）",name:"firstFee",type:"input"},{title:"续重("+this.unit+")",name:"moreAmount",type:"input"},{title:"续费(元)",name:"moreFee",type:"input"},{title:"删除",name:"delete",type:"delete",width:"70px"}]},deep:!0,immediate:!0}}},a("4b13"),i=Object(d.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fee"},[a("div",{staticClass:"text-error"},[e._v(" 除指定地区外，其余地区的运费采用默认运费。 ")]),a("div",{staticClass:"default"},[e._v(" 默认运费： "),a("el-input",{attrs:{size:"small"},model:{value:e.value.default.firstAmount,callback:function(t){e.$set(e.value.default,"firstAmount",t)},expression:"value.default.firstAmount"}}),e._v(" "+e._s(e.unit)+" 内， "),a("el-input",{attrs:{size:"small"},model:{value:e.value.default.firstFee,callback:function(t){e.$set(e.value.default,"firstFee",t)},expression:"value.default.firstFee"}}),e._v(" 元， 每增加 "),a("el-input",{attrs:{size:"small"},model:{value:e.value.default.moreAmount,callback:function(t){e.$set(e.value.default,"moreAmount",t)},expression:"value.default.moreAmount"}}),e._v(" "+e._s(e.unit)+"， 增加运费 "),a("el-input",{attrs:{size:"small"},model:{value:e.value.default.moreFee,callback:function(t){e.$set(e.value.default,"moreFee",t)},expression:"value.default.moreFee"}}),e._v(" 元。 ")],1),a("div",{staticClass:"more m-t-xs"},[a("el-table",{attrs:{border:"","highlight-current-row":"",data:e.value.extend}},e._l(e.columns,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.width||"","min-width":t.minWidth||""},scopedSlots:e._u([{key:"default",fn:function(i){return["input"==t.type?[a("el-input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.value.extend[i.$index][t.name],callback:function(a){e.$set(e.value.extend[i.$index],t.name,a)},expression:"value.extend[scope.$index][coco.name]"}})]:"buttons"==t.type?[a("el-button",{staticStyle:{"vertical-align":"middle"},attrs:{size:"small",type:"dashed"},on:{click:function(t){return e.delrow(i.$index)}}},[e._v(" 删除 ")])]:e._e(),"regions"==t.type?[a("XyBuilderFormRegions",{attrs:{showModal:i.row.modalShow,modalTitle:"运送到",action:e.item.extra.action,valueName:e.id,cloudId:e.cloudId,eid:e.edi,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t}},model:{value:e.value.extend[i.$index][t.name],callback:function(a){e.$set(e.value.extend[i.$index],t.name,a)},expression:"value.extend[scope.$index][coco.name]"}})]:[e._v(" "+e._s(e.polygonFee[i.$index][t.name])+" ")]]}}],null,!0)})})),1),a("el-button",{staticStyle:{"vertical-align":"middle","margin-right":"15px"},attrs:{size:"small",type:"dashed"},on:{click:e.addrow}},[e._v(" 增加 ")])],1)])}),[],!1,null,"92bc2926",null).exports;var C,V,S=new VueAMap.AMapManager,L={props:["text"],template:"<div>{{text}}</div>"};u={name:"Amap",props:{item:{extra:{}},value:{},token:"",cloudId:0,eid:0},data:function(){var e=this,t=this;return{amapManager:S,geocoder:"",zoom:12,center:[0,0],loaded:!1,events:{init:function(e){e.getCity((function(e){}))},moveend:function(){},zoomchange:function(){},click:function(a){"position"!=t.item.extra.mapType&&"positionAddress"!=t.item.extra.mapType||(t.position=[a.lnglat.lng,a.lnglat.lat],t.$emit("input",e.value))},dragend:function(a){"position"!=t.item.extra.mapType&&"positionAddress"!=t.item.extra.mapType||(t.position=[a.lnglat.lng,a.lnglat.lat],t.$emit("input",e.value))}},position:[0,0],address:"",polygonList:[],polygonFee:[],polygonFeeActive:0,eventsPolygonFee:{change:function(){e.$refs["polygonFee_"+e.item.name+"_"+e.polygonFeeActive][0].$$getPath()}},polygonFeeColumns:[{title:"名称",name:"name",type:"input",width:"200"},{title:"起送价",name:"price",type:"input"},{title:"配送费",name:"fee",type:"input"},{title:"操作",name:"action",type:"buttons"}],plugin:["ToolBar","Scale","PlaceSearch",{pName:"MapType",defaultType:0,events:{init:function(){}}},{pName:"Geolocation",events:{init:function(e){e.getCurrentPosition((function(e,a){if(a&&a.position){switch(t.center=[a.position.lng,a.position.lat],t.loaded=!0,t.item.extra.mapType){case"position":t.position&&0!=t.position.length&&0!=t.position[0]||(t.position=t.center,t.getData());break;case"positionAddress":t.position&&0!=t.position.length&&0!=t.position[0]||(t.position=t.center,t.geocoder.getAddress(t.position,(function(e,a){"complete"===e&&"OK"===a.info&&(t.address=a.regeocode.formattedAddress)})),t.getData());break;case"polygonList":0==t.polygonList.length&&(t.polygonList=[{strokeColor:"#2b85e4",path:[[t.center[0]-.01,t.center[1]+.01],[t.center[0]+.01,t.center[1]+.01],[t.center[0]+.01,t.center[1]-.01],[t.center[0]-.01,t.center[1]-.01]]}],t.getData());break;case"polygonFee":0==t.polygonFee.length&&(t.polygonFee=[{name:"默认",price:"",fee:"",strokeColor:"#2b85e4",path:[[t.center[0]-.01,t.center[1]+.01],[t.center[0]+.01,t.center[1]+.01],[t.center[0]+.01,t.center[1]-.01],[t.center[0]-.01,t.center[1]-.01]]}],t.getData())}t.$nextTick()}}))}}}],contentRender:function(e){return e(L,{style:{backgroundColor:"#fff"},props:{text:"here"}})}}},created:function(){},mounted:function(){switch(this.item.extra.mapType){case"postion":this.value&&2==this.value.length&&(this.position=this.value);break;case"postionAddress":this.value&&this.value.location&&this.value.address&&(this.position=this.value.location,this.address=this.value.address);break;case"polygonList":this.value&&(this.polygonList=this.value);break;case"polygonFee":if(this.value){for(var e=0;e<this.value.length;e++){for(var t=this.value[e].path,a=0;a<t.length;a++)t[a].lng&&(t[a]=[t[a].lng,t[a].lat]);this.value[e].path=t}this.polygonFee=this.value}}this.geocoder=new AMap.Geocoder({city:"全国"})},methods:{getLocationByAddress:function(){this.address||(alert("请输入地址"),retutn),S.getMap();var e=this;this.geocoder.getLocation(this.address,(function(t,a){"complete"===t&&"OK"===a.info?e.position=[a.geocodes[0].location.lng,a.geocodes[0].location.lat]:alert(a.info)}))},rowClick:function(e,t){this.polygonFeeActive=t},getData:function(){if("position"==this.item.extra.mapType&&(this.value=this.position),"positionAddress"==this.item.extra.mapType&&(this.value={location:this.position,address:this.address}),"polygonList"==this.item.extra.mapType&&(this.value=this.polygonList),"polygonFee"==this.item.extra.mapType){this.value=this.polygonFee;for(var e=0;e<this.value.length;e++){for(var t=this.value[e].path,a=0;a<t.length;a++)t[a].lng&&(t[a]=[t[a].lng,t[a].lat]);this.value[e].path=t}}this.$emit("input",this.value)},addPolygon:function(){this.polygonList.push({strokeColor:"#2b85e4",path:[[this.center[0]-.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]-.01],[this.center[0]-.01,this.center[1]-.01]]})},addPolygonFee:function(){this.polygonFee.push({name:"",price:"",fee:"",strokeColor:"#2b85e4",path:[[this.center[0]-.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]-.01],[this.center[0]-.01,this.center[1]-.01]]})},restPolygonFee:function(){var e=this.polygonFee;e[this.polygonFeeActive].path=[[this.center[0]-.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]+.01],[this.center[0]+.01,this.center[1]-.01],[this.center[0]-.01,this.center[1]-.01]],this.polygonFee=e},deleteFee:function(e){this.polygonFee.splice(e,1)},getMap:function(){}},watch:{}};function T(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function B(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function r(e){T(o,i,n,r,s,"next",e)}function s(e){T(o,i,n,r,s,"throw",e)}r(void 0)}))}}var F,M;i={name:"XyBuilderFormItem",components:{XyBuilderFormImage:c,XyBuilderFormPoster:p,XyBuilderFormSku:o,XyBuilderFormSkuPrice:m,XyBuilderFormFee:i,XyBuilderFormAmap:Object(d.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["polygonFee"==e.item.extra.mapType?a("div",{staticClass:"fee-list"},[a("el-table",{attrs:{border:"","highlight-current-row":"",data:e.polygonFee},on:{"row-click":e.rowClick}},e._l(e.polygonFeeColumns,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.width||"","min-width":t.minWidth||""},scopedSlots:e._u([{key:"default",fn:function(i){return["input"==t.type?[a("el-input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.polygonFee[i.$index][t.name],callback:function(a){e.$set(e.polygonFee[i.$index],t.name,a)},expression:"polygonFee[scope.$index][coco.name]"}})]:"buttons"==t.type?[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.deleteFee(i.$index)}}},[e._v("删除")])]:[e._v(" "+e._s(e.polygonFee[i.$index][t.name])+" ")]]}}],null,!0)})})),1)],1):e._e(),"positionAddress"==e.item.extra.mapType?a("div",{staticClass:"m-b-sm flex"},[a("el-input",{staticClass:"m-r-sm",attrs:{size:"medium",type:"input",name:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),a("el-button",{attrs:{size:"medium",type:"default"},on:{click:function(t){return e.getLocationByAddress()}}},[e._v("定位")])],1):e._e(),a("el-amap",{staticClass:"amap-box",staticStyle:{height:"400px"},attrs:{vid:"amap-"+e.item.name,"amap-manager":e.amapManager,zoom:e.zoom,center:e.center,plugin:e.plugin,events:e.events}},["position"==e.item.extra.mapType||"positionAddress"==e.item.extra.mapType?a("el-amap-marker",{attrs:{vid:"marker-"+e.item.name,draggable:!0,position:e.position}}):e._e(),e._l(e.polygonList,(function(t,i){return"polygonList"==e.item.extra.mapType?a("el-amap-polygon",{key:"index",ref:"polygon-"+e.item.name+"_"+i,refInFor:!0,attrs:{vid:"polygon-"+e.item.name+"_"+i,path:t.path,strokeColor:t.strokeColor,fillColor:"white",fillOpacity:"0.5",draggable:!0,editable:!0}}):e._e()})),e._l(e.polygonFee,(function(t,i){return"polygonFee"==e.item.extra.mapType?a("el-amap-polygon",{key:"index",ref:"polygonFee_"+e.item.name+"_"+i,refInFor:!0,attrs:{vid:"polygonFee_"+e.item.name+"_"+i,path:t.path,strokeColor:e.polygonFeeActive==i?"red":t.strokeColor,fillColor:"white",fillOpacity:"0.5",draggable:!0,editable:!0,events:e.eventsPolygonFee}}):e._e()}))],2),a("div",{staticClass:"toolbar m-t-xs"},[e.loaded?e._e():a("span",[e._v("正在定位")]),("position"==e.item.extra.mapType||"positionAddress"==e.item.extra.mapType)&&0<this.position.length?a("span",[e._v(" 选中: lng = "+e._s(e.position[0])+" lat = "+e._s(e.position[1])+" ")]):e._e(),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.getData()}}},[e._v("保存变动")]),a("el-button",{staticClass:"m-l-sm",attrs:{size:"medium"},on:{click:function(t){return e.getMap()}}},[e._v("地图实例")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"polygonList"==e.item.extra.mapType,expression:"item.extra.mapType == 'polygonList'"}],staticClass:"m-l-sm",attrs:{size:"medium"},on:{click:function(t){return e.addPolygon()}}},[e._v("增加多边形区域")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"polygonFee"==e.item.extra.mapType,expression:"item.extra.mapType == 'polygonFee'"}],staticClass:"m-l-sm",attrs:{size:"medium"},on:{click:function(t){return e.addPolygonFee()}}},[e._v("增加配送区域")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"polygonFee"==e.item.extra.mapType,expression:"item.extra.mapType == 'polygonFee'"}],staticClass:"m-l-sm",attrs:{size:"medium"},on:{click:function(t){return e.restPolygonFee()}}},[e._v("重置当前区域")])],1)],1)}),[],!1,null,"6d85a5e6",null).exports,"tinymce-vue":a("ca72").a},props:{prop:"",cloudId:0,eid:0,item:{},formValues:{},formRules:{}},data:function(){var e=this;return{token:"",previewImageVisible:!1,previewImageUrl:"",cascaderProps:{lazy:!0,lazyLoad:function(t,a){t.level,setTimeout(B(n.a.mark((function i(){var o;return n.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.util.request({url:e.item.extra.action,data:{value:t.value},method:"get"});case 2:200==(o=i.sent).code?(nodes=o.data.dataList,a(nodes)):e.util.showToast({title:o.msg,icon:"loading",duration:3e3});case 4:case"end":return i.stop()}}),i)}))),2e3)}}}},beforeCreate:function(){},created:function(){this.token=this.$store.state.user.token},beforeMount:function(){},mounted:function(){},methods:{rightButtonModal:(M=B(n.a.mark((function e(t){var a,i,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.extra,o=i="",e.t0=a.pageData.modalType,e.next="list"===e.t0?6:9;break;case 6:case 9:return a.pageData.apiBlank=a.pageData.api+i+"?"+r.a.stringify(o),a.pageData.show=!0,e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)}))),function(e){return M.apply(this,arguments)}),filePickerCallback:function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.onchange=function(){var t,a=this.files[0],i=new FormData;i.append("files",a),(t=new XMLHttpRequest).withCredentials=!1,t.open("POST",this.item.extra.action),xht.setRequestHeader("Authorization",this.token),t.onload=function(){var a;200==t.status?(a=JSON.parse(t.responseText))&&"string"==typeof a.location?e(a.data.url):failure("Invalid JSON: "+t.responseText):failure("HTTP Error: "+t.status)},t.send(i)}},imagesUploadHandler:(F=B(n.a.mark((function e(t,a,i){var o,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new FormData,(o=new XMLHttpRequest).withCredentials=!1,"upload_oss"==this.item.extra.driver)return e.next=6,this.util.request({url:"/v1/upload_oss/index/sign",method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=10;break;case 6:200==(s=e.sent).code?(this.item.extra.action=s.data.params.host,s.data.params.key=s.data.params.key+Date.parse(new Date)/1e3+t.filename(),this.item.extra.data=s.data.params,o.open("POST",this.item.extra.action),r.append("key",this.item.extra.data.key),r.append("policy",this.item.extra.data.policy),r.append("OSSAccessKeyId",this.item.extra.data.OSSAccessKeyId),r.append("success_action_status",this.item.extra.data.success_action_status),r.append("signature",this.item.extra.data.signature),r.append("host",this.item.extra.data.host),r.append("expire",this.item.extra.data.expire),r.append("file",t.blob(),t.filename()),o.onload=function(){var e;200==o.status?(e=s.data.params.host+"/"+s.data.params.key,a(e)):i("HTTP Error: "+o.status)},o.send(r)):this.$Notice.warning({title:s.msg}),e.next=11;break;case 10:"upload_smms"==this.item.extra.driver?(this.item.extra.action="https://sm.ms/api/v2/upload",this.item.extra.data={format:"json"},o.open("POST",this.item.extra.action),o.setRequestHeader("Authorization","R7aVy1OLZJ1pMgWyjBkdOz9Dyh7nSFm2"),r.append("smfile",t.blob(),t.filename()),r.append("format",this.item.extra.data.format),o.onload=function(){var e;200==o.status?"success"==(e=JSON.parse(o.responseText)).code?a(e.data.url):i(e.message):i("HTTP Error: "+o.status)}):(o.open("POST",this.item.extra.action),o.setRequestHeader("Authorization",this.token),r.append("file",t.blob(),t.filename()),o.onload=function(){var e;200==o.status?(e=JSON.parse(o.responseText))&&"string"==typeof e.data.url?a(e.data.url):i("Invalid JSON: "+o.responseText):i("HTTP Error: "+o.status)}),o.send(r);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return F.apply(this,arguments)}),handleView:function(e){this.previewImageUrl=e,this.previewImageVisible=!0},formlistAddrow:function(e){this.formValues[e].push(new Object)},formlistDelrow:function(e,t){this.formValues[e].splice(t,1)},getChecked:function(e){return this.$refs["checkboxtree_"+this.item.name].getCheckedProp(e)},formatDates:function(e,t){return[this.util.formatDate(e[0],t),this.util.formatDate(e[1],t)]}},watch:{item:function(){}}},a("1e5c"),u=Object(d.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"builder-form-item"},["tabs"==e.item.type?[a("el-tabs",{attrs:{value:e.item.extra.options[0].name,animated:!1}},[e._l(e.item.extra.options,(function(t,i){return[a("el-tab-pane",{key:i+"_"+t.name,attrs:{label:t.title,name:t.name}},[e._l(t.options,(function(i,n){return[a("XyBuilderFormItem",{key:n,ref:"formitemtab_"+t.name+"_"+i.name,refInFor:!0,attrs:{item:i,formValues:e.formValues,formRules:e.formRules,cloudId:e.cloudId,eid:e.eid,prop:e.item.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]}))],2)]}))],2)]:a("el-form-item",{attrs:{label:e.item.title,prop:e.prop,rules:e.formRules[e.item.name]?e.formRules[e.item.name]:[]}},["divider"==e.item.type?[a("el-divider")]:"hidden"==e.item.type?[a("span",{staticClass:"hidden"},[e._v(e._s(e.item.value))])]:"static"==e.item.type?[a("span",[e._v(e._s(e.item.value))]),a("el-input",{staticClass:"hidden",attrs:{disabled:e.item.extra.disabled,placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"staticUrl"==e.item.type?[a("a",{attrs:{href:e.item.value,target:"_blank"}},[e._v(e._s(e.item.extra.placeholder))])]:"text"==e.item.type?[a("el-input",{attrs:{disabled:e.item.extra.disabled,placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"password"==e.item.type?[a("el-input",{attrs:{disabled:e.item.extra.disabled,type:"password",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"url"==e.item.type?[a("el-input",{attrs:{disabled:e.item.extra.disabled,type:"url",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"email"==e.item.type?[a("el-input",{attrs:{disabled:e.item.extra.disabled,type:"email",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"number"==e.item.type?[a("el-input",{attrs:{disabled:e.item.extra.disabled,type:"number",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"digit"==e.item.type?[a("el-input",{attrs:{disabled:e.item.extra.disabled,type:"text",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"tel"==e.item.type?[a("el-input",{attrs:{disabled:e.item.extra.disabled,type:"tel",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"textarea"==e.item.type||"array"==e.item.type?[a("el-input",{attrs:{disabled:e.item.extra.disabled,type:"textarea",autosize:{minRows:e.item.extra.minRows?e.item.extra.minRows:3,maxRows:e.item.extra.maxRows?e.item.extra.maxRows:10},placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"select"==e.item.type?[a("el-select",{staticClass:"full",attrs:{filterable:!0,disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},e._l(e.item.extra.options,(function(e,t,i){return a("el-option",{key:i,attrs:{label:e.title,value:e.value}})})),1)]:"selects"==e.item.type?[a("el-select",{staticClass:"full",attrs:{filterable:!0,multiple:!0,disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},e._l(e.item.extra.options,(function(e,t,i){return a("el-option",{key:i,attrs:{label:e.title,value:e.value}})})),1)]:"radio"==e.item.type?[a("el-radio-group",{model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},e._l(e.item.extra.options,(function(t,i,n){return a("el-radio",{key:n,attrs:{disabled:e.item.extra.disabled,label:t.value}},[t.icon?a("i",{class:t.icon}):e._e(),a("span",[e._v(e._s(t.title))])])})),1)]:"checkbox"==e.item.type?[a("el-checkbox-group",{model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},e._l(e.item.extra.options,(function(t,i,n){return a("el-checkbox",{key:n,attrs:{disabled:e.item.extra.disabled,label:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"switch"==e.item.type?[a("el-switch",{attrs:{disabled:e.item.extra.disabled,"active-value":e.item.extra.options[1].value,"active-text":e.item.extra.options[1].title,"inactive-value":e.item.extra.options[0].value,"inactive-text":e.item.extra.options[0].title},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"slider"==e.item.type?[a("el-slider",{attrs:{disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"datepicker"==e.item.type?[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",disabled:e.item.extra.disabled,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"datetimepicker"==e.item.type?[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",disabled:e.item.extra.disabled,format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"daterangepicker"==e.item.type?[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",disabled:e.item.extra.disabled,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"datetimerangepicker"==e.item.type?[a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",disabled:e.item.extra.disabled,format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"timepicker"==e.item.type?[a("el-time-select",{attrs:{type:"time",placeholder:"选择时间",disabled:e.item.extra.disabled,"value-format":e.item.extra.format?e.item.extra.format:"HH:mm:ss"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"timerangepicker"==e.item.type?[a("el-time-select",{attrs:{type:"timerange","is-range":"",placeholder:"选择时间区间",disabled:e.item.extra.disabled,"value-format":e.item.extra.format?e.item.extra.format:"HH:mm:ss"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"rate"==e.item.type?[a("el-rate",{attrs:{disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"cascader"==e.item.type||"region"==e.item.type?[a("el-cascader",{attrs:{disabled:e.item.extra.disabled,data:e.item.extra.options,prop:e.cascaderProps,size:"default"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"colorpicker"==e.item.type?[a("el-color-picker",{attrs:{disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"image"==e.item.type?[a("XyBuilderFormImage",{attrs:{item:e.item,img:{name:"",title:""},cloudId:e.cloudId,eid:e.eid,token:e.token},on:{handleView:e.handleView,"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"imageflex"==e.item.type?[a("div",{staticStyle:{display:"flex"}},e._l(e.item.extra.options,(function(t,i){return a("div",{key:i,staticStyle:{"padding-right":"15px"}},[a("XyBuilderFormImage",{attrs:{item:e.item,img:t,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{handleView:e.handleView,"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name][t.value],callback:function(a){e.$set(e.formValues[e.item.name],t.value,a)},expression:"formValues[item.name][img.value]"}})],1)})),0)]:"images"==e.item.type?[a("XyBuilderFormImage",{attrs:{uploadType:"images",item:e.item,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{handleView:e.handleView,"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"file"==e.item.type?[a("XyBuilderFormFile",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"files"==e.item.type?[a("XyBuilderFormFiles",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"poster"==e.item.type?[a("XyBuilderFormPoster",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"selectlist"==e.item.type?[e._v(" "+e._s(e.formValues[e.item.name])+" "),a("a",{staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},on:{click:function(t){return e.rightButtonModal(e.item)}}},[e._v(" 点击选择 ")]),a("el-dialog",{attrs:{"append-to-body":!0,visible:e.item.extra.pageData.show,width:e.item.extra.pageData.width?e.item.extra.pageData.width:600,title:e.item.extra.pageData.title},on:{"update:visible":function(t){return e.$set(e.item.extra.pageData,"show",t)}}},[a("XyBuilderList",{ref:"listselect_"+e.item.name,attrs:{showActions:!0,cloudId:e.cloudId,eid:e.eid,api:e.item.extra.pageData.apiBlank,show:e.item.extra.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t},"close-model":function(t){e.item.extra.pageData.show=!1}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})],1)]:"formlist"==e.item.type?[a("el-row",e._l(e.item.extra.options,(function(t,i,n){return a("div",{key:n},[a("el-col",{attrs:{span:t.span}},[e._v(" "+e._s(t.title)+" ")])],1)})),0),e._l(e.formValues[e.item.name],(function(t,i,n){return a("el-row",{key:n},[e._l(e.item.extra.options,(function(t,n,o){return a("div",{key:o},[a("el-col",{attrs:{span:t.span}},[e.item.extra.options[n].type&&"text"==e.item.extra.options[n].type||e.item.extra.options[n].type&&"switch"==e.item.extra.options[n].type?[a("el-input",{model:{value:e.formValues[e.item.name][i][t.key],callback:function(a){e.$set(e.formValues[e.item.name][i],t.key,a)},expression:"formValues[item.name][key2][item3.key]"}})]:e.item.extra.options[n].type&&"datetimepicker"==e.item.extra.options[n].type?[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",disabled:e.item.extra.disabled,format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.formValues[e.item.name][i][t.key],callback:function(a){e.$set(e.formValues[e.item.name][i],t.key,a)},expression:"formValues[item.name][key2][item3.key]"}})]:[a("el-input",{model:{value:e.formValues[e.item.name][i][t.key],callback:function(a){e.$set(e.formValues[e.item.name][i],t.key,a)},expression:"formValues[item.name][key2][item3.key]"}})]],2)],1)})),a("Button",{attrs:{type:"dashed"},on:{click:function(t){return e.formlistDelrow(e.item.name,i)}}},[e._v("删除")])],2)})),a("el-button",{staticStyle:{"margin-top":"8px"},attrs:{type:"dashed",icon:"md-add"},on:{click:function(t){return e.formlistAddrow(e.item.name)}}},[e._v(" 增加一行 ")])]:"datalist"==e.item.type?[a("XyBuilderList",{ref:"list_"+e.item.name,attrs:{cloudId:e.cloudId,eid:e.eid,api:e.item.extra.pageData.apiBlank,show:e.item.extra.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:"checkboxtree"==e.item.type?void 0:"markdown"==e.item.type?[a("div",[a("mavon-editor",{staticStyle:{"min-height":"500px"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})],1)]:"html"==e.item.type||"tinymce"==e.item.type?[a("tinymce-vue",{attrs:{"api-key":"y1buzf80o0qtt4lt3pfj0yh98ilgq4ts6mf3nwjpqky9ea49",init:{external_plugins:{},ui_container:".builder-form-item",fixed_toolbar_container:!0,init_instance_callback:function(e){},default_link_target:"_blank",paste_data_images:!0,images_upload_url:e.item.extra.action,automatic_uploads:!0,file_picker_types:"file image media",file_picker_callback:e.filePickerCallback,images_upload_handler:e.imagesUploadHandler,language_url:"https://cdn.jsdelivr.net/gh/starideas/xyfront/libs/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:e.item.extra.skin,theme:"silver",branding:!0,plugins:"link lists image code table wordcount fullscreen emoticons print codesample",toolbar:"formatselect fontselect fontsizeselect | link image blockquote codesample | bold italic underline strikethrough | forecolor backcolor  bullist numlist | code fullscreen",height:600,convert_urls:!1,font_formats:"\n                      微软雅黑=微软雅黑;\n                      宋体=宋体;\n                      黑体=黑体;\n                      仿宋=仿宋;\n                      楷体=楷体;\n                      隶书=隶书;\n                      幼圆=幼圆;\n                      Andale Mono=andale mono,times;\n                      Arial=arial, helvetica,\n                      sans-serif;\n                      Arial Black=arial black, avant garde;\n                      Book Antiqua=book antiqua,palatino;\n                      Comic Sans MS=comic sans ms,sans-serif;\n                      Courier New=courier new,courier;\n                      Georgia=georgia,palatino;\n                      Helvetica=helvetica;\n                      Impact=impact,chicago;\n                      Symbol=symbol;\n                      Tahoma=tahoma,arial,helvetica,sans-serif;\n                      Terminal=terminal,monaco;\n                      Times New Roman=times new roman,times;\n                      Trebuchet MS=trebuchet ms,geneva;\n                      Verdana=verdana,geneva;\n                      Webdings=webdings;\n                      Wingdings=wingdings,zapf dingbats"}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"sku"==e.item.type?[a("XyBuilderFormSku",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"skuPrice"==e.item.type?[a("XyBuilderFormSkuPrice",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,formValues:e.formValues},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"fee"==e.item.type?[a("XyBuilderFormFee",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,formValues:e.formValues},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"amap"==e.item.type?[a("XyBuilderFormAmap",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,formValues:e.formValues},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:[a("el-input",{attrs:{disabled:e.item.extra.disabled,placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})],a("el-dialog",{attrs:{title:"预览",visible:e.previewImageVisible},on:{"update:visible":function(t){e.previewImageVisible=t}}},[e.previewImageVisible?a("img",{staticStyle:{width:"100%"},attrs:{src:e.previewImageUrl}}):e._e()]),a("div",{staticStyle:{color:"#aaa","font-size":"12px"}},[e._v(e._s(e.item.extra.tip))])],2)],2)}),[],!1,null,null,null).exports;function P(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var A,z;i={name:"xySendVerify",props:{noNeedAccount:{type:Boolean,default:!1},account:{type:String,default:""},title:{type:String,default:""},url:{type:String,default:"/v1/sms/verify/send"},type:{type:String,default:"手机号"},time:{type:Number,default:30}},data:function(){return{label:"发送验证码",timeLeft:0}},created:function(){},methods:{sendVerify:(A=n.a.mark((function e(){var t,a,i=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0<this.timeLeft)return e.abrupt("return");e.next=2;break;case 2:if(this.account||this.noNeedAccount){e.next=5;break}return this.util.showToast({title:"请输入"+this.type,icon:"loading",duration:1e3}),e.abrupt("return",!1);case 5:return this.timeLeft=this.time,this.label="剩余"+this.timeLeft+"s",t=setInterval((function(){i.timeLeft--,i.timeLeft<=0?(i.label="发送验证码",i.timeLeft=0,clearInterval(t)):i.label="剩余"+i.timeLeft+"s"}),1e3),a={},a="手机号"==this.type?{mobile:this.account,title:this.title}:{email:this.account,title:this.title},e.next=12,this.util.request({url:this.url,data:a,method:"post"});case 12:"200"==(a=e.sent).code?(this.util.showToast({title:a.msg,icon:"success",duration:1e3}),this.$emit("verifysuccess",a.data)):this.util.showToast({title:a.msg,icon:"loading",duration:2e3});case 14:case"end":return e.stop()}}),e,this)})),z=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=A.apply(e,t);function o(e){P(n,a,i,o,r,"next",e)}function r(e){P(n,a,i,o,r,"throw",e)}o(void 0)}))},function(){return z.apply(this,arguments)})}};function O(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var X,E;i={name:"xySafetyVerify",components:{XySendVerify:Object(d.a)(i,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("div",{staticClass:"send-verify p-l-xs p-r-xs"},[t("el-button",{attrs:{type:"text"},on:{click:e.sendVerify}},[e._v(e._s(e.label))])],1)}),[],!1,null,"683cebec",null).exports},props:{value:{type:[String,Object],default:""}},data:function(){return{dialogVisible:!1,verifyList:[],loading:!1,form:{paypwd:"",password:"",emailVerify:"",emailToken:"",mobileVerify:"",mobileToken:"",gauth:""},rule:{}}},created:function(){},methods:{getVerifyToken:function(e){this.form.emailToken=e.token},getMobileVerifyToken:function(e){this.form.mobileToken=e.token},open:function(e){this.verifyList=e,this.getRule(),this.dialogVisible=!0},eclose:function(){this.$emit("cancel")},close:function(){this.dialogVisible=!1},handleSubmit:(X=n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loading=!0,t=this,setTimeout((function(){t.loading=!1}),5e3),this.$emit("input",this.form),this.$emit("verify-request"),this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})),E=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=X.apply(e,t);function o(e){O(n,a,i,o,r,"next",e)}function r(e){O(n,a,i,o,r,"throw",e)}o(void 0)}))},function(){return E.apply(this,arguments)}),getRule:function(){for(var e in this.verifyList)switch(this.verifyList[e]){case"email":this.rule.email=[{required:!0,message:"请填写邮箱验证码",trigger:"blur"},{type:"string",min:6,message:"至少6位",trigger:"blur"}];break;case"mobile":this.rule.mobile=[{required:!0,message:"请填写手机验证码",trigger:"blur"},{type:"string",min:6,message:"至少6位",trigger:"blur"}];break;case"gauth":this.rule.gauth=[{required:!0,message:"请填写谷歌验证码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}];break;case"paypwd":this.rule.paypwd=[{required:!0,message:"请填写支付密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}];break;case"password":this.rule.password=[{required:!0,message:"请填写登录密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}}};function N(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return q(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw n}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function R(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function j(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function r(e){R(o,i,n,r,s,"next",e)}function s(e){R(o,i,n,r,s,"throw",e)}r(void 0)}))}}var H,U;i={name:"XyBuilderForm",components:{XyBuilderformItem:u,XySafetyVerify:Object(d.a)(i,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("el-dialog",{attrs:{"append-to-body":"",title:"安全验证",visible:e.dialogVisible,width:"450px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.eclose}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule}},[0<=e.verifyList.indexOf("email")?t("el-form-item",{attrs:{label:"邮箱验证码",prop:"emailVerify"}},[t("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:e.form.emailVerify,callback:function(t){e.$set(e.form,"emailVerify",t)},expression:"form.emailVerify"}},[t("XySendVerify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"安全验证"},on:{verifysuccess:e.getVerifyToken},slot:"append"})],1)],1):e._e(),0<=e.verifyList.indexOf("mobile")?t("el-form-item",{attrs:{label:"手机验证码",prop:"mobileVerify"}},[t("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:e.form.mobileVerify,callback:function(t){e.$set(e.form,"mobileVerify",t)},expression:"form.mobileVerify"}},[t("XySendVerify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"安全验证"},on:{verifysuccess:e.getMobileVerifyToken},slot:"append"})],1)],1):e._e(),0<=e.verifyList.indexOf("gauth")?t("el-form-item",{attrs:{label:"谷歌验证码",prop:"gauth"}},[t("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:e.form.gauth,callback:function(t){e.$set(e.form,"gauth",t)},expression:"form.gauth"}})],1):e._e(),0<=e.verifyList.indexOf("paypwd")?t("el-form-item",{attrs:{label:"支付密码",prop:"paypwd"}},[t("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入6-18位支付密码"},model:{value:e.form.paypwd,callback:function(t){e.$set(e.form,"paypwd",t)},expression:"form.paypwd"}})],1):e._e(),0<=e.verifyList.indexOf("password")?t("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[t("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),t("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:e.loading,type:"primary"},on:{click:function(t){return e.handleSubmit("form")}}},[e._v(" 确认 ")])],1)],1)}),[],!1,null,"f29c9890",null).exports},props:{api:"",cloudId:0,eid:0,show:!1,predata:""},data:function(){return{loading:!1,subloading:!1,ref:"form",formData:"",labelPosition:"left",labelWidth:"100px",res:{},addNext:!1,verifyData:""}},created:function(){this.ref="form_"+(new Date).getTime(),this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata&&(this.formData=this.predata)},beforeMount:function(){},mounted:function(){this.loadData()},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},computed:{},watch:{"formData.formValues":{handler:function(e){for(var t in this.formData.formItems)if(this.formData.formItems[t].extra.con){var a,i=this.formData.formItems[t].extra.con,n=0;for(a in i)switch(i[a][1]){case"=":e[i[a][0]]===i[a][2]&&n++;break;case">":e[i[a][0]]>i[a][2]&&n++;break;case">=":e[i[a][0]]>=i[a][2]&&n++;break;case"<":e[i[a][0]]<i[a][2]&&n++;break;case"<=":e[i[a][0]]<=i[a][2]&&n++;break;case"in":in_array(e[i[a][0]],i[a][2])&&n++;break;case"has":in_array(i[a][2],e[i[a][0]]);break;case"between":i[a][2][0]<e[i[a][0]]<i[a][2][1]&&n++}n===i.length?this.formData.formItems[t].extra.hide=!1:this.formData.formItems[t].extra.hide=!0}},deep:!0,immediate:!0},show:function(e){1==e&&this.loadData()}},methods:{in_array:function(e,t){for(var a in t)if(t[a]==e)return!0;return!1},loadData:(U=j(n.a.mark((function e(){var t,a,i,o=this,r=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<r.length&&void 0!==r[0]?r[0]:"",this.loading=!0,a=this,setTimeout((function(){a.loading=!1}),5e3),""!=t&&(this.api=t),this.api)return e.next=8,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=11;break;case 8:i=e.sent,this.loading=!1,"200"==i.code?(i.data.formData.config||(i.data.formData.config={}),i.data.formData.formItems.forEach((function(e){switch(e.type){case"radio":break;case"checkbox":"string"==typeof i.data.formData.formValues[e.name]&&(i.data.formData.formValues[e.name]=i.data.formData.formValues[e.name].split(","));break;case"imageflex":if(i.data.formData.formValues[e.name]&&i.data.formData.formValues[e.name].constructor!==Object){var t,a={},n=N(e.extra.options);try{for(n.s();!(t=n.n()).done;)a[t.value.value]=""}catch(e){n.e(e)}finally{n.f()}i.data.formData.formValues[e.name]=a}break;case"datepicker":i.data.formData.formValues[e.name]=o.util.formatDate(i.data.formData.formValues[e.name],"yyyy-MM-dd");break;case"datetimepicker":i.data.formData.formValues[e.name]=o.util.formatDate(i.data.formData.formValues[e.name],"yyyy-MM-dd HH:mm");break;case"daterangepicker":i.data.formData.formValues[e.name]=o.formatDates(i.data.formData.formValues[e.name],"yyyy-MM-dd");break;case"datetimerangepicker":i.data.formData.formValues[e.name]=o.formatDates(i.data.formData.formValues[e.name],"yyyy-MM-dd HH:mm")}})),this.formData=i.data.formData):this.res=i;case 11:case"end":return e.stop()}}),e,this)}))),function(){return U.apply(this,arguments)}),submit:function(){var e=this;this.subloading=!0;var t=this;setTimeout((function(){t.subloading=!1}),5e3);var a=!1;if(0==this.formData.formRules.length)a=!0;else if(0<this.formData.formTabs.length){for(var i="",n=0;n<this.formData.formTabs.length;n++)this.$refs[this.ref+"_"+this.formData.formTabs[n].name][0].validate((function(e){i+=e?"true":"false"}));-1==i.search("false")&&(a=!0)}else this.$refs[this.ref].validate((function(t){t?a=!0:e.$store.state.app.uiAudio&&((t=new Audio).src="/audio/alert.wav",t.play())}));return a?this.submitForm():this.subloading=!1},submitForm:(H=j(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.formData.formValues,this.verifyData&&(t._verify=this.verifyData),e.next=4,this.util.request({url:this.api,method:this.formData.formMethod,data:t,header:{CloudId:this.cloudId,Eid:this.eid}});case 4:if("200"==(t=e.sent).code)if(this.verifyData="",this.util.showToast({title:t.msg,icon:"success",duration:1e3}),t.data.url)0!=t.data.url.indexOf("http")?this.$router.push(t.data.url):window.open(t.data.url);else if(this.addNext)if(0<this.formData.formTabs.length)for(a=0;a<this.formData.formTabs.length;a++)this.$refs[this.ref+"_"+this.formData.formTabs[a].name][0].resetFields();else this.$refs[this.ref].resetFields();else this.$refs.sv.close(),this.$emit("close-model",!0);else 401003==t.code?this.$refs.sv.open(t.data.verifyList):this.res=t;return this.subloading=!1,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return H.apply(this,arguments)}),cancel:function(){this.$emit("close-model",!1)}}},a("28a6"),i=Object(d.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"form-wrapper",attrs:{"element-loading-text":"拼命加载中"}},[""!=e.formData?a("div",[e.formData.alertList&&e.formData.alertList.top?e._l(e.formData.alertList.top,(function(t,i){return a("el-alert",{key:i,attrs:{type:t.type,"show-icon":!1,effect:"dark",closable:"false"}},[a("div",{domProps:{innerHTML:e._s(t.desc)}},[e._v(e._s(t.desc))])])})):e._e(),0<e.formData.formTabs.length?[a("el-tabs",{attrs:{value:e.formData.formTabs[0].name}},[e._l(e.formData.formTabs,(function(t,i){return[null!=t.formItems?a("el-tab-pane",{key:i+"_"+t.name,attrs:{label:t.title,name:t.name}},[a("el-form",{ref:e.ref+"_"+t.name,refInFor:!0,attrs:{model:e.formData.formValues[t.name].tabValues,"label-position":e.labelPosition,"label-width":e.labelWidth+""},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(t.formItems,(function(i,n){return[i.extra.hide||i.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:n,ref:"formitem_"+t.name+"_"+i.name,refInFor:!0,attrs:{item:i,formValues:e.formData.formValues[t.name].tabValues,cloudId:e.cloudId,eid:e.eid,prop:i.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]}))],2)],1):e._e()]})),e._v("> ")],2)]:[a("el-form",{ref:e.ref,attrs:{size:"medium",model:e.formData.formValues,"status-icon":!0,"label-position":e.formData.config.labelPosition||e.labelPosition,"label-width":e.formData.config.labelWidth||e.labelWidth},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-row",{attrs:{type:"flex",gutter:0}},[a("el-col",{staticClass:"form-bottom",attrs:{span:24}},[e._l(e.formData.formItems,(function(t,i){return[""==t.extra.position?[t.extra.hide||t.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:i,ref:"formitem_"+t.name,refInFor:!0,attrs:{item:t,formValues:e.formData.formValues,formRules:e.formData.formRules,cloudId:e.cloudId,eid:e.eid,prop:t.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()]}))],2)],1),a("el-row",{staticClass:"form-label-top",attrs:{type:"flex",gutter:0}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:17}},[e._l(e.formData.formItems,(function(t,i){return["left"==t.extra.position?[t.extra.hide||t.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:i,ref:"formitem_"+t.name,refInFor:!0,attrs:{item:t,formValues:e.formData.formValues,formRules:e.formData.formRules,cloudId:e.cloudId,eid:e.eid,prop:t.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()]}))],2),a("el-col",{staticClass:"form-left",attrs:{xs:24,sm:18,md:24,lg:1}},[a("div",{staticStyle:{width:"1px",height:"100%","background-color":"#e8eaec","margin-left":"23px"}})]),a("el-col",{staticClass:"form-right",attrs:{xs:24,sm:18,md:24,lg:6}},[e._l(e.formData.formItems,(function(t,i){return["right"==t.extra.position?[t.extra.hide||t.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:i,ref:"formitem_"+t.name,refInFor:!0,attrs:{item:t,formValues:e.formData.formValues,formRules:e.formData.formRules,cloudId:e.cloudId,eid:e.eid,prop:t.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()]}))],2)],1),a("el-row",{attrs:{type:"flex",gutter:0}},[a("el-col",{staticClass:"form-bottom",attrs:{span:24}},[e._l(e.formData.formItems,(function(t,i){return["bottom"==t.extra.position?[t.extra.hide||t.extra.isDev&&!e.showDev?e._e():a("XyBuilderformItem",{key:i,ref:"formitem_"+t.name,refInFor:!0,attrs:{item:t,formValues:e.formData.formValues,formRules:e.formData.formRules,cloudId:e.cloudId,eid:e.eid,prop:t.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:e._e()]}))],2)],1)],1)],e.formData.alertList&&e.formData.alertList.bottom?e._l(e.formData.alertList.bottom,(function(t,i){return a("el-alert",{key:i,attrs:{type:t.type,"show-icon":!1,closable:"false",effect:"dark"}},[a("div",{domProps:{innerHTML:e._s(t.desc)}})])})):e._e(),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.res.msg,expression:"res.msg"}],attrs:{type:"error","show-icon":"",closable:""},on:{"on-close":function(t){e.res={}}}},[e._v(e._s(e.res.msg))]),a("div",{staticClass:"m-t m-b flex footer-buttons"},[a("div",{staticClass:"item",style:{width:e.formData.config.footerButtonLength||"120px"}},[a("el-button",{staticClass:"full",attrs:{loading:e.subloading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v(" "+e._s(e.formData.config.submitButtonTitle||"确认")+" ")])],1),a("div",{staticClass:"item",style:{width:e.formData.config.footerButtonLength||"120px"}},[a("el-button",{staticClass:"full",attrs:{type:"default"},on:{click:function(t){return e.cancel()}}},[e._v(" "+e._s(e.formData.config.submitCancelTitle||"取消")+" ")])],1)]),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:this.formData.config.continue&&"post"==this.formData.formMethod,expression:"this.formData.config.continue && this.formData.formMethod == 'post'"}],model:{value:e.addNext,callback:function(t){e.addNext=t},expression:"addNext"}},[e._v("继续录入下一条")])],2):e._e(),a("XySafetyVerify",{ref:"sv",on:{"verify-request":e.submitForm},model:{value:e.verifyData,callback:function(t){e.verifyData=t},expression:"verifyData"}})],1)}),[],!1,null,"028b4bbf",null);t.default=i.exports},"4fef":function(e,t,a){"use strict";var i=a("a331");a.n(i).a},5180:function(e,t,a){},5804:function(e,t,a){},"5b7f":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}i={name:"File",props:{item:{},value:[],token:"",cloudId:0,eid:0},data:function(){return{}},created:function(){""==this.item.value&&(this.item.value=new Array),""==this.value&&(this.value=new Array)},beforeMount:function(){},methods:{handleView:function(){},handleSuccessBatch:function(e,t,a){"upload_oss"==this.item.extra.driver?(t.url=this.item.extra.data.host+"/"+this.item.extra.data.key,this.value.push({name:t.name,url:t.url}),this.item.value=a):200==e.code?(t.url=e.data.url,this.value.push({name:t.name,url:t.url}),this.item.value=a):this.$Notice.warning({title:e.msg}),this.$emit("input",this.value)},handleRemoveBatch:function(e){var t=this.value;this.item.value.splice(t.indexOf(e),1),this.value.splice(t.indexOf(e),1)},handleBeforeUpload:function(e){var t=this;if("upload_oss"==t.item.extra.driver)return new Promise(function(){var a,i=(a=n.a.mark((function a(i,o){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.util.request({url:"/v1/upload_oss/index/sign",method:"get",header:{CloudId:t.cloudId,Eid:t.eid}});case 2:200==(r=a.sent).code?(t.item.extra.action=r.data.params.host,r.data.params.key=r.data.params.key+e.name,t.item.extra.data=r.data.params,i()):t.$Notice.warning({title:r.msg});case 4:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(i,n){var r=a.apply(e,t);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))});return function(e,t){return i.apply(this,arguments)}}())},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件"+e.name+"的格式不正确, 请重新选择。"})},handleMaxSize:function(e){this.$Notice.warning({title:"文件大小不正确",desc:"文件"+e.name+"太大了, 不支持超过1M。"})}},watch:{}},a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("div",[t("Upload",{ref:"upload_"+e.item.name,attrs:{"show-upload-list":!0,headers:{Authorization:e.token},"default-file-list":e.item.value,format:e.item.extra.format,"max-size":e.item.extra.maxSize,"on-success":e.handleSuccessBatch,"on-remove":e.handleRemoveBatch,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,data:e.item.extra.data,type:"drag",action:e.item.extra.action}},[t("div",{staticStyle:{padding:"20px 0"}},[t("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"42"}}),t("p",[e._v("点击或者拖动文件到此处上传")])],1)])],1)}),[],!1,null,null,null),t.default=i.exports},"5bd6":function(e,t,a){},"5d93":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var r,s,l={components:{"xy-title":a("6df9").a},name:"XyBuilderInfo",props:{api:"",cloudId:0,eid:0,show:!1,predata:""},data:function(){return{loading:!1,infoData:{infoList:""}}},watch:{show:function(e){this.infoData={},1==e&&this.loadData()}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return a.e("manifest").then(a.bind(null,"114b"))},this.$options.components.XyBuilderStack=function(){return a.e("manifest").then(a.bind(null,"396d"))}},created:function(){this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?this.infoData=this.predata:this.loadData()},methods:{loadData:(r=n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=0<a.length&&void 0!==a[0]?a[0]:"")&&(this.api=t),this.loading=!0,this.api)return e.next=6,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=8;break;case 6:"200"==(t=e.sent).code?(this.infoData=t.data.infoData,this.loading=!1):this.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=r.apply(e,t);function s(e){o(n,a,i,s,l,"next",e)}function l(e){o(n,a,i,s,l,"throw",e)}s(void 0)}))},function(){return s.apply(this,arguments)})}};a("7d8e"),i=a("2877"),l=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],staticClass:"xy_builder-info-wrap"},e._l(e.infoData.infoList,(function(t,i){return a("div",{key:i,staticClass:"item-group"},[a("xy-title",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"group.title"}],staticClass:"m-b-sm m-t"},[e._v(e._s(t.title))]),a("el-row",e._l(t.data,(function(t,i){return a("div",{key:i},["list"==t.type?a("el-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[a("div",[a("XyBuilderList",{ref:"xy_builder_info_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,show:!0,api:t.pageData?t.pageData.api:"",predata:t.value?t.value:""},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)]):"stack"==t.type?a("el-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[a("div",[a("XyBuilderStack",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,show:!0,api:t.pageData?t.pageData.api:"",predata:t.value?t.value:""},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)]):"count"==t.type?a("el-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[t.value?a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex",justify:"start",align:"top"}},e._l(t.value,(function(t,i){return a("el-col",{key:i,attrs:{xs:12,xl:t.item.xl?t.item.xl:6,xxl:4}},[a("el-row",{staticClass:"count-item",style:{backgroundColor:t.item.bgColor},attrs:{type:"flex",justify:"center",align:"top"}},[a("el-col",{staticClass:"left"},[a("i",{staticClass:"icon",class:t.item.icon}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.item.title,expression:"it.item.title"}]},[e._v(e._s(t.item.title))])]),a("el-col",{staticClass:"right",style:{backgroundColor:t.item.bgColorRight||"#fff",color:t.item.bgColorRight?"#fff":""}},[a("div",{staticClass:"value"},[a("span",[e._v(e._s(t.current.value))]),a("span",{staticClass:"suffix"},[e._v(e._s(t.current.suffix))])]),a("div",{staticClass:"title"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.content.value,expression:"it.content.value"}],staticClass:"value"},[e._v(e._s(t.content.value))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.content.list,expression:"it.content.list"}],staticClass:"list"},e._l(t.content.list,(function(t,i){return a("div",{key:i,staticClass:"cell"},[e._v(" "+e._s(t.title)+"："+e._s(t.value)+" ")])})),0)])])],1)],1)})),1):e._e()],1):a("el-col",{staticClass:"info-item",attrs:{xs:24,sm:{span:t.extra.sm.span?t.extra.sm.span:8,offset:t.extra.sm.offset?t.extra.sm.offset:0,pull:t.extra.sm.pull?t.extra.sm.pull:0,push:t.extra.sm.push?t.extra.sm.push:0}}},[a("div",{staticClass:"title"},[e._v(" "+e._s(t.title)+"： ")]),a("div",{staticClass:"value"},["text"==t.type?[a("span",[e._v(e._s(t.value))])]:"image"==t.type?[a("img",{attrs:{src:t.value,width:t.extra.width||"40px"}})]:"label"==t.type?[a("span",{style:{color:t.extra.options[t.value]&&t.extra.options[t.value].color||""}},[e._v(" "+e._s(t.extra.options[t.value]||t.value)+" ")])]:"tag"==t.type?[a("el-tag",{attrs:{hit:!1,effect:t.extra.options&&t.extra.options[e.item1]&&(t.extra.options[e.item1].effect||"light"),type:t.extra.options&&t.extra.options[e.item1]&&(t.extra.options[e.item1].type||""),color:t.extra.options[t.value]&&t.extra.options[t.value].color||""}},[e._v(" "+e._s(t.extra.options[t.value]||t.value)+" ")])]:"tags"==t.type?[e._l(t.value,(function(t){return[a("el-tag",{key:t,attrs:{hit:!1,effect:t.extra.options&&t.extra.options[t]&&(t.extra.options[t].effect||"light"),type:t.extra.options&&t.extra.options[t]&&(t.extra.options[t].type||""),color:t.extra.options&&t.extra.options[t]&&(t.extra.options[t].color||"")}},[e._v(" "+e._s(t.extra.options&&t.extra.options[t]&&t.extra.options[t].title||t)+" ")])]}))]:e._e(),"time"==t.type?[a("span",[e._v(e._s(t.value))])]:e._e(),"url"==t.type?[a("a",{attrs:{href:t.value,target:"_blank"}},[e._v(e._s(t.extra.placeholder))])]:e._e()],2)])],1)})),0)],1)})),0)}),[],!1,null,"372337b6",null);t.default=l.exports},"60fa":function(e,t,a){"use strict";var i=a("a048");a.n(i).a},"66aa":function(e,t,a){},"6b49":function(e,t,a){"use strict";var i=a("18e2");a.n(i).a},"6b80":function(e,t,a){"use strict";a.r(t);var i=a("26ff"),n=a("21b3");n={name:"XyBuilderTabRoute",components:{XyBuilderTab:i.default,BreadcurmbComp:n.default},data:function(){return{api:""}},created:function(){},beforeMount:function(){this.loadData()},methods:{loadData:function(){var e;"dytab"==this.$route.meta.dytype&&(0<(e=this).$route.params.length&&this.$route.params.forEach((function(t){e.$route.meta.api=e.$route.meta.api+"/"+e.$route.params[t]})),e.api=e.$route.meta.api)},refreshData:function(){this.$refs.xy_builder.loadData()}},watch:{$route:function(){}}},a=a("2877"),n=Object(a.a)(n,(function(){var e=this.$createElement;return(e=this._self._c||e)("Card",{attrs:{shadow:""}},[e("BreadcurmbComp",{on:{"refresh-page":this.refreshData}}),e("XyBuilderTab",{ref:"xy_builder",attrs:{api:this.api}})],1)}),[],!1,null,null,null);t.default=n.exports},"6dd8":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var r=e.apply(t,a);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))}}var s,l,u={props:{api:{type:String,default:function(){return null}}},data:function(){return{resData:null,cssId:null}},computed:{currentView:function(){if(!this.resData)return{template:"<div class='remoteInfo'>正在加载中。。。</div>"};var e=this.resolveStr(this.resData),t=new Function("return ".concat(e.sctipts.slice(e.sctipts.indexOf("{"),e.sctipts.lastIndexOf("}")+1)))();return t.template=e.templates,this.$el.setAttribute("class","remote css".concat(this.cssId)),document.querySelector("style[id=css".concat(this.cssId,"]"))||(e="\n                    .css".concat(this.cssId,"{\n                        ").concat(e.styles,"\n                    }\n                "),this.resolveCss(e)),t}},watch:{api:function(){this.getData()}},mounted:function(){this.getData()},methods:{getId:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)}))},resolveCss:function(e){less.render(e).then(function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("id","css"+this.cssId),t.styleSheet?t.styleSheet.cssText=e.css:(a=document.createTextNode(e.css),t.appendChild(a));var a=document.getElementsByTagName("head");(a.length?a[0]:document.documentElement).appendChild(t)}.bind(this))},resolveStr:function(e){return{templates:e.match(/<template>([\s\S]*)<\/template>/)[1],sctipts:e.match(/<script.*>([\s\S]*)<\/script>/)[1],styles:e.match(/<style.*>([\s\S]*)<\/style>/)[1]}},getData:(l=r(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get(this.$props.api);case 2:t=e.sent,this.cssId=this.getId(),this.resData=t.data;case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),loadData:(s=r(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})}};i=a("2877"),a={name:"XyBuilderRemoteRoute",components:{XyBuilderRemote:Object(i.a)(u,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("div",{staticClass:"remote"},[t(e.currentView,e._b({tag:"component"},"component",e.$props,!1))],1)}),[],!1,null,null,null).exports,BreadcurmbComp:a("21b3").default},data:function(){return{api:""}},created:function(){},beforeMount:function(){this.loadData()},methods:{loadData:function(){var e;"dyremote"==this.$route.meta.dytype&&(0<(e=this).$route.params.length&&this.$route.params.forEach((function(t){e.$route.meta.api=e.$route.meta.api+"/"+e.$route.params[t]})),e.api=e.$route.meta.api)},refreshData:function(){this.$refs.xy_builder.loadData()}},watch:{$route:function(){}}},a=Object(i.a)(a,(function(){var e=this.$createElement;return(e=this._self._c||e)("Card",{attrs:{shadow:""}},[e("BreadcurmbComp",{on:{"refresh-page":this.refreshData}}),e("XyBuilderRemote",{ref:"xy_builder",attrs:{api:this.api}})],1)}),[],!1,null,null,null);t.default=a.exports},"6df9":function(e,t,a){"use strict";var i={name:"xyTitle",props:{},data:function(){return{}},created:function(){},methods:{}};a("9b6b"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this.$createElement;return(e=this._self._c||e)("div",{staticClass:"xt-title flex"},[e("div",{staticClass:"prefix"}),this._t("default")],2)}),[],!1,null,"c55a24b8",null);t.a=i.exports},"6f78":function(e,t,a){"use strict";var i=a("2400");a.n(i).a},"73a5":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var r,s,l={name:"XyBuilderTab",props:{api:"",cloudId:0,eid:0,show:!1,predata:""},components:{},data:function(){return{loading:!1,tabData:{tabList:[],tabType:"line",countList:[]},tabCurrent:"tab_0"}},watch:{show:function(e){1==e&&this.loadData()}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return a.e("manifest").then(a.bind(null,"9a73"))},this.$options.components.XyBuilderInfo=function(){return a.e("manifest").then(a.bind(null,"2949"))},this.$options.components.XyBuilderForm=function(){return Promise.all([a.e("vendor"),a.e("manifest")]).then(a.bind(null,"1343"))},this.$options.components.XyBuilderStack=function(){return a.e("manifest").then(a.bind(null,"e0e2"))}},created:function(){for(var e in this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?this.tabData=this.predata:this.loadData(),this.tabData.tabList[0].list)this.tabData.tabList[0].list.hasOwnProperty(e)&&this.tabData.tabList[0].list[e].pageData.api&&(this.tabData.tabList[0].list[e].pageData.apiBlank=this.tabData.tabList[0].list[e].pageData.api+this.tabData.tabList[0].list[e].pageData.apiParams+(this.tabData.tabList[0].list[e].pageData.queryParams?this.tabData.tabList[0].list[e].pageData.queryParams:""))},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{tabClick:function(e){var t,a=e.split("_")[1];for(t in this.tabData.tabList[a].list)this.tabData.tabList[a].list.hasOwnProperty(t)&&this.tabData.tabList[a].list[t].pageData.api&&(this.tabData.tabList[a].list[t].pageData.apiBlank=this.tabData.tabList[a].list[t].pageData.api+this.tabData.tabList[a].list[t].pageData.apiParams+(this.tabData.tabList[a].list[t].pageData.queryParams?this.tabData.tabList[a].list[t].pageData.queryParams:""),this.tabData.tabList[a].list[t].pageData.show=!0)},loadData:(r=n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=0<a.length&&void 0!==a[0]?a[0]:"")&&(this.api=t),this.loading=!0,this.api)return e.next=6,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=8;break;case 6:"200"==(t=e.sent).code?this.tabData=t.data.tabData:this.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=r.apply(e,t);function s(e){o(n,a,i,s,l,"next",e)}function l(e){o(n,a,i,s,l,"throw",e)}s(void 0)}))},function(){return s.apply(this,arguments)})}};i=a("2877"),l=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?[a("Row",[a("i-col",{staticClass:"spin-col",attrs:{span:"24"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"22"}}),a("div",[e._v("Loading")])],1)],1)],1)]:[a("Tabs",{attrs:{size:"small",type:e.tabData.tabType||"line",animated:!1},on:{"on-click":e.tabClick},model:{value:e.tabCurrent,callback:function(t){e.tabCurrent=t},expression:"tabCurrent"}},e._l(e.tabData.tabList,(function(t,i){return a("TabPane",{key:i,attrs:{label:t.title,name:"tab_"+i}},[a("XyBuilderStack",{ref:"xy_builder_tab_innner_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:"",show:!0,predata:{stackList:t.list}},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)})),1)]],2)}),[],!1,null,null,null);t.default=l.exports},7695:function(e,t,a){},"76d4":function(e,t,a){"use strict";var i=a("e2f4");a.n(i).a},"7d60":function(e,t,a){},"7d8e":function(e,t,a){"use strict";var i=a("0a82");a.n(i).a},9356:function(e,t,a){"use strict";var i=a("a1f0");a.n(i).a},9562:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var r,s;i={name:"Fee",components:{XyBuilderFormRegions:a("3ccb").default},props:{item:{},value:{default:{regions:[],firstAmount:1,firstFee:8,moreAmount:1,moreFee:2,isDefault:1,ruleType:1},extend:[]},formValues:{},token:"",cloudId:0,eid:0},data:function(){return{unit:"kg",columns:[],dataItem:{regions:[],firstAmount:1,firstFee:8,moreAmount:1,moreFee:2,isDefault:0,ruleType:1,delete:""}}},created:function(){switch(this.formValues[this.item.extra.unitField]){case 1:this.unit="kg";break;case 2:this.unit="件"}this.columns=[{title:"运送到",key:"regions",slot:"regions",width:"250",modalShow:!1},{title:"首重("+this.unit+")",key:"firstAmount",slot:"input"},{title:"首费(元）",key:"firstFee",slot:"input"},{title:"续重("+this.unit+")",key:"moreAmount",slot:"input"},{title:"续费(元)",key:"moreFee",slot:"input"},{title:"删除",key:"delete",slot:"delete",width:70}],this.value.default||(this.value={default:{regions:[],firstAmount:1,firstFee:8,moreAmount:1,moreFee:2,isDefault:1,ruleType:1},extend:[]})},beforeMount:function(){},methods:{getData:function(){this.$emit("input",this.value)},delrow:(r=n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.value.extend.splice(t,1),this.getData();case 2:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=r.apply(e,t);function s(e){o(n,a,i,s,l,"next",e)}function l(e){o(n,a,i,s,l,"throw",e)}s(void 0)}))},function(e){return s.apply(this,arguments)}),addrow:function(){var e=Object.assign({},this.dataItem);this.value.extend.push(e)}},watch:{formValues:{handler:function(e){switch(e[this.item.extra.unitField]){case 1:this.unit="kg";break;case 2:this.unit="件"}this.columns=[{title:"运送到",key:"regions",slot:"regions",width:"250",modalShow:!1},{title:"首重("+this.unit+")",key:"firstAmount",slot:"input"},{title:"首费(元）",key:"firstFee",slot:"input"},{title:"续重("+this.unit+")",key:"moreAmount",slot:"input"},{title:"续费(元)",key:"moreFee",slot:"input"},{title:"删除",key:"delete",slot:"delete",width:70}]},deep:!0,immediate:!0}}},a("04f0"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fee"},[a("div",{staticClass:"text-error"},[e._v(" 除指定地区外，其余地区的运费采用默认运费。 ")]),a("div",{staticClass:"default"},[e._v(" 默认运费： "),a("Input",{attrs:{size:"small"},model:{value:e.value.default.firstAmount,callback:function(t){e.$set(e.value.default,"firstAmount",t)},expression:"value.default.firstAmount"}}),e._v(" "+e._s(e.unit)+" 内， "),a("Input",{attrs:{size:"small"},model:{value:e.value.default.firstFee,callback:function(t){e.$set(e.value.default,"firstFee",t)},expression:"value.default.firstFee"}}),e._v(" 元， 每增加 "),a("Input",{attrs:{size:"small"},model:{value:e.value.default.moreAmount,callback:function(t){e.$set(e.value.default,"moreAmount",t)},expression:"value.default.moreAmount"}}),e._v(" "+e._s(e.unit)+"， 增加运费 "),a("Input",{attrs:{size:"small"},model:{value:e.value.default.moreFee,callback:function(t){e.$set(e.value.default,"moreFee",t)},expression:"value.default.moreFee"}}),e._v(" 元。 ")],1),a("div",{staticClass:"more m-t-xs"},[a("Table",{attrs:{border:"",columns:e.columns,data:e.value.extend},scopedSlots:e._u([{key:"regions",fn:function(t){var i=t.row,n=t.column,o=t.index;return[a("XyBuilderFormRegions",{attrs:{showModal:i.modalShow,modalTitle:"运送到",action:e.item.extra.action,valueName:e.id,cloudId:e.cloudId,eid:e.edi,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t}},model:{value:e.value.extend[o][n.key],callback:function(t){e.$set(e.value.extend[o],n.key,t)},expression:"value.extend[index][column.key]"}})]}},{key:"input",fn:function(t){t.row;var i=t.column,n=t.index;return[a("Input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.value.extend[n][i.key],callback:function(t){e.$set(e.value.extend[n],i.key,t)},expression:"value.extend[index][column.key]"}})]}},{key:"delete",fn:function(t){t.row,t.column;var i=t.index;return[a("Button",{staticStyle:{"vertical-align":"middle"},attrs:{size:"small",type:"dashed"},on:{click:function(t){return e.delrow(i)}}},[e._v(" 删除 ")])]}}])}),a("Button",{staticStyle:{"vertical-align":"middle","margin-right":"15px"},attrs:{size:"small",type:"dashed"},on:{click:e.addrow}},[e._v(" 增加 ")])],1)])}),[],!1,null,"25dfa324",null);t.default=i.exports},"9a73":function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i),o=a("4328"),r=a.n(o);function s(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw n}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function u(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function r(e){u(o,i,n,r,s,"next",e)}function s(e){u(o,i,n,r,s,"throw",e)}r(void 0)}))}}a("c276");var c,m,p,f,h;i={name:"XyBuilderList",props:{api:"",cloudId:0,eid:0,show:!1,predata:"",value:0,showActions:!1},components:{},data:function(){return{CDN_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/cloud-admin/0.4.0/dist/",rowKey:function(){return"id"},loading:!1,page:1,limit:10,rightButtonListModal:[],filterValues:{},listData:{alertList:{},dataList:[],dataListParams:[],topButtonList:[],rightButtonList:[],rightButtonListModal:[],columns:[],dataPage:{total:0,limit:10,page:1},filterItems:[],filterValues:[],filterExtra:{},countList:[],config:{modalDefaultWidth:800}}}},watch:{api:function(){this.loadData("",!0)},show:function(e){1==e&&this.loadData("",!0)}},beforeCreate:function(){this.$options.components.XyBuilderTab=function(){return a.e("manifest").then(a.bind(null,"73a5"))},this.$options.components.XyBuilderInfo=function(){return a.e("manifest").then(a.bind(null,"2949"))},this.$options.components.XyBuilderForm=function(){return Promise.all([a.e("vendor"),a.e("manifest")]).then(a.bind(null,"1343"))}},created:function(){this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?(this.listData=this.predata,this.rightButtonListModal=this.rightButtonListModal.concat(this.predata.rightButtonListModal,this.predata.rightButtonList)):this.loadData(),this.limit=this.listData.dataPage.limit},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{submit:function(){this.$emit("input",this.value),this.$emit("close-model")},cancel:function(){this.$emit("close-model")},radioClick:function(e){this.value=e.row.id},getFilterParams:function(){var e={page:this.page,limit:this.limit};if(this.filterValues){var t=this.filterValues;if(0<this.listData.filterItems.length)for(var a in t)t.hasOwnProperty(a)&&(t[a].constructor&&t[a].constructor===Array&&(t[a]=t[a].join(",")),""!==t[a]&&(e[a]=t[a]))}return e},handleFilterExport:(h=d(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.a.stringify(this.getFilterParams()),a=this.$store.state.app.api.apiBase+this.listData.filterExtra.exportBtn[t].api+"?cloudId="+this.cloudId+"&token="+this.$store.state.user.token+"&"+a,window.open(a);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)}),changeCheckbox:(f=d(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=4,this.util.request({url:t.column.extra.url?t.column.extra.url:"/v1/admin/core/index/setStatus",method:"PUT",data:{table:this.listData.dataListParams.tableName,field:t.column.key,status:t.row[t.column.key],keyVal:t.row.id},header:{CloudId:this.cloudId,Eid:this.eid}});case 4:200==(a=e.sent).code?this.$Message.success(a.msg):this.$Message.error(a.msg);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)}),changeSwitch:(p=d(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=4,this.util.request({url:t.column.extra.url?t.column.extra.url:"/v1/admin/core/index/setStatus",method:"PUT",data:{table:this.listData.dataListParams.tableName,field:t.column.key,status:t.row[t.column.key],keyVal:t.row.id},header:{CloudId:this.cloudId,Eid:this.eid}});case 4:200==(a=e.sent).code?this.$Message.success(a.msg):(this.$Message.error(a.msg),t.row[t.column.key]=!t.row[t.column.key]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)}),pageChange:function(e){this.page=e,this.loadData()},limitChange:function(e){this.page=1,this.limit=e,this.loadData()},closeModel:function(e){e.pageData.show=!1,e.pageData.noRefresh||this.loadData()},loadData:(m=d(n.a.mark((function e(){var t,a,i=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1<i.length&&void 0!==i[1]&&i[1],""!=(a=0<i.length&&void 0!==i[0]?i[0]:"")&&(this.api=a),this.loading=!0,a={},t||(a=this.getFilterParams()),this.api)return e.next=9,this.util.request({url:this.api,method:"get",data:a,header:{CloudId:this.cloudId,Eid:this.eid}});e.next=11;break;case 9:"200"==(a=e.sent).code?(this.listData=a.data.listData,t&&(this.filterValues=this.listData.filterValues),this.rightButtonListModal=this.rightButtonListModal.concat(this.listData.rightButtonListModal,this.listData.rightButtonList)):this.$Message.error(a.msg);case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),showChange:function(e){var t;this.$store.state.app.uiAudio&&((t=new Audio).src=1==e?"./audio/open.wav":"./audio/close.wav",t.play())},topButtonModal:function(e){var t,a,i=this,o=this.listData.topButtonList[e];new Object,"confirm"===o.pageData.modalType?(this.$store.state.app.uiAudio&&((e=new Audio).src="./audio/open.wav",e.play()),(t=this).$Modal.confirm({okText:o.pageData.okText,cancelText:o.pageData.cancelText,title:o.pageData.title,content:o.pageData.content,onOk:(a=d(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:o.pageData.api+o.pageData.apiParams+"?"+o.pageData.queryParams,method:o.pageData.formMethod,header:{CloudId:t.cloudId,Eid:t.eid}});case 2:"200"==(a=e.sent).code?(t.$Message.success(a.msg),i.$store.state.app.uiAudio&&((r=new Audio).src="./audio/delete.wav",r.play()),o.pageData.noRefresh||t.loadData()):t.$Message.error(a.msg);case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),onCancel:function(){var e;i.$store.state.app.uiAudio&&((e=new Audio).src="./audio/close.wav",e.play())}})):(o.pageData.apiBlank=o.pageData.api+o.pageData.apiParams+"?"+o.pageData.queryParams,o.pageData.show=!0)},rightButtonModal:(c=d(n.a.mark((function e(t,a,i){var o,l,u,c,m,p,f,h,v,y,g,x,b=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l in o=0,this.rightButtonListModal)this.rightButtonListModal[l].name==t.name&&(o=l);if(u=this.rightButtonListModal[o],c="",m=new Object,u.pageData.apiSuffix){p=u.pageData.apiSuffix,f=s(p);try{for(f.s();!(h=f.n()).done;)h=h.value,c=c+"/"+a.row[h]}catch(e){f.e(e)}finally{f.f()}}else c="/"+a.row.id;if(u.pageData.querySuffix){g=u.pageData.querySuffix,v=s(g);try{for(v.s();!(y=v.n()).done;)1==(y=y.value)[2]?m[y[0]]=y[1]:m[y[0]]=a.row[y[1]]}catch(e){v.e(e)}finally{v.f()}}if("replace"!=u.pageData.pageType){e.next=11;break}this.$router.replace({path:u.pageData.route+"/"+a.row.name}),e.next=24;break;case 11:e.t0=u.pageData.modalType,e.next="confirm"===e.t0?14:"list"===e.t0?18:21;break;case 14:return this.$store.state.app.uiAudio&&((g=new Audio).src="./audio/open.wav",g.play()),(x=this).$Modal.confirm({okText:u.pageData.okText,cancelText:u.pageData.cancelText,title:u.pageData.title,content:u.pageData.content,onOk:function(){var e=d(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.util.request({url:u.pageData.api+c+"?"+r.a.stringify(m),method:u.pageData.formMethod,header:{CloudId:x.cloudId,Eid:x.eid}});case 2:"200"==(t=e.sent).code?(x.util.showToast({title:t.msg,icon:"success",duration:1e3}),b.$store.state.app.uiAudio&&((a=new Audio).src="./audio/delete.wav",a.play()),u.pageData.noRefresh||x.loadData()):x.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){var e;b.$store.state.app.uiAudio&&((e=new Audio).src="./audio/close.wav",e.play())}}),e.abrupt("break",24);case 18:case 21:return u.pageData.apiBlank=u.pageData.api+c+"?"+r.a.stringify(m),u.pageData.show=!0,e.abrupt("break",24);case 24:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return c.apply(this,arguments)})}},a("6f78"),o=a("2877"),i=Object(o.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xy_builder-list-wrap list-card"},[e.listData.alertList&&e.listData.alertList.top?e._l(e.listData.alertList.top,(function(t,i){return a("Alert",{key:i,attrs:{type:t.type,"show-icon":!1,banner:"true"}},[a("div",{domProps:{innerHTML:e._s(t.desc)}})])})):e._e(),[e.listData.countList?a("Row",{attrs:{type:"flex",justify:"start",align:"top"}},e._l(e.listData.countList,(function(t,i){return a("Col",{key:i,attrs:{xs:12,xl:t.item.xl?t.item.xl:6,xxl:4}},[a("Row",{staticClass:"count-item",style:{backgroundColor:t.item.bgColor},attrs:{type:"flex",justify:"center",align:"top"}},[a("Col",{staticClass:"left"},[a("i",{staticClass:"icon",class:t.item.icon}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.item.title,expression:"it.item.title"}]},[e._v(e._s(t.item.title))])]),a("Col",{staticClass:"right",style:{backgroundColor:t.item.bgColorRight||"#fff",color:t.item.bgColorRight?"#fff":""}},[a("div",{staticClass:"value"},[a("span",[e._v(e._s(t.current.value))]),a("span",{staticClass:"suffix"},[e._v(e._s(t.current.suffix))])]),a("div",{staticClass:"title"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.content.value,expression:"it.content.value"}],staticClass:"value"},[e._v(e._s(t.content.value))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.content.list,expression:"it.content.list"}],staticClass:"list"},e._l(t.content.list,(function(t,i){return a("div",{key:i,staticClass:"cell"},[e._v(" "+e._s(t.title)+"："+e._s(t.value)+" ")])})),0)])])],1)],1)})),1):e._e(),a("div",{staticClass:"tool-box"},[e._l(e.listData.topButtonList,(function(t,i){return[a("Modal",{key:"top_modal_"+i,ref:"top_modal_"+i,refInFor:!0,attrs:{transfer:!1,scrollable:t.pageData.scrollable,draggable:t.pageData.draggable,"mask-closable":!1,"footer-hide":!0,width:t.pageData.width?t.pageData.width:600,title:t.pageData.title},on:{"on-visible-change":e.showChange},model:{value:t.pageData.show,callback:function(a){e.$set(t.pageData,"show",a)},expression:"item.pageData.show"}},["form"==t.pageData.modalType?[a("XyBuilderForm",{ref:"top_form_"+i,refInFor:!0,attrs:{api:t.pageData.apiBlank,show:t.pageData.show,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t},"close-model":function(a){return e.closeModel(t)}}})]:"list"==t.pageData.modalType?[a("XyBuilderlist",{ref:"top_list_"+i,refInFor:!0,attrs:{api:t.pageData.apiBlank,show:t.pageData.show,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t},"close-model":function(a){return e.closeModel(t)}}})]:e._e()],2)]})),e._l(e.listData.topButtonList,(function(t,i){return["print"==t.pageData.modalType?a("Button",{directives:[{name:"print",rawName:"v-print",value:"#table-box",expression:"'#table-box'"}],key:"button"+i},[e._v(" "+e._s(t.title)+" ")]):a("Button",{key:"button"+i,staticStyle:{"margin-bottom":"15px","margin-right":"10px"},attrs:{"empty-text":"当前没有数据",type:t.style.type,size:t.style.size,icon:t.style.icon},on:{click:function(t){return e.topButtonModal(i)}}},[e._v(" "+e._s(t.title)+" ")])]})),e.listData.filterItems&&0<e.listData.filterItems.length?a("Row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:16}},[a("Form",{ref:"formFilter",attrs:{"label-position":"left","label-width":90,model:e.filterValues}},[e._l(e.listData.filterItems,(function(t,i){return a("Col",{key:i,staticClass:"filter-item",attrs:{xs:24,sm:6}},[a("FormItem",{attrs:{label:t.title+":"}},["text"==t.type?[a("Input",{attrs:{type:"text",placeholder:t.extra.placeholder},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.loadData())}},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}})]:"select"==t.type?[a("Select",{on:{"on-change":function(t){return e.loadData()}},model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}},e._l(t.extra.options,(function(t,i,n){return a("Option",{key:n,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"radio"==t.type?[a("RadioGroup",{model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}},e._l(t.extra.options,(function(t,i,n){return a("Radio",{key:n,attrs:{label:t.value}},[a("span",[e._v(e._s(t.title))])])})),1)]:"checkbox"==t.type?[a("CheckboxGroup",{model:{value:e.filterValues[t.name],callback:function(a){e.$set(e.filterValues,t.name,a)},expression:"filterValues[item.name]"}},e._l(t.extra.options,(function(t,i,n){return a("Checkbox",{key:n,attrs:{label:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"datepicker"==t.type?[a("DatePicker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期",value:t.value},on:{"on-change":function(a){e.filterValues[t.name]=a}}})]:"timepicker"==t.type?[a("TimePicker",{attrs:{type:"time",format:t.extra.format?t.extra.format:"HH:mm:ss",placeholder:"选择时间",steps:t.extra.steps?t.extra.steps:"[1,1,1]",value:t.value},on:{"on-change":function(a){e.filterValues[t.name]=a}}})]:"timerangepicker"==t.type?[a("TimePicker",{attrs:{type:"timerange",format:t.extra.format?t.extra.format:"HH:mm:ss",placeholder:"选择时间区间",steps:t.extra.steps?t.extra.steps:"[1,1,1]",value:t.value},on:{"on-change":function(a){e.filterValues[t.name]=a}}})]:"datetimepicker"==t.type?[a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",placeholder:"选择日期时间",value:t.value},on:{"on-change":function(a){e.filterValues[t.name]=a}}})]:"daterangepicker"==t.type?[a("DatePicker",{attrs:{type:"daterange",format:"yyyy-MM-dd",placeholder:"选择日期区间",value:t.value},on:{"on-change":function(a){e.filterValues[t.name]=a}}})]:"datetimerangepicker"==t.type?[a("DatePicker",{attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期时间区间",value:t.value},on:{"on-change":function(a){e.filterValues[t.name]=a}}})]:e._e()],2)],1)})),a("Col",{staticClass:"filter-item",attrs:{xs:24,sm:6}},[a("FormItem",{attrs:{"label-width":0}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.loadData()}}},[e._v("查询")]),e.listData.filterExtra&&e.listData.filterExtra.exportBtn?e._l(e.listData.filterExtra.exportBtn,(function(t,i){return a("Button",{key:i,staticClass:"m-l-xs",attrs:{type:t.type?t.type:"primary"},on:{click:function(t){return e.handleFilterExport(i)}}},[e._v(" "+e._s(t.title?t.title:"导出")+" ")])})):e._e()],2)],1)],2)],1):e._e()],2),a("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],staticClass:"table-box",attrs:{id:"table-box"}},[a("tree-table",{attrs:{"expand-key":e.listData.dataListParams.expandKey?e.listData.dataListParams.expandKey:"title","is-fold":!e.listData.dataListParams.hasOwnProperty("isFold")||e.listData.dataListParams.isFold,border:!1,stripe:!1,radioSelectedId:e.value,"expand-type":!1,selectable:!!e.listData.dataListParams.hasOwnProperty("selectable")&&e.listData.dataListParams.selectable,selectType:e.listData.dataListParams.hasOwnProperty("selectType")?e.listData.dataListParams.selectType:"checkbox","row-key":e.rowKey,columns:e.listData.columns,data:this.listData.dataList},on:{"radio-click":e.radioClick},scopedSlots:e._u([{key:"html",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t.row[t.column.key])}})]}},{key:"group",fn:function(t){return e._l(t.column.extra.extend.fields,(function(i,n){return a("div",{key:n,staticClass:"group-item"},[a("div",{staticClass:"title"},[e._v(" "+e._s(i[1])+" : ")]),a("div",{staticClass:"value"},[e._v(" "+e._s(t.row[i[0]])+" ")])])}))}},{key:"label",fn:function(t){return["string"==typeof t.column.key?a("span",{style:{color:t.column.extra.options[t.row[t.column.key]].color?t.column.extra.options[t.row[t.column.key]].color:""}},[e._v(" "+e._s(t.column.extra.options[t.row[t.column.key]].title?t.column.extra.options[t.row[t.column.key]].title:t.row[t.column.key])+" ")]):2==t.column.key.length?a("span",{style:{color:t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]]&&t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]].color?t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]].color:""}},[e._v(" "+e._s(t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]]&&t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]].title?t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]].title:t.row[t.column.key[0]][t.column.key[1]])+" ")]):3==t.column.key.length?a("span",{style:{color:t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]]&&t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]].color?t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]].color:""}},[e._v(" "+e._s(t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]]&&t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]].title?t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]].title:t.row[t.column.key[0]][t.column.key[1]])+" ")]):e._e()]}},{key:"time",fn:function(t){return[e._v(" "+e._s(e._f("formatTime")(t.row[t.column.key],t.column.extra.extend.format))+" ")]}},{key:"url",fn:function(t){return[a("a",{attrs:{target:"_blank",href:t.row[t.column.key]}},[e._v(e._s(t.row[t.column.key]))])]}},{key:"password",fn:function(t){return[t.column.extra.show?[e._v(" "+e._s(t.row[t.column.key])+" ")]:[e._v("******")],a("Icon",{attrs:{type:"md-eye"},on:{click:function(e){t.column.extra.show=!t.column.extra.show}}})]}},{key:"circle",fn:function(t){return[a("i-circle",{staticStyle:{"vertical-align":"middle",width:"40px",height:"40px"},attrs:{percent:t.row[t.column.key]}},[a("span",{staticClass:"demo-Circle-inner",staticStyle:{"font-size":"12px"}},[e._v(e._s(t.row[t.column.key])+"%")])])]}},{key:"tag",fn:function(t){return["string"==typeof t.column.key?[t.column.extra.options[t.row[t.column.key]]?[a("Tag",{attrs:{color:t.column.extra.options[t.row[t.column.key]].color?t.column.extra.options[t.row[t.column.key]].color:"default"}},[e._v(" "+e._s(t.column.extra.options[t.row[t.column.key]].title?t.column.extra.options[t.row[t.column.key]].title:t.row[t.column.key])+" ")])]:[a("Tag",{attrs:{color:"default"}},[e._v(e._s(t.row[t.column.key]))])]]:2==t.column.key.length?[t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]]?[a("Tag",{attrs:{color:t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]].color?t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]].color:"default"}},[e._v(" "+e._s(t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]].title?t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]]].title:t.row[t.column.key[0]][t.column.key[1]])+" ")])]:[a("Tag",{attrs:{color:"default"}},[e._v(e._s(t.row[t.column.key[0]][t.column.key[1]]))])]]:3==t.column.key.length?[t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]]?[a("Tag",{attrs:{color:t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]].color?t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]].color:"default"}},[e._v(" "+e._s(t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]].title?t.column.extra.options[t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]].title:t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]])+" ")])]:[a("Tag",{attrs:{color:"default"}},[e._v(e._s(t.row[t.column.key[0]][t.column.key[1]][t.column.key[2]]))])]]:e._e()]}},{key:"tags",fn:function(t){return["string"==typeof t.column.key?[e._l(t.row[t.column.key],(function(i){return[t.column.extra.options[i]?a("Tag",{key:i,staticStyle:{transform:"scale(0.8)"},attrs:{color:t.column.extra.options[i].color?t.column.extra.options[i].color:"default"}},[e._v(" "+e._s(t.column.extra.options[i].title?t.column.extra.options[i].title:i)+" ")]):e._e()]}))]:e._e()]}},{key:"progress",fn:function(t){return[a("Progress",{staticStyle:{"vertical-align":"middle"},attrs:{percent:t.row[t.column.key],vertical:!!t.column.extra.extend.vertical&&t.column.extra.extend.vertical,status:t.column.extra.extend.status?t.column.extra.extend.status:"active"}},[t.column.extra.extend.hideIcon?[e._v(" "+e._s(t.row[t.column.key])+"% ")]:e._e()],2)]}},{key:"rate",fn:function(t){return[a("Rate",{staticStyle:{"vertical-align":"middle"},attrs:{"allow-half":"",disabled:"","show-text":!1},model:{value:t.row[t.column.key],callback:function(a){e.$set(t.row,t.column.key,a)},expression:"scope.row[scope.column.key]"}})]}},{key:"audio",fn:function(t){return[a("audio",{staticStyle:{"vertical-align":"middle",width:"150px",height:"30px"},attrs:{controls:"controls",preload:"none"}},[a("source",{attrs:{src:t.row[t.column.key]}}),e._v(" Your browser does not support the audio element. ")])]}},{key:"image",fn:function(t){return[a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:t.row[t.column.key]?t.row[t.column.key]:e.CDN_URL+"/noimage.png",width:t.column.extra.extend&&t.column.extra.extend.width?t.column.extra.extend.width:"",height:t.column.extra.extend&&t.column.extra.extend.height?t.column.extra.extend.height:"35"}})]}},{key:"images",fn:function(t){return[a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:t.row[t.column.key]?t.row[t.column.key]:e.CDN_URL+"/noimage.png",width:t.column.extra.extend&&t.column.extra.extend.width?t.column.extra.extend.width:"",height:t.column.extra.extend&&t.column.extra.extend.height?t.column.extra.extend.height:"35"},on:{click:function(a){return e.handleView(t.row[t.column.key])}}})]}},{key:"switch",fn:function(t){return[a("i-switch",{staticStyle:{transform:"scale(0.8)"},attrs:{size:"large","true-color":"#19be6b","false-color":"#ed4014","true-value":t.column.extra.options[1].value,"false-value":t.column.extra.options[0].value,loading1:"listData.dataList[scope.rowIndex][scope.column.key + ''] ? true : false"},on:{"on-change":function(a){return e.changeSwitch(t)}},model:{value:t.row[t.column.key],callback:function(a){e.$set(t.row,t.column.key,a)},expression:"scope.row[scope.column.key]"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(t.column.extra.options[1].title))]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(t.column.extra.options[0].title))])])]}},{key:"checkbox",fn:function(t){return[a("CheckboxGroup",{on:{"on-change":function(a){return e.changeCheckbox(t)}},model:{value:t.row[t.column.key],callback:function(a){e.$set(t.row,t.column.key,a)},expression:"scope.row[scope.column.key]"}},e._l(t.column.extra.options,(function(i,n,o){return a("Checkbox",{key:o,attrs:{disabled:!!t.column.extra.disabled&&t.column.extra.disabled,label:i.value}},[e._v(" "+e._s(i.title)+" ")])})),1)]}},{key:"rightButtonList",fn:function(t){return[e._l(e.listData.rightButtonList,(function(i,n){return a("a",{key:"button"+n,class:"default"==i.style.type?"":"text-"+i.style.type,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{type:i.style.type,size:i.style.size,icon:i.style.icon},on:{click:function(a){return e.rightButtonModal(i,t)}}},[e._v(" "+e._s(i.title)+" ")])})),e._l(t.row[t.column.key],(function(i,n){return a("a",{key:"button"+n,class:"default"==i.style.type?"":"text-"+i.style.type,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{type:i.style.type,size:i.style.size,icon:i.style.icon},on:{click:function(a){return e.rightButtonModal(i,t)}}},[e._v(" "+e._s(i.title)+" ")])}))]}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[e._v("Loading")])],1)],1)],1),e._l(e.rightButtonListModal,(function(t,i){return["form"==t.pageData.modalType?[a("Modal",{key:"modal"+i,attrs:{transfer:!1,"footer-hide":!0,scrollable:t.pageData.scrollable,draggable:t.pageData.draggable,"mask-closable":!1,width:t.pageData.width?t.pageData.width:700,title:t.pageData.title},on:{"on-visible-change":e.showChange},model:{value:t.pageData.show,callback:function(a){e.$set(t.pageData,"show",a)},expression:"item.pageData.show"}},[a("XyBuilderForm",{ref:"right_form_"+i,refInFor:!0,attrs:{api:t.pageData.apiBlank,show:t.pageData.show,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t},"close-model":function(a){return e.closeModel(t)}}})],1)]:"list"==t.pageData.modalType?[a("Modal",{key:"modal"+i,attrs:{transfer:!1,"footer-hide":!0,scrollable:t.pageData.scrollable,draggable:t.pageData.draggable,"mask-closable":!1,width:t.pageData.width?t.pageData.width:700,title:t.pageData.title},on:{"on-visible-change":e.showChange},model:{value:t.pageData.show,callback:function(a){e.$set(t.pageData,"show",a)},expression:"item.pageData.show"}},[a("XyBuilderList",{ref:"right_list_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)]:"info"==t.pageData.modalType?[a("Modal",{key:"modal"+i,attrs:{transfer:!1,"footer-hide":!0,scrollable:t.pageData.scrollable,draggable:t.pageData.draggable,"mask-closable":!1,width:t.pageData.width?t.pageData.width:700,title:t.pageData.title},on:{"on-visible-change":e.showChange},model:{value:t.pageData.show,callback:function(a){e.$set(t.pageData,"show",a)},expression:"item.pageData.show"}},[a("XyBuilderInfo",{ref:"right_info_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)]:"tab"==t.pageData.modalType?[a("Modal",{key:"modal"+i,attrs:{transfer:!1,"footer-hide":!0,scrollable:t.pageData.scrollable,draggable:t.pageData.draggable,"mask-closable":!1,width:t.pageData.width?t.pageData.width:700,title:t.pageData.title},on:{"on-visible-change":e.showChange},model:{value:t.pageData.show,callback:function(a){e.$set(t.pageData,"show",a)},expression:"item.pageData.show"}},[a("XyBuilderTab",{ref:"right_info_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1)]:e._e()]})),a("Page",{directives:[{name:"show",rawName:"v-show",value:0<e.listData.dataPage.total,expression:"listData.dataPage.total > 0"}],staticStyle:{"margin-top":"15px"},attrs:{total:e.listData.dataPage.total,"show-sizer":"","show-elevator":"","show-total":"",current:e.page,"page-size":e.limit,"page-size-opts":[10,20,50,100,1e3],"prev-text":"上一页","next-text":"下一页"},on:{"on-change":e.pageChange,"on-page-size-change":e.limitChange}}),1==this.showActions?a("div",[a("Divider"),a("Button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",size:"large"},on:{click:function(t){return e.submit()}}},[e._v(" 确认选择 ")]),a("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){return e.cancel()}}},[e._v(" 取消操作 ")])],1):e._e()],e.listData.alertList&&e.listData.alertList.bottom?e._l(e.listData.alertList.bottom,(function(t,i){return a("Alert",{key:i,attrs:{type:t.type,"show-icon":!1,banner:"true"}},[a("div",{domProps:{innerHTML:e._s(t.desc)}})])})):e._e()],2)}),[],!1,null,"c7eb30a0",null);t.default=i.exports},"9b6b":function(e,t,a){"use strict";var i=a("31c2");a.n(i).a},a048:function(e,t,a){},a1f0:function(e,t,a){},a331:function(e,t,a){},aa85:function(e,t,a){},ab66:function(e,t,a){"use strict";var i=a("1b7e");a.n(i).a},ad6b:function(e,t,a){"use strict";var i=a("fcf4");a.n(i).a},aefe:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var r=e.apply(t,a);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))}}i={name:"Image",props:{item:{},value:"",img:{value:"",title:""},token:"",cloudId:0,eid:0},data:function(){return{uploadName:"file",header:{}}},created:function(){this.header={Authorization:this.token}},beforeMount:function(){},methods:{handleView:function(e){this.$emit("handleView",e)},handleSuccess:function(e,t){"upload_oss"==this.item.extra.driver?(t.url=this.item.extra.data.host+"/"+this.item.extra.data.key,this.value=t.url):"upload_smms"==this.item.extra.driver?"success"==e.code?(t.url=e.data.url,this.value=t.url):this.$Notice.warning({title:e.message}):200==e.code?(t.url=e.data.url,this.value=t.url):this.$Notice.warning({title:e.msg}),this.$emit("input",this.value)},handleRemove:function(){this.value=""},handleBeforeUpload:function(e){var t=this;return"upload_oss"==t.item.extra.driver?new Promise(function(){var a=r(n.a.mark((function a(i,o){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.util.request({url:"/v1/upload_oss/index/sign",method:"get",header:{CloudId:t.cloudId,Eid:t.eid}});case 2:200==(r=a.sent).code?(t.item.extra.action=r.data.params.host,r.data.params.key=r.data.params.key+e.name,t.item.extra.data=r.data.params,i()):t.$Notice.warning({title:r.msg});case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()):"upload_smms"==t.item.extra.driver?new Promise(function(){var e=r(n.a.mark((function e(a,i){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.header={Authorization:"R7aVy1OLZJ1pMgWyjBkdOz9Dyh7nSFm2"},t.uploadName="smfile",t.item.extra.action="https://sm.ms/api/v2/upload",t.item.extra.data={format:"json"},a();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()):void 0},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件"+e.name+"的格式不正确, 请重新选择。"})},handleMaxSize:function(e){this.$Notice.warning({title:"文件大小不正确",desc:"文件"+e.name+"太大了, 不支持超过1M。"})}},watch:{}},a("3b6c"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("div",[""!==e.value?t("div",{staticClass:"image-list"},[t("img",{attrs:{src:e.value}}),t("div",{staticClass:"image-list-cover"},[t("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(t){return e.handleView(e.value)}}}),t("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleRemove(t)}}})],1)]):e._e(),t("Upload",{directives:[{name:"show",rawName:"v-show",value:""==e.value,expression:"value == ''"}],ref:"upload_"+e.item.name,staticStyle:{display:"inline-block",width:"58px"},attrs:{paste:!0,"show-upload-list":!1,headers:e.header,"default-file-list":[{name:e.item.name,url:e.value}],format:e.item.extra.format,"max-size":e.item.extra.maxSize?e.item.extra.maxSize:500,"on-success":e.handleSuccess,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,data:e.item.extra.data,name:e.uploadName,type:"drag",action:e.item.extra.action}},[t("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[t("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),""!==e.img.title?t("div",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.img.title)+" ")]):e._e()],1)}),[],!1,null,"31e82174",null),t.default=i.exports},b218:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var r,s;i={name:"SkuPrice",components:{},props:{item:{},value:[],formValues:{},token:"",cloudId:0,eid:0},data:function(){return{title:"",tag:"",columns:[{title:"规格",key:"spec",slot:"label",width:"300"},{title:"正常售价",key:"price",slot:"label"},{title:"剩余库存",key:"stock",slot:"label"},{title:"秒杀价",key:"curPrice",slot:"text"},{title:"每次库存",key:"curStock",slot:"text"}]}},created:function(){},beforeMount:function(){},methods:{getData:function(){this.$emit("input",this.value)}},watch:{"formValues.itemId":{handler:(r=n.a.mark((function e(t){var a,i,o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this,t&&null!=t)return e.next=4,a.util.request({url:"/v1/iadmin/ishop/sku/lists",method:"get",data:{itemId:t,curField:1},header:{CloudId:a.cloudId,Eid:a.eid}});e.next=6;break;case 4:if(200==(i=e.sent).code){for(o=i.data.dataList.length-1;0<=o;o--)for(r=0;r<this.value.length;r++)this.value[r].spec==i.data.dataList[o].spec&&(i.data.dataList[o].curPrice=this.value[r].curPrice,i.data.dataList[o].curStock=this.value[r].curStock);this.value=i.data.dataList,this.getData()}else this.util.showToast({title:i.msg});case 6:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=r.apply(e,t);function s(e){o(n,a,i,s,l,"next",e)}function l(e){o(n,a,i,s,l,"throw",e)}s(void 0)}))},function(e){return s.apply(this,arguments)}),deep:!0,immediate:!0}}},a("ab66"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sku-list"},[a("Table",{attrs:{border:"",columns:e.columns,data:e.value},scopedSlots:e._u([{key:"label",fn:function(t){t.row;var a=t.column;t=t.index;return[e._v(" "+e._s(e.value[t][a.key])+" ")]}},{key:"text",fn:function(t){t.row;var i=t.column,n=t.index;return[a("Input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.value[n][i.key],callback:function(t){e.$set(e.value[n],i.key,t)},expression:"value[index][column.key]"}})]}}])})],1)])}),[],!1,null,"6ee61046",null);t.default=i.exports},b271:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i),o=a("4328"),r=a.n(o),s=(a("c276"),a("aefe")),l=a("249f"),u=a("5b7f"),d=a("b37a"),c=a("43e8"),m=a("c65b"),p=a("b218"),f=a("9562"),h=a("04b1");i=a("7e79"),o=a("ca72");function v(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function r(e){v(o,i,n,r,s,"next",e)}function s(e){v(o,i,n,r,s,"throw",e)}r(void 0)}))}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var x,b,k;i={name:"XyBuilderFormItem",components:{XyBuilderFormImage:s.default,XyBuilderFormImages:l.default,XyBuilderFormFile:u.default,XyBuilderFormFiles:d.default,XyBuilderFormPoster:c.default,XyBuilderFormSku:m.default,XyBuilderFormSkuPrice:p.default,XyBuilderFormFee:f.default,XyBuilderFormAmap:h.default,VueCropper:i.VueCropper,"tinymce-vue":o.a},props:{prop:"",cloudId:0,eid:0,item:{},formValues:{},formRules:{}},data:function(){return{token:"",previewImageVisible:!1,previewImageUrl:""}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return a.e("manifest").then(a.bind(null,"9a73"))}},created:function(){switch(this.token=this.$store.state.user.token,this.item.type){case"radio":break;case"imageflex":if(this.formValues[this.item.name]&&this.formValues[this.item.name].constructor!==Object){var e,t={},a=function(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw n}}}}(this.item.extra.options);try{for(a.s();!(e=a.n()).done;)t[e.value.value]=""}catch(e){a.e(e)}finally{a.f()}this.formValues[this.item.name]=t}break;case"datepicker":this.formValues[this.item.name]=this.util.formatDate(this.formValues[this.item.name],"yyyy-MM-dd");break;case"datetimepicker":this.formValues[this.item.name]=this.util.formatDate(this.formValues[this.item.name],"yyyy-MM-dd HH:mm");break;case"daterangepicker":this.formValues[this.item.name]=this.formatDates(this.formValues[this.item.name],"yyyy-MM-dd");break;case"datetimerangepicker":this.formValues[this.item.name]=this.formatDates(this.formValues[this.item.name],"yyyy-MM-dd HH:mm")}},beforeMount:function(){},mounted:function(){},methods:{loadCascaderData:(k=y(n.a.mark((function e(t,a){var i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,this.util.request({url:this.item.extra.action,data:{value:t.value},method:"get"});case 3:200==(i=e.sent).code?t.children=i.data.dataList:this.util.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1,a();case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)}),rightButtonModal:(b=y(n.a.mark((function e(t){var a,i,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.extra,o=i="",e.t0=a.pageData.modalType,e.next="list"===e.t0?6:9;break;case 6:case 9:return a.pageData.apiBlank=a.pageData.api+i+"?"+r.a.stringify(o),a.pageData.show=!0,e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)}),filePickerCallback:function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.onchange=function(){var t,a=this.files[0],i=new FormData;i.append("files",a),(t=new XMLHttpRequest).withCredentials=!1,t.open("POST",this.item.extra.action),xht.setRequestHeader("Authorization",this.token),t.onload=function(){var a;200==t.status?(a=JSON.parse(t.responseText))&&"string"==typeof a.location?e(a.data.url):failure("Invalid JSON: "+t.responseText):failure("HTTP Error: "+t.status)},t.send(i)}},imagesUploadHandler:(x=y(n.a.mark((function e(t,a,i){var o,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new FormData,(o=new XMLHttpRequest).withCredentials=!1,"upload_oss"==this.item.extra.driver)return e.next=6,this.util.request({url:"/v1/upload_oss/index/sign",method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=10;break;case 6:200==(s=e.sent).code?(this.item.extra.action=s.data.params.host,s.data.params.key=s.data.params.key+Date.parse(new Date)/1e3+t.filename(),this.item.extra.data=s.data.params,o.open("POST",this.item.extra.action),r.append("key",this.item.extra.data.key),r.append("policy",this.item.extra.data.policy),r.append("OSSAccessKeyId",this.item.extra.data.OSSAccessKeyId),r.append("success_action_status",this.item.extra.data.success_action_status),r.append("signature",this.item.extra.data.signature),r.append("host",this.item.extra.data.host),r.append("expire",this.item.extra.data.expire),r.append("file",t.blob(),t.filename()),o.onload=function(){var e;200==o.status?(e=s.data.params.host+"/"+s.data.params.key,a(e)):i("HTTP Error: "+o.status)},o.send(r)):this.$Notice.warning({title:s.msg}),e.next=11;break;case 10:"upload_smms"==this.item.extra.driver?(this.item.extra.action="https://sm.ms/api/v2/upload",this.item.extra.data={format:"json"},o.open("POST",this.item.extra.action),o.setRequestHeader("Authorization","R7aVy1OLZJ1pMgWyjBkdOz9Dyh7nSFm2"),r.append("smfile",t.blob(),t.filename()),r.append("format",this.item.extra.data.format),o.onload=function(){var e;200==o.status?"success"==(e=JSON.parse(o.responseText)).code?a(e.data.url):i(e.message):i("HTTP Error: "+o.status)}):(o.open("POST",this.item.extra.action),o.setRequestHeader("Authorization",this.token),r.append("file",t.blob(),t.filename()),o.onload=function(){var e;200==o.status?(e=JSON.parse(o.responseText))&&"string"==typeof e.data.url?a(e.data.url):i("Invalid JSON: "+o.responseText):i("HTTP Error: "+o.status)}),o.send(r);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return x.apply(this,arguments)}),handleView:function(e){this.previewImageUrl=e,this.previewImageVisible=!0},formlistAddrow:function(e){this.formValues[e].push(new Object)},formlistDelrow:function(e,t){this.formValues[e].splice(t,1)},getChecked:function(e){return this.$refs["checkboxtree_"+this.item.name].getCheckedProp(e)},formatDates:function(e,t){return[this.util.formatDate(e[0],t),this.util.formatDate(e[1],t)]}},watch:{item:function(){}}},a("76d4"),o=a("2877"),i=Object(o.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["tabs"==e.item.type?[a("Tabs",{attrs:{value:e.item.extra.options[0].name,animated:!1}},[e._l(e.item.extra.options,(function(t,i){return[a("TabPane",{key:i+"_"+t.name,attrs:{label:t.title,name:t.name}},[e._l(t.options,(function(i,n){return[a("XyBuilderFormItem",{key:n,ref:"formitemtab_"+t.name+"_"+i.name,refInFor:!0,attrs:{item:i,formValues:e.formValues,formRules:e.formRules,cloudId:e.cloudId,eid:e.eid,prop:e.item.name},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]}))],2)]}))],2)]:a("FormItem",{attrs:{label:e.item.title,prop:e.prop,rules:e.formRules[e.item.name]?e.formRules[e.item.name]:[]}},["divider"==e.item.type?[a("Divider")]:"static"==e.item.type?[a("span",[e._v(e._s(e.item.value))]),a("Input",{staticClass:"hidden",attrs:{disabled:e.item.extra.disabled,placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"hidden"==e.item.type?[a("span",{staticClass:"hidden"},[e._v(e._s(e.item.value))])]:"staticUrl"==e.item.type?[a("a",{attrs:{href:e.item.value,target:"_blank"}},[e._v(e._s(e.item.extra.placeholder))])]:"text"==e.item.type?[a("Input",{attrs:{disabled:e.item.extra.disabled,placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"password"==e.item.type?[a("Input",{attrs:{disabled:e.item.extra.disabled,type:"password",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"url"==e.item.type?[a("Input",{attrs:{disabled:e.item.extra.disabled,type:"url",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"email"==e.item.type?[a("Input",{attrs:{disabled:e.item.extra.disabled,type:"email",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"number"==e.item.type?[a("Input",{attrs:{disabled:e.item.extra.disabled,type:"number",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"digit"==e.item.type?[a("Input",{attrs:{disabled:e.item.extra.disabled,type:"text",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"tel"==e.item.type?[a("Input",{attrs:{disabled:e.item.extra.disabled,type:"tel",placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"textarea"==e.item.type||"array"==e.item.type?[a("Input",{attrs:{disabled:e.item.extra.disabled,type:"textarea",autosize:{minRows:e.item.extra.minRows?e.item.extra.minRows:3,maxRows:e.item.extra.maxRows?e.item.extra.maxRows:10},placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"select"==e.item.type?[a("Select",{attrs:{filterable:!0,disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},e._l(e.item.extra.options,(function(t,i,n){return a("Option",{key:n,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"selects"==e.item.type?[a("Select",{attrs:{filterable:!0,multiple:!0,disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},e._l(e.item.extra.options,(function(t,i,n){return a("Option",{key:n,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"radio"==e.item.type?[a("RadioGroup",{model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},e._l(e.item.extra.options,(function(t,i,n){return a("Radio",{key:n,attrs:{disabled:e.item.extra.disabled,label:t.value}},[t.icon?a("Icon",{attrs:{type:t.icon}}):e._e(),a("span",[e._v(e._s(t.title))])],1)})),1)]:"checkbox"==e.item.type?[a("CheckboxGroup",{model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},e._l(e.item.extra.options,(function(t,i,n){return a("Checkbox",{key:n,attrs:{disabled:e.item.extra.disabled,label:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"switch"==e.item.type?[a("i-switch",{attrs:{disabled:e.item.extra.disabled,"true-value":e.item.extra.options[1].value,"false-value":e.item.extra.options[0].value,size:"large"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.item.extra.options[1].title))]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.item.extra.options[0].title))])])]:"slider"==e.item.type?[a("Slider",{attrs:{disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"datepicker"==e.item.type?[a("DatePicker",{attrs:{disabled:e.item.extra.disabled,type:"date",placeholder:"选择日期",value:e.util.formatDate(e.item.value,"yyyy-MM-dd")},on:{"on-change":function(t){e.formValues[e.item.name]=t}}})]:"timepicker"==e.item.type?[a("TimePicker",{attrs:{disabled:e.item.extra.disabled,type:"time",format:e.item.extra.format?e.item.extra.format:"HH:mm:ss",steps:e.item.extra.steps?e.item.extra.steps:"[1,1,1]",placeholder:"选择时间",value:e.item.value},on:{"on-change":function(t){e.formValues[e.item.name]=t}}})]:"datetimepicker"==e.item.type?[a("DatePicker",{attrs:{disabled:e.item.extra.disabled,type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期时间",value:e.util.formatDate(e.item.value,"yyyy-MM-dd HH:mm")},on:{"on-change":function(t){e.formValues[e.item.name]=t}}})]:"daterangepicker"==e.item.type?[a("DatePicker",{attrs:{disabled:e.item.extra.disabled,type:"daterange",format:"yyyy-MM-dd",placeholder:"选择日期",value:e.formatDates(e.item.value,"yyyy-MM-dd")},on:{"on-change":function(t){e.formValues[e.item.name]=t}}})]:"datetimerangepicker"==e.item.type?[a("DatePicker",{attrs:{disabled:e.item.extra.disabled,type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期时间",value:e.formatDates(e.item.value,"yyyy-MM-dd HH:mm")},on:{"on-change":function(t){e.formValues[e.item.name]=t}}})]:"timerangepicker"==e.item.type?[a("TimePicker",{attrs:{disabled:e.item.extra.disabled,type:"timerange",format:e.item.extra.format?e.item.extra.format:"HH:mm:ss",steps:e.item.extra.steps?e.item.extra.steps:"[1,1,1]",placeholder:"选择时间区间",value:e.item.value},on:{"on-change":function(t){e.formValues[e.item.name]=t}}})]:"rate"==e.item.type?[a("Rate",{attrs:{disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"cascader"==e.item.type||"region"==e.item.type?[a("Cascader",{attrs:{disabled:e.item.extra.disabled,data:e.item.extra.options,size:"default"},on:{"load-data":e.loadCascaderData},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"colorpicker"==e.item.type?[a("ColorPicker",{attrs:{disabled:e.item.extra.disabled},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"image"==e.item.type?[a("XyBuilderFormImage",{attrs:{item:e.item,img:{name:"",title:""},cloudId:e.cloudId,eid:e.eid,token:e.token},on:{handleView:e.handleView,"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}}),a("Input",{attrs:{disabled:e.item.extra.disabled,placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"imageflex"==e.item.type?[a("div",{staticStyle:{display:"flex"}},e._l(e.item.extra.options,(function(t,i){return a("div",{key:i,staticStyle:{"padding-right":"15px"}},[a("XyBuilderFormImage",{attrs:{item:e.item,img:t,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{handleView:e.handleView,"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name][t.value],callback:function(a){e.$set(e.formValues[e.item.name],t.value,a)},expression:"formValues[item.name][img.value]"}})],1)})),0)]:"images"==e.item.type?[a("XyBuilderFormImages",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{handleView:e.handleView,"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"file"==e.item.type?[a("XyBuilderFormFile",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"files"==e.item.type?[a("XyBuilderFormFiles",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"poster"==e.item.type?[a("XyBuilderFormPoster",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"selectlist"==e.item.type?[e._v(" "+e._s(e.formValues[e.item.name])+" "),a("a",{staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},on:{click:function(t){return e.rightButtonModal(e.item)}}},[e._v(" 点击选择 ")]),a("Modal",{attrs:{transfer:!1,"footer-hide":!0,scrollable:e.item.extra.pageData.scrollable,draggable:e.item.extra.pageData.draggable,"mask-closable":!1,width:e.item.extra.pageData.width?e.item.extra.pageData.width:600,title:e.item.extra.pageData.title},model:{value:e.item.extra.pageData.show,callback:function(t){e.$set(e.item.extra.pageData,"show",t)},expression:"item.extra.pageData.show"}},[a("XyBuilderList",{ref:"listselect_"+e.item.name,attrs:{showActions:!0,cloudId:e.cloudId,eid:e.eid,api:e.item.extra.pageData.apiBlank,show:e.item.extra.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t},"close-model":function(t){e.item.extra.pageData.show=!1}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})],1)]:"formlist"==e.item.type?[a("Row",e._l(e.item.extra.options,(function(t,i,n){return a("div",{key:n},[a("Col",{attrs:{span:t.span}},[e._v(" "+e._s(t.title)+" ")])],1)})),0),e._l(e.formValues[e.item.name],(function(t,i,n){return a("Row",{key:n},[e._l(e.item.extra.options,(function(t,n,o){return a("div",{key:o},[a("Col",{attrs:{span:t.span}},[e.item.extra.options[n].type&&"text"==e.item.extra.options[n].type||e.item.extra.options[n].type&&"switch"==e.item.extra.options[n].type?[a("Input",{model:{value:e.formValues[e.item.name][i][t.key],callback:function(a){e.$set(e.formValues[e.item.name][i],t.key,a)},expression:"formValues[item.name][key2][item3.key]"}})]:e.item.extra.options[n].type&&"datetimepicker"==e.item.extra.options[n].type?[a("DatePicker",{attrs:{disabled:!!e.item.extra.options[n].extra.disabled&&e.item.extra.options[n].extra.disabled,type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期时间",value:e.util.formatDate(e.formValues[e.item.name][i][t.key],"yyyy-MM-dd HH:mm")},on:{"on-change":function(a){e.formValues[e.item.name][i][t.key]=a}}})]:[a("Input",{model:{value:e.formValues[e.item.name][i][t.key],callback:function(a){e.$set(e.formValues[e.item.name][i],t.key,a)},expression:"formValues[item.name][key2][item3.key]"}})]],2)],1)})),a("Button",{attrs:{type:"dashed"},on:{click:function(t){return e.formlistDelrow(e.item.name,i)}}},[e._v("删除")])],2)})),a("Button",{staticStyle:{"margin-top":"8px"},attrs:{type:"dashed",icon:"md-add"},on:{click:function(t){return e.formlistAddrow(e.item.name)}}},[e._v(" 增加一行 ")])]:"datalist"==e.item.type?[a("XyBuilderList",{ref:"list_"+e.item.name,attrs:{cloudId:e.cloudId,eid:e.eid,api:e.item.extra.pageData.apiBlank,show:e.item.extra.pageData.show},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:"checkboxtree"==e.item.type?[a("tree-table",{ref:"checkboxtree_"+e.item.name,attrs:{"expand-key":e.item.extra.expandKey,"is-fold":!0,border:!0,stripe:!1,selectable:!0,"expand-type":!1,columns:e.item.extra.columns,data:e.item.extra.data}})]:"markdown"==e.item.type?[a("div",[a("mavon-editor",{staticStyle:{"min-height":"500px"},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})],1)]:"html"==e.item.type||"tinymce"==e.item.type?[a("tinymce-vue",{attrs:{"api-key":"y1buzf80o0qtt4lt3pfj0yh98ilgq4ts6mf3nwjpqky9ea49",init:{external_plugins:{},init_instance_callback:function(e){},default_link_target:"_blank",paste_data_images:!0,images_upload_url:e.item.extra.action,automatic_uploads:!0,file_picker_types:"file image media",file_picker_callback:e.filePickerCallback,images_upload_handler:e.imagesUploadHandler,language_url:"https://cdn.jsdelivr.net/gh/starideas/xyfront/libs/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:e.item.extra.skin,theme:"silver",branding:!0,plugins:"link lists image code table wordcount fullscreen emoticons print codesample",toolbar:" undo redo print| cut copy paste pastetext removeformat | bold italic underline strikethrough | forecolor backcolor | formatselect fontselect fontsizeselect | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent blockquote | link image codesample emoticons| code fullscreen",height:500,convert_urls:!1,font_formats:"\n                      微软雅黑=微软雅黑;\n                      宋体=宋体;\n                      黑体=黑体;\n                      仿宋=仿宋;\n                      楷体=楷体;\n                      隶书=隶书;\n                      幼圆=幼圆;\n                      Andale Mono=andale mono,times;\n                      Arial=arial, helvetica,\n                      sans-serif;\n                      Arial Black=arial black, avant garde;\n                      Book Antiqua=book antiqua,palatino;\n                      Comic Sans MS=comic sans ms,sans-serif;\n                      Courier New=courier new,courier;\n                      Georgia=georgia,palatino;\n                      Helvetica=helvetica;\n                      Impact=impact,chicago;\n                      Symbol=symbol;\n                      Tahoma=tahoma,arial,helvetica,sans-serif;\n                      Terminal=terminal,monaco;\n                      Times New Roman=times new roman,times;\n                      Trebuchet MS=trebuchet ms,geneva;\n                      Verdana=verdana,geneva;\n                      Webdings=webdings;\n                      Wingdings=wingdings,zapf dingbats"}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"sku"==e.item.type?[a("XyBuilderFormSku",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"skuPrice"==e.item.type?[a("XyBuilderFormSkuPrice",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,formValues:e.formValues},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"fee"==e.item.type?[a("XyBuilderFormFee",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,formValues:e.formValues},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:"amap"==e.item.type?[a("XyBuilderFormAmap",{attrs:{item:e.item,cloudId:e.cloudId,eid:e.eid,formValues:e.formValues},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})]:[a("Input",{attrs:{disabled:e.item.extra.disabled,placeholder:e.item.extra.placeholder},model:{value:e.formValues[e.item.name],callback:function(t){e.$set(e.formValues,e.item.name,t)},expression:"formValues[item.name]"}})],a("Modal",{attrs:{title:"预览"},model:{value:e.previewImageVisible,callback:function(t){e.previewImageVisible=t},expression:"previewImageVisible"}},[e.previewImageVisible?a("img",{staticStyle:{width:"100%"},attrs:{src:e.previewImageUrl}}):e._e()]),a("div",{staticStyle:{color:"#aaa","font-size":"12px"}},[e._v(e._s(e.item.extra.tip))])],2)],2)}),[],!1,null,null,null);t.default=i.exports},b37a:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}i={name:"Files",props:{item:{},value:[],token:"",cloudId:0,eid:0},data:function(){return{}},created:function(){""==this.item.value&&(this.item.value=new Array),""==this.value&&(this.value=new Array)},beforeMount:function(){},methods:{handleView:function(){},handleSuccessBatch:function(e,t,a){"upload_oss"==this.item.extra.driver?(t.url=this.item.extra.data.host+"/"+this.item.extra.data.key,this.value.push({name:t.name,url:t.url}),this.item.value=a):200==e.code?(t.url=e.data.url,this.value.push({name:t.name,url:t.url}),this.item.value=a):this.$Notice.warning({title:e.msg}),this.$emit("input",this.value)},handleRemoveBatch:function(e){var t=this.value;this.item.value.splice(t.indexOf(e),1),this.value.splice(t.indexOf(e),1)},handleBeforeUpload:function(e){var t=this;if("upload_oss"==t.item.extra.driver)return new Promise(function(){var a,i=(a=n.a.mark((function a(i,o){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.util.request({url:"/v1/upload_oss/index/sign",method:"get",header:{CloudId:t.cloudId,Eid:t.eid}});case 2:200==(r=a.sent).code?(t.item.extra.action=r.data.params.host,r.data.params.key=r.data.params.key+e.name,t.item.extra.data=r.data.params,i()):t.$Notice.warning({title:r.msg});case 4:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(i,n){var r=a.apply(e,t);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))});return function(e,t){return i.apply(this,arguments)}}())},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件"+e.name+"的格式不正确, 请重新选择。"})},handleMaxSize:function(e){this.$Notice.warning({title:"文件大小不正确",desc:"文件"+e.name+"太大了, 不支持超过1M。"})}},watch:{}},a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement;return(t=e._self._c||t)("div",[t("Upload",{ref:"upload_"+e.item.name,attrs:{"show-upload-list":!0,headers:{Authorization:e.token},"default-file-list":e.item.value,format:e.item.extra.format,"max-size":e.item.extra.maxSize,"on-success":e.handleSuccessBatch,"on-remove":e.handleRemoveBatch,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,data:e.item.extra.data,type:"drag",action:e.item.extra.action}},[t("div",{staticStyle:{padding:"20px 0"}},[t("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"42"}}),t("p",[e._v("点击或者拖动文件到此处上传")])],1)])],1)}),[],!1,null,null,null),t.default=i.exports},b637:function(e,t,a){"use strict";var i=a("42cd");a.n(i).a},b8ab:function(e,t,a){"use strict";a.r(t);var i=a("4d99"),n=a("21b3");n={name:"XyBuilderFormRoute",components:{XyBuilderForm:i.default,BreadcurmbComp:n.default},data:function(){return{api:this.$route.meta.api}},created:function(){},beforeMount:function(){this.loadData()},methods:{loadData:function(){var e;"dyform"==this.$route.meta.dytype&&(0<(e=this).$route.params.length&&this.$route.params.forEach((function(t){e.$route.meta.api=e.$route.meta.api+"/"+e.$route.params[t]})),e.api=e.$route.meta.api)},refreshData:function(){this.$refs.xy_builder.loadData()}},watch:{$route:function(){}}},a("ce3b"),a=a("2877"),n=Object(a.a)(n,(function(){var e=this.$createElement;return(e=this._self._c||e)("Card",{attrs:{shadow:""}},[e("BreadcurmbComp",{on:{"refresh-page":this.refreshData}}),e("XyBuilderForm",{ref:"xy_builder",attrs:{api:this.api,showDev:this.$store.state.app.showDev}})],1)}),[],!1,null,null,null);t.default=n.exports},bb90:function(e,t,a){"use strict";var i=a("66aa");a.n(i).a},c00b:function(e,t,a){"use strict";var i=a("f9a6");a.n(i).a},c321:function(e,t,a){},c65b:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function s(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var l,u;i={name:"Sku",components:{XyBuilderFormImage:a("aefe").default},props:{item:{},value:{skuSpec:[],skuList:[]},token:"",cloudId:0,eid:0},data:function(){return{title:"",tag:"",columns:[{title:"规格",key:"spec",slot:"select",width:"300"},{title:"价格",key:"priceGroup",slot:"group",width:"230",options:{fields:[["price","现价"],["originalPrice","原价"]]}},{title:"库存",key:"stock",slot:"text"},{title:"SKU编号",key:"skuNo",slot:"text"},{title:"备注",key:"remark",slot:"text"},{title:"图片",key:"cover",slot:"image",width:60},{title:"删除",key:"delete",slot:"delete",width:70}],dataItem:{spec:"",price:"",vipPrice:"",originalPrice:"",stock:"",skuNo:"",remark:"",cover:"",delete:""},specCascader:[]}},created:function(){},mounted:function(){this.updateColumns()},methods:{getData:function(){this.$emit("input",this.value)},loadData:function(e,t){this.specCascader[e.index+1]&&(e.loading=!0,e.children=this.specCascader[e.index+1],e.loading=!1,t())},delrow:(l=n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.value.skuList[t].id)return e.next=3,this.util.request({url:this.item.extra.apiSkuDelete+"/"+this.value.skuList[t].id,method:"DELETE",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=7;break;case 3:"200"==(a=e.sent).code?(this.value.skuList.splice(t,1),this.$Message.success(a.msg)):this.$Message.error(a.msg),e.next=8;break;case 7:this.value.skuList.splice(t,1);case 8:this.getData();case 9:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=l.apply(e,t);function o(e){s(n,a,i,o,r,"next",e)}function r(e){s(n,a,i,o,r,"throw",e)}o(void 0)}))},function(e){return u.apply(this,arguments)}),addrow:function(){var e,t=o(this.value.skuList);try{for(t.s();!(e=t.n()).done;)""==e.value&&this.$Message.error("请填写规格")}catch(e){t.e(e)}finally{t.f()}var a=Object.assign({},this.dataItem);this.value.skuList.push(a)},closeTag:function(e,t){this.value.skuSpec[e].spec.splice(t,1)},addTag:function(e){if(!this.tag)return this.$Message.error("请填写规格"),!1;var t,a=o(this.value.skuSpec[e].spec);try{for(a.s();!(t=a.n()).done;)if(t.value.title==this.tag)return this.$Message.error("规格重复"),!1}catch(e){a.e(e)}finally{a.f()}var i=this.value;i.skuSpec[e].spec.push({title:this.tag}),this.tag="",this.value=i},addspec:function(){if(!this.title)return this.$Message.error("请填写规格名称"),!1;var e,t=o(this.value.skuSpec);try{for(t.s();!(e=t.n()).done;)if(e.value.title==this.title)return this.$Message.error("规格名称重复"),!1}catch(e){t.e(e)}finally{t.f()}this.value.skuSpec.push({title:this.title,spec:[]}),this.title=""},delspec:function(e){this.value.skuSpec.splice(e,1)},updateColumns:function(){for(var e=this.specCascader,t=0;t<this.value.skuSpec.length;t++){var a=[],i=o(this.value.skuSpec[t].spec);try{for(i.s();!(n=i.n()).done;){var n=n.value;t==this.value.skuSpec.length-1?a.push({index:t,value:n.title,label:n.title}):a.push({index:t,value:n.title,label:n.title,children:[],loading:!1})}}catch(e){i.e(e)}finally{i.f()}e[t]=a}this.specCascader=e}},watch:{value:{handler:function(){this.updateColumns()},deep:!0,immediate:!0}}},a("ef08"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sku-spec"},[e._l(e.value.skuSpec,(function(t,i){return a("Row",{key:i,attrs:{gutter:"15",type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:3}},[a("Input",{attrs:{size:"small"},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item1.title"}})],1),a("Col",{attrs:{span:18}},[e._l(t.spec,(function(t,n){return a("Tag",{key:n,attrs:{name:t.title,closable:""},on:{"on-close":function(t){return e.closeTag(i,n)}}},[e._v(" "+e._s(t.title)+" ")])})),a("Input",{staticStyle:{width:"80px","margin-right":"5px"},attrs:{size:"small",placeholder:"回车添加"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addTag(i)}},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],2),a("Col",{attrs:{span:3}},[a("Button",{attrs:{size:"small",type:"dashed"},on:{click:function(t){return e.delspec(i)}}},[e._v("删除")])],1)],1)})),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Input",{staticStyle:{width:"80px","margin-right":"15px"},attrs:{size:"small",placeholder:"新规格名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addspec(t)}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("Button",{staticStyle:{"vertical-align":"middle","margin-right":"15px"},attrs:{size:"small",type:"primary"},on:{click:e.addspec}},[e._v(" 增加规格 ")])],1)],2),a("div",{staticClass:"sku-list"},[a("Table",{attrs:{border:"",columns:e.columns,data:e.value.skuList},scopedSlots:e._u([{key:"select",fn:function(t){t.row;var i=t.column,n=t.index;return[a("Cascader",{attrs:{size:"small",transfer:!0,data:e.specCascader[0],"load-data":e.loadData},model:{value:e.value.skuList[n][i.key],callback:function(t){e.$set(e.value.skuList[n],i.key,t)},expression:"value.skuList[index][column.key]"}})]}},{key:"text",fn:function(t){t.row;var i=t.column,n=t.index;return[a("Input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.value.skuList[n][i.key],callback:function(t){e.$set(e.value.skuList[n],i.key,t)},expression:"value.skuList[index][column.key]"}})]}},{key:"group",fn:function(t){t.row;var i=t.column,n=t.index;return e._l(i.options.fields,(function(t,i){return a("div",{key:i,staticClass:"sku-list-group"},[a("div",{staticClass:"title"},[e._v(e._s(t[1])+":")]),a("div",[a("Input",{attrs:{size:"small"},on:{"on-blur":e.getData},model:{value:e.value.skuList[n][t[0]],callback:function(a){e.$set(e.value.skuList[n],t[0],a)},expression:"value.skuList[index][grp[0]]"}})],1)])}))}},{key:"image",fn:function(t){t.row;var i=t.column,n=t.index;return[a("XyBuilderFormImage",{attrs:{item:{name:i.key,extra:e.item.extra},img:{name:"",title:""},cloudId:e.cloudId,eid:e.eid,token:e.token},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}},model:{value:e.value.skuList[n][i.key],callback:function(t){e.$set(e.value.skuList[n],i.key,t)},expression:"value.skuList[index][column.key]"}})]}},{key:"delete",fn:function(t){t.row,t.column;var i=t.index;return[a("Button",{staticStyle:{"vertical-align":"middle"},attrs:{size:"small",type:"dashed"},on:{click:function(t){return e.delrow(i)}}},[e._v(" 删除 ")])]}}])}),a("Button",{staticStyle:{"vertical-align":"middle","margin-right":"15px"},attrs:{size:"small",type:"dashed"},on:{click:e.addrow}},[e._v(" 增加 ")])],1)])}),[],!1,null,"44413b00",null);t.default=i.exports},cbba:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i),o=a("c276");function r(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function s(e){r(o,i,n,s,l,"next",e)}function l(e){r(o,i,n,s,l,"throw",e)}s(void 0)}))}}var l,u,d;i={data:function(){return{activeData:"",srvList:o.a.getSrvList(),showSrvlist:!1,baseUrl:"",admin2step:"",isDemo:"false",login:{loading:!1,account:"",password:"",googleAuth:"",mobileVerify:"",emailVerify:""},loginRule:{account:[{required:!0,message:"请填写账号",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}},created:(d=s(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"true"!=this.isDemo&&!this.$route.query.demo||(this.login.account="admin",this.login.password="uniadmin"),"localhost"==window.location.hostname||"127.0.0.1"==window.location.hostname?(this.showSrvlist=!0,this.baseUrl=this.util.getStorageSync("xyadmin-active")):this.baseUrl=window.location.protocol+"//"+window.location.host+window.location.pathname+"api",e.next=4,this.getSiteInfo();case 4:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)}),methods:{getSiteInfo:(u=s(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.baseUrl){e.next=33;break}if("localhost"!=window.location.hostname&&"127.0.0.1"!=window.location.hostname){e.next=22;break}if(this.util.setStorageSync("xyadmin-active",this.baseUrl),this.activeData=this.util.getStorageSync("xyadmin-vuex-"+this.baseUrl),this.activeData||(this.activeData=this.util.getStorageSync("xyadmin-vuex-default")),this.activeData)return this.activeData=JSON.parse(this.activeData),e.next=11,this.util.request({url:this.baseUrl,method:"get"});e.next=19;break;case 11:if(200!=(t=e.sent).code)return this.util.showToast({title:"接口异常，请检查服务器接口！",icon:"loading",duration:2e3}),e.abrupt("return",!1);e.next=15;break;case 15:this.activeData.app.api=t.data.api,t.data.siteInfo&&(t.data.siteInfo.admin2step&&(this.admin2step=t.data.siteInfo.admin2step.login[0]),this.activeData.app.baseUrl=this.baseUrl,this.activeData.app.siteInfo=t.data.siteInfo),e.next=20;break;case 19:alert("不存在xyadmin-vuex-default");case 20:e.next=33;break;case 22:return e.next=25,this.util.request({url:this.baseUrl,method:"get"});case 25:if(200!=(a=e.sent).code)return this.util.showToast({title:"接口异常，请检查服务器接口！",icon:"loading",duration:2e3}),e.abrupt("return",!1);e.next=29;break;case 29:this.$store.commit("app/setApi",a.data.api),a.data.api.urlLogin&&(window.location.href=a.data.api.urlLogin),a.data.siteInfo&&(a.data.siteInfo.admin2step&&(this.admin2step=a.data.siteInfo.admin2step.login[0]),this.$store.commit("app/setSiteInfo",a.data.siteInfo)),this.$store.commit("app/setBaseUrl",this.baseUrl);case 33:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)}),bindPickerChange:function(e){this.baseUrl=e},handleSubmit:(l=s(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSiteInfo();case 2:if(this.login.loading=!0,"localhost"==window.location.hostname||"127.0.0.1"==window.location.hostname)return e.next=7,this.util.request({url:this.activeData.app.api.apiBase+this.activeData.app.api.apiLogin,data:this.login,method:"post"});e.next=11;break;case 7:200==(t=e.sent).code?(this.activeData.user.token=t.data.token,this.activeData.user.userInfo=t.data.userInfo,this.activeData.menu.menuList="",this.util.showToast({title:t.msg,icon:"success",duration:1e3}),this.util.setStorageSync("xyadmin-vuex-"+this.baseUrl,JSON.stringify(this.activeData)),this.util.reLaunch()):this.util.showToast({title:t.msg,icon:"loading",duration:3e3}),e.next=15;break;case 11:return e.next=13,this.util.request({url:this.$store.state.app.api.apiBase+this.$store.state.app.api.apiLogin,data:this.login,method:"post"});case 13:200==(t=e.sent).code?(this.$store.commit("user/setToken",t.data.token),this.util.showToast({title:t.msg,icon:"success",duration:1e3}),this.util.reLaunch()):this.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 15:this.login.loading=!1;case 16:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})}},a("4700"),a=a("2877"),i=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrap"},[a("vue-particles",{staticClass:"slider-particles",attrs:{color:"#808695",linesColor:"#808695",linesWidth:1,lineLinked:!0,lineOpacity:.4,linesDistance:150,particleOpacity:.7,particlesNumber:60,shapeType:"circle",particleSize:4,moveSpeed:1,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}}),a("Row",{staticClass:"main",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{xs:20,sm:10,md:6,lg:5}},[a("div",{staticStyle:{width:"100%",color:"#fff","margin-bottom":"30px"}},[a("img",{staticStyle:{width:"120px","margin-bottom":"10px"},attrs:{src:e.$store.state.app.siteInfo.logo}}),a("h2",[e._v(e._s(e.$store.state.app.siteInfo.title)+"后台登录")])]),a("Form",{ref:"login",attrs:{model:e.login,rules:e.loginRule}},[a("FormItem",[a("Input",{directives:[{name:"show",rawName:"v-show",value:e.showSrvlist,expression:"showSrvlist"}],attrs:{size:"large",type:"text",placeholder:"服务器API接口地址"},model:{value:e.baseUrl,callback:function(t){e.baseUrl=t},expression:"baseUrl"}},[a("Select",{model:{value:e.baseUrl,callback:function(t){e.baseUrl=t},expression:"baseUrl"}},e._l(e.srvList,(function(t,i){return a("Option",{key:i,attrs:{value:t.val.app.baseUrl}},[e._v("服务器")])})),1),a("Dropdown",{attrs:{slot:"prepend"},slot:"prepend"},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v(" 服务器 "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.srvList,(function(t,i){return a("DropdownItem",{key:i,attrs:{value:i},nativeOn:{click:function(a){return e.bindPickerChange(t.val.app.baseUrl)}}},[e._v(" "+e._s(t.val.app.siteInfo.title)+"-"+e._s(t.val.app.baseUrl)+" ")])})),1)],1)],1)],1),a("FormItem",{attrs:{prop:"account"}},[a("Input",{attrs:{size:"large",type:"text",prefix:"ios-person-outline",placeholder:"账号"},model:{value:e.login.account,callback:function(t){e.$set(e.login,"account",t)},expression:"login.account"}})],1),a("FormItem",{attrs:{prop:"password"}},[a("Input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit("login")}},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"googleAuth"==this.admin2step,expression:"this.admin2step == 'googleAuth'"}],attrs:{prop:"googleAuth"}},[a("Input",{attrs:{size:"large",type:"text",prefix:"ios-lock-outline",placeholder:"谷歌验证"},model:{value:e.login.googleAuth,callback:function(t){e.$set(e.login,"googleAuth",t)},expression:"login.googleAuth"}})],1),a("FormItem",[a("Button",{attrs:{size:"large",long:"",loading:e.login.loading,type:"primary"},on:{click:function(t){return e.handleSubmit("login")}}},[e._v(" 登录 ")])],1)],1)],1)],1)],1)}),[],!1,null,"213cc391",null);t.default=i.exports},cd4d:function(e,t,a){"use strict";var i=a("ff8b");a.n(i).a},ce3b:function(e,t,a){"use strict";var i=a("30e4");a.n(i).a},d440:function(e,t,a){"use strict";a.r(t);var i={name:"XyBuilderIframeRoute",components:{},data:function(){return{api:""}},created:function(){},beforeMount:function(){this.api=this.$route.meta.api},methods:{},watch:{}};a=a("2877"),i=Object(a.a)(i,(function(){var e=this.$createElement;return(e=this._self._c||e)("div",[e("iframe",{staticStyle:{width:"100%",height:"calc(100vh - 150px)"},attrs:{frameborder:"0",src:this.api}})])}),[],!1,null,null,null);t.default=i.exports},d820:function(e,t,a){e.exports=a.p+"img/qun_qq.a49e406d.png"},e0e2:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var r,s,l={name:"XyBuilderStack",props:{api:"",cloudId:0,eid:0,show:!1,predata:""},components:{},data:function(){return{loading:!1,stackData:{stackList:""}}},watch:{show:function(e){this.stackData={},1==e&&this.loadData()}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return a.e("manifest").then(a.bind(null,"9a73"))},this.$options.components.XyBuilderForm=function(){return Promise.all([a.e("vendor"),a.e("manifest")]).then(a.bind(null,"1343"))},this.$options.components.XyBuilderInfo=function(){return a.e("manifest").then(a.bind(null,"2949"))},this.$options.components.XyBuilderTab=function(){return a.e("manifest").then(a.bind(null,"73a5"))}},created:function(){this.cloudId||this.$route.query.cloudId&&(this.cloudId=this.$route.query.cloudId),this.eid||this.$route.query.eid&&(this.eid=this.$route.query.eid),this.predata?this.stackData=this.predata:this.loadData()},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{loadData:(r=n.a.mark((function e(){var t,a=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=0<a.length&&void 0!==a[0]?a[0]:"")&&(this.api=t),this.loading=!0,this.api)return e.next=6,this.util.request({url:this.api,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});e.next=8;break;case 6:"200"==(t=e.sent).code?(this.stackData=t.data.stackData,this.loading=!1):this.util.showToast({title:t.msg,icon:"loading",duration:3e3});case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(a,i){var n=r.apply(e,t);function s(e){o(n,a,i,s,l,"next",e)}function l(e){o(n,a,i,s,l,"throw",e)}s(void 0)}))},function(){return s.apply(this,arguments)})}};a("cd4d"),i=a("2877"),l=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xy_builder-stack-wrap"},[e._l(e.stackData.stackList,(function(t,i){return a("div",{key:i,staticClass:"stackList"},[a("Divider",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"stack.title"}],attrs:{orientation:"left"}},[e._v(e._s(t.title))]),a("Row",[a("Col",{staticClass:"stack-item block",attrs:{xs:24,sm:24}},["tab"==t.pageData.modalType?[a("XyBuilderTab",{ref:"xy_builder_tab_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,show:!0,predata:t.predata},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})]:["list"==t.pageData.modalType?a("div",[a("XyBuilderList",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show,predata:t.predata},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1):"form"==t.pageData.modalType?a("div",[a("XyBuilderForm",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show,predata:t.predata},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1):"info"==t.pageData.modalType?a("div",[a("XyBuilderInfo",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{cloudId:e.cloudId,eid:e.eid,api:t.pageData.apiBlank,show:t.pageData.show,predata:t.predata},on:{"update:cloudId":function(t){e.cloudId=t},"update:cloud-id":function(t){e.cloudId=t},"update:eid":function(t){e.eid=t}}})],1):e._e()]],2)],1)],1)})),!0===e.loading?[a("Row",[a("i-col",{staticClass:"spin-col",attrs:{span:"24"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"22"}}),a("div",[e._v("Loading")])],1)],1)],1)]:e._e()],2)}),[],!1,null,"3cc49fa6",null);t.default=l.exports},e2f4:function(e,t,a){},ea62:function(e,t,a){e.exports=a.p+"img/app.ef222224.png"},eea6:function(e,t,a){"use strict";a.r(t);var i=a("a34a"),n=a.n(i);function o(e,t,a,i,n,o,r){try{var s=e[o](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var r=e.apply(t,a);function s(e){o(r,i,n,s,l,"next",e)}function l(e){o(r,i,n,s,l,"throw",e)}s(void 0)}))}}var s,l,u={data:function(){return{loading:!1,cloudId:0,eid:0,panelDefault:!1,panelList:[]}},watch:{"$store.state.app.api":function(){this.loadData()},"$store.state.menu.menuList":function(){}},created:function(){},mounted:(l=r(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$store.state.menu.menuList.menuTree&&this.$store.state.menu.menuList.menuTree[this.$store.state.menu.currentSite].appName&&(this.cloudId=this.$store.state.menu.menuList.menuTree[this.$store.state.menu.currentSite].id),this.$store.state.app.api.apiAdmin&&this.loadData();case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),methods:{loadData:(s=r(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.util.request({url:this.$store.state.app.api.apiAdmin,method:"get",header:{CloudId:this.cloudId,Eid:this.eid}});case 3:200==(t=e.sent).code&&t.data.dataList&&0<t.data.dataList.length?this.panelList=t.data.dataList:this.panelDefault=!0,this.loading=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})}};a("bb90"),i=a("2877"),u=Object(i.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"home",attrs:{"element-loading-text":"拼命加载中"}},[i("el-row",{attrs:{gutter:15}},[0<e.panelList.length?e._l(e.panelList,(function(t,a){return i("el-col",{key:a,attrs:{md:24,lg:t.span}},["html"==t.type?[i("div",{domProps:{innerHTML:e._s(t.content)}})]:"count"==t.type?[i("el-row",{directives:[{name:"show",rawName:"v-show",value:t.content,expression:"item.content"}],attrs:{gutter:15}},e._l(t.content,(function(t,a){return i("el-col",{key:a,attrs:{xs:12,lg:t.item.lg||6,xl:4}},[i("el-row",{staticClass:"count-item",style:{backgroundColor:t.item.bgColor}},[i("el-col",{staticClass:"left"},[i("i",{staticClass:"icon",class:t.item.icon}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.item.title,expression:"it.item.title"}]},[e._v(e._s(t.item.title))])]),i("el-col",{staticClass:"right",style:{backgroundColor:t.item.bgColorRight?t.item.bgColorRight:"#fff",color:t.item.bgColorRight?"#fff":""}},[i("div",{staticClass:"value"},[i("span",[e._v(e._s(t.current.value))]),i("span",{staticClass:"suffix"},[e._v(e._s(t.current.suffix))])]),i("div",{staticClass:"title"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.content.value,expression:"it.content.value"}],staticClass:"value"},[e._v(e._s(t.content.value))]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.content.list,expression:"it.content.list"}],staticClass:"list"},e._l(t.content.list,(function(t,a){return i("div",{key:a,staticClass:"cell"},[e._v(" "+e._s(t.title)+"："+e._s(t.value)+" ")])})),0)])])],1)],1)})),1)]:"card"==t.type?[i("Card",{staticClass:"index-card",attrs:{bordered:!1,"dis-hover":!0}},[i("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),i("div",[e._l(t.content,(function(t,a){return["divider"==t.type?[i("Divider",{key:a,staticStyle:{"font-size":"12px","font-weight":"400"},attrs:{size:"small",orientation:"left"}},[e._v(" "+e._s(t.title)+" ")])]:[i("el-row",{key:a,staticStyle:{"text-align":"justify","padding-bottom":"5px","margin-bottom":"5px","border-bottom":"1px dashed #eee"},attrs:{type:"flex",justify:"start",align:"top"}},[i("el-col",{attrs:{xs:10,sm:7,md:5}},[e._v(e._s(t.title)+"：")]),i("el-col",{attrs:{xs:14,sm:16}},[e._v(e._s(t.value))])],1)]]}))],2)])]:e._e()],2)})):e._e(),e.panelDefault?[i("el-col",{attrs:{md:24,lg:12}},[i("Card",{staticClass:"index-card",attrs:{bordered:!1,"dis-hover":!0}},[i("p",{attrs:{slot:"title"},slot:"title"},[e._v("系统信息")]),i("div",[i("div",[e._v("后台名称：UniAdmin后台")]),i("div",[e._v("官方网站："),i("a",{attrs:{target:"_blank",href:"https://uniadmin.jiangruyi.com"}},[e._v("https://uniadmin.jiangruyi.com")])]),i("div",[e._v("客户端框架：CloudAdmin v0.3.0")]),i("div",[e._v("服务端框架：UniAdmin v0.3.0")]),i("div",[i("span",[e._v("Github：")]),i("a",{attrs:{target:"_blank",href:"https://github.com/uniadmin"}},[e._v("https://github.com/ijry/uniadmin")])]),i("Divider"),i("div",[e._v("PHP版本：7.0")]),i("div",[e._v("数据库版本：Mysql5.7")])],1)])],1),i("el-col",{attrs:{md:24,lg:12}},[i("Card",{staticClass:"index-card",attrs:{bordered:!1,"dis-hover":!0}},[i("p",{attrs:{slot:"title"},slot:"title"},[e._v("APP与交流群")]),i("div",[i("img",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{src:a("ea62")}}),i("img",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{src:a("d820")}})])])],1)]:e._e()],2)],1)}),[],!1,null,"cf446b14",null);t.default=u.exports},ef08:function(e,t,a){"use strict";var i=a("5180");a.n(i).a},f1bf:function(e,t,a){},f8e0:function(e,t,a){"use strict";var i=a("f1bf");a.n(i).a},f9a6:function(e,t,a){},fcf4:function(e,t,a){},ff8b:function(e,t,a){}}]);
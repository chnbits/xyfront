(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-core-user-login"],{"04d9":function(e,t,n){"use strict";n.r(t);var i=n("dcf0"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},"22fa":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/* 第三方 */\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/*文字颜色*/\r\n/* 边框颜色 */\r\n/* 背景颜色 */\r\n/* 图片加载中颜色 */uni-page-body[data-v-670eb462]{background-color:#fff}body.?%PAGE?%[data-v-670eb462]{background-color:#fff}',""]),e.exports=t},"46ac":function(e,t,n){"use strict";var i=n("6140"),r=n.n(i);r.a},"4a16":function(e,t,n){"use strict";var i=n("e021"),r=n.n(i);r.a},6140:function(e,t,n){var i=n("f2ba");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("8f2440fe",i,!0,{sourceMap:!1,shadowMode:!1})},6326:function(e,t,n){"use strict";n.r(t);var i=n("7a41"),r=n("04d9");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("4a16");var s,o=n("f0c5"),u=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"670eb462",null,!1,i["a"],s);t["default"]=u.exports},"7a41":function(e,t,n){"use strict";var i={xyButton:n("d59a").default,xySafetyVerify:n("e5d1").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"body"},[n("v-uni-view",{staticClass:"safe-form"},[n("v-uni-view",{staticClass:"m-b-md title tw6 ts-20"},[e._v("登录"+e._s(e.$store.state.app.siteInfo.title))]),n("v-uni-view",{staticClass:"form"},[n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticClass:"title m-b-xs"},[e._v("账号")]),n("v-uni-view",{staticClass:"content border-bottom_1px"},[n("v-uni-input",{attrs:{placeholder:"手机号/邮箱/用户名"},model:{value:e.formLogin.account,callback:function(t){e.$set(e.formLogin,"account",t)},expression:"formLogin.account"}})],1)],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticClass:"title m-b-xs"},[e._v("密码")]),n("v-uni-view",{staticClass:"content border-bottom_1px"},[n("v-uni-input",{attrs:{type:"password",placeholder:"请输入登录密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}})],1)],1),n("xy-button",{staticClass:"m-t-md",attrs:{size:"large",full:!0,loading:e.formLogin.loading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSubmit.apply(void 0,arguments)}}},[e._v(e._s(e.formLogin.loading?"登录中...":"登 录"))]),n("v-uni-view",{staticClass:"m-t-sm flex space-between"},[n("v-uni-view",{staticClass:"text-gray ts-13",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.util.navigateTo({url:"/pages/user/user/resetPassword"})}}},[e._v("忘记密码?")]),n("v-uni-view",{staticClass:"text-primary ts-13",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.util.navigateTo({url:"/pages/core/user/register"})}}},[e._v("注册账号")])],1)],1)],1),n("xy-safety-verify",{ref:"sv",on:{"verify-request":function(t){arguments[0]=t=e.$handleEvent(t),e.handleSubmit.apply(void 0,arguments)}},model:{value:e.verifyData,callback:function(t){e.verifyData=t},expression:"verifyData"}})],1)},a=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},"92d8":function(e,t,n){"use strict";var i=n("ee27");n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=i(n("c964")),a={name:"xySendVerify",props:{noNeedAccount:{type:Boolean,default:!1},account:{type:String,default:""},title:{type:String,default:""},url:{type:String,default:"/v1/sms/verify/send"},type:{type:String,default:"手机号"},time:{type:Number,default:30}},data:function(){return{label:"发送验证码",timeLeft:0}},created:function(){},methods:{sendVerify:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.timeLeft>0)){t.next=2;break}return t.abrupt("return");case 2:if(e.account||e.noNeedAccount){t.next=5;break}return e.util.showToast({title:"请输入"+e.type,icon:"loading",duration:1e3}),t.abrupt("return",!1);case 5:return e.timeLeft=e.time,e.label="剩余"+e.timeLeft+"s",n=setInterval((function(){e.timeLeft--,e.timeLeft<=0?(e.label="发送验证码",e.timeLeft=0,clearInterval(n)):e.label="剩余"+e.timeLeft+"s"}),1e3),i={},i="手机号"==e.type?{mobile:e.account,title:e.title}:{email:e.account,title:e.title},t.next=12,e.util.request({url:e.url,data:i,method:"post"});case 12:r=t.sent,"200"==r.code?(e.util.showToast({title:r.msg,icon:"success",duration:1e3}),e.$emit("verifysuccess",r.data)):e.util.showToast({title:r.msg,icon:"loading",duration:2e3});case 14:case"end":return t.stop()}}),t)})))()}}};t.default=a},b2d4:function(e,t,n){"use strict";n.r(t);var i=n("fead"),r=n("f0de");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);var s,o=n("f0c5"),u=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"724e350f",null,!1,i["a"],s);t["default"]=u.exports},be64:function(e,t,n){"use strict";var i={uniPopup:n("ba1b").default,xySendVerify:n("b2d4").default,xyButton:n("d59a").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[n("v-uni-view",{staticClass:"bg-white"},[n("v-uni-view",{staticClass:"m-b text-center title tw6 ts-16"},[e._v("安全验证")]),n("v-uni-view",{staticClass:"form"},[e.verifyList.indexOf("email")>=0?n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticClass:"title m-b-xs"},[e._v("邮箱验证")]),n("v-uni-view",{staticClass:"content border-bottom_1px flex",staticStyle:{"padding-bottom":"3px"}},[n("v-uni-input",{staticClass:"flex-1",attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.form.emailVerify,callback:function(t){e.$set(e.form,"emailVerify",t)},expression:"form.emailVerify"}}),n("xy-send-verify",{attrs:{url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"安全验证"},on:{verifysuccess:function(t){arguments[0]=t=e.$handleEvent(t),e.getVerifyToken.apply(void 0,arguments)}}})],1)],1):e._e(),e.verifyList.indexOf("mobile")>=0?n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticClass:"title m-b-xs"},[e._v("手机验证")]),n("v-uni-view",{staticClass:"content border-bottom_1px flex",staticStyle:{"padding-bottom":"3px"}},[n("v-uni-input",{staticClass:"flex-1",attrs:{placeholder:"请输入手机验证码"},model:{value:e.form.mobileVerify,callback:function(t){e.$set(e.form,"mobileVerify",t)},expression:"form.mobileVerify"}}),n("xy-send-verify",{attrs:{url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"安全验证"},on:{verifysuccess:function(t){arguments[0]=t=e.$handleEvent(t),e.getMobileVerifyToken.apply(void 0,arguments)}}})],1)],1):e._e(),e.verifyList.indexOf("gauth")>=0?n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticClass:"title m-b-xs"},[e._v("谷歌验证")]),n("v-uni-view",{staticClass:"content border-bottom_1px"},[n("v-uni-input",{attrs:{placeholder:"请输入谷歌验证码"},model:{value:e.form.gauth,callback:function(t){e.$set(e.form,"gauth",t)},expression:"form.gauth"}})],1)],1):e._e(),e.verifyList.indexOf("paypwd")>=0?n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticClass:"title m-b-xs"},[e._v("支付密码")]),n("v-uni-view",{staticClass:"content border-bottom_1px"},[n("v-uni-input",{attrs:{placeholder:"请输入6-18位支付密码"},model:{value:e.form.paypwd,callback:function(t){e.$set(e.form,"paypwd",t)},expression:"form.paypwd"}})],1)],1):e._e(),e.verifyList.indexOf("password")>=0?n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticClass:"title m-b-xs"},[e._v("登录密码")]),n("v-uni-view",{staticClass:"content border-bottom_1px"},[n("v-uni-input",{attrs:{placeholder:"请输入登录密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1):e._e(),n("xy-button",{staticClass:"m-t",attrs:{full:!0,type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSubmit.apply(void 0,arguments)}}},[e._v("确认")])],1)],1)],1)},a=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},d870:function(e,t,n){"use strict";(function(e){var i=n("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=i(n("c964")),a={name:"xySafetyVerify",props:{value:{type:[String,Object],default:""}},data:function(){return{dialogVisible:!1,verifyList:[],loading:!1,form:{paypwd:"",password:"",emailVerify:"",emailToken:"",mobileVerify:"",mobileToken:"",gauth:""},rule:{}}},created:function(){},methods:{getVerifyToken:function(e){this.form.emailToken=e.token},getMobileVerifyToken:function(e){this.form.mobileToken=e.token},open:function(t){e.log("verifyList",t),this.verifyList=t,this.getRule(),this.$refs.popup.open(),e.log(this.rule)},eclose:function(){this.$emit("cancel")},close:function(){this.$refs.popup.close()},handleSubmit:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,n=e,setTimeout((function(){n.loading=!1}),5e3),e.$emit("input",e.form),e.$emit("verify-request"),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},getRule:function(){for(var e in this.verifyList)switch(this.verifyList[e]){case"email":this.rule.email=[{required:!0,message:"请填写邮箱验证码",trigger:"blur"},{type:"string",min:6,message:"至少6位",trigger:"blur"}];break;case"mobile":this.rule.mobile=[{required:!0,message:"请填写手机验证码",trigger:"blur"},{type:"string",min:6,message:"至少6位",trigger:"blur"}];break;case"gauth":this.rule.gauth=[{required:!0,message:"请填写谷歌验证码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}];break;case"paypwd":this.rule.paypwd=[{required:!0,message:"请填写支付密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}];break;case"password":this.rule.password=[{required:!0,message:"请填写登录密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}];break;default:break}}}};t.default=a}).call(this,n("5a52")["default"])},dc25:function(e,t,n){"use strict";n.r(t);var i=n("d870"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},dcf0:function(e,t,n){"use strict";var i=n("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=i(n("c964")),a={data:function(){return{pickerIndex:0,verifyData:"",formLogin:{loading:!1,account:"",password:""}}},onLoad:function(e){},methods:{handleSubmit:function(){var e=(0,r.default)(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.formLogin,this.verifyData&&(t._verify=this.verifyData),this.formLogin.loading=!0,n=this,setTimeout((function(){n.formLogin.loading=!1}),5e3),e.next=7,this.util.request({url:"/v1/core/user/login",data:t,method:"post"});case 7:if(i=e.sent,200!=i.code){e.next=15;break}this.$store.commit("user/setToken",i.data.token),this.$store.commit("user/setUserInfo",i.data.userInfo),this.util.showToast({title:i.msg,icon:"success",duration:1e3}),this.util.switchTab({url:"/pages/home"}),e.next=21;break;case 15:if(401003!=i.code){e.next=20;break}return this.$refs.sv.open(i.data.verifyList),e.abrupt("return");case 20:this.util.showToast({title:i.msg,icon:"loading",duration:3e3});case 21:this.formLogin.loading=!1;case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}};t.default=a},e021:function(e,t,n){var i=n("22fa");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("bf060096",i,!0,{sourceMap:!1,shadowMode:!1})},e5d1:function(e,t,n){"use strict";n.r(t);var i=n("be64"),r=n("dc25");for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("46ac");var s,o=n("f0c5"),u=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"55b32b36",null,!1,i["a"],s);t["default"]=u.exports},f0de:function(e,t,n){"use strict";n.r(t);var i=n("92d8"),r=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},f2ba:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/* 第三方 */\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/*文字颜色*/\r\n/* 边框颜色 */\r\n/* 背景颜色 */\r\n/* 图片加载中颜色 */.bg-white[data-v-55b32b36]{min-height:200px;padding:20px;padding-bottom:calc(20px + env(safe-area-inset-bottom))}.bg-white .item[data-v-55b32b36]{margin-bottom:10px}',""]),e.exports=t},fead:function(e,t,n){"use strict";var i={xyButton:n("d59a").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"send-verify"},[n("xy-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendVerify.apply(void 0,arguments)}}},[e._v(e._s(e.label))])],1)},a=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))}}]);
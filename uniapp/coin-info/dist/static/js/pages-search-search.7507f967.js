(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"329f":function(e,t,i){"use strict";var o,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"search-box"},[i("v-uni-view",{staticClass:"input-box"},[i("v-uni-input",{attrs:{type:"text","adjust-position":!0,placeholder:e.defaultKeyword,"placeholder-class":"placeholder-class","confirm-type":"search"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputChange.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.doSearch(!1)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),i("v-uni-view",{staticClass:"search-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.doSearch("")}}},[e._v("搜索")])],1),i("v-uni-view",{staticClass:"search-keyword"},[i("v-uni-scroll-view",{directives:[{name:"show",rawName:"v-show",value:e.isShowKeywordList,expression:"isShowKeywordList"}],staticClass:"keyword-list-box",attrs:{"scroll-y":!0}},[e._l(e.keywordList,(function(t,o){return[i("v-uni-view",{key:o+"_0",staticClass:"keyword-entry",attrs:{"hover-class":"keyword-entry-tap"}},[i("v-uni-view",{staticClass:"keyword-text",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.doSearch(t.keyword)}}},[i("v-uni-rich-text",{attrs:{nodes:t.htmlStr}})],1),i("v-uni-view",{staticClass:"keyword-img",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.selectkeyword(o)}}},[i("v-uni-image",{attrs:{src:"/static/HM-search/back.png"}})],1)],1)]}))],2),i("v-uni-scroll-view",{directives:[{name:"show",rawName:"v-show",value:!e.isShowKeywordList,expression:"!isShowKeywordList"}],staticClass:"keyword-box",attrs:{"scroll-y":!0}},[e.oldKeywordList.length>0?i("v-uni-view",{staticClass:"keyword-block"},[i("v-uni-view",{staticClass:"keyword-list-header"},[i("v-uni-view",[e._v("历史搜索")]),i("v-uni-view",[i("v-uni-image",{attrs:{src:"/static/HM-search/delete.png"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.oldDelete.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"keyword"},e._l(e.oldKeywordList,(function(t,o){return i("v-uni-view",{key:o,on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.doSearch(t)}}},[e._v(e._s(t))])})),1)],1):e._e(),i("v-uni-view",{staticClass:"keyword-block"},[i("v-uni-view",{staticClass:"keyword-list-header"},[i("v-uni-view",[e._v("热门搜索")]),i("v-uni-view",[i("v-uni-image",{attrs:{src:"/static/HM-search/attention"+e.forbid+".png"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hotToggle.apply(void 0,arguments)}}})],1)],1),""==e.forbid?i("v-uni-view",{staticClass:"keyword"},e._l(e.hotKeywordList,(function(t,o){return i("v-uni-view",{key:o,on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.doSearch(t)}}},[e._v(e._s(t))])})),1):i("v-uni-view",{staticClass:"hide-hot-tis"},[i("v-uni-view",[e._v("当前搜热门搜索已隐藏")])],1)],1)],1)],1)],1)},n=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return o}))},"7ac6":function(e,t,i){var o=i("ace3");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=i("4f06").default;a("4ce92c43",o,!0,{sourceMap:!1,shadowMode:!1})},"7fd2":function(e,t,i){"use strict";var o=i("7ac6"),a=i.n(o);a.a},"912e":function(e,t,i){"use strict";i.r(t);var o=i("329f"),a=i("e137");for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("7fd2");var r,s=i("f0c5"),d=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"3db66511",null,!1,o["a"],r);t["default"]=d.exports},ace3:function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,"uni-view[data-v-3db66511]{display:block}.search-box[data-v-3db66511]{width:95%;background-color:#f2f2f2;padding:%?15?% 2.5%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:-webkit-sticky;position:sticky;top:0}.search-box .mSearch-input-box[data-v-3db66511]{width:100%}.search-box .input-box[data-v-3db66511]{width:85%;-webkit-flex-shrink:1;flex-shrink:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.search-box .search-btn[data-v-3db66511]{width:15%;margin:0 0 0 2%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-shrink:0;flex-shrink:0;font-size:%?28?%;color:#fff;background:-webkit-linear-gradient(left,#ff9801,#ff570a);background:linear-gradient(90deg,#ff9801,#ff570a);border-radius:%?60?%}.search-box .input-box>uni-input[data-v-3db66511]{width:100%;height:%?60?%;font-size:%?32?%;border:0;border-radius:%?60?%;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0 3%;margin:0;background-color:#fff}.placeholder-class[data-v-3db66511]{color:#9e9e9e}.search-keyword[data-v-3db66511]{width:100%;background-color:#f2f2f2}.keyword-list-box[data-v-3db66511]{height:calc(100vh - %?110?%);padding-top:%?10?%;border-radius:%?20?% %?20?% 0 0;background-color:#fff}.keyword-entry-tap[data-v-3db66511]{background-color:#eee}.keyword-entry[data-v-3db66511]{width:94%;height:%?80?%;margin:0 3%;font-size:%?30?%;color:#333;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:solid %?1?% #e7e7e7}.keyword-entry uni-image[data-v-3db66511]{width:%?60?%;height:%?60?%}.keyword-entry .keyword-text[data-v-3db66511],.keyword-entry .keyword-img[data-v-3db66511]{height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.keyword-entry .keyword-text[data-v-3db66511]{width:90%}.keyword-entry .keyword-img[data-v-3db66511]{width:10%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.keyword-box[data-v-3db66511]{height:calc(100vh - %?110?%);border-radius:%?20?% %?20?% 0 0;background-color:#fff}.keyword-box .keyword-block[data-v-3db66511]{padding:%?10?% 0}.keyword-box .keyword-block .keyword-list-header[data-v-3db66511]{width:94%;padding:%?10?% 3%;font-size:%?27?%;color:#333;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.keyword-box .keyword-block .keyword-list-header uni-image[data-v-3db66511]{width:%?40?%;height:%?40?%}.keyword-box .keyword-block .keyword[data-v-3db66511]{width:94%;padding:3px 3%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-flow:wrap;flex-flow:wrap;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.keyword-box .keyword-block .hide-hot-tis[data-v-3db66511]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?28?%;color:#6b6b6b}.keyword-box .keyword-block .keyword>uni-view[data-v-3db66511]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-radius:%?60?%;padding:0 %?20?%;margin:%?10?% %?20?% %?10?% 0;height:%?60?%;font-size:%?28?%;background-color:#f2f2f2;color:#6b6b6b}",""]),e.exports=t},e137:function(e,t,i){"use strict";i.r(t);var o=i("f7af"),a=i.n(o);for(var n in o)"default"!==n&&function(e){i.d(t,e,(function(){return o[e]}))}(n);t["default"]=a.a},f7af:function(e,t,i){"use strict";(function(e){var o=i("ee27");i("c975"),i("a434"),i("ac1f"),i("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var a=o(i("c964")),n={data:function(){return{defaultKeyword:"",keyword:"",oldKeywordList:[],hotKeywordList:[],keywordList:[],forbid:"",isShowKeywordList:!1}},onLoad:function(){this.init()},components:{},methods:{init:function(){this.loadDefaultKeyword(),this.loadOldKeyword(),this.loadHotKeyword()},blur:function(){uni.hideKeyboard()},setKeyword:function(e){this.keyword=e},loadDefaultKeyword:function(){this.defaultKeyword="请输入关键字搜索"},loadOldKeyword:function(){var e=this;uni.getStorage({key:"OldKeys",success:function(t){var i=JSON.parse(t.data);e.oldKeywordList=i}})},loadHotKeyword:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.util.request({url:"/v1/search/history/listsHot",method:"get"});case 2:i=t.sent,200==i.code&&(e.hotKeywordList=i.data.dataList);case 4:case"end":return t.stop()}}),t)})))()},inputChange:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function i(){var o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(o=e.detail?e.detail.value:e,o){i.next=5;break}return t.keywordList=[],t.isShowKeywordList=!1,i.abrupt("return");case 5:return t.isShowKeywordList=!0,i.next=8,t.util.request({url:"/v1/search/history/search",method:"get",data:{keyword:o}});case 8:a=i.sent,200==a.code&&(t.keywordList=t.drawCorrelativeKeyword(a.data.dataList,o));case 10:case"end":return i.stop()}}),i)})))()},drawCorrelativeKeyword:function(e,t){for(var i=e.length,o=[],a=0;a<i;a++){var n=e[a],r=n.replace(t,"<span style='color: #9f9f9f;'>"+t+"</span>");r="<div>"+r+"</div>";var s={keyword:n,htmlStr:r};o.push(s)}return o},selectkeyword:function(e){this.keyword=this.keywordList[e].keyword},oldDelete:function(){var t=this;uni.showModal({content:"确定清除历史搜索记录？",success:function(i){i.confirm?(e("log","用户点击确定"," at pages/search/search.vue:159"),t.oldKeywordList=[],uni.removeStorage({key:"OldKeys"})):i.cancel&&e("log","用户点击取消"," at pages/search/search.vue:165")}})},hotToggle:function(){this.forbid=this.forbid?"":"_forbid"},doSearch:function(e){e&&(this.keyword=e,this.saveKeyword(e)),this.isShowKeywordList=!1,uni.navigateTo({url:"/pages/ishop/item/lists?keyword="+this.keyword})},saveKeyword:function(e){var t=this;uni.getStorage({key:"OldKeys",success:function(i){var o=JSON.parse(i.data),a=o.indexOf(e);-1==a?o.unshift(e):(o.splice(a,1),o.unshift(e)),o.length>10&&o.pop(),uni.setStorage({key:"OldKeys",data:JSON.stringify(o)}),t.oldKeywordList=o},fail:function(i){var o=[e];uni.setStorage({key:"OldKeys",data:JSON.stringify(o)}),t.oldKeywordList=o}})}}};t.default=n}).call(this,i("0de9")["log"])}}]);
import{_ as e}from"./_plugin-vue_export-helper-1b428a4d.js";const t={props:{value:{type:[Object,Array,String,Number],default:()=>({})},formValues:{type:Object,default:()=>({cloudId:0,eid:0})},header:{type:Object,default:()=>({cloudId:0,eid:0})},show:!1,predata:"",item:{type:Object,default:()=>({})},pitem:{type:Object,default:()=>({})},api:{type:String,default:()=>null},outUrl:{type:String,default:()=>null},showDev:!1},data:()=>({formValue:null,resData:null,cssId:null}),created(){this.formValue=this.value},computed:{currentView(){if(!this.resData)return{template:"<div class='remoteInfo'>正在加载中。。。</div>"};const e=this.resolveStr(this.resData);let t=new Function(`return ${e.sctipts.slice(e.sctipts.indexOf("{"),e.sctipts.lastIndexOf("}")+1)}`)();if(t.template=e.templates,this.$el.setAttribute("class",`remote css${this.cssId}`),!document.querySelector(`style[id=css${this.cssId}]`)){let t=`\n                    .css${this.cssId}{\n                        ${e.styles}\n                    }\n                `;this.resolveCss(t)}return t}},watch:{outUrl(){this.getVueComp()},formValue(){this.$emit("input",this.formValue)}},mounted(){this.getVueComp()},methods:{closeModal(e=!0){this.$emit("close",e)},getId(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var s=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?s:3&s|8).toString(16)}))},resolveCss(e){less.render(e).then(function(e){let t=document.createElement("style");if(t.setAttribute("type","text/css"),t.setAttribute("id","css"+this.cssId),t.styleSheet)t.styleSheet.cssText=e.css;else{var s=document.createTextNode(e.css);t.appendChild(s)}var l=document.getElementsByTagName("head");l.length?l[0].appendChild(t):document.documentElement.appendChild(t)}.bind(this))},resolveStr:e=>({templates:e.match(/<template>([\s\S]*)<\/template>/)[1],sctipts:e.match(/<script.*>([\s\S]*)<\/script>/)[1],styles:e.match(/<style.*>([\s\S]*)<\/style>/)[1]}),async getVueComp(){if(!this.$props.outUrl)return void alert("Vue文件地址为空");let e=this.$props.outUrl;const t=await axios.get(e);this.cssId=this.getId(),this.resData=t.data},async loadData(){this.getVueComp()}}},s=window.Vue.resolveDynamicComponent,l=window.Vue.mergeProps,r=window.Vue.openBlock,o=window.Vue.createBlock,a=window.Vue.createElementBlock,i={class:"xy-builder-comp xy-builder-wrap-remote"};const n=e(t,[["render",function(e,t,n,u,d,c){return r(),a("div",i,[(r(),o(s(c.currentView),l(e.$props,{modelValue:d.formValue,"onUpdate:modelValue":t[0]||(t[0]=e=>d.formValue=e),onClose:c.closeModal}),null,16,["modelValue","onClose"]))])}]]),u=Object.freeze(Object.defineProperty({__proto__:null,default:n},Symbol.toStringTag,{value:"Module"}));export{u as _};

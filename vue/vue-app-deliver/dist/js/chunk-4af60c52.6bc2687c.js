(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4af60c52"],{"1c70":function(t,e,i){},"2e2a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-box",class:t.fileList.length>=t.optionsData.limit&&"image"==t.optionsData.type?"hidden-up-btn":""},[i("el-upload",{ref:"upload",class:"upload-"+t.optionsData.type,attrs:{drag:t.optionsData.drag,"show-file-list":!0,"list-type":t.listType,headers:t.headerData,limit:t.optionsData.limit,multiple:1!=t.optionsData.limit,"file-list":t.fileList,"on-preview":t.handlePictureCardPreview,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"on-remove":t.handleRemove,"before-upload":t.handleBeforeUpload,data:t.optionsData.postdata,name:t.name,action:t.optionsData.action,"http-request":t.uploadSectionFile}},[t.fileList.length>=t.optionsData.limit&&1==t.optionsData.limit&&"image"==t.optionsData.type?[i("img",{attrs:{src:t.fileList[0]["url"]}})]:[t.optionsData.drag?["images"==t.optionsData.type?[t._t("icon",(function(){return[i("i",{staticClass:"el-icon-upload",class:t.optionsData.icon?t.optionsData.icon:""})]}))]:[t._t("icon",(function(){return[i("i",{staticClass:"el-icon-upload",class:t.optionsData.icon?t.optionsData.icon:""})]})),i("div",{staticClass:"el-upload__text"},[t._v(" "+t._s(t.optionsData.placeholder?t.optionsData.placeholder:"将文件拖到此处，或点击上传")+" ")]),i("div",{staticClass:"font-sm text-gray lh-1-2"},[t._v(" "+t._s(t.optionsData.tip?t.optionsData.tip:"只能上传"+t.optionsData.format+"文件，且不超过"+t.optionsData.maxSize+"KB")+" ")])]]:[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])]],i("el-dialog",{attrs:{"append-to-body":!0,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},["image"==t.mediaType?[i("img",{attrs:{width:"100%",src:t.dialogImageUrl}})]:"audio"==t.mediaType?[i("audio",{attrs:{src:t.dialogImageUrl,controls:"controls"}},[t._v(" 您的浏览器不支持 audio 标签。 ")])]:"video"==t.mediaType?[i("video",{attrs:{src:t.dialogImageUrl,controls:"controls",width:"700"}},[t._v(" 您的浏览器不支持 video 标签。 ")])]:t._e()],2)],2),t.img.title&&""!==t.img.title?i("div",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.img.title)+" ")]):t._e()],1)},o=[],r=i("1da1"),s=(i("96cf"),i("caad"),i("b0c0"),i("a434"),i("d3b7"),{name:"XyUpload",props:{item:{type:Object,default:function(){return{extra:{}}}},options:{type:Object,default:function(){return{}}},value:{type:[Array,String],default:function(){return[]}},header:{type:Object,default:function(){return{cloudId:0,eid:0,token:""}}},img:{type:Object,default:function(){return{value:"",title:""}}}},data:function(){return{name:"file",optionsData:{type:"image",drag:!1,driver:"",signUrl:"",action:"",limit:1,icon:"",placeholder:"",tip:"",format:"jpg,png",maxSize:512,splitePiece:!1,mergeUrl:"",disabled:!1,postdata:{}},headerData:{},fileList:[],listType:"text",dialogImageUrl:"",dialogVisible:!1,mediaType:"image"}},created:function(){switch(this.optionsData=Object.assign(this.optionsData,this.options,this.item.extra),this.optionsData.type){case"image":this.listType="picture",""==this.value?this.fileList=[]:this.fileList=[{name:"image",url:this.value}];break;case"images":this.listType="picture-card","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break;default:this.listType="text","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break}this.headerData={Authorization:this.header.token?this.header.token:this.util.getToken()},"image"!=this.optionsData.type&&"file"!=this.optionsData.type&&(this.optionsData.limit=30)},beforeMount:function(){},methods:{getFileType:function(t){var e=t.lastIndexOf(".");return-1!=e?t.substring(e+1,t.length).toLowerCase():""},handlePictureCardPreview:function(t){var e=this.getFileType(t.url).toLowerCase();["jpg","png","bmp","ico","jpeg"].includes(e)?this.mediaType="image":["mp3","wav","ogg","ico","jpeg"].includes(e)?this.mediaType="audio":["mp4","ogg"].includes(e)&&(this.mediaType="video"),this.dialogImageUrl=t.url,this.dialogVisible=!0},handleExceed:function(t,e){this.$message.warning("最多上传"+this.optionsData.limit+"个文件")},handleSuccess:function(t,e,i){var a;200==t.code?(null!==(a=t.data)&&void 0!==a&&a.path&&(e.path=t.data.path),e.url=t.data.url):this.$message({message:t.msg,type:"warning"});if(this.fileList=i,"image"==this.optionsData.type)this.$emit("input",i[0].url);else{for(var o=[],r=0;r<i.length;r++){var s=i[r];o.push({name:s.name,path:null===s||void 0===s?void 0:s.path,url:s.url,size:s.size})}this.$emit("input",o)}},handleRemove:function(t,e){this.optionsData.disabled?this.$message({message:"只读模式",type:"warning"}):(this.fileList.splice(this.fileList.indexOf(t),1),"image"==this.optionsData.type?this.$emit("input",""):this.$emit("input",this.fileList),this.fileList)},uploadSectionFile:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.file,o=e,i.next=4,o.util.uploadFile({driver:o.optionsData.driver||"default",signUrl:o.optionsData.signUrl||"",url:o.optionsData.action||"",header:o.header,file:a,splitePiece:o.optionsData.splitePiece,mergeUrl:o.optionsData.mergeUrl});case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),i)})))()},handleBeforeUpload:function(t){var e=this,i=this.optionsData.maxSize;return new Promise(function(){var a=Object(r["a"])(regeneratorRuntime.mark((function a(o,r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.size/1024>i&&(e.$message({message:"上传文件大小不能超过 "+i+"KB!",type:"warning"}),r()),o();case 2:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())}},watch:{}}),n=s,l=(i("e519"),i("2877")),c=Object(l["a"])(n,a,o,!1,null,"49e2dac2",null);e["a"]=c.exports},"3c35":function(t,e){(function(e){t.exports=e}).call(this,{})},"3e8f":function(t,e){},"90d6":function(t,e,i){"use strict";function a(t){return t.replace(/(#|;|"|'|,|\\|`|\:|\!|\*|\?|\$|\{|\}|@|\(|\)|\[|\]|<|>|\||\=|%|\s)/g,"\\$1")}Object.defineProperty(e,"__esModule",{value:!0}),e.escape=a},"9ad4":function(t,e,i){(function(e){var a=i("b9bf").htmlDecode,o=i("3e8f"),r=i("90d6").escape;function s(t,i){return i=Object.assign({cwd:e},i),new Promise((e,a)=>{o.exec(t,i,(t,i,o)=>{t?a(o):e(i)})})}function n(t,e){var i=new RegExp(`<key>${e}<\\/key>\\n\\s*<string>(.+)<\\/string>`);return a(t.match(i)[1])}function l(t){var e={appstore:"appstore",inhouse:"inhouse",adhoc:"adhoc",dev:"dev"};return t.indexOf("<key>ProvisionsAllDevices</key>")>=0?e.inhouse:t.indexOf("<key>ProvisionedDevices</key>")<0?e.appstore:t.match(/<key>get-task-allow<\/key>\n\s*<true\/>/)?e.dev:e.adhoc}function c(t){var e={};e.uuid=n(t,"UUID"),e.team={name:n(t,"TeamName"),id:n(t,"com.apple.developer.team-identifier")},e.appid=n(t,"application-identifier"),e.name=n(t,"Name"),e.type=l(t);var i=t.match(/<key>DeveloperCertificates<\/key>\n\s*<array>\n\s*((?:<data>\S+?<\/data>\n\s*)+)<\/array>/)[1];return e.cers=i.match(/[^<>]{10,}/g),e}function u(t,e){var i="security cms -D -i "+r(t);return s(i).then(t=>{var i=c(t);return"function"===typeof e&&e(i),Promise.resolve(i)})}t.exports=u}).call(this,"/")},a434:function(t,e,i){"use strict";var a=i("23e7"),o=i("23cb"),r=i("a691"),s=i("50c4"),n=i("7b0b"),l=i("65f0"),c=i("8418"),u=i("1dde"),p=u("splice"),d=Math.max,m=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var i,a,u,p,g,v,b=n(this),y=s(b.length),w=o(t,y),x=arguments.length;if(0===x?i=a=0:1===x?(i=0,a=y-w):(i=x-2,a=m(d(r(e),0),y-w)),y+i-a>f)throw TypeError(h);for(u=l(b,a),p=0;p<a;p++)g=w+p,g in b&&c(u,p,b[g]);if(u.length=a,i<a){for(p=w;p<y-a;p++)g=p+a,v=p+i,g in b?b[v]=b[g]:delete b[v];for(p=y;p>y-a+i;p--)delete b[p-1]}else if(i>a)for(p=y-a;p>w;p--)g=p+a-1,v=p+i-1,g in b?b[v]=b[g]:delete b[v];for(p=0;p<i;p++)b[p+w]=arguments[p+2];return b.length=y-a+i,u}})},b9bf:function(t,e,i){(function(e,a){var o;
/**
 * [js-htmlencode]{@link https://github.com/emn178/js-htmlencode}
 *
 * @version 0.3.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){"use strict";var r="object"===typeof window?window:{},s=!r.JS_HTMLENCODE_NO_NODE_JS&&"object"===typeof e&&e.versions&&e.versions.node;s&&(r=a);var n=!r.JS_HTMLENCODE_NO_COMMON_JS&&"object"===typeof t&&t.exports,l=i("3c35"),c={"&nbsp;":" ","&iexcl;":"¡","&cent;":"¢","&pound;":"£","&curren;":"¤","&yen;":"¥","&brvbar;":"¦","&sect;":"§","&uml;":"¨","&copy;":"©","&ordf;":"ª","&laquo;":"«","&not;":"¬","&shy;":"­","&reg;":"®","&macr;":"¯","&deg;":"°","&plusmn;":"±","&sup2;":"²","&sup3;":"³","&acute;":"´","&micro;":"µ","&para;":"¶","&middot;":"·","&cedil;":"¸","&sup1;":"¹","&ordm;":"º","&raquo;":"»","&frac14;":"¼","&frac12;":"½","&frac34;":"¾","&iquest;":"¿","&Agrave;":"À","&Aacute;":"Á","&Acirc;":"Â","&Atilde;":"Ã","&Auml;":"Ä","&Aring;":"Å","&AElig;":"Æ","&Ccedil;":"Ç","&Egrave;":"È","&Eacute;":"É","&Ecirc;":"Ê","&Euml;":"Ë","&Igrave;":"Ì","&Iacute;":"Í","&Icirc;":"Î","&Iuml;":"Ï","&ETH;":"Ð","&Ntilde;":"Ñ","&Ograve;":"Ò","&Oacute;":"Ó","&Ocirc;":"Ô","&Otilde;":"Õ","&Ouml;":"Ö","&times;":"×","&Oslash;":"Ø","&Ugrave;":"Ù","&Uacute;":"Ú","&Ucirc;":"Û","&Uuml;":"Ü","&Yacute;":"Ý","&THORN;":"Þ","&szlig;":"ß","&agrave;":"à","&aacute;":"á","&acirc;":"â","&atilde;":"ã","&auml;":"ä","&aring;":"å","&aelig;":"æ","&ccedil;":"ç","&egrave;":"è","&eacute;":"é","&ecirc;":"ê","&euml;":"ë","&igrave;":"ì","&iacute;":"í","&icirc;":"î","&iuml;":"ï","&eth;":"ð","&ntilde;":"ñ","&ograve;":"ò","&oacute;":"ó","&ocirc;":"ô","&otilde;":"õ","&ouml;":"ö","&divide;":"÷","&oslash;":"ø","&ugrave;":"ù","&uacute;":"ú","&ucirc;":"û","&uuml;":"ü","&yacute;":"ý","&thorn;":"þ","&yuml;":"ÿ","&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">","&apos;":"'","&OElig;":"Œ","&oelig;":"œ","&Scaron;":"Š","&scaron;":"š","&Yuml;":"Ÿ","&circ;":"ˆ","&tilde;":"˜","&ensp;":" ","&emsp;":" ","&thinsp;":" ","&zwnj;":"‌","&zwj;":"‍","&lrm;":"‎","&rlm;":"‏","&ndash;":"–","&mdash;":"—","&lsquo;":"‘","&rsquo;":"’","&sbquo;":"‚","&ldquo;":"“","&rdquo;":"”","&bdquo;":"„","&dagger;":"†","&Dagger;":"‡","&permil;":"‰","&lsaquo;":"‹","&rsaquo;":"›","&euro;":"€","&fnof;":"ƒ","&Alpha;":"Α","&Beta;":"Β","&Gamma;":"Γ","&Delta;":"Δ","&Epsilon;":"Ε","&Zeta;":"Ζ","&Eta;":"Η","&Theta;":"Θ","&Iota;":"Ι","&Kappa;":"Κ","&Lambda;":"Λ","&Mu;":"Μ","&Nu;":"Ν","&Xi;":"Ξ","&Omicron;":"Ο","&Pi;":"Π","&Rho;":"Ρ","&Sigma;":"Σ","&Tau;":"Τ","&Upsilon;":"Υ","&Phi;":"Φ","&Chi;":"Χ","&Psi;":"Ψ","&Omega;":"Ω","&alpha;":"α","&beta;":"β","&gamma;":"γ","&delta;":"δ","&epsilon;":"ε","&zeta;":"ζ","&eta;":"η","&theta;":"θ","&iota;":"ι","&kappa;":"κ","&lambda;":"λ","&mu;":"μ","&nu;":"ν","&xi;":"ξ","&omicron;":"ο","&pi;":"π","&rho;":"ρ","&sigmaf;":"ς","&sigma;":"σ","&tau;":"τ","&upsilon;":"υ","&phi;":"φ","&chi;":"χ","&psi;":"ψ","&omega;":"ω","&thetasym;":"ϑ","&upsih;":"ϒ","&piv;":"ϖ","&bull;":"•","&hellip;":"…","&prime;":"′","&Prime;":"″","&oline;":"‾","&frasl;":"⁄","&weierp;":"℘","&image;":"ℑ","&real;":"ℜ","&trade;":"™","&alefsym;":"ℵ","&larr;":"←","&uarr;":"↑","&rarr;":"→","&darr;":"↓","&harr;":"↔","&crarr;":"↵","&lArr;":"⇐","&uArr;":"⇑","&rArr;":"⇒","&dArr;":"⇓","&hArr;":"⇔","&forall;":"∀","&part;":"∂","&exist;":"∃","&empty;":"∅","&nabla;":"∇","&isin;":"∈","&notin;":"∉","&ni;":"∋","&prod;":"∏","&sum;":"∑","&minus;":"−","&lowast;":"∗","&radic;":"√","&prop;":"∝","&infin;":"∞","&ang;":"∠","&and;":"∧","&or;":"∨","&cap;":"∩","&cup;":"∪","&int;":"∫","&there4;":"∴","&sim;":"∼","&cong;":"≅","&asymp;":"≈","&ne;":"≠","&equiv;":"≡","&le;":"≤","&ge;":"≥","&sub;":"⊂","&sup;":"⊃","&nsub;":"⊄","&sube;":"⊆","&supe;":"⊇","&oplus;":"⊕","&otimes;":"⊗","&perp;":"⊥","&sdot;":"⋅","&lceil;":"⌈","&rceil;":"⌉","&lfloor;":"⌊","&rfloor;":"⌋","&lang;":"〈","&rang;":"〉","&loz;":"◊","&spades;":"♠","&clubs;":"♣","&hearts;":"♥","&diams;":"♦"},u=function(t){if("#"!==t.charAt(1))return c[t]||t;var e,i=t.charAt(2);return"x"===i||"X"===i?(i=t.substring(3,t.length-1),e=parseInt(i,16)):(i=t.substring(2,t.length-1),e=parseInt(i)),isNaN(e)?t:String.fromCharCode(e)},p=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},d=function(t){return t.replace(/&#?\w+;/g,u)},m=p;p.htmlEncode=p,p.htmlDecode=d,n?t.exports=m:(r.htmlEncode=p,r.htmlDecode=d,l&&(o=function(){return m}.call(m,i,m,t),void 0===o||(t.exports=o)))})()}).call(this,i("4362"),i("c8ba"))},c18f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"}),a("div",{staticClass:"box bg-white"},[a("div",{staticClass:"p-l p-t bg-white"},[a("i",{staticClass:"xyicon xyicon-left1 ts-22 m-r",on:{click:function(e){return t.$router.back(-1)}}}),t._v(" 添加证书 ")]),a("el-divider"),a("div",{staticClass:"content"},[a("el-form",{attrs:{model:t.form}},[a("div",{staticClass:"flex"},[a("div",{staticClass:"m-r-md"},[a("div",{staticClass:"uptitle"},[t._v("上传 iOS p12 证书")]),a("xy-upload",{attrs:{options:t.upoptions},model:{value:t.form.p12,callback:function(e){t.$set(t.form,"p12",e)},expression:"form.p12"}},[a("template",{slot:"icon"},[a("img",{staticClass:"m-b",attrs:{src:i("f13f"),width:"50"}})])],2)],1),a("div",[a("div",{staticClass:"uptitle"},[t._v("上传 iOS mobileprovision 文件")]),a("xy-upload",{attrs:{options:t.upoptions2},model:{value:t.form.provision,callback:function(e){t.$set(t.form,"provision",e)},expression:"form.provision"}},[a("template",{slot:"icon"},[a("img",{staticClass:"m-b",attrs:{src:i("df1f"),width:"50"}})])],2)],1)]),a("el-form-item",{attrs:{label:"输入密码"}},[a("el-input",{attrs:{placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1),a("div",{staticClass:"content"},[a("div",{staticClass:"p-b-md"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleSubmit}},[t._v(" 提交 ")])],1)])],1)])},o=[],r=i("1da1"),s=(i("96cf"),i("2e2a")),n=(i("9ad4"),{components:{"xy-upload":s["a"]},data:function(){return{id:0,loading:!1,upoptions:{type:"file",drag:!0,limit:1,icon:"xyicon xyicon-plus",maxSize:100,driver:this.$store.state.app.uploadDriver,format:"p12",tip:"（支持cer,p12.pem 格式证书）",background:"#ffffff"},upoptions2:{type:"file",drag:!0,limit:1,icon:"xyicon xyicon-plus",maxSize:100,driver:this.$store.state.app.uploadDriver,format:"mobileprovision",tip:"（支持 mobileprovision 格式证书）",background:"#ffffff"},form:{p12:[],password:"",provision:[],name:"unknow",expireTime:0,state:0,p12Info:{},provisionInfo:{}}}},created:function(){this.id=this.$route.params.id,this.loadData()},methods:{loadData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/appdist/cert/info/"+t.id,data:{},method:"get"});case 2:i=e.sent,200==i.code?t.form=i.data.info:t.util.showToast({title:i.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.form.p12[0]){e.next=3;break}return t.util.showToast({title:"请上传p12文件",icon:"loading",duration:3e3}),e.abrupt("return");case 3:if(t.form.provision[0]){e.next=6;break}return t.util.showToast({title:"请上传描述文件",icon:"loading",duration:3e3}),e.abrupt("return");case 6:return t.loading=!0,i=t,setTimeout((function(){i.loading=!1}),5e3),e.next=11,t.util.request({url:"/v1/appdist/cert/edit/"+t.id,data:t.form,method:"put"});case 11:a=e.sent,"200"==a.code?(t.util.showToast({title:a.msg,icon:"success",duration:2e3}),t.$router.back()):t.util.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 14:case"end":return e.stop()}}),e)})))()}}}),l=n,c=(i("c7c4"),i("2877")),u=Object(c["a"])(l,a,o,!1,null,"365fd25c",null);e["default"]=u.exports},c7c4:function(t,e,i){"use strict";i("e653")},df1f:function(t,e,i){t.exports=i.p+"img/mp.1f134015.png"},e519:function(t,e,i){"use strict";i("1c70")},e653:function(t,e,i){},f13f:function(t,e,i){t.exports=i.p+"img/p12.1f9eb75f.png"}}]);
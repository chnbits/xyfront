(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c343671a"],{"1c70":function(t,e,i){},"2e2a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-box",class:t.fileList.length>=t.optionsData.limit&&"image"==t.optionsData.type?"hidden-up-btn":""},[i("el-upload",{ref:"upload",class:"upload-"+t.optionsData.type,attrs:{drag:t.optionsData.drag,"show-file-list":!0,"list-type":t.listType,headers:t.headerData,limit:t.optionsData.limit,multiple:1!=t.optionsData.limit,"file-list":t.fileList,"on-preview":t.handlePictureCardPreview,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"on-remove":t.handleRemove,"before-upload":t.handleBeforeUpload,data:t.optionsData.postdata,name:t.name,action:t.optionsData.action,"http-request":t.uploadSectionFile}},[t.fileList.length>=t.optionsData.limit&&1==t.optionsData.limit&&"image"==t.optionsData.type?[i("img",{attrs:{src:t.fileList[0]["url"]}})]:[t.optionsData.drag?["images"==t.optionsData.type?[t._t("icon",(function(){return[i("i",{staticClass:"el-icon-upload",class:t.optionsData.icon?t.optionsData.icon:""})]}))]:[t._t("icon",(function(){return[i("i",{staticClass:"el-icon-upload",class:t.optionsData.icon?t.optionsData.icon:""})]})),i("div",{staticClass:"el-upload__text"},[t._v(" "+t._s(t.optionsData.placeholder?t.optionsData.placeholder:"将文件拖到此处，或点击上传")+" ")]),i("div",{staticClass:"font-sm text-gray lh-1-2"},[t._v(" "+t._s(t.optionsData.tip?t.optionsData.tip:"只能上传"+t.optionsData.format+"文件，且不超过"+t.optionsData.maxSize+"KB")+" ")])]]:[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])]],i("el-dialog",{attrs:{"append-to-body":!0,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},["image"==t.mediaType?[i("img",{attrs:{width:"100%",src:t.dialogImageUrl}})]:"audio"==t.mediaType?[i("audio",{attrs:{src:t.dialogImageUrl,controls:"controls"}},[t._v(" 您的浏览器不支持 audio 标签。 ")])]:"video"==t.mediaType?[i("video",{attrs:{src:t.dialogImageUrl,controls:"controls",width:"700"}},[t._v(" 您的浏览器不支持 video 标签。 ")])]:t._e()],2)],2),t.img.title&&""!==t.img.title?i("div",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.img.title)+" ")]):t._e()],1)},o=[],s=i("1da1"),n=(i("96cf"),i("caad"),i("b0c0"),i("a434"),i("d3b7"),{name:"XyUpload",props:{item:{type:Object,default:function(){return{extra:{}}}},options:{type:Object,default:function(){return{}}},value:{type:[Array,String],default:function(){return[]}},header:{type:Object,default:function(){return{cloudId:0,eid:0,token:""}}},img:{type:Object,default:function(){return{value:"",title:""}}}},data:function(){return{name:"file",optionsData:{type:"image",drag:!1,driver:"",signUrl:"",action:"",limit:1,icon:"",placeholder:"",tip:"",format:"jpg,png",maxSize:512,splitePiece:!1,mergeUrl:"",disabled:!1,postdata:{}},headerData:{},fileList:[],listType:"text",dialogImageUrl:"",dialogVisible:!1,mediaType:"image"}},created:function(){switch(this.optionsData=Object.assign(this.optionsData,this.options,this.item.extra),this.optionsData.type){case"image":this.listType="picture",""==this.value?this.fileList=[]:this.fileList=[{name:"image",url:this.value}];break;case"images":this.listType="picture-card","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break;default:this.listType="text","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break}this.headerData={Authorization:this.header.token?this.header.token:this.util.getToken()},"image"!=this.optionsData.type&&"file"!=this.optionsData.type&&(this.optionsData.limit=30)},beforeMount:function(){},methods:{getFileType:function(t){var e=t.lastIndexOf(".");return-1!=e?t.substring(e+1,t.length).toLowerCase():""},handlePictureCardPreview:function(t){var e=this.getFileType(t.url).toLowerCase();["jpg","png","bmp","ico","jpeg"].includes(e)?this.mediaType="image":["mp3","wav","ogg","ico","jpeg"].includes(e)?this.mediaType="audio":["mp4","ogg"].includes(e)&&(this.mediaType="video"),this.dialogImageUrl=t.url,this.dialogVisible=!0},handleExceed:function(t,e){this.$message.warning("最多上传"+this.optionsData.limit+"个文件")},handleSuccess:function(t,e,i){var a;200==t.code?(null!==(a=t.data)&&void 0!==a&&a.path&&(e.path=t.data.path),e.url=t.data.url):this.$message({message:t.msg,type:"warning"});if(this.fileList=i,"image"==this.optionsData.type)this.$emit("input",i[0].url);else{for(var o=[],s=0;s<i.length;s++){var n=i[s];o.push({name:n.name,path:null===n||void 0===n?void 0:n.path,url:n.url,size:n.size})}this.$emit("input",o)}},handleRemove:function(t,e){this.optionsData.disabled?this.$message({message:"只读模式",type:"warning"}):(this.fileList.splice(this.fileList.indexOf(t),1),"image"==this.optionsData.type?this.$emit("input",""):this.$emit("input",this.fileList),this.fileList)},uploadSectionFile:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.file,o=e,i.next=4,o.util.uploadFile({driver:o.optionsData.driver||"default",signUrl:o.optionsData.signUrl||"",url:o.optionsData.action||"",header:o.header,file:a,splitePiece:o.optionsData.splitePiece,mergeUrl:o.optionsData.mergeUrl});case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),i)})))()},handleBeforeUpload:function(t){var e=this,i=this.optionsData.maxSize;return new Promise(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(o,s){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.size/1024>i&&(e.$message({message:"上传文件大小不能超过 "+i+"KB!",type:"warning"}),s()),o();case 2:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())}},watch:{}}),l=n,r=(i("e519"),i("2877")),c=Object(r["a"])(l,a,o,!1,null,"49e2dac2",null);e["a"]=c.exports},a434:function(t,e,i){"use strict";var a=i("23e7"),o=i("23cb"),s=i("a691"),n=i("50c4"),l=i("7b0b"),r=i("65f0"),c=i("8418"),d=i("1dde"),p=d("splice"),u=Math.max,m=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var i,a,d,p,g,v,b=l(this),y=n(b.length),x=o(t,y),D=arguments.length;if(0===D?i=a=0:1===D?(i=0,a=y-x):(i=D-2,a=m(u(s(e),0),y-x)),y+i-a>f)throw TypeError(h);for(d=r(b,a),p=0;p<a;p++)g=x+p,g in b&&c(d,p,b[g]);if(d.length=a,i<a){for(p=x;p<y-a;p++)g=p+a,v=p+i,g in b?b[v]=b[g]:delete b[v];for(p=y;p>y-a+i;p--)delete b[p-1]}else if(i>a)for(p=y-a;p>x;p--)g=p+a-1,v=p+i-1,g in b?b[v]=b[g]:delete b[v];for(p=0;p<i;p++)b[p+x]=arguments[p+2];return b.length=y-a+i,d}})},a745:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"top-box title"},[i("i",{staticClass:"xyicon xyicon-left1 ts-22 m-r",on:{click:function(e){return t.$router.back(-1)}}}),t._v(" 生成WebClip封装 ")]),i("div",{staticClass:"box bg-white"},[i("div",{staticClass:"content"},[i("el-form",{staticClass:"m-l-md",attrs:{model:t.form,"label-width":"140px","label-position":"left"}},[i("div",{staticStyle:{color:"#E80000",width:"120px","margin-bottom":"40px"}},[t._v(" *以下均为必填项 ")]),i("el-form-item",{attrs:{label:"应用平台"}},[i("span",{staticClass:"text-primary"},[i("i",{staticClass:"xyicon xyicon-warning ts-14"}),t._v(" ios ")]),t._v(" (只支持ios设备) ")]),i("el-form-item",{attrs:{label:"桌面名称"}},[i("el-input",{attrs:{placeholder:"手机桌面显示的应用名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"访问地址"}},[i("el-input",{attrs:{placeholder:"Web Clip启动时访问的地址链接"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),i("el-form-item",{attrs:{label:"唯一标识"}},[i("el-input",{attrs:{placeholder:"唯一标识：例如 com.demo.webclip"},model:{value:t.form.bundleId,callback:function(e){t.$set(t.form,"bundleId",e)},expression:"form.bundleId"}})],1),i("el-form-item",{attrs:{label:"配置文件名称"}},[i("el-input",{attrs:{placeholder:"配置文件显示名称"},model:{value:t.form.plistName,callback:function(e){t.$set(t.form,"plistName",e)},expression:"form.plistName"}})],1),i("el-form-item",{attrs:{label:"是否可在桌面删除"}},[i("el-radio",{attrs:{label:1},model:{value:t.form.deskRemove,callback:function(e){t.$set(t.form,"deskRemove",e)},expression:"form.deskRemove"}},[t._v("是")]),i("el-radio",{attrs:{label:0},model:{value:t.form.deskRemove,callback:function(e){t.$set(t.form,"deskRemove",e)},expression:"form.deskRemove"}},[t._v("否")])],1),i("el-form-item",{attrs:{label:"版本号"}},[i("el-input",{attrs:{placeholder:"选填，默认版本号1.0.0"},model:{value:t.form.version,callback:function(e){t.$set(t.form,"version",e)},expression:"form.version"}})],1),i("el-form-item",{attrs:{label:"桌面图标"}},[i("XyUpload",{attrs:{item:t.item,header:{}},model:{value:t.form.logo,callback:function(e){t.$set(t.form,"logo",e)},expression:"form.logo"}})],1)],1)],1),i("el-divider"),i("div",{staticClass:"content"},[i("div",{staticClass:"m-l-md p-b-md"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[i("i",{staticClass:"xyicon xyicon-cart"}),t._v(" 前往支付 ")])],1)])],1)])},o=[],s=i("1da1"),n=(i("96cf"),i("2e2a")),l={components:{XyUpload:n["a"]},data:function(){return{loading:!1,item:{name:"logo",extra:{type:"image",drag:!1,driver:this.$store.state.app.uploadDriver,signUrl:"",action:"",tip:"",format:"jpg,png",maxSize:1024}},form:{name:"",url:"",bundleId:"",plistName:"",deskRemove:0,version:"1.0.0",logo:""}}},created:function(){},watch:{},methods:{handleSubmit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,i=t,setTimeout((function(){i.loading=!1}),5e3),e.next=5,t.util.request({url:"/v1/appdist/webclip/add",data:t.form,method:"post"});case 5:a=e.sent,"200"==a.code?(t.util.showToast({title:a.msg,icon:"success",duration:2e3}),t.$router.back()):t.util.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},r=l,c=(i("b544"),i("2877")),d=Object(c["a"])(r,a,o,!1,null,"145e87ae",null);e["default"]=d.exports},b544:function(t,e,i){"use strict";i("d26d")},d26d:function(t,e,i){},e519:function(t,e,i){"use strict";i("1c70")}}]);
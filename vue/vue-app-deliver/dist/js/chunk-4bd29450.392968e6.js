(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bd29450"],{"49c4":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}},[e("el-tab-pane",{attrs:{label:"应用概述",name:"info"}}),e("el-tab-pane",{attrs:{label:"版本管理",name:"version"}}),e("el-tab-pane",{attrs:{label:"渠道",name:"channel"}}),e("el-tab-pane",{attrs:{label:"统计",name:"statistics"}}),e("el-tab-pane",{attrs:{label:"应用合并",name:"merge"}}),e("el-tab-pane",{attrs:{label:"反馈",name:"feedback"}}),e("el-tab-pane",{attrs:{label:"成员管理",name:"member"}}),e("el-tab-pane",{attrs:{label:"证书信息",name:"certinfo"}}),e("el-tab-pane",{attrs:{label:"编辑应用",name:"edit"}}),e("el-tab-pane",{attrs:{label:"设置",name:"settings"}})],1)},i=[],n=(e("a9e3"),e("b0c0"),{props:{id:{type:[Number,String],default:0},value:{type:String,default:"info"}},data:function(){return{}},created:function(){},watch:{},methods:{tabClick:function(t,a){switch(t.name){case"info":this.$router.push({path:"/appdist/app/info/"+this.id});break;case"version":this.$router.push({path:"/appdist/version/lists/"+this.id});break;case"channel":this.$router.push({path:"/appdist/channel/my/"+this.id});break;case"statistics":this.$router.push({path:"/appdist/statistics/"+this.id});break;case"merge":this.$router.push({path:"/appdist/app/merge/"+this.id});break;case"feedback":this.$router.push({path:"/appdist/feedback/lists/"+this.id});break;case"member":this.$router.push({path:"/appdist/member/lists/"+this.id});break;case"homepage":this.$router.push({path:"/appdist/app/homepage/"+this.id});break;case"certinfo":this.$router.push({path:"/appdist/app/certinfo/"+this.id});break;case"edit":this.$router.push({path:"/appdist/settings/edit/"+this.id});break;case"settings":this.$router.push({path:"/appdist/settings/index/"+this.id});break;default:break}}}}),r=n,l=e("2877"),o=Object(l["a"])(r,s,i,!1,null,"ccdc4f84",null);a["a"]=o.exports},"7cc4":function(t,a,e){},"7db0":function(t,a,e){"use strict";var s=e("23e7"),i=e("b727").find,n=e("44d2"),r="find",l=!0;r in[]&&Array(1)[r]((function(){l=!1})),s({target:"Array",proto:!0,forced:l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(r)},"82d5":function(t,a,e){"use strict";e("7cc4")},d90a:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"top-box"},[e("info-tab",{attrs:{id:t.appId,value:"statistics"}})],1),e("div",{staticClass:"box"},[t.statistics1[0]?e("div",[e("el-descriptions",{staticClass:"margin-top",attrs:{title:"",column:5,direction:"vertical",labelClassName:"text-center ts-15 p-t-md",labelStyle:{color:"#161616"},contentClassName:"text-center p-b-md",contentStyle:{color:"#161616"}}},[e("el-descriptions-item",{attrs:{label:"今日下载"}},[t._v(t._s(t.statistics1[0].day)+"次")]),e("el-descriptions-item",{attrs:{label:"本周下载"}},[t._v(t._s(t.statistics1[0].week)+"次")]),e("el-descriptions-item",{attrs:{label:"本月下载"}},[t._v(t._s(t.statistics1[0].month)+"次")]),e("el-descriptions-item",{attrs:{label:"累计下载"}},[e("template",{slot:"label"},[t._v(" 累计下载 "),e("i",{staticClass:"xyicon xyicon-help text-primary"})]),t._v(" "+t._s(t.statistics1[0].all)+"次 ")],2),e("el-descriptions-item",{attrs:{label:"今日访问（PV）"}},[t._v(t._s(t.statistics1[1].day)+"次")]),e("el-descriptions-item",{attrs:{label:"本周访问（PV）"}},[t._v(t._s(t.statistics1[1].week)+"次")]),e("el-descriptions-item",{attrs:{label:"今月访问（PV）"}},[t._v(t._s(t.statistics1[1].month)+"次")]),e("el-descriptions-item",{attrs:{label:""}},[e("template",{slot:"label"},[t._v(" 累计访问（PV） "),e("i",{staticClass:"xyicon xyicon-help text-primary"})]),t._v(" "+t._s(t.statistics1[1].all)+"次 ")],2),e("el-descriptions-item",{attrs:{label:"今日消耗点数（点）"}},[t._v("1053546点")]),e("el-descriptions-item",{attrs:{label:""}},[e("template",{slot:"label"},[t._v(" 累计消耗点数（点） "),e("i",{staticClass:"xyicon xyicon-help text-primary"})]),t._v(" 1053546点 ")],2)],1)],1):t._e()]),e("div",{staticClass:"box"},[e("div",{staticClass:"content"},[e("ul",{staticClass:"flex space-between filter-list"},[e("li",[e("h4",[t._v("应用渠道：")]),e("div",[e("el-select",{attrs:{placeholder:"默认渠道",size:"mini"},model:{value:t.filterParams.channelId,callback:function(a){t.$set(t.filterParams,"channelId",a)},expression:"filterParams.channelId"}},t._l(t.channelList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.id}})})),1)],1)]),e("li",[e("h4",[t._v("时间范围：")]),e("div",[e("el-date-picker",{attrs:{size:"mini",type:"daterange","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filterParams.dateRange,callback:function(a){t.$set(t.filterParams,"dateRange",a)},expression:"filterParams.dateRange"}})],1)]),e("li",[e("h4",[t._v("应用地区：")]),e("div",[e("el-select",{attrs:{placeholder:"已选0/36个地区",size:"mini"},model:{value:t.filterParams.cityArea,callback:function(a){t.$set(t.filterParams,"cityArea",a)},expression:"filterParams.cityArea"}},t._l(t.cityAreaList,(function(t,a){return e("el-option",{key:a,attrs:{multiple:"",label:t.name,value:t.id}})})),1)],1)]),e("li",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.loadData}},[t._v("确认查询")])],1)]),e("div",{staticClass:"channel-stats"},[e("el-table",{attrs:{data:t.channelStatsList,"header-cell-style":{background:"rgba(237, 243, 247, 1)"},"cell-style":{borderBottom:"1px solid #999999"}}},[e("el-table-column",{attrs:{prop:"name",label:"渠道名称"}}),e("el-table-column",{attrs:{align:"center",prop:"key",label:"渠道链接"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.util.baseDomain())+"/"+t._s(a.row.key)+" ")]}}])}),e("el-table-column",{attrs:{align:"center",prop:"pvCount",label:"浏览次数（PV）"}}),e("el-table-column",{attrs:{align:"center",prop:"downCount",label:"下载次数"}}),e("el-table-column",{attrs:{align:"center",prop:"pointCount",label:"消耗点数"}}),e("el-table-column",{attrs:{align:"center",prop:"dateRange",label:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(t.filterParams.dateRange[0])+" ~ "+t._s(t.filterParams.dateRange[1])+" ")]},proxy:!0}])})],1)],1),e("div",{staticClass:"chart"},[e("v-chart",{staticClass:"chart",attrs:{option:t.chartOption}})],1),e("div",{staticClass:"access-log"},[t._m(0),e("el-table",{attrs:{data:t.accessLog,"header-cell-style":{background:"rgba(237, 243, 247, 1)"},"cell-style":{borderBottom:"1px solid #999999"}}},[e("el-table-column",{attrs:{prop:"createTime",label:"浏览时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t._f("formatTime")(a.row.createTime))+" ")]}}])}),e("el-table-column",{attrs:{align:"from",prop:"referer",label:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" 页面来源 "),e("el-tooltip",{staticClass:"item cursor-pointer",attrs:{effect:"dark",content:"页面来源可查看所选页面访问量的来源情况，帮助您分析用户在页面之间的跳转行为，\n                                便于进行针对性优化；默认展开用户访问最多的一条路径；提供页面名称备注功能，点击管理页面名称。",placement:"top"}},[e("i",{staticClass:"xyicon xyicon-help-o"})])]},proxy:!0}])}),e("el-table-column",{attrs:{align:"center",prop:"url",label:"受访渠道"}}),e("el-table-column",{attrs:{align:"center",prop:"clientIp",label:"访问者IP"}}),e("el-table-column",{attrs:{align:"center",prop:"deviceOs",label:"设备来源"}}),e("el-table-column",{attrs:{align:"center",label:"访问者地区"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(a.row.country)+"-"+t._s(a.row.province)+"-"+t._s(a.row.city)+" ")]}}])}),e("template",{slot:"append"},[e("div",{staticClass:"flex flex-end"},[e("div",{staticClass:"pagination m-t m-b m-r"},[e("el-pagination",{attrs:{"current-page":t.dataPage.page,background:"","page-sizes":[10,20,30,40],"page-size":t.dataPage.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataPage.total},on:{"size-change":t.handleSizeChange,"current-change":t.loadData3,"update:currentPage":function(a){return t.$set(t.dataPage,"page",a)},"update:current-page":function(a){return t.$set(t.dataPage,"page",a)},"update:pageSize":function(a){return t.$set(t.dataPage,"limit",a)},"update:page-size":function(a){return t.$set(t.dataPage,"limit",a)}}})],1)])])],2)],1)]),e("div",{staticClass:"content"},[e("div",{staticClass:"chart-map"},[e("v-chart",{staticClass:"chart-china",attrs:{option:t.chartMapOption}})],1)])])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title flex space-between flex-alignCenter ts-14"},[e("div",{staticClass:"text-left lh-1 text-primary "},[e("div",{staticClass:"bg-primary inline-block",staticStyle:{"margin-bottom":"-2px",width:"14px",height:"14px"}}),t._v(" 访问明细 ")]),e("div",{staticStyle:{color:"#038BFF"}},[e("i",{staticClass:"xyicon xyicon-download1 m-r-xs"}),t._v(" 访问明细报表 ")])])}],n=e("1da1"),r=(e("159b"),e("7db0"),e("b0c0"),e("ac1f"),e("1276"),e("d3b7"),e("25f0"),e("96cf"),e("49c4"));function l(t){var a=new Date,e=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),s=new Date(a);s.setDate(a.getDate()+t);var i=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate();return[i,e]}var o={components:{InfoTab:r["a"]},data:function(){return{appId:0,loading:!1,statistics1:[],statistics2:[],statistics3:[],filterParams:{channelId:0,dateRange:l(-6),cityArea:[]},channelList:[],cityAreaList:[],channelStatsList:[],accessLog:[],dataPage:{total:0,page:1,limit:10},chartOption:{title:{text:"折线图"},tooltip:{trigger:"axis"},legend:{data:["下载明细","访问明细","耗点明细"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["4.1","4.2","4.3","4.4","4.5","4.6","4.7"]},yAxis:{type:"value"},series:[{name:"下载明细",type:"line",stack:"总量",data:[]},{name:"访问明细",type:"line",stack:"总量",data:[]},{name:"耗点明细",type:"line",stack:"总量",data:[]}]},chartMapOption:{}}},created:function(){var t=this;this.appId=this.$route.params.appId,this.loadData(),this.loadData2(),axios.get("https://cdn.jsdelivr.net/gh/apache/echarts/test/data/map/json/china-new.json").then((function(a){function e(){return 0}t.statistics3=[{name:"北京",value:e()},{name:"天津",value:e()},{name:"上海",value:e()},{name:"重庆",value:e()},{name:"河北",value:e()},{name:"河南",value:e()},{name:"云南",value:e()},{name:"辽宁",value:e()},{name:"黑龙江",value:e()},{name:"湖南",value:e()},{name:"安徽",value:e()},{name:"山东",value:e()},{name:"新疆",value:e()},{name:"江苏",value:e()},{name:"浙江",value:e()},{name:"江西",value:e()},{name:"湖北",value:e()},{name:"广西",value:e()},{name:"甘肃",value:e()},{name:"山西",value:e()},{name:"内蒙古",value:e()},{name:"陕西",value:e()},{name:"吉林",value:e()},{name:"福建",value:e()},{name:"贵州",value:e()},{name:"广东",value:e()},{name:"青海",value:e()},{name:"西藏",value:e()},{name:"四川",value:e()},{name:"宁夏",value:e()},{name:"海南",value:e()},{name:"台湾",value:e()},{name:"香港",value:e()},{name:"澳门",value:e()}],echarts.registerMap("China",a.data),t.chartMapOption={backgroundColor:"#FFFFFF",title:{text:"全国各地下载量汇总"},tooltip:{trigger:"item"},visualMap:{show:!0,x:"left",y:"bottom",splitList:[{start:2e4,end:3e4},{start:1e4,end:2e4},{start:5e3,end:1e4},{start:1e3,end:5e3},{start:100,end:1e3},{start:10,end:100},{start:10,end:10},{start:0,end:0}],color:["#D72626","rgba(215, 38, 38, .9)","rgba(215, 38, 38, .75)","rgba(215, 38, 38, .6)","rgba(215, 38, 38, .45)","rgba(215, 38, 38, .3)","rgba(215, 38, 38, .15)","#FFFFFF"]},series:[{name:"下载数",type:"map",mapType:"China",roam:!1,label:{show:!0},data:t.statistics3}]}}))},watch:{$route:function(){this.appId=this.$route.params.appId,this.loadData(),this.loadData2()}},methods:{loadData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.util.request({url:"/v1/statistics/statistics/index",data:{rules:[{ruleName:["/appdist/app/down","/appdist/app/plist"],dataId:t.appId},{ruleName:["/appdist/app/install"],dataId:t.appId}]},method:"post"});case 2:e=a.sent,200==e.code?t.statistics1=e.data.dataList:t.util.showToast({title:e.msg,icon:"loading",duration:3e3});case 4:case"end":return a.stop()}}),a)})))()},loadData2:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e,s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t.getDiffDate(t.filterParams.dateRange[0],t.filterParams.dateRange[1]),a.next=3,t.util.request({url:"/v1/statistics/statistics/index",data:{rules:[{ruleName:["/appdist/app/down","/appdist/app/plist"],dataId:t.appId,dateRange:t.filterParams.dateRange},{ruleName:["/appdist/app/install"],dataId:t.appId,dateRange:t.filterParams.dateRange}]},method:"post"});case 3:s=a.sent,200==s.code?(t.loadData3(),t.loadData4(),t.statistics2=s.data.dataList,t.chartOption.xAxis.data=e,i=[],n=[],e.forEach((function(a){var e=t.statistics2[0].countList.find((function(t){return t.date==a}));null!==e&&void 0!==e&&e.total?i.push(e.total):i.push(0)})),e.forEach((function(a){var e=t.statistics2[1].countList.find((function(t){return t.date==a}));null!==e&&void 0!==e&&e.total?n.push(e.total):n.push(0)})),t.chartOption.series[0].data=i,t.chartOption.series[1].data=n):t.util.showToast({title:s.msg,icon:"loading",duration:3e3});case 5:case"end":return a.stop()}}),a)})))()},loadData3:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.util.request({url:"/v1/statistics/statistics/lists",data:{ruleName:["/appdist/app/install"],dataId:t.appId,dateRange:t.filterParams.dateRange},method:"get"});case 2:e=a.sent,200==e.code?(t.accessLog=e.data.dataList,t.dataPage=e.data.dataPage):t.util.showToast({title:e.msg,icon:"loading",duration:3e3});case 4:case"end":return a.stop()}}),a)})))()},loadData4:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.util.request({url:"/v1/statistics/statistics/index",data:{rules:[{ruleName:["/appdist/app/down","/appdist/app/plist"],dataId:t.appId,dateRange:t.filterParams.dateRange,area:"province"}]},method:"post"});case 2:e=a.sent,200==e.code?t.statistics3.forEach((function(t){var a=e.data.dataList[0].countList.find((function(a){return a.province==t.name}));null!==a&&void 0!==a&&a.total?t.value=a.total:t.value=0})):t.util.showToast({title:e.msg,icon:"loading",duration:3e3});case 4:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(t){this.dataPage.page=1,this.loadData3()},getDiffDate:function(t,a){function e(t){var a=t.split("-");"01"===a[1]?(a[0]=parseInt(a[0],10)-1,a[1]="12"):a[1]=parseInt(a[1],10)-1;var e=new Date(a[0],a[1],a[2]);return e}var s=e(t),i=e(a),n=[];while(i.getTime()+864e5-s.getTime()>0){var r=s.getFullYear(),l=1===s.getMonth().toString().length?"0"+(parseInt(s.getMonth().toString(),10)+1):s.getMonth()+1,o=1===s.getDate().toString().length?"0"+s.getDate():s.getDate();n.push(r+"-"+l+"-"+o),s.setDate(s.getDate()+1)}return n}}},c=o,p=(e("82d5"),e("2877")),d=Object(p["a"])(c,s,i,!1,null,"25d0452b",null);a["default"]=d.exports}}]);
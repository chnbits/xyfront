(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fdb639c"],{"0a6d":function(t,i,e){"use strict";e("7f91")},"7f91":function(t,i,e){},c18f:function(t,i,e){"use strict";e.r(i);var o=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",[o("div",{staticClass:"top-box"}),o("div",{staticClass:"box bg-white"},[o("div",{staticClass:"p-l p-t bg-white"},[o("i",{staticClass:"xyicon xyicon-left1 ts-22 m-r",on:{click:function(i){return t.$router.back(-1)}}}),t._v(" 添加证书 ")]),o("el-divider"),o("div",{staticClass:"content"},[o("el-form",{attrs:{model:t.form}},[o("div",{staticClass:"flex m-b"},[o("div",{staticClass:"upcert m-r-md"},[o("div",{staticClass:"uptitle"},[t._v("上传 iOS p12 证书")]),o("xy-upload",{attrs:{options:t.upoptions},model:{value:t.form.p12,callback:function(i){t.$set(t.form,"p12",i)},expression:"form.p12"}},[o("template",{slot:"icon"},[o("img",{staticClass:"m-b",attrs:{src:e("f13f"),width:"50"}})])],2)],1),o("div",{staticClass:"upcert"},[o("div",{staticClass:"uptitle"},[t._v("上传 iOS mobileprovision 文件")]),o("xy-upload",{attrs:{options:t.upoptions2},model:{value:t.form.provision,callback:function(i){t.$set(t.form,"provision",i)},expression:"form.provision"}},[o("template",{slot:"icon"},[o("img",{staticClass:"m-b",attrs:{src:e("df1f"),width:"50"}})])],2)],1)]),o("el-form-item",{attrs:{label:"输入密码"}},[o("el-input",{attrs:{placeholder:"请输入密码"},model:{value:t.form.password,callback:function(i){t.$set(t.form,"password",i)},expression:"form.password"}})],1)],1)],1),o("div",{staticClass:"content"},[o("div",{staticClass:"p-b-md"},[o("el-button",{staticClass:"primary-linear",attrs:{type:"primary",size:"medium"},on:{click:t.handleSubmit}},[t._v(" 提交 ")])],1)])],1)])},a=[],s=e("1da1"),r=(e("96cf"),e("2e2a")),n={components:{"xy-upload":r["a"]},data:function(){return{id:0,loading:!1,upoptions:{type:"file",drag:!0,limit:1,icon:"xyicon xyicon-plus",maxSize:100,driver:this.$store.state.app.uploadDriver,format:"p12",tip:"（支持cer,p12.pem 格式证书）",background:"#ffffff"},upoptions2:{type:"file",drag:!0,limit:1,icon:"xyicon xyicon-plus",maxSize:100,driver:this.$store.state.app.uploadDriver,format:"mobileprovision",tip:"（支持 mobileprovision 格式证书）",background:"#ffffff"},form:{p12:[],password:"",provision:[],name:"unknow",expireTime:0,state:0,p12Info:{},provisionInfo:{}}}},created:function(){this.id=this.$route.params.id,this.loadData()},methods:{loadData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var e;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.util.request({url:"/v1/appdist/cert/info/"+t.id,data:{},method:"get"});case 2:e=i.sent,200==e.code?t.form=e.data.info:t.util.showToast({title:e.msg,icon:"loading",duration:3e3});case 4:case"end":return i.stop()}}),i)})))()},handleSubmit:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var e,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.form.p12[0]){i.next=3;break}return t.util.showToast({title:"请上传p12文件",icon:"loading",duration:3e3}),i.abrupt("return");case 3:if(t.form.provision[0]){i.next=6;break}return t.util.showToast({title:"请上传描述文件",icon:"loading",duration:3e3}),i.abrupt("return");case 6:return t.loading=!0,e=t,setTimeout((function(){e.loading=!1}),5e3),i.next=11,t.util.request({url:"/v1/appdist/cert/edit/"+t.id,data:t.form,method:"put"});case 11:o=i.sent,"200"==o.code?(t.util.showToast({title:o.msg,icon:"success",duration:2e3}),t.$router.back()):t.util.showToast({title:o.msg,icon:"loading",duration:3e3}),t.loading=!1;case 14:case"end":return i.stop()}}),i)})))()}}},c=n,l=(e("0a6d"),e("2877")),p=Object(l["a"])(c,o,a,!1,null,"0b706ba4",null);i["default"]=p.exports},df1f:function(t,i,e){t.exports=e.p+"img/mp.1f134015.png"},f13f:function(t,i,e){t.exports=e.p+"img/p12.1f9eb75f.png"}}]);
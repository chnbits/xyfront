(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0eebcbf6","chunk-57bf7c72","chunk-7b25aca0"],{"11c3":function(e,t,a){},"213a":function(e,t,a){},"510a":function(e,t,a){"use strict";a("213a")},5383:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.publicAttrCates,(function(t,i){return a("div",{key:i},[a("div",{staticClass:"title tw4 ts-16 m-b-xs m-t"},[e._v(e._s(t.title))]),a("div",{staticClass:"box bg-white"},[a("el-form",{attrs:{model:e.extendInfo[t.name],"label-width":"140px","label-suffix":":"}},e._l(t.attrList,(function(i,n){return a("div",{key:n},[a("el-form-item",{attrs:{label:i.title}},["text"==i.type?[a("el-input",{attrs:{size:"medium",placeholder:i.placeholder},model:{value:e.extendInfo[t.name][i.name],callback:function(a){e.$set(e.extendInfo[t.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}})]:"select"==i.type?[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.extendInfo[t.name][i.name],callback:function(a){e.$set(e.extendInfo[t.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},e._l(i.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.title,value:e.value}})})),1)]:"radio"==i.type?[a("el-radio-group",{model:{value:e.extendInfo[t.name][i.name],callback:function(a){e.$set(e.extendInfo[t.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},e._l(i.options,(function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"checkbox"==i.type?[a("el-checkbox-group",{model:{value:e.extendInfo[t.name][i.name],callback:function(a){e.$set(e.extendInfo[t.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},e._l(i.options,(function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:e._e()],2),i.tip?a("div",{staticClass:"text-gray ts-12 m-l-md"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs"}),a("span",[e._v(e._s(i.tip))])]):e._e()],1)})),0),a("div",{staticClass:"p-b",staticStyle:{width:"100%"}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(a){return e.saveInfo(t.name)}}},[e._v("保存设置")])],1)],1)])})),e.userTypeList.length>0?a("div",[a("div",{staticClass:"title tw4 ts-16 m-b-xs m-t"},[e._v("联系信息")]),a("div",{staticClass:"box bg-white"},[a("div",[a("el-form",{attrs:{"label-width":"140px","label-suffix":":"}},[a("el-form-item",{attrs:{label:"身份"}},[a("el-radio-group",{model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},e._l(e.userTypeList,(function(t,i){return a("el-radio",{key:i,attrs:{label:t.id}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)],1)],1),e._l(e.userTypeList,(function(t,i){return a("div",{key:i},[t.id==e.userType?[e._l(t.attrCates,(function(t,i){return a("div",{key:i},[a("el-form",{attrs:{model:e.extendInfo[t.name],"label-width":"140px","label-suffix":":"}},e._l(t.attrList,(function(i,n){return a("div",{key:n},[a("el-form-item",{attrs:{label:i.title}},["text"==i.type?[a("el-input",{attrs:{size:"medium",placeholder:i.placeholder},model:{value:e.extendInfo[t.name][i.name],callback:function(a){e.$set(e.extendInfo[t.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}})]:"select"==i.type?[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.extendInfo[t.name][i.name],callback:function(a){e.$set(e.extendInfo[t.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},e._l(i.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e.title,value:e.value}})})),1)]:"radio"==i.type?[a("el-radio-group",{model:{value:e.extendInfo[t.name][i.name],callback:function(a){e.$set(e.extendInfo[t.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},e._l(i.options,(function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:"checkbox"==i.type?[a("el-checkbox-group",{model:{value:e.extendInfo[t.name][i.name],callback:function(a){e.$set(e.extendInfo[t.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},e._l(i.options,(function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)]:e._e(),i.tip?a("div",{staticClass:"text-gray ts-12"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs"}),a("span",[e._v(e._s(i.tip))])]):e._e()],2)],1)})),0)],1)})),a("div",{staticClass:"p-b m-r-lg",staticStyle:{width:"100%"}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(a){return e.saveTypeInfo(t.attrCateNames)}}},[e._v("保存设置")])],1)]:e._e()],2)}))],2)]):e._e()],2)},n=[],s=a("1da1"),r=(a("96cf"),a("159b"),{name:"editExtendInfo",data:function(){return{loading:!1,extendInfo:{},publicAttrCates:[],userTypeList:[],userType:1}},created:function(){this.loadData()},watch:{},methods:{saveTypeInfo:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=e.splite(","),i={},e.forEach((function(e){i[e]=t.extendInfo[e]})),a.next=5,t.util.request({url:"/v1/user/user/extendInfo",data:{userType:t.usertype,extendInfo:i},method:"put"});case 5:n=a.sent,200==n.code?t.util.showToast({title:n.msg,icon:"loading",duration:2e3}):t.util.showToast({title:n.msg,icon:"loading",duration:3e3});case 7:case"end":return a.stop()}}),a)})))()},saveInfo:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={},i[e]=t.extendInfo[e],a.next=4,t.util.request({url:"/v1/user/user/extendInfo",data:{extendInfo:i},method:"put"});case 4:n=a.sent,200==n.code?t.util.showToast({title:n.msg,icon:"loading",duration:2e3}):t.util.showToast({title:n.msg,icon:"loading",duration:3e3});case 6:case"end":return a.stop()}}),a)})))()},loadData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/user/user/extendInfo",data:{},method:"get"});case 2:a=e.sent,200==a.code?(t.userTypeList=a.data.userTypeList,t.publicAttrCates=a.data.publicAttrCates,t.extendInfo=a.data.extendInfo):t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}}),o=r,l=(a("510a"),a("2877")),c=Object(l["a"])(o,i,n,!1,null,"6be9e1dc",null);t["default"]=c.exports},"5d05":function(e,t,a){},"5e96":function(e,t,a){"use strict";a("11c3")},"80cf":function(e,t,a){"use strict";a("e609")},9348:function(e,t,a){"use strict";a("5d05")},b593:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",justify:"space-around"}},[a("div",{staticClass:"cropper text-center"},[e.loadedScript?a("vue-cropper",{ref:"cropper",staticClass:"m-b",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:e.option.info,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,original:e.option.original,autoCrop:e.option.autoCrop,autoCropWidth:e.option.autoCropWidth,autoCropHeight:e.option.autoCropHeight,fixedBox:e.option.fixedBox},on:{realTime:e.realTime}}):e._e(),a("span",{staticClass:"text-gray ts-14"},[a("i",{staticClass:"xyicon xyicon-help-o ts-14"}),e._v(" 滚动鼠标滚轮来缩放图片 ")])],1),a("div",{staticClass:"previewBox"},[a("div",{staticClass:"preview-wrap"},[a("div",{staticClass:"preview",style:e.previews.div},[a("img",{style:e.previews.img,attrs:{src:e.previews.url}})])]),a("el-row",{staticClass:"m-t-md m-b",attrs:{type:"flex",justify:"center"}},[a("el-upload",{attrs:{action:"","show-file-list":!1,"auto-upload":!1,"on-change":e.uploadImg}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v(" 更换头像 ")])],1)],1),a("br"),a("el-row",[a("el-button",{attrs:{icon:"el-icon-plus",circle:"",size:"mini"},on:{click:function(t){return e.changeScale(1)}}}),a("el-button",{attrs:{icon:"el-icon-minus",circle:"",size:"mini"},on:{click:function(t){return e.changeScale(-1)}}}),a("el-button",{attrs:{icon:"el-icon-download",circle:"",size:"mini"},on:{click:function(t){return e.down("blob")}}}),a("el-button",{attrs:{icon:"el-icon-refresh-left",circle:"",size:"mini"},on:{click:e.rotateLeft}}),a("el-button",{attrs:{icon:"el-icon-refresh-right",circle:"",size:"mini"},on:{click:e.rotateRight}})],1)],1)]),a("div",{staticClass:"m-t-md flex flex-end p-r-md"},[a("el-button",{attrs:{round:""},on:{click:function(t){e.showPopup=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",round:""},on:{click:e.saveEditAvatar}},[e._v("保存")])],1)],1)},n=[],s=a("53ca"),r=a("1da1"),o=(a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d"),a("b0c0"),a("96cf"),{name:"editAvatar",props:{showPopup:!1},data:function(){return{loadedScript:!1,filename:"",avatarURL:"",previews:{},option:{img:"",info:!0,outputSize:1,full:!0,outputType:"png",canMove:!0,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:150,autoCropHeight:150,fixed:!0,fixedBox:!0}}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadScript();case 2:Vue.use(window["vue-cropper"].default),this.loadedScript=!0,this.option.img=this.$store.state.user.userInfo.avatar,this.filename=this.guid()+".png";case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{},methods:{guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)}))},saveEditAvatar:function(){this.finish("blob")},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},finish:function(e){var t=this;"blob"===e?this.$refs.cropper.getCropBlob(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=3,t.util.uploadFile({driver:t.$store.state.app.uploadDriver,signUrl:"/v1/upload_oss/index/sign",url:"/v1/core/index/upload",header:{token:t.util.getToken()},blobInfo:{blob:function(){return a}},fileName:t.filename});case 3:i=e.sent,i.data?(t.avatarURL=i.data.url,t.submit()):t.util.showToast({title:"上传失败",icon:"loading",duration:3e3});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):this.$refs.cropper.getCropData((function(e){}))},realTime:function(e){this.previews=e},down:function(e){var t=document.createElement("a");t.download="author-img","blob"===e?this.$refs.cropper.getCropBlob((function(e){t.href=window.URL.createObjectURL(e),t.click()})):this.$refs.cropper.getCropData((function(e){t.href=e,t.click()}))},uploadImg:function(e){var t=this;this.filename=e.name;var a=new FileReader;a.onload=function(e){var a;a="object"===Object(s["a"])(e.target.result)?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,t.option.img=a},a.readAsArrayBuffer(e.raw)},submit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.avatarURL){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.util.request({url:"/v1/core/user/avatar",data:{avatar:e.avatarURL},method:"put"});case 4:a=t.sent,200==a.code?(e.util.showToast({title:a.msg,icon:"success",duration:2e3}),e.$store.state.user.userInfo.avatar=e.avatarURL,e.showPopup=!1):e.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 6:case"end":return t.stop()}}),t)})))()},loadScript:function(){var e=this;return new Promise((function(t,a){e.VueScript2.load("https://cdn.jsdelivr.net/npm/vue-cropper@0.4.9/dist/index.js").then((function(){t()}))}))}}}),l=o,c=(a("9348"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,"1fc4d899",null);t["default"]=u.exports},e609:function(e,t,a){},f98a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"m-b-sm"},[a("el-button",{staticClass:"m-r",attrs:{type:"primary",size:"small"}},[e._v("个人资料设置")]),a("router-link",{attrs:{to:"/user_cert/cert/index"}},[a("el-button",{attrs:{type:"primary",size:"small",plain:""}},[e._v("实名认证")])],1)],1),a("div",{staticClass:"box profile-box"},[a("div",{staticClass:"content flex flex-alignCenter"},[a("div",{staticClass:"avatar-box text-center"},[a("el-avatar",{attrs:{size:118,src:e.$store.state.user.userInfo.avatar}}),a("div",[a("el-link",{on:{click:function(t){e.showEditAvatar=!0}}},[e._v("修改")])],1)],1),a("div",{staticClass:"profile"},[a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[e._v("用户名(账户ID）:")]),a("span",[e._v(e._s(e.$store.state.user.userInfo.id))])]),a("div",{staticClass:"item flex flex-alignCenter"},[a("span",{staticClass:"title"},[e._v("当前账户安全级别：")]),a("xy-safety-level",{attrs:{level:e.$store.state.user.userInfo.moduleExtend.user.safetyLevel}})],1),a("div",{staticClass:"tip"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs"}),e.$store.state.user.userInfo.moduleExtend.user.safetyLevel<3?a("span",[e._v(" 当前安全级别较低，建议完善个人资料或者修改登录密码 ")]):e._e(),3==e.$store.state.user.userInfo.moduleExtend.user.safetyLevel?a("span",[e._v(" 当前账号很安全，建议完善个人资料或者定期修改登录密码 ")]):e._e()])])]),a("el-divider",{staticClass:"m-a-0",staticStyle:{background:"#EEEEEE"}}),a("div",{staticClass:"content identity-list"},[a("el-form",{ref:"form",staticStyle:{"max-width":"570px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录密码:"}},[a("div",{staticClass:"flex space-between"},[a("el-input",{attrs:{size:"medium",value:"***********"}}),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.$router.push({name:"/user/editPassword"})}}},[e._v("修改")])],1)],1)]),a("el-form-item",{attrs:{label:"绑定手机号:"}},[e.$store.state.user.userInfo.mobile?a("div",{staticClass:"flex space-between"},[a("el-input",{attrs:{size:"medium",value:e.$store.state.user.userInfo.mobile.identifier}}),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.$router.push({name:"/reg_mobile/user/change"})}}},[e._v("修改")])],1)],1):a("div",{staticClass:"flex space-between"},[a("div",{staticClass:"label"},[e._v("未绑定手机号")]),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:function(t){return e.$router.push({name:"/reg_mobile/user/bind"})}}},[e._v("去绑定")])],1),a("div",{staticClass:"p-r-md"},[a("i",{staticClass:"xyicon xyicon-help-o"})])])]),a("el-form-item",{attrs:{label:"绑定邮箱:"}},[e.$store.state.user.userInfo.email?a("div",{staticClass:"flex space-between"},[a("el-input",{attrs:{size:"medium",value:e.$store.state.user.userInfo.email.identifier}}),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.$router.push({name:"/reg_email/user/change"})}}},[e._v("修改")])],1)],1):a("div",{staticClass:"flex space-between"},[a("div",{staticClass:"label"},[e._v("未绑定邮箱")]),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:function(t){return e.$router.push({name:"/reg_email/user/bind"})}}},[e._v("去绑定")])],1),a("div",{staticClass:"p-r-md"},[a("i",{staticClass:"xyicon xyicon-help-o"})])]),a("div",{staticClass:"text-gray ts-12 m-l-md"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs"}),a("span",[e._v("手机号和邮箱绑定之后，都可作为登录账号")])])]),a("el-form-item",{staticClass:"m-t-md",attrs:{label:"第三方账号："}},[a("third-login-bind",{on:{success:e.bindSuccess}})],1)],1),a("div",{staticClass:"p-b",staticStyle:{width:"100%"}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"}},[e._v("保存设置")])],1)],1)],1),a("div",[a("div",{staticClass:"content"},[a("edit-extend-info")],1)]),a("el-dialog",{attrs:{title:"修改头像",visible:e.showEditAvatar,width:"800px"},on:{"update:visible":function(t){e.showEditAvatar=t}}},[a("edit-avatar",{attrs:{"show-popup":e.showEditAvatar}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},n=[],s=a("1da1"),r=(a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xy-safety-level",class:"level-"+e.level},[a("div",{staticClass:"level-box flex space-between p-t"},[a("div",{staticClass:"level",style:{width:e.levelWidth,height:e.levelHeight}}),a("div",{staticClass:"level",style:{width:e.levelWidth,height:e.levelHeight}}),a("div",{staticClass:"level",style:{width:e.levelWidth,height:e.levelHeight}})]),a("div",{staticClass:"level-tip flex space-betwe"},[a("div",{staticClass:"text-center",style:{width:e.levelWidth}},[1==e.level?a("span",[e._v("低")]):e._e()]),a("div",[2==e.level?a("span",[e._v("中")]):e._e()]),a("div",[3==e.level?a("span",[e._v("高")]):e._e()])])])}),o=[],l=(a("a9e3"),{name:"xySafetyLevel",props:{showType:{type:String,default:"level"},level:{type:Number,default:0},levelWidth:{type:String,default:"80px"},levelHeight:{type:String,default:"6px"},percent:{type:Number,default:5}},data:function(){return{}},created:function(){},methods:{}}),c=l,u=(a("5e96"),a("2877")),d=Object(u["a"])(c,r,o,!1,null,"055a2cca",null),p=d.exports,f=a("bc88"),m=a("5383"),v=a("b593"),x={components:{"xy-safety-level":p,"third-login-bind":f["default"],"edit-extend-info":m["default"],"edit-avatar":v["default"]},data:function(){return{showEditAvatar:!1}},created:function(){},watch:{},methods:{bindSuccess:function(){},loadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.util.request({url:"/v1/api",data:{},method:"get"});case 2:a=t.sent,200==a.code||e.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return t.stop()}}),t)})))()}}},h=x,b=(a("80cf"),Object(u["a"])(h,i,n,!1,null,"1a133506",null));t["default"]=b.exports}}]);
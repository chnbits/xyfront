(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bf3725e"],{"7a34":function(t,e,a){"use strict";a("d0d0")},"7db0":function(t,e,a){"use strict";var n=a("23e7"),l=a("b727").find,o=a("44d2"),i="find",r=!0;i in[]&&Array(1)[i]((function(){r=!1})),n({target:"Array",proto:!0,forced:r},{find:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},9622:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box bg-white"},[a("el-tabs",{staticClass:"p-l-md p-t",attrs:{value:"bill"},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:"账单总览",name:"bill"}}),a("el-tab-pane",{attrs:{label:"账单明细",name:"log"}})],1),a("div",{staticClass:"firstPart "},[a("div",{staticClass:"firstLeft"},[a("v-chart",{staticClass:"chart-china",staticStyle:{height:"240px"},attrs:{id:"sixMonthConsume",option:t.sixMonthConsumeOption}}),a("p",[t._v(" 总计： "),a("span",{staticClass:"text-primary m-r"},[t._v("￥"+t._s(t.sixTotal))])])],1),a("div",{staticClass:"firstRight"},[a("v-chart",{staticClass:"chart-china",staticStyle:{height:"240px"},attrs:{id:"thisMonthConsume",option:t.thisMonthConsumeOption}}),a("p",[t._v(" 总计： "),a("span",{staticClass:"text-primary m-r"},[t._v("￥"+t._s(t.oneTotal))])])],1)])],1),a("div",{staticClass:"box search m-b-sm"},[a("div",{staticClass:"flex flex-alignCenter"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.filterChange()}},model:{value:t.filters.complete,callback:function(e){t.$set(t.filters,"complete",e)},expression:"filters.complete"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("div",{staticClass:"chooseTime"},[a("label",{attrs:{for:""}},[t._v("账期")]),a("el-date-picker",{attrs:{type:"month",format:"yyyy-MM","value-format":"yyyy-MM"},on:{change:function(e){return t.filterChange()}},model:{value:t.filters.billPeriod,callback:function(e){t.$set(t.filters,"billPeriod",e)},expression:"filters.billPeriod"}})],1)],1)]),a("div",{staticClass:"box"},[a("el-table",{staticClass:"orderTable",staticStyle:{width:"100%"},attrs:{data:t.totalInfoList,"header-cell-style":{backgroundColor:"#f5f9fa"}}},[a("el-table-column",{attrs:{align:"center",prop:"realMoney",label:"合计金额"}}),a("el-table-column",{attrs:{align:"center",prop:"billPeriod",label:"账期"}}),a("el-table-column",{attrs:{align:"center",prop:"total",label:"订单数"}}),a("el-table-column",{attrs:{align:"center",prop:"isPay",label:"完成数"}}),a("el-table-column",{attrs:{align:"center",prop:"unComplete",label:"未完成数"}}),a("el-table-column",{attrs:{align:"center",prop:"isPay",label:"已支付"}}),a("el-table-column",{attrs:{align:"center",prop:"unPay",label:"未支付"}})],1)],1),a("div",{staticClass:"box"},[a("div",{staticClass:"tableList"},[a("el-table",{staticClass:"orderTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,"header-cell-style":{backgroundColor:"#f5f9fa"}}},[a("el-table-column",{attrs:{align:"center",prop:"orderNo",label:"订单号"}}),a("el-table-column",{attrs:{align:"center",prop:"title",label:"产品名"}}),a("el-table-column",{attrs:{align:"center",label:"产品明细"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.orderInfo[0].info.useModel?a("span",[t._v(" "+t._s(e.row.orderInfo[0].info.versionName)+" ("+t._s(1*e.row.orderInfo[0].amount)+" "+t._s(e.row.orderInfo[0].info.expireUnit)+") ")]):2==e.row.orderInfo[0].info.useModel?a("span",[t._v(" "+t._s(e.row.orderInfo[0].info.versionName)+" ("+t._s(e.row.orderInfo[0].info.specAmount)+"下载点) ")]):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",prop:"complete",label:"账单类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[(e.row.isPay=1)?a("span",[t._v("已完成")]):t._e(),(e.row.isPay=0)?a("span",[t._v("未完成")]):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",prop:"number",label:"数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.orderInfo[0].amount))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"payTypeLabel",label:"支付方式"}}),a("el-table-column",{attrs:{align:"center",prop:"realMoney",label:"支付金额"}}),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"下单时间"}}),a("el-table-column",{attrs:{align:"center",prop:"isPayLabel",label:"订单状态"}})],1),a("el-pagination",{staticClass:"myPagination",attrs:{"page-sizes":[10,20,30,50],"page-size":t.dataPage.limit,"current-page":t.dataPage.page,layout:"total, sizes, prev, pager, next, jumper",total:t.dataPage.total},on:{"size-change":t.handleSizeChange,"current-change":t.loadData,"update:pageSize":function(e){return t.$set(t.dataPage,"limit",e)},"update:page-size":function(e){return t.$set(t.dataPage,"limit",e)},"update:currentPage":function(e){return t.$set(t.dataPage,"page",e)},"update:current-page":function(e){return t.$set(t.dataPage,"page",e)}}})],1)])])},l=[],o=a("5530"),i=a("1da1"),r=(a("96cf"),a("b0c0"),a("7db0"),[]),s=new Date;s.getFullYear();s.setMonth(s.getMonth()+1,1);for(var c=0;c<6;c++){s.setMonth(s.getMonth()-1);var u=s.getMonth()+1;u=u<10?"0"+u:u,r.unshift(s.getFullYear()+"-"+u)}var d={name:"MyBill",data:function(){return{sixTotal:0,oneTotal:0,type:0,options:[{label:"全部",value:0},{label:"已完成",value:1},{label:"未完成",value:2}],sixMonthConsumeOption:{title:{text:"消费趋势",subtext:"近6个月"},tooltip:{},grid:{left:"20%",right:"20%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:r,show:!0}],yAxis:[{type:"value",show:!1}],series:[{type:"bar",barWidth:"20",data:[],itemStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0,83,137,0.8)"},{offset:1,color:"rgba(0,196,220,0.8)"}])}},label:{show:!0,position:"top",textStyle:{color:"#05b9cf",fontSize:15}}}]},thisMonthConsumeOption:{title:{text:"产品消费金额分布",subtext:"本月"},tooltip:{},series:[{type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!0},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!0}},data:[]}]},totalInfoList:[,],dataList:[,],dataPage:{page:1,limit:10,total:0},filters:{complete:0,billPeriod:r[5]}}},mounted:function(){this.loadPayStatistics(),this.loadData(),this.loadRateStatistics()},methods:{handleClick:function(t){this.$router.push({path:"/pay/bill/"+t.name})},filterChange:function(){this.dataPage.page=1,this.loadData()},handleSizeChange:function(){this.dataPage.page=1,this.loadData()},loadData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/order/order/my",data:Object(o["a"])({module:"appdist",page:t.dataPage.page,limit:t.dataPage.limit},t.filters),method:"get"});case 2:a=e.sent,200==a.code?(t.totalInfoList=[a.data.totalInfo],t.dataList=a.data.dataList,t.dataPage=a.data.dataPage):t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},loadPayStatistics:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/pay/bill/payStatistics",data:{monthRange:[r[0],r[5]]},method:"get"});case 2:a=e.sent,200==a.code?(n=[],t.sixTotal=0,r.forEach((function(e,l){var o=a.data.dataList.find((function(t){return t.month==e}));null!==o&&void 0!==o&&o.sumMoney?(t.sixTotal=t.util.add(t.sixTotal,null===o||void 0===o?void 0:o.sumMoney),n.push(o.sumMoney)):n.push(0)})),t.sixMonthConsumeOption.series[0].data=n):t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},loadRateStatistics:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/order/order/rateStatistics",data:{module:"appdist",monthRange:[r[5],r[5]]},method:"get"});case 2:a=e.sent,200==a.code?t.thisMonthConsumeOption.series[0].data=a.data.dataList:t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},p=d,f=(a("e386"),a("7a34"),a("2877")),h=Object(f["a"])(p,n,l,!1,null,"41845488",null);e["default"]=h.exports},d0d0:function(t,e,a){},e386:function(t,e,a){"use strict";a("f3ff")},f3ff:function(t,e,a){}}]);
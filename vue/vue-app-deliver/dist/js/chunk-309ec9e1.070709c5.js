(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-309ec9e1"],{"1c70":function(e,t,i){},"2e2a":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-box",class:e.fileList.length>=e.optionsData.limit&&"image"==e.optionsData.type?"hidden-up-btn":""},[i("el-upload",{ref:"upload",class:"upload-"+e.optionsData.type,attrs:{drag:e.optionsData.drag,"show-file-list":!0,"list-type":e.listType,headers:e.headerData,limit:e.optionsData.limit,multiple:1!=e.optionsData.limit,"file-list":e.fileList,"on-preview":e.handlePictureCardPreview,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"before-upload":e.handleBeforeUpload,data:e.optionsData.postdata,name:e.name,action:e.optionsData.action,"http-request":e.uploadSectionFile}},[e.fileList.length>=e.optionsData.limit&&1==e.optionsData.limit&&"image"==e.optionsData.type?[i("img",{attrs:{src:e.fileList[0]["url"]}})]:[e.optionsData.drag?["images"==e.optionsData.type?[e._t("icon",(function(){return[i("i",{staticClass:"el-icon-upload",class:e.optionsData.icon?e.optionsData.icon:""})]}))]:[e._t("icon",(function(){return[i("i",{staticClass:"el-icon-upload",class:e.optionsData.icon?e.optionsData.icon:""})]})),i("div",{staticClass:"el-upload__text"},[e._v(" "+e._s(e.optionsData.placeholder?e.optionsData.placeholder:"将文件拖到此处，或点击上传")+" ")]),i("div",{staticClass:"font-sm text-gray lh-1-2"},[e._v(" "+e._s(e.optionsData.tip?e.optionsData.tip:"只能上传"+e.optionsData.format+"文件，且不超过"+e.optionsData.maxSize+"KB")+" ")])]]:[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])]],i("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},["image"==e.mediaType?[i("img",{attrs:{width:"100%",src:e.dialogImageUrl}})]:"audio"==e.mediaType?[i("audio",{attrs:{src:e.dialogImageUrl,controls:"controls"}},[e._v(" 您的浏览器不支持 audio 标签。 ")])]:"video"==e.mediaType?[i("video",{attrs:{src:e.dialogImageUrl,controls:"controls",width:"700"}},[e._v(" 您的浏览器不支持 video 标签。 ")])]:e._e()],2)],2),e.img.title&&""!==e.img.title?i("div",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.img.title)+" ")]):e._e()],1)},o=[],s=i("1da1"),n=(i("96cf"),i("caad"),i("b0c0"),i("a434"),i("d3b7"),{name:"XyUpload",props:{item:{type:Object,default:function(){return{extra:{}}}},options:{type:Object,default:function(){return{}}},value:{type:[Array,String],default:function(){return[]}},header:{type:Object,default:function(){return{cloudId:0,eid:0,token:""}}},img:{type:Object,default:function(){return{value:"",title:""}}}},data:function(){return{name:"file",optionsData:{type:"image",drag:!1,driver:"",signUrl:"",action:"",limit:1,icon:"",placeholder:"",tip:"",format:"jpg,png",maxSize:512,splitePiece:!1,mergeUrl:"",disabled:!1,postdata:{}},headerData:{},fileList:[],listType:"text",dialogImageUrl:"",dialogVisible:!1,mediaType:"image"}},created:function(){switch(this.optionsData=Object.assign(this.optionsData,this.options,this.item.extra),this.optionsData.type){case"image":this.listType="picture",""==this.value?this.fileList=[]:this.fileList=[{name:"image",url:this.value}];break;case"images":this.listType="picture-card","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break;default:this.listType="text","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break}this.headerData={Authorization:this.header.token?this.header.token:this.util.getToken()},"image"!=this.optionsData.type&&"file"!=this.optionsData.type&&(this.optionsData.limit=30)},beforeMount:function(){},methods:{getFileType:function(e){var t=e.lastIndexOf(".");return-1!=t?e.substring(t+1,e.length).toLowerCase():""},handlePictureCardPreview:function(e){var t=this.getFileType(e.url).toLowerCase();["jpg","png","bmp","ico","jpeg"].includes(t)?this.mediaType="image":["mp3","wav","ogg","ico","jpeg"].includes(t)?this.mediaType="audio":["mp4","ogg"].includes(t)&&(this.mediaType="video"),this.dialogImageUrl=e.url,this.dialogVisible=!0},handleExceed:function(e,t){this.$message.warning("最多上传"+this.optionsData.limit+"个文件")},handleSuccess:function(e,t,i){var a;200==e.code?(null!==(a=e.data)&&void 0!==a&&a.path&&(t.path=e.data.path),t.url=e.data.url):this.$message({message:e.msg,type:"warning"});if(this.fileList=i,"image"==this.optionsData.type)this.$emit("input",i[0].url);else{for(var o=[],s=0;s<i.length;s++){var n=i[s];o.push({name:n.name,path:null===n||void 0===n?void 0:n.path,url:n.url,size:n.size})}this.$emit("input",o)}},handleRemove:function(e,t){this.optionsData.disabled?this.$message({message:"只读模式",type:"warning"}):(this.fileList.splice(this.fileList.indexOf(e),1),"image"==this.optionsData.type?this.$emit("input",""):this.$emit("input",this.fileList),this.fileList)},uploadSectionFile:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.file,o=t,i.next=4,o.util.uploadFile({driver:o.optionsData.driver||"default",signUrl:o.optionsData.signUrl||"",url:o.optionsData.action||"",header:o.header,file:a,splitePiece:o.optionsData.splitePiece,mergeUrl:o.optionsData.mergeUrl});case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),i)})))()},handleBeforeUpload:function(e){var t=this,i=this.optionsData.maxSize;return new Promise(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(o,s){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.size/1024>i&&(t.$message({message:"上传文件大小不能超过 "+i+"KB!",type:"warning"}),s()),o();case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}},watch:{}}),r=n,l=(i("e519"),i("2877")),c=Object(l["a"])(r,a,o,!1,null,"49e2dac2",null);t["a"]=c.exports},"66de":function(e,t,i){},"943e":function(e,t,i){"use strict";i("66de")},a434:function(e,t,i){"use strict";var a=i("23e7"),o=i("23cb"),s=i("a691"),n=i("50c4"),r=i("7b0b"),l=i("65f0"),c=i("8418"),d=i("1dde"),u=d("splice"),p=Math.max,m=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var i,a,d,u,g,v,b=r(this),y=n(b.length),x=o(e,y),w=arguments.length;if(0===w?i=a=0:1===w?(i=0,a=y-x):(i=w-2,a=m(p(s(t),0),y-x)),y+i-a>f)throw TypeError(h);for(d=l(b,a),u=0;u<a;u++)g=x+u,g in b&&c(d,u,b[g]);if(d.length=a,i<a){for(u=x;u<y-a;u++)g=u+a,v=u+i,g in b?b[v]=b[g]:delete b[v];for(u=y;u>y-a+i;u--)delete b[u-1]}else if(i>a)for(u=y-a;u>x;u--)g=u+a-1,v=u+i-1,g in b?b[v]=b[g]:delete b[v];for(u=0;u<i;u++)b[u+x]=arguments[u+2];return b.length=y-a+i,d}})},ae44:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"top-box title"},[i("i",{staticClass:"xyicon xyicon-left1 ts-22 m-r",on:{click:function(t){return e.$router.back(-1)}}}),e._v(" 生成WebClip封装 ")]),i("div",{staticClass:"box bg-white"},[i("div",{staticClass:"content"},[i("el-form",{staticClass:"m-l-md",attrs:{model:e.form,"label-width":"140px","label-position":"left"}},[i("div",{staticStyle:{color:"#E80000",width:"120px","margin-bottom":"40px"}},[e._v(" *以下均为必填项 ")]),i("el-form-item",{attrs:{label:"应用平台"}},[i("span",{staticClass:"text-primary"},[i("i",{staticClass:"xyicon xyicon-warning ts-14"}),e._v(" ios ")]),e._v(" (只支持ios设备) ")]),i("el-form-item",{attrs:{label:"桌面名称"}},[i("el-input",{attrs:{disabled:"",placeholder:"手机桌面显示的应用名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"访问地址"}},[i("el-input",{attrs:{placeholder:"Web Clip启动时访问的地址链接"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),i("el-form-item",{attrs:{label:"唯一标识"}},[i("el-input",{attrs:{disabled:"",placeholder:"唯一标识：例如 com.demo.webclip"},model:{value:e.form.bundleId,callback:function(t){e.$set(e.form,"bundleId",t)},expression:"form.bundleId"}})],1),i("el-form-item",{attrs:{label:"配置文件名称"}},[i("el-input",{attrs:{placeholder:"配置文件显示名称"},model:{value:e.form.plistName,callback:function(t){e.$set(e.form,"plistName",t)},expression:"form.plistName"}})],1),i("el-form-item",{attrs:{label:"是否可在桌面删除"}},[i("el-radio",{attrs:{label:1},model:{value:e.form.deskRemove,callback:function(t){e.$set(e.form,"deskRemove",t)},expression:"form.deskRemove"}},[e._v("是")]),i("el-radio",{attrs:{label:0},model:{value:e.form.deskRemove,callback:function(t){e.$set(e.form,"deskRemove",t)},expression:"form.deskRemove"}},[e._v("否")])],1),i("el-form-item",{attrs:{label:"版本号"}},[i("el-input",{attrs:{placeholder:"选填，默认版本号1.0.0"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),i("el-form-item",{attrs:{label:"桌面图标"}},[i("XyUpload",{attrs:{item:e.item,header:{}},model:{value:e.form.logo,callback:function(t){e.$set(e.form,"logo",t)},expression:"form.logo"}})],1)],1)],1),i("el-divider"),i("div",{staticClass:"content"},[i("div",{staticClass:"m-l-md p-b-md"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)])],1)])},o=[],s=i("1da1"),n=(i("96cf"),i("2e2a")),r={components:{XyUpload:n["a"]},data:function(){return{id:0,loading:!1,item:{name:"logo",extra:{type:"image",drag:!1,driver:this.$store.state.app.uploadDriver,signUrl:"",action:"",tip:"",format:"jpg,png",maxSize:1024}},form:{name:"",url:"",bundleId:"",plistName:"",deskRemove:0,version:"1.0.0",logo:""}}},created:function(){this.id=this.$route.params.id,this.loadData()},watch:{},methods:{loadData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.util.request({url:"/v1/appdist/webclip/edit/"+e.id,data:{},method:"get"});case 2:i=t.sent,200==i.code?e.form=i.data.info:e.util.showToast({title:i.msg,icon:"loading",duration:3e3});case 4:case"end":return t.stop()}}),t)})))()},handleSubmit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,i=e,setTimeout((function(){i.loading=!1}),5e3),t.next=5,e.util.request({url:"/v1/appdist/webclicp/edit/"+e.id,data:e.form,method:"put"});case 5:a=t.sent,"200"==a.code?(e.util.showToast({title:a.msg,icon:"success",duration:2e3}),e.$router.back()):e.util.showToast({title:a.msg,icon:"loading",duration:3e3}),e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()}}},l=r,c=(i("943e"),i("2877")),d=Object(c["a"])(l,a,o,!1,null,"5e83d9c9",null);t["default"]=d.exports},e519:function(e,t,i){"use strict";i("1c70")}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10484e54"],{1899:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"top-box"},[s("el-button",{staticClass:"m-r",attrs:{type:"primary",size:"small"}},[t._v("修改密码")])],1),s("div",{staticClass:"box"},[s("div",{staticClass:"content p-t-md"},[s("el-steps",{attrs:{active:t.active,"align-left":""}},[s("el-step",{attrs:{title:"验证密码",description:""}}),s("el-step",{attrs:{title:"输入新密码",description:""}}),s("el-step",{attrs:{title:"修改成功",description:""}})],1),s("div",{staticClass:"step-tabs"},[1==t.active?s("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"0px"}},[s("div",{staticClass:"m-b-md ts-12 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("请输入您的登录密码:")]),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"输入登录密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("div",{staticClass:"m-t-lg"},[s("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.verifyPassword}},[t._v(" 下一步 ")]),s("el-link",{staticClass:"back ts-14",on:{click:function(e){return t.$router.back()}}},[t._v("暂不修改")])],1)],1):t._e(),2==t.active?s("el-form",{ref:"formVerifyPassword",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[s("div",{staticClass:"m-b-md ts-18 tw4"},[t._v("请输入您的登录密码")]),s("el-form-item",{attrs:{prop:"newPassword",label:"输入新的密码"}},[s("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"输入新的密码"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),s("el-form-item",{attrs:{prop:"rePassword",label:"再次输入"}},[s("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"再次输入"},model:{value:t.form.rePassword,callback:function(e){t.$set(t.form,"rePassword",e)},expression:"form.rePassword"}})],1),s("div",{staticClass:"m-t-lg"},[s("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 下一步 ")]),s("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),3==t.active?s("div",[t._m(0),s("div",{staticClass:"m-t-lg"},[s("router-link",{attrs:{to:"/user/login"}},[s("el-button",{staticClass:"primary-linear",attrs:{size:"small",type:"primary",round:""}},[t._v("重新登录")])],1)],1)]):t._e()],1)],1)]),s("div",[s("el-alert",{attrs:{type:"primary"}},[s("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),s("span",[t._v("收不到短信验证码？")])]),s("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。"),s("br"),t._v(" 2、请核实手机是否已欠费停机，或者屏蔽了系统短信。"),s("br"),t._v(" 3、如果手机已丢失或停用， 请选择其他验证方式 。"),s("br"),t._v(" 4、您也可以尝试将SIM卡移动到另一部手机，然后重试。"),s("br")])])],1)])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("i",{staticClass:"xyicon xyicon-check3 ts-30 m-r-sm",staticStyle:{color:"#4AC711"}}),s("span",{staticClass:"ts-20 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("修改登录密码成功，请您牢记密码。")])])}],i=s("1da1"),n=(s("96cf"),s("ef01")),o=s("3a69"),l={mixins:[o["default"]],components:{XySendVerify:n["a"]},data:function(){return{active:1,loading:!1,form:{oldPassword:"",newPassword:"",rePassword:""},rule:{oldPassword:[{required:!0,message:"请填写当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],rePassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}},created:function(){},methods:{verifyPassword:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.doVerifyPassword();case 2:s=e.sent,"200"==s.code&&t.active++;case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.form.oldPassword=t.password,t.loading=!0,s=t,setTimeout((function(){s.loading=!1}),5e3),e.next=6,t.util.request({url:"/v1/reg_username/user/restPassword",data:t.form,method:"post"});case 6:r=e.sent,"200"==r.code?(t.util.showToast({title:r.msg,icon:"success",duration:2e3}),t.active++):t.util.showToast({title:r.msg,icon:"loading",duration:3e3}),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()}}},c=l,u=(s("74d8"),s("2877")),d=Object(u["a"])(c,r,a,!1,null,"6a4f802c",null);e["default"]=d.exports},"6e74":function(t,e,s){},"74d8":function(t,e,s){"use strict";s("6e74")},ef01:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"send-verify p-l-xs p-r-xs lh-1",attrs:{type:"text"},on:{click:t.sendVerify}},[t._v(t._s(t.label))])},a=[],i=s("1da1"),n=(s("96cf"),s("a9e3"),{name:"xySendVerify",props:{verifyUser:{type:Number,default:0},noNeedAccount:{type:Boolean,default:!1},account:{type:String,default:""},title:{type:String,default:""},url:{type:String,default:"/v1/sms/verify/send"},type:{type:String,default:"手机号"},time:{type:Number,default:30}},data:function(){return{label:"发送验证码",timeLeft:0}},created:function(){},methods:{sendVerify:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.timeLeft>0)){e.next=2;break}return e.abrupt("return");case 2:if(t.account||t.noNeedAccount){e.next=5;break}return t.util.showToast({title:"请输入"+t.type,icon:"loading",duration:1e3}),e.abrupt("return",!1);case 5:return t.timeLeft=t.time,t.label="剩余"+t.timeLeft+"s",s=setInterval((function(){t.timeLeft--,t.timeLeft<=0?(t.label="发送验证码",t.timeLeft=0,clearInterval(s)):t.label="剩余"+t.timeLeft+"s"}),1e3),r={},r="手机号"==t.type?{mobile:t.account,title:t.title}:{email:t.account,title:t.title},r.verifyUser=t.verifyUser,e.next=13,t.util.request({url:t.url,data:r,method:"post"});case 13:a=e.sent,"200"==a.code?(t.util.showToast({title:a.msg,icon:"success",duration:1e3}),t.$emit("verifysuccess",a.data)):t.util.showToast({title:a.msg,icon:"loading",duration:2e3});case 15:case"end":return e.stop()}}),e)})))()}}}),o=n,l=s("2877"),c=Object(l["a"])(o,r,a,!1,null,"7a59abca",null);e["a"]=c.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18a1b4dd"],{1e3:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"top-box"}),a("div",{staticClass:"box bg-white"},[a("div",{staticClass:"p-l p-t bg-white"},[a("i",{staticClass:"xyicon xyicon-left1 ts-22 m-r",on:{click:function(t){return e.$router.back(-1)}}}),e._v(" 添加证书 ")]),a("el-divider"),a("div",{staticClass:"content"},[a("el-form",{attrs:{model:e.form}},[a("div",{staticClass:"flex"},[a("div",{staticClass:"m-r-md"},[a("div",{staticClass:"uptitle"},[e._v("上传 iOS p12 证书")]),a("xy-upload",{attrs:{options:e.upoptions},model:{value:e.form.p12,callback:function(t){e.$set(e.form,"p12",t)},expression:"form.p12"}},[a("template",{slot:"icon"},[a("img",{staticClass:"m-b",attrs:{src:i("f13f"),width:"50"}})])],2)],1),a("div",[a("div",{staticClass:"uptitle"},[e._v("上传 iOS mobileprovision 文件")]),a("xy-upload",{attrs:{options:e.upoptions2},model:{value:e.form.provision,callback:function(t){e.$set(e.form,"provision",t)},expression:"form.provision"}},[a("template",{slot:"icon"},[a("img",{staticClass:"m-b",attrs:{src:i("df1f"),width:"50"}})])],2)],1)]),a("el-form-item",{attrs:{label:"输入密码"}},[a("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),a("div",{staticClass:"content"},[a("div",{staticClass:"p-b-md"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleSubmit}},[e._v(" 提交 ")])],1)])],1)])},o=[],r=i("1da1"),s=(i("96cf"),i("2e2a")),n=(i("9ad4"),{components:{"xy-upload":s["a"]},data:function(){return{loading:!1,upoptions:{type:"file",drag:!0,limit:1,icon:"xyicon xyicon-plus",maxSize:100,driver:this.$store.state.app.uploadDriver,format:"p12",tip:"（支持cer,p12.pem 格式证书）",background:"#ffffff"},upoptions2:{type:"file",drag:!0,limit:1,icon:"xyicon xyicon-plus",maxSize:100,driver:this.$store.state.app.uploadDriver,format:"mobileprovision",tip:"（支持 mobileprovision 格式证书）",background:"#ffffff"},form:{p12:[],password:"",provision:[],name:"unknow",expireTime:0,state:0,p12Info:{},provisionInfo:{}}}},created:function(){},methods:{handleSubmit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.p12[0]){t.next=3;break}return e.util.showToast({title:"请上传p12文件",icon:"loading",duration:3e3}),t.abrupt("return");case 3:if(e.form.provision[0]){t.next=6;break}return e.util.showToast({title:"请上传描述文件",icon:"loading",duration:3e3}),t.abrupt("return");case 6:return e.loading=!0,i=e,setTimeout((function(){i.loading=!1}),5e3),t.next=11,e.util.request({url:"/v1/appdist/cert/add",data:e.form,method:"post"});case 11:a=t.sent,"200"==a.code?(e.util.showToast({title:a.msg,icon:"success",duration:2e3}),e.$router.back()):e.util.showToast({title:a.msg,icon:"loading",duration:3e3}),e.loading=!1;case 14:case"end":return t.stop()}}),t)})))()}}}),l=n,c=(i("875f"),i("2877")),u=Object(c["a"])(l,a,o,!1,null,"5337eccc",null);t["default"]=u.exports},"1c70":function(e,t,i){},"2e2a":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-box",class:e.fileList.length>=e.optionsData.limit&&"image"==e.optionsData.type?"hidden-up-btn":""},[i("el-upload",{ref:"upload",class:"upload-"+e.optionsData.type,attrs:{drag:e.optionsData.drag,"show-file-list":!0,"list-type":e.listType,headers:e.headerData,limit:e.optionsData.limit,multiple:1!=e.optionsData.limit,"file-list":e.fileList,"on-preview":e.handlePictureCardPreview,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"before-upload":e.handleBeforeUpload,data:e.optionsData.postdata,name:e.name,action:e.optionsData.action,"http-request":e.uploadSectionFile}},[e.fileList.length>=e.optionsData.limit&&1==e.optionsData.limit&&"image"==e.optionsData.type?[i("img",{attrs:{src:e.fileList[0]["url"]}})]:[e.optionsData.drag?["images"==e.optionsData.type?[e._t("icon",(function(){return[i("i",{staticClass:"el-icon-upload",class:e.optionsData.icon?e.optionsData.icon:""})]}))]:[e._t("icon",(function(){return[i("i",{staticClass:"el-icon-upload",class:e.optionsData.icon?e.optionsData.icon:""})]})),i("div",{staticClass:"el-upload__text"},[e._v(" "+e._s(e.optionsData.placeholder?e.optionsData.placeholder:"将文件拖到此处，或点击上传")+" ")]),i("div",{staticClass:"font-sm text-gray lh-1-2"},[e._v(" "+e._s(e.optionsData.tip?e.optionsData.tip:"只能上传"+e.optionsData.format+"文件，且不超过"+e.optionsData.maxSize+"KB")+" ")])]]:[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])]],i("el-dialog",{attrs:{"append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},["image"==e.mediaType?[i("img",{attrs:{width:"100%",src:e.dialogImageUrl}})]:"audio"==e.mediaType?[i("audio",{attrs:{src:e.dialogImageUrl,controls:"controls"}},[e._v(" 您的浏览器不支持 audio 标签。 ")])]:"video"==e.mediaType?[i("video",{attrs:{src:e.dialogImageUrl,controls:"controls",width:"700"}},[e._v(" 您的浏览器不支持 video 标签。 ")])]:e._e()],2)],2),e.img.title&&""!==e.img.title?i("div",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.img.title)+" ")]):e._e()],1)},o=[],r=i("1da1"),s=(i("96cf"),i("caad"),i("b0c0"),i("a434"),i("d3b7"),{name:"XyUpload",props:{item:{type:Object,default:function(){return{extra:{}}}},options:{type:Object,default:function(){return{}}},value:{type:[Array,String],default:function(){return[]}},header:{type:Object,default:function(){return{cloudId:0,eid:0,token:""}}},img:{type:Object,default:function(){return{value:"",title:""}}}},data:function(){return{name:"file",optionsData:{type:"image",drag:!1,driver:"",signUrl:"",action:"",limit:1,icon:"",placeholder:"",tip:"",format:"jpg,png",maxSize:512,splitePiece:!1,mergeUrl:"",disabled:!1,postdata:{}},headerData:{},fileList:[],listType:"text",dialogImageUrl:"",dialogVisible:!1,mediaType:"image"}},created:function(){switch(this.optionsData=Object.assign(this.optionsData,this.options,this.item.extra),this.optionsData.type){case"image":this.listType="picture",""==this.value?this.fileList=[]:this.fileList=[{name:"image",url:this.value}];break;case"images":this.listType="picture-card","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break;default:this.listType="text","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break}this.headerData={Authorization:this.header.token?this.header.token:this.util.getToken()},"image"!=this.optionsData.type&&"file"!=this.optionsData.type&&(this.optionsData.limit=30)},beforeMount:function(){},methods:{getFileType:function(e){var t=e.lastIndexOf(".");return-1!=t?e.substring(t+1,e.length).toLowerCase():""},handlePictureCardPreview:function(e){var t=this.getFileType(e.url).toLowerCase();["jpg","png","bmp","ico","jpeg"].includes(t)?this.mediaType="image":["mp3","wav","ogg","ico","jpeg"].includes(t)?this.mediaType="audio":["mp4","ogg"].includes(t)&&(this.mediaType="video"),this.dialogImageUrl=e.url,this.dialogVisible=!0},handleExceed:function(e,t){this.$message.warning("最多上传"+this.optionsData.limit+"个文件")},handleSuccess:function(e,t,i){var a;200==e.code?(null!==(a=e.data)&&void 0!==a&&a.path&&(t.path=e.data.path),t.url=e.data.url):this.$message({message:e.msg,type:"warning"});if(this.fileList=i,"image"==this.optionsData.type)this.$emit("input",i[0].url);else{for(var o=[],r=0;r<i.length;r++){var s=i[r];o.push({name:s.name,path:null===s||void 0===s?void 0:s.path,url:s.url,size:s.size})}this.$emit("input",o)}},handleRemove:function(e,t){this.optionsData.disabled?this.$message({message:"只读模式",type:"warning"}):(this.fileList.splice(this.fileList.indexOf(e),1),"image"==this.optionsData.type?this.$emit("input",""):this.$emit("input",this.fileList),this.fileList)},uploadSectionFile:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.file,o=t,i.next=4,o.util.uploadFile({driver:o.optionsData.driver||"default",signUrl:o.optionsData.signUrl||"",url:o.optionsData.action||"",header:o.header,file:a,splitePiece:o.optionsData.splitePiece,mergeUrl:o.optionsData.mergeUrl});case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),i)})))()},handleBeforeUpload:function(e){var t=this,i=this.optionsData.maxSize;return new Promise(function(){var a=Object(r["a"])(regeneratorRuntime.mark((function a(o,r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.size/1024>i&&(t.$message({message:"上传文件大小不能超过 "+i+"KB!",type:"warning"}),r()),o();case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}},watch:{}}),n=s,l=(i("e519"),i("2877")),c=Object(l["a"])(n,a,o,!1,null,"49e2dac2",null);t["a"]=c.exports},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},"3e8f":function(e,t){},"875f":function(e,t,i){"use strict";i("b4dc")},"90d6":function(e,t,i){"use strict";function a(e){return e.replace(/(#|;|"|'|,|\\|`|\:|\!|\*|\?|\$|\{|\}|@|\(|\)|\[|\]|<|>|\||\=|%|\s)/g,"\\$1")}Object.defineProperty(t,"__esModule",{value:!0}),t.escape=a},"9ad4":function(e,t,i){(function(t){var a=i("b9bf").htmlDecode,o=i("3e8f"),r=i("90d6").escape;function s(e,i){return i=Object.assign({cwd:t},i),new Promise((t,a)=>{o.exec(e,i,(e,i,o)=>{e?a(o):t(i)})})}function n(e,t){var i=new RegExp(`<key>${t}<\\/key>\\n\\s*<string>(.+)<\\/string>`);return a(e.match(i)[1])}function l(e){var t={appstore:"appstore",inhouse:"inhouse",adhoc:"adhoc",dev:"dev"};return e.indexOf("<key>ProvisionsAllDevices</key>")>=0?t.inhouse:e.indexOf("<key>ProvisionedDevices</key>")<0?t.appstore:e.match(/<key>get-task-allow<\/key>\n\s*<true\/>/)?t.dev:t.adhoc}function c(e){var t={};t.uuid=n(e,"UUID"),t.team={name:n(e,"TeamName"),id:n(e,"com.apple.developer.team-identifier")},t.appid=n(e,"application-identifier"),t.name=n(e,"Name"),t.type=l(e);var i=e.match(/<key>DeveloperCertificates<\/key>\n\s*<array>\n\s*((?:<data>\S+?<\/data>\n\s*)+)<\/array>/)[1];return t.cers=i.match(/[^<>]{10,}/g),t}function u(e,t){var i="security cms -D -i "+r(e);return s(i).then(e=>{var i=c(e);return"function"===typeof t&&t(i),Promise.resolve(i)})}e.exports=u}).call(this,"/")},a434:function(e,t,i){"use strict";var a=i("23e7"),o=i("23cb"),r=i("a691"),s=i("50c4"),n=i("7b0b"),l=i("65f0"),c=i("8418"),u=i("1dde"),p=u("splice"),d=Math.max,m=Math.min,f=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var i,a,u,p,g,v,b=n(this),y=s(b.length),x=o(e,y),w=arguments.length;if(0===w?i=a=0:1===w?(i=0,a=y-x):(i=w-2,a=m(d(r(t),0),y-x)),y+i-a>f)throw TypeError(h);for(u=l(b,a),p=0;p<a;p++)g=x+p,g in b&&c(u,p,b[g]);if(u.length=a,i<a){for(p=x;p<y-a;p++)g=p+a,v=p+i,g in b?b[v]=b[g]:delete b[v];for(p=y;p>y-a+i;p--)delete b[p-1]}else if(i>a)for(p=y-a;p>x;p--)g=p+a-1,v=p+i-1,g in b?b[v]=b[g]:delete b[v];for(p=0;p<i;p++)b[p+x]=arguments[p+2];return b.length=y-a+i,u}})},b4dc:function(e,t,i){},b9bf:function(e,t,i){(function(t,a){var o;
/**
 * [js-htmlencode]{@link https://github.com/emn178/js-htmlencode}
 *
 * @version 0.3.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){"use strict";var r="object"===typeof window?window:{},s=!r.JS_HTMLENCODE_NO_NODE_JS&&"object"===typeof t&&t.versions&&t.versions.node;s&&(r=a);var n=!r.JS_HTMLENCODE_NO_COMMON_JS&&"object"===typeof e&&e.exports,l=i("3c35"),c={"&nbsp;":" ","&iexcl;":"¡","&cent;":"¢","&pound;":"£","&curren;":"¤","&yen;":"¥","&brvbar;":"¦","&sect;":"§","&uml;":"¨","&copy;":"©","&ordf;":"ª","&laquo;":"«","&not;":"¬","&shy;":"­","&reg;":"®","&macr;":"¯","&deg;":"°","&plusmn;":"±","&sup2;":"²","&sup3;":"³","&acute;":"´","&micro;":"µ","&para;":"¶","&middot;":"·","&cedil;":"¸","&sup1;":"¹","&ordm;":"º","&raquo;":"»","&frac14;":"¼","&frac12;":"½","&frac34;":"¾","&iquest;":"¿","&Agrave;":"À","&Aacute;":"Á","&Acirc;":"Â","&Atilde;":"Ã","&Auml;":"Ä","&Aring;":"Å","&AElig;":"Æ","&Ccedil;":"Ç","&Egrave;":"È","&Eacute;":"É","&Ecirc;":"Ê","&Euml;":"Ë","&Igrave;":"Ì","&Iacute;":"Í","&Icirc;":"Î","&Iuml;":"Ï","&ETH;":"Ð","&Ntilde;":"Ñ","&Ograve;":"Ò","&Oacute;":"Ó","&Ocirc;":"Ô","&Otilde;":"Õ","&Ouml;":"Ö","&times;":"×","&Oslash;":"Ø","&Ugrave;":"Ù","&Uacute;":"Ú","&Ucirc;":"Û","&Uuml;":"Ü","&Yacute;":"Ý","&THORN;":"Þ","&szlig;":"ß","&agrave;":"à","&aacute;":"á","&acirc;":"â","&atilde;":"ã","&auml;":"ä","&aring;":"å","&aelig;":"æ","&ccedil;":"ç","&egrave;":"è","&eacute;":"é","&ecirc;":"ê","&euml;":"ë","&igrave;":"ì","&iacute;":"í","&icirc;":"î","&iuml;":"ï","&eth;":"ð","&ntilde;":"ñ","&ograve;":"ò","&oacute;":"ó","&ocirc;":"ô","&otilde;":"õ","&ouml;":"ö","&divide;":"÷","&oslash;":"ø","&ugrave;":"ù","&uacute;":"ú","&ucirc;":"û","&uuml;":"ü","&yacute;":"ý","&thorn;":"þ","&yuml;":"ÿ","&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">","&apos;":"'","&OElig;":"Œ","&oelig;":"œ","&Scaron;":"Š","&scaron;":"š","&Yuml;":"Ÿ","&circ;":"ˆ","&tilde;":"˜","&ensp;":" ","&emsp;":" ","&thinsp;":" ","&zwnj;":"‌","&zwj;":"‍","&lrm;":"‎","&rlm;":"‏","&ndash;":"–","&mdash;":"—","&lsquo;":"‘","&rsquo;":"’","&sbquo;":"‚","&ldquo;":"“","&rdquo;":"”","&bdquo;":"„","&dagger;":"†","&Dagger;":"‡","&permil;":"‰","&lsaquo;":"‹","&rsaquo;":"›","&euro;":"€","&fnof;":"ƒ","&Alpha;":"Α","&Beta;":"Β","&Gamma;":"Γ","&Delta;":"Δ","&Epsilon;":"Ε","&Zeta;":"Ζ","&Eta;":"Η","&Theta;":"Θ","&Iota;":"Ι","&Kappa;":"Κ","&Lambda;":"Λ","&Mu;":"Μ","&Nu;":"Ν","&Xi;":"Ξ","&Omicron;":"Ο","&Pi;":"Π","&Rho;":"Ρ","&Sigma;":"Σ","&Tau;":"Τ","&Upsilon;":"Υ","&Phi;":"Φ","&Chi;":"Χ","&Psi;":"Ψ","&Omega;":"Ω","&alpha;":"α","&beta;":"β","&gamma;":"γ","&delta;":"δ","&epsilon;":"ε","&zeta;":"ζ","&eta;":"η","&theta;":"θ","&iota;":"ι","&kappa;":"κ","&lambda;":"λ","&mu;":"μ","&nu;":"ν","&xi;":"ξ","&omicron;":"ο","&pi;":"π","&rho;":"ρ","&sigmaf;":"ς","&sigma;":"σ","&tau;":"τ","&upsilon;":"υ","&phi;":"φ","&chi;":"χ","&psi;":"ψ","&omega;":"ω","&thetasym;":"ϑ","&upsih;":"ϒ","&piv;":"ϖ","&bull;":"•","&hellip;":"…","&prime;":"′","&Prime;":"″","&oline;":"‾","&frasl;":"⁄","&weierp;":"℘","&image;":"ℑ","&real;":"ℜ","&trade;":"™","&alefsym;":"ℵ","&larr;":"←","&uarr;":"↑","&rarr;":"→","&darr;":"↓","&harr;":"↔","&crarr;":"↵","&lArr;":"⇐","&uArr;":"⇑","&rArr;":"⇒","&dArr;":"⇓","&hArr;":"⇔","&forall;":"∀","&part;":"∂","&exist;":"∃","&empty;":"∅","&nabla;":"∇","&isin;":"∈","&notin;":"∉","&ni;":"∋","&prod;":"∏","&sum;":"∑","&minus;":"−","&lowast;":"∗","&radic;":"√","&prop;":"∝","&infin;":"∞","&ang;":"∠","&and;":"∧","&or;":"∨","&cap;":"∩","&cup;":"∪","&int;":"∫","&there4;":"∴","&sim;":"∼","&cong;":"≅","&asymp;":"≈","&ne;":"≠","&equiv;":"≡","&le;":"≤","&ge;":"≥","&sub;":"⊂","&sup;":"⊃","&nsub;":"⊄","&sube;":"⊆","&supe;":"⊇","&oplus;":"⊕","&otimes;":"⊗","&perp;":"⊥","&sdot;":"⋅","&lceil;":"⌈","&rceil;":"⌉","&lfloor;":"⌊","&rfloor;":"⌋","&lang;":"〈","&rang;":"〉","&loz;":"◊","&spades;":"♠","&clubs;":"♣","&hearts;":"♥","&diams;":"♦"},u=function(e){if("#"!==e.charAt(1))return c[e]||e;var t,i=e.charAt(2);return"x"===i||"X"===i?(i=e.substring(3,e.length-1),t=parseInt(i,16)):(i=e.substring(2,e.length-1),t=parseInt(i)),isNaN(t)?e:String.fromCharCode(t)},p=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},d=function(e){return e.replace(/&#?\w+;/g,u)},m=p;p.htmlEncode=p,p.htmlDecode=d,n?e.exports=m:(r.htmlEncode=p,r.htmlDecode=d,l&&(o=function(){return m}.call(m,i,m,e),void 0===o||(e.exports=o)))})()}).call(this,i("4362"),i("c8ba"))},df1f:function(e,t,i){e.exports=i.p+"img/mp.1f134015.png"},e519:function(e,t,i){"use strict";i("1c70")},f13f:function(e,t,i){e.exports=i.p+"img/p12.1f9eb75f.png"}}]);
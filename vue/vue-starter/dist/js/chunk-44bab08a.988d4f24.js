(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44bab08a"],{"561a":function(t,e,a){},7056:function(t,e,a){},"77f9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mcRight"},[a("div",{staticClass:"backImage"},[a("div",{staticClass:"title"},t._l(t.tabs,(function(e,n){return a("button",{key:n,class:{OnBtnChange:n==t.current},on:{click:function(e){return t.addClass(n)}}},[t._v(" "+t._s(e.title)+" ")])})),0),t._m(0)]),a("div",{staticClass:"content"},[a("el-table",{ref:"mytable",attrs:{data:t.tableData,"tooltip-effect":"dark","row-class-name":t.tableRowClassName}},[a("template",{slot:"empty"},[a("div",{staticClass:"lh-1 p-t-lg p-b-lg"},[a("div",{staticClass:"ts-16 m-t-sm",staticStyle:{color:"#A5A5A5"}},[a("span",[t._v("暂无消息")])])])]),a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"标题",width:"1020"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isRead?a("span",{staticClass:"newRed"},[t._v("·")]):t._e(),a("span",{staticClass:"cursor-pointer",on:{click:function(a){return t.$router.push({path:"/msg/msg/info",query:{id:e.row.id}})}}},[t._v(" "+t._s(e.row.title)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"发送时间",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("formatTime")(e.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"cate",label:"类别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.cate?a("span",[t._v("系统通知")]):t._e(),2==e.row.cate?a("span",[t._v("站内公告")]):t._e()]}}])})],2)],1),a("div",{staticClass:"Pagination"},[a("button",{on:{click:t.readBatch}},[a("i",{staticClass:"iconfont iconbiaojiyidu"}),t._v(" 标记已读 ")]),a("button",{on:{click:t.deleteBatch}},[a("i",{staticClass:"iconfont xyicon xyicon-trash"}),t._v(" 删除 ")]),a("button",{on:{click:t.readAll}},[a("i",{staticClass:"iconfont xyicon xyicon-eye"}),t._v(" 全部已读 ")]),a("button",{on:{click:t.deleteAll}},[a("i",{staticClass:"iconfont xyicon xyicon-trash"}),t._v(" 全部删除 ")]),a("div",{staticClass:"fenyeNum"},[a("el-pagination",{attrs:{"current-page":t.dataPage.page,background:"","page-sizes":[10,20,30,40],"page-size":t.dataPage.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataPage.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("button",[t._v("状态筛选： 全部 ▼")])])}],s=a("1da1"),o=(a("159b"),a("96cf"),{data:function(){return{loading:!1,current:0,tabs:[{value:0,title:"全部类型消息"},{value:2,title:"站内公告"},{value:1,title:"系统通知"}],tableData:[],dataPage:{total:0,page:1,limit:10}}},created:function(){this.loadlists()},methods:{addClass:function(t){this.current=t,this.loadlists()},loadlists:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.util.request({url:"/v1/msg/msg/my",data:{cate:t.tabs[t.current].value,page:t.dataPage.page,limit:t.dataPage.limit},method:"get"});case 3:a=e.sent,200==a.code?(t.tableData=a.data.dataList,t.dataPage=a.data.dataPage):t.util.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},getSelectedIds:function(){var t=this.$refs.mytable.selection;if(0!=t.length){var e="";return t.forEach((function(t){e=e+","+t.id})),e}this.util.showToast({title:"请选择消息",icon:"loading",duration:3e3})},readBatch:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getSelectedIds(),e.next=3,t.util.request({url:"/v1/msg/msg/readBatch",data:{ids:a},method:"put"});case 3:n=e.sent,200==n.code?(t.loadlists(),t.util.showToast({title:n.msg,icon:"loading",duration:2e3})):t.util.showToast({title:n.msg,icon:"loading",duration:3e3});case 5:case"end":return e.stop()}}),e)})))()},deleteBatch:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getSelectedIds(),e.next=3,t.util.request({url:"/v1/msg/msg/deleteBatch",data:{ids:a},method:"delete"});case 3:n=e.sent,200==n.code?(t.loadlists(),t.util.showToast({title:n.msg,icon:"loading",duration:2e3})):t.util.showToast({title:n.msg,icon:"loading",duration:3e3});case 5:case"end":return e.stop()}}),e)})))()},readAll:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/msg/msg/readAll",method:"put"});case 2:a=e.sent,200==a.code?(t.loadlists(),t.util.showToast({title:a.msg,icon:"loading",duration:2e3})):t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},deleteAll:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/msg/msg/deleteAll",method:"delete"});case 2:a=e.sent,200==a.code?(t.loadlists(),t.util.showToast({title:a.msg,icon:"loading",duration:2e3})):t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},tableRowClassName:function(t){t.row,t.rowIndex},handleSizeChange:function(t){this.dataPage.limit=t,this.loadlists()},handleCurrentChange:function(t){this.dataPage.page=t,this.loadlists()}}}),r=o,l=(a("b594"),a("eba7"),a("2877")),c=Object(l["a"])(r,n,i,!1,null,"0961025f",null);e["default"]=c.exports},b594:function(t,e,a){"use strict";a("561a")},eba7:function(t,e,a){"use strict";a("7056")}}]);
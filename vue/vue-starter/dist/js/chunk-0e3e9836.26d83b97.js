(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e3e9836"],{"42b5":function(t,e,i){"use strict";i("84cf")},5806:function(t,e,i){"use strict";i("e986")},"68eb":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"box"},[i("h4",{staticClass:"addTitle"},[t._v("创建工单")]),i("form",{staticClass:"addOrderForm",attrs:{action:""}},[i("div",[t._m(0),i("div",{staticClass:"right"},[i("div",[i("el-radio",{attrs:{label:1},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[t._v("一般")]),i("el-radio",{attrs:{label:2},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[t._v("重要")])],1),i("p",{staticClass:"firstP"},[t._v("选择优先级为一般：业务咨询或普通业务受影响，需要协助")])])]),i("div",[t._m(1),i("div",{staticClass:"right"},[i("div",[i("el-select",{staticClass:"typeSelect",attrs:{placeholder:"请选择"},model:{value:t.form.cate,callback:function(e){t.$set(t.form,"cate",e)},expression:"form.cate"}},t._l(t.cateList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)])]),i("div",[t._m(2),i("div",{staticClass:"right "},[i("div",[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],attrs:{placeholder:"若提交密码或AccessKeys等信息，请通过'机密信息'方式添加，并在问题处理完毕后及时修改。"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})])])]),i("div",[t._m(3),i("div",{staticClass:"right"},[i("div",[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.secretInfo,expression:"form.secretInfo"}],attrs:{placeholder:"请在此填写账户、密码等机密信息，提交后机密信息将做加密处理。"},domProps:{value:t.form.secretInfo},on:{input:function(e){e.target.composing||t.$set(t.form,"secretInfo",e.target.value)}}})])])]),i("div",[t._m(4),i("div",{staticClass:"right"},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],attrs:{type:"text"},domProps:{value:t.form.tel},on:{input:function(e){e.target.composing||t.$set(t.form,"tel",e.target.value)}}})]),i("p",[t._v("默认为您的绑定手机号，紧急情况时乐帆云工程师会与您联系，请您填写正确的手机号。")])])]),i("div",[t._m(5),i("div",{staticClass:"right"},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel2,expression:"form.tel2"}],attrs:{type:"text"},domProps:{value:t.form.tel2},on:{input:function(e){e.target.composing||t.$set(t.form,"tel2",e.target.value)}}})]),i("p",[t._v("默认为您的绑定手机号，紧急情况时乐帆云工程师会与您联系，请您填写正确的手机号。")])])]),i("div",[t._m(6),i("div",{staticClass:"right"},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{type:"text",placeholder:""},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}})])])]),i("div",[t._m(7),i("div",{staticClass:"right"},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email2,expression:"form.email2"}],attrs:{type:"text",placeholder:""},domProps:{value:t.form.email2},on:{input:function(e){e.target.composing||t.$set(t.form,"email2",e.target.value)}}})])])]),i("div",[t._m(8),i("div",{staticClass:"right"},[i("xy-upload",{attrs:{item:t.item,header:{}},model:{value:t.form.files,callback:function(e){t.$set(t.form,"files",e)},expression:"form.files"}})],1)]),i("el-button",{staticClass:"m-b-md",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("span",[t._v("*")]),i("label",{staticStyle:{"margin-left":"5px"},attrs:{for:""}},[t._v("优先级:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left middleSpan"},[i("span",[t._v("*")]),i("label",{attrs:{for:""}},[t._v("选择类别:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left middleSpan"},[i("span",[t._v("*")]),i("label",{attrs:{for:""}},[t._v("问题描述:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("label",{attrs:{for:""}},[t._v("机密信息:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left middleSpan"},[i("span",[t._v("*")]),i("label",{attrs:{for:""}},[t._v("手机号:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("label",{attrs:{for:""}},[t._v("接收短信提醒:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("label",{attrs:{for:""}},[t._v("邮箱:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("label",{attrs:{for:""}},[t._v("抄送邮箱:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("label",{attrs:{for:""}},[t._v("上传附件:")])])}],o=i("1da1"),r=(i("96cf"),i("92dd")),n={name:"WorkSheetAdd",props:[],components:{"xy-upload":r["a"]},data:function(){var t;return{loading:!1,item:{name:"files",extra:{type:"files",drag:!1,driver:this.$store.state.app.uploadDriver,signUrl:"",action:"",tip:"",format:"jpg,png,bmp",maxSize:2048}},form:{level:1,cate:"",description:"",tel:null===(t=this.$store.state.user.userInfo.mobile)||void 0===t?void 0:t.identifier,tel2:"",email:"",email2:"",files:[]},cateList:{}}},created:function(){this.loadlists()},methods:{handleSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,i=t,setTimeout((function(){i.loading=!1}),5e3),e.next=5,t.util.request({url:"/v1/worksheet/worksheet/add",data:t.form,method:"post"});case 5:a=e.sent,"200"==a.code?(t.util.showToast({title:a.msg,icon:"success",duration:2e3}),t.$router.back()):t.util.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},loadlists:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.util.request({url:"/v1/worksheet/worksheet/add",method:"get"});case 3:i=e.sent,200==i.code?t.cateList=i.data.cateList:t.util.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},l=n,c=(i("42b5"),i("2877")),d=Object(c["a"])(l,a,s,!1,null,"4bdcb3ba",null);e["default"]=d.exports},"84cf":function(t,e,i){},"92dd":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-box",class:t.fileList.length>=t.optionsData.limit&&"image"==t.optionsData.type?"hidden-up-btn":""},[i("el-upload",{ref:"upload",class:"upload-"+t.optionsData.type,attrs:{drag:t.optionsData.drag,"show-file-list":!0,"list-type":t.listType,headers:t.headerData,limit:t.optionsData.limit,multiple:1!=t.optionsData.limit,"file-list":t.fileList,"on-preview":t.handlePictureCardPreview,"on-progress":t.handleProgress,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"before-remove":t.beforeRemove,"on-remove":t.handleRemove,"before-upload":t.handleBeforeUpload,data:t.optionsData.postdata,name:t.name,action:t.optionsData.action,"http-request":t.uploadSectionFile}},[t.fileList.length>=t.optionsData.limit&&1==t.optionsData.limit&&"image"==t.optionsData.type?[i("img",{attrs:{src:t.fileList[0]["url"]}})]:[t.optionsData&&t.optionsData.drag?[t._t("drag",["images"==t.optionsData.type?[t._t("icon",[i("i",{staticClass:"el-icon-plus",class:t.optionsData.icon?t.optionsData.icon:""})]),t.optionsData.placeholder?i("div",{staticClass:"el-upload__text"},[t._v(" "+t._s(t.optionsData.placeholder)+" ")]):t._e()]:[t._t("icon",[i("i",{staticClass:"el-icon-upload",class:t.optionsData.icon?t.optionsData.icon:""})]),i("div",{staticClass:"el-upload__text"},[t._v(" "+t._s(t.optionsData.placeholder?t.optionsData.placeholder:"将文件拖到此处，或点击上传")+" ")]),i("div",{staticClass:"font-sm text-gray lh-1-2"},[t._v(" "+t._s(t.optionsData.tip?t.optionsData.tip:"只能上传"+t.optionsData.format+"文件，且不超过"+t.optionsData.maxSize+"KB")+" ")])]])]:[i("el-button",{attrs:{size:"small",type:"primary"}},[t._t("btn-text",[t._v("点击上传")])],2)]],i("el-dialog",{attrs:{"append-to-body":!0,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},["image"==t.mediaType?[i("img",{attrs:{width:"100%",src:t.dialogImageUrl}})]:"audio"==t.mediaType?[i("audio",{attrs:{src:t.dialogImageUrl,controls:"controls"}},[t._v(" 您的浏览器不支持 audio 标签。 ")])]:"video"==t.mediaType?[i("video",{attrs:{src:t.dialogImageUrl,controls:"controls",width:"700"}},[t._v(" 您的浏览器不支持 video 标签。 ")])]:t._e()],2)],2),t.img.title&&""!==t.img.title?i("div",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.img.title)+" ")]):t._e()],1)},s=[],o=i("1da1"),r=(i("96cf"),i("caad"),i("b0c0"),i("a434"),i("d3b7"),i("2532"),{name:"XyUpload",props:{item:{type:Object,default:function(){return{extra:{}}}},options:{type:Object,default:function(){return{}}},value:{type:[Array,String],default:function(){return[]}},header:{type:Object,default:function(){return{cloudId:0,eid:0,token:""}}},img:{type:Object,default:function(){return{value:"",title:""}}}},data:function(){return{name:"file",optionsData:{type:"image",drag:!1,driver:"",signUrl:"",action:"",limit:1,icon:"",placeholder:"",tip:"",format:"jpg,png",maxSize:512,splitePiece:!1,mergeUrl:"",disabled:!1,postdata:{}},headerData:{},fileList:[],listType:"text",dialogImageUrl:"",dialogVisible:!1,mediaType:"image"}},mounted:function(){this.optionsData=Object.assign(this.optionsData,this.options,this.item.extra),this.getDefault(),this.headerData={Authorization:this.header.token?this.header.token:this.util.getToken()},"image"!=this.optionsData.type&&"file"!=this.optionsData.type&&(this.optionsData.limit=30)},watch:{value:{deep:!0,handler:function(t,e){this.getDefault()}}},methods:{getDefault:function(){switch(this.optionsData.type){case"image":this.listType="picture",""==this.value?this.fileList=[]:this.fileList=[{name:"image",url:this.value}];break;case"images":this.listType="picture-card","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break;default:this.listType="text","string"==typeof this.value?this.fileList=[]:this.fileList=this.value;break}},getFileType:function(t){var e=t.lastIndexOf(".");return-1!=e?t.substring(e+1,t.length).toLowerCase():""},handlePictureCardPreview:function(t){var e=this.getFileType(t.url).toLowerCase();["jpg","png","bmp","ico","jpeg"].includes(e)?this.mediaType="image":["mp3","wav","ogg","ico","jpeg"].includes(e)?this.mediaType="audio":["mp4","ogg"].includes(e)&&(this.mediaType="video"),this.dialogImageUrl=t.url,this.dialogVisible=!0},handleExceed:function(t,e){this.$message.warning("最多上传"+this.optionsData.limit+"个文件")},handleProgress:function(t,e,i){},handleSuccess:function(t,e,i){var a;if(200==t.code)if(null!==(a=t.data)&&void 0!==a&&a.path&&(e.path=t.data.path),e.url=t.data.url,this.fileList=i,"image"==this.optionsData.type)this.$emit("input",i[0].url);else{for(var s=[],o=0;o<i.length;o++){var r=i[o];s.push({name:r.name,path:null===r||void 0===r?void 0:r.path,url:r.url,size:r.size})}this.$emit("input",s)}else this.$message({message:t.msg,type:"warning"})},beforeRemove:function(t,e){},handleRemove:function(t,e){this.optionsData.disabled?this.$message({message:"只读模式",type:"warning"}):(this.fileList.splice(this.fileList.indexOf(t),1),"image"==this.optionsData.type?this.$emit("input",""):this.$emit("input",this.fileList),this.fileList)},uploadSectionFile:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.file,s=e,i.next=4,s.util.uploadFile({driver:s.optionsData.driver||"default",signUrl:s.optionsData.signUrl||"",url:s.optionsData.action||"",header:s.header,file:a,splitePiece:s.optionsData.splitePiece,mergeUrl:s.optionsData.mergeUrl});case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),i)})))()},handleBeforeUpload:function(t){var e=this,i=this.optionsData.maxSize;return new Promise(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(s,o){var r,n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.name.substring(t.name.lastIndexOf(".")+1),null!==(r=e.optionsData)&&void 0!==r&&r.format&&(null!==(l=e.optionsData)&&void 0!==l&&l.format.includes(n)||(e.$message({message:n+"格式不支持 ",type:"warning"}),o())),t.size/1024>i&&(e.$message({message:"上传文件大小不能超过 "+i+"KB!",type:"warning"}),o()),s();case 4:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())}}}),n=r,l=(i("5806"),i("2877")),c=Object(l["a"])(n,a,s,!1,null,"667edb1c",null);e["a"]=c.exports},a434:function(t,e,i){"use strict";var a=i("23e7"),s=i("23cb"),o=i("a691"),r=i("50c4"),n=i("7b0b"),l=i("65f0"),c=i("8418"),d=i("1dde"),u=d("splice"),p=Math.max,m=Math.min,f=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var i,a,d,u,h,g,_=n(this),b=r(_.length),y=s(t,b),x=arguments.length;if(0===x?i=a=0:1===x?(i=0,a=b-y):(i=x-2,a=m(p(o(e),0),b-y)),b+i-a>f)throw TypeError(v);for(d=l(_,a),u=0;u<a;u++)h=y+u,h in _&&c(d,u,_[h]);if(d.length=a,i<a){for(u=y;u<b-a;u++)h=u+a,g=u+i,h in _?_[g]=_[h]:delete _[g];for(u=b;u>b-a+i;u--)delete _[u-1]}else if(i>a)for(u=b-a;u>y;u--)h=u+a-1,g=u+i-1,h in _?_[g]=_[h]:delete _[g];for(u=0;u<i;u++)_[u+y]=arguments[u+2];return _.length=b-a+i,d}})},e986:function(t,e,i){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-690001ea"],{"05e8":function(e,t,n){},"1f38":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var i=function(){return"undefined"!==typeof window?window:e},o=function(){var e=i();return e&&e.tinymce?e.tinymce:null}}).call(this,n("c8ba"))},2420:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xy-editor-tinymce"},[e.loadedScript?n("tinymce-vue",{ref:"tinymce",attrs:{"api-key":e.item.extra.tinymce.key||"y1buzf80o0qtt4lt3pfj0yh98ilgq4ts6mf3nwjpqky9ea49","tinymce-script-src":"https://cdn.jsdelivr.net/npm/tinymce@5.5.1/tinymce.min.js",init:e.init},on:{onInit:e.onReady},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}):e._e(),n("el-dialog",{attrs:{title:"相册",visible:e.imageAlbumShow,width:"1000px"},on:{"update:visible":function(t){e.imageAlbumShow=t}}},[n("span",[e._v("相册功能开发中，敬请期待。。。")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.imageAlbumShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.imageAlbumShow=!1}}},[e._v("确 定")])],1)]),e.newyearShow?n("iframe",{staticClass:"fireworks",attrs:{src:"https://uniweb.jiangruyi.com/gh/starideas/xyfront/libs/newyear/index.html?title="+(e.item.extra&&e.item.extra.newyearTitle?e.item.extra.newyearTitle:"新年快乐"),frameborder:"0"}}):e._e(),n("i",{directives:[{name:"show",rawName:"v-show",value:e.newyearShow,expression:"newyearShow"}],staticClass:"xyicon xyicon-close",staticStyle:{"font-size":"50px"},on:{click:e.newyearHide}})],1)},o=[],r=(n("4160"),n("c975"),n("b0c0"),n("d3b7"),n("159b"),n("ade3")),a=(n("96cf"),n("1da1")),s=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],l=function(e){return-1!==s.indexOf(e)},c=function(e,t,n){Object.keys(t).filter(l).forEach((function(i){var o=t[i];"function"===typeof o&&("onInit"===i?o(e,n):n.on(i.substring(2),(function(e){return o(e,n)})))}))},u=function(e,t){var n,i=e.$props.modelEvents?e.$props.modelEvents:null,o=Array.isArray(i)?i.join(" "):i;e.$watch("value",(function(e,i){t&&"string"===typeof e&&e!==n&&e!==i&&(t.setContent(e),n=e)})),t.on(o||"change keyup undo redo",(function(){n=t.getContent(),e.$emit("input",n)}))},d=function(e,t,n){var i=t.$props.value?t.$props.value:"",o=t.$props.initialValue?t.$props.initialValue:"";n.setContent(i||o),t.$listeners.input&&u(t,n),c(e,t.$listeners,n)},m=0,p=function(e){var t=Date.now(),n=Math.floor(1e9*Math.random());return m++,e+"_"+n+m+String(t)},h=function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()},f=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},g=function(e,t){return f(e).concat(f(t))},y=function(e,t,n,i){var o=t.createElement("script");o.type="application/javascript",o.id=e,o.addEventListener("load",i),o.src=n,t.head&&t.head.appendChild(o)},b=function(){return{listeners:[],scriptId:p("tiny-script"),scriptLoaded:!1}},v=function(e,t,n,i){e.scriptLoaded?i():(e.listeners.push(i),t.getElementById(e.scriptId)||y(e.scriptId,t,n,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0})))},w=n("1f38"),x={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean},_=function(){return _=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},k=b(),S=function(e,t,n){return e(n||"div",{attrs:{id:t}})},C=function(e,t){return e("textarea",{attrs:{id:t},style:{visibility:"hidden"}})},j=function(e){return function(){var t=_({},e.$props.init,{readonly:e.$props.disabled,selector:"#"+e.elementId,plugins:g(e.$props.init&&e.$props.init.plugins,e.$props.plugins),toolbar:e.$props.toolbar||e.$props.init&&e.$props.init.toolbar,inline:e.inlineEditor,setup:function(t){e.editor=t,t.on("init",(function(n){return d(n,e,t)})),e.$props.init&&"function"===typeof e.$props.init.setup&&e.$props.init.setup(t)}});h(e.element)&&(e.element.style.visibility=""),Object(w["a"])().init(t)}},$={props:x,created:function(){this.elementId=this.$props.id||p("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(w["a"])())j(this)();else if(this.element&&this.element.ownerDocument){var e=this.element.ownerDocument,t=this.$props.cloudChannel?this.$props.cloudChannel:"5",n=this.$props.apiKey?this.$props.apiKey:"no-api-key";v(k,e,"https://cdn.tiny.cloud/1/"+n+"/tinymce/"+t+"/tinymce.min.js",j(this))}},beforeDestroy:function(){null!==Object(w["a"])()&&Object(w["a"])().remove(this.editor)},render:function(e){return this.inlineEditor?S(e,this.elementId,this.$props.tagName):C(e,this.elementId)}},A=$,O={name:"XyEditorTinymce",components:{"tinymce-vue":A},props:{item:{},value:{type:[String],default:""},header:{type:Object,default:function(){return{cloudId:0,eid:0,token:""}}}},data:function(){var e=this;return{loadedScript:!1,audio:new Audio,audio1:new Audio,pluginPrefix:"https://uniweb.jiangruyi.com/gh/starideas/xyfront",content:"",init:{setup:function(e){var t;e.on("PostRender ",(function(){var n=e.getContainer();t=document.querySelector("body > .tox.tox-tinymce-aux"),n.parentNode.appendChild(t)}))},openImageAlbum:function(t){e.imageAlbumShow=!0},openNewyear:function(t){e.audio.loop="loop",e.audio.src="https://uniweb.jiangruyi.com/gh/starideas/xyfront/audio/幸福时光.mp3",e.audio.play(),e.audio1.loop="loop",e.audio1.src="https://uniweb.jiangruyi.com/gh/starideas/xyfront/audio/441.wav",e.audio1.play(),e.newyearShow=!0},external_plugins:{},menubar:this.item.extra.tinymce.hasOwnProperty("menubar")?this.item.extra.tinymce.menubar:"file edit view insert format tools table",toolbar_mode:this.item.extra.tinymce.toolbar_mode?this.item.extra.tinymce.toolbar_mode:"wrap",toolbar_sticky:!1,toolbar_location:"top",draggable_modal:!0,init_instance_callback:function(e){},default_link_target:"_blank",paste_data_images:!0,automatic_uploads:!0,file_picker_types:"file image media",file_picker_callback:this.filePickerCallback,images_upload_handler:this.imagesUploadHandler,language_url:this.item.extra.tinymce.language_url?this.item.extra.tinymce.language_url:"https://cdn.jsdelivr.net/gh/starideas/xyfront/libs/tinymce/langs/zh_CN.js",language:this.item.extra.tinymce.language?this.item.extra.tinymce.language:"zh_CN",skin_url:this.item.extra.tinymce.skin,theme:this.item.extra.tinymce.theme?this.item.extra.tinymce.theme:"silver",branding:!1,plugins:this.item.extra.tinymce.plugins?this.item.extra.tinymce.plugins:"editor135 axupimgs imagealbum newyear bdmap media link lists image imagetools code table wordcount fullscreen emoticons print codesample",toolbar:this.item.extra.tinymce.toolbar?this.item.extra.tinymce.toolbar:"formatselect fontselect fontsizeselect | link image axupimgs media bdmap blockquote codesample | bold italic underline strikethrough | forecolor backcolor bullist numlist | code fullscreen | editor135 newyear",audio_template_callback:function(e){return'<audio controls>\n<source src="'+e.source+'"'+(e.sourcemime?' type="'+e.sourcemime+'"':"")+" />\n"+(e.altsource?'<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</audio>"},video_template_callback:function(e){return'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source+'"'+(e.sourcemime?' type="'+e.sourcemime+'"':"")+" />\n"+(e.altsource?'<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</video>"},media_url_resolver:this.mediaUrlResolver,media_alt_source:!1,media_dimensions:!1,media_live_embeds:!0,media_poster:!1,height:this.item.extra.tinymce.height?this.item.extra.tinymce.height:600,convert_urls:!1,font_formats:"\n                    微软雅黑=微软雅黑;\n                    宋体=宋体;\n                    黑体=黑体;\n                    仿宋=仿宋;\n                    楷体=楷体;\n                    隶书=隶书;\n                    幼圆=幼圆;\n                    Andale Mono=andale mono,times;\n                    Arial=arial, helvetica,\n                    sans-serif;\n                    Arial Black=arial black, avant garde;\n                    Book Antiqua=book antiqua,palatino;\n                    Comic Sans MS=comic sans ms,sans-serif;\n                    Courier New=courier new,courier;\n                    Georgia=georgia,palatino;\n                    Helvetica=helvetica;\n                    Impact=impact,chicago;\n                    Symbol=symbol;\n                    Tahoma=tahoma,arial,helvetica,sans-serif;\n                    Terminal=terminal,monaco;\n                    Times New Roman=times new roman,times;\n                    Trebuchet MS=trebuchet ms,geneva;\n                    Verdana=verdana,geneva;\n                    Webdings=webdings;\n                    Wingdings=wingdings,zapf dingbats"},editor:null,imageAlbumShow:!1,newyearShow:!1}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.content=this.value,this.init.external_plugins=Object(r["a"])({bdmap:this.pluginPrefix+"/libs/tinymce/plugins/bdmap/plugin.js",editor135:this.pluginPrefix+"/libs/tinymce/plugins/editor135/plugin.js",newyear:this.pluginPrefix+"/libs/tinymce/plugins/newyear/plugin.js",axupimgs:this.pluginPrefix+"/libs/tinymce/plugins/axupimgs/plugin.js"},"newyear",this.pluginPrefix+"/libs/tinymce/plugins/newyear/plugin.js"),e.next=4,this.loadScript();case 4:this.loadedScript=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{newyearHide:function(){this.audio.pause(),this.audio1.pause(),this.newyearShow=!1},confirm:function(e){var t=this;Array.isArray(e)&&e.length>0&&e.forEach((function(e,n){t.editor.execCommand("selectAll"),t.editor.selection.getRng().collapse(!1),t.editor.focus();var i='<div><img src="'+e+'"/></div>';t.editor.insertContent(i)}))},onReady:function(e){this.editor=e.target},loadScript:function(){var e=this;return new Promise((function(t,n){e.VueScript2.load("https://cdn.jsdelivr.net/npm/tinymce@5.5.1/tinymce.min.js").then((function(){t()}))}))},mediaUrlResolver:function(e,t){if(-1!==e.url.indexOf(".html")){var n='<iframe src="'+e.url+'" width="600" height="400" ></iframe>';t({html:n})}else t({html:""})},filePickerCallback:function(e,t,n){var i=this,o=document.createElement("input");o.setAttribute("type","file"),o.onchange=Object(a["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.files[0],t.next=3,i.util.uploadFile({driver:i.item.extra.driver||"default",signUrl:i.item.extra.signUrl||"",url:i.item.extra.action,header:i.header,file:n});case 3:o=t.sent,o.data&&e(o.data.url,{text:n.name,alt:n.name});case 6:case"end":return t.stop()}}),t,this)}))),o.click()},imagesUploadHandler:function(e,t,n){var i=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.util.uploadFile({driver:i.item.extra.driver||"default",signUrl:i.item.extra.signUrl||"",url:i.item.extra.action,header:i.header,blobInfo:e});case 2:o=n.sent,o.data&&t(o.data.url);case 4:case"end":return n.stop()}}),n)})))()}},watch:{content:function(e){this.item.extra.disabled?this.$message({message:"只读模式",type:"warning"}):this.$emit("input",e)}}},P=O,R=(n("a05c"),n("2877")),E=Object(R["a"])(P,i,o,!1,null,"02ea80f0",null);t["a"]=E.exports},a05c:function(e,t,n){"use strict";var i=n("05e8"),o=n.n(i);o.a}}]);
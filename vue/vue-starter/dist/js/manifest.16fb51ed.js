"use strict";(self["webpackChunkvue_starter"]=self["webpackChunkvue_starter"]||[]).push([[700],{52852:function(t,e,a){a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ts-14"},[t.showReplyForm?a("el-card",{staticClass:"box-card m-b-sm",attrs:{shadow:"never"}},[t.$xyutil.getStorageSync("token")?a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"user flex space-between"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"m-r-sm"},[a("el-avatar",{attrs:{shape:"square",icon:"el-icon-user-solid",src:t.$store.state.user.userInfo.avatar}})],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"title tw5 ts-16"},[t._v(t._s(t.$store.state.user.userInfo.nickname))]),a("div",{staticClass:"info flex space-between text-gray ts-13",staticStyle:{"margin-top":"2px"}},[a("div",[t._v(t._s(t.$store.state.user.userInfo.slogan?t.$store.state.user.userInfo.slogan:""))])])])]),a("div",{staticClass:"ts-12 text-gray"},[t._v("写回复")])])]):t._e(),t.$xyutil.getStorageSync("token")?a("div",{staticClass:"comment-form"},[a("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"",size:"normal",clearable:""},model:{value:t.comment.content,callback:function(e){t.$set(t.comment,"content",e)},expression:"comment.content"}}),a("el-button",{staticClass:"m-t-sm m-r",staticStyle:{width:"80px"},attrs:{type:"primary",size:"medium"},on:{click:t.reply}},[t._v(" 提交 ")]),t.replyTarget?a("span",[t._v("回复"+t._s(t.replyTarget))]):t._e()],1):t._e(),t.$xyutil.getStorageSync("token")?t._e():a("el-alert",{attrs:{title:"请登录后回复",type:"error","show-icon":""}})],1):t._e(),a("el-card",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length > 0"}],staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix ts-18",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.title)+"列表")])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"comment-list",staticStyle:{"min-height":"70px"},attrs:{"element-loading-text":"数据加载中"}},t._l(t.dataList,(function(e,i){return a("div",{key:i,staticClass:"item p-b-sm border-bottom_1px",class:i>0?"p-t-sm":""},[a("div",{staticClass:"user flex space-between"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"m-r-sm"},[a("el-avatar",{attrs:{icon:"el-icon-user-solid",src:e.userInfo.avatar}})],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"title tw5 ts-14"},[t._v(" "+t._s(e.userInfo.nickname)+" "),e.userInfo.roles||1==e.userInfo.id?a("el-tag",{attrs:{type:"success",size:"mini",effect:"dark"}},[t._v(" 官方人员 ")]):t._e()],1),a("div",{staticClass:"info flex space-between text-gray ts-13",staticStyle:{"margin-top":"2px"}},[a("div",[t._v(t._s(e.userInfo.slogan?e.userInfo.slogan:""))])])])]),a("div",{staticClass:"ts-12 text-gray"},[t._v(t._s(t.$xyutil.timeFormat(e.createTime)))])]),a("div",{staticClass:"content ts-14 m-t-sm"},[a("div",{domProps:{innerHTML:t._s(e.content)}}),e.children.length>0?a("div",{staticClass:"children-list m-l-lg m-t-sm bg-gray-light p-a-sm br-4"},t._l(e.children,(function(e,r){return a("div",{key:r,staticClass:"m-b-sm m-t-xs"},[a("div",{staticClass:"flex space-between ts-13"},[a("div",{staticClass:"m-b-xs"},[a("span",[t._v(t._s(e.userInfo.nickname))]),e.userInfo.roles||1==e.userInfo.id?a("el-tag",{staticClass:"m-l-xs m-r-xs",attrs:{type:"success",size:"mini",effect:"dark"}},[t._v(" 官方人员 ")]):t._e(),t._v(" 回复 "),a("span",[t._v(t._s(e.puserInfo?e.puserInfo.nickname:""))])],1),a("div",[a("span",{staticClass:"ts-12 text-gray"},[t._v("回复于"+t._s(t.$xyutil.timeFormat(e.createTime)))])])]),a("div",{staticClass:"m-b-sm",domProps:{innerHTML:t._s(e.content)}}),a("div",{staticClass:"actions flex flex-alignCenter"},[t.allowZan?a("div",{staticClass:"m-r",on:{click:function(e){return t.actionClick(i,"comment",1,r)}}},[a("i",{staticClass:"xyicon xyicon-zan ts-14",staticStyle:{"margin-right":"3px"}}),a("el-link",[t._v(" "+t._s(e.actionStates[1]?"已":"")+"赞同 ")])],1):t._e(),a("div",{staticClass:"m-r",on:{click:function(a){return t.doreply(e.id,e.userInfo.nickname,i)}}},[a("i",{staticClass:"xyicon xyicon-reply ts-14",staticStyle:{"margin-right":"3px"}}),a("el-link",[t._v(" 回复 ")])],1),t.allowLike?a("div",{staticClass:"m-r",on:{click:function(e){return t.actionClick(i,"comment",2,r)}}},[a("i",{staticClass:"xyicon xyicon-heart ts-14",staticStyle:{"margin-right":"3px"}}),a("el-link",[t._v(" "+t._s(e.actionStates[2]?"已":"")+"收藏 ")])],1):t._e()])])})),0):t._e()]),a("div",{staticClass:"actions m-t flex flex-alignCenter"},[t.allowZan?a("el-button",{staticClass:"m-r",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.actionClick(i,"comment",1,-1)}}},[a("i",{staticClass:"xyicon xyicon-zan ts-14",staticStyle:{"margin-right":"3px"}}),t._v(" "+t._s(e.actionStates[1]?"已":"")+"赞同 ")]):t._e(),a("div",{staticClass:"m-r",on:{click:function(a){return t.doreply(e.id,e.userInfo.nickname)}}},[a("i",{staticClass:"xyicon xyicon-reply ts-14",staticStyle:{"margin-right":"3px"}}),a("el-link",[t._v(" 回复 ")])],1),t.allowLike?a("div",{staticClass:"m-r",on:{click:function(e){return t.actionClick(i,"comment",2,-1)}}},[a("i",{staticClass:"xyicon xyicon-heart ts-14",staticStyle:{"margin-right":"3px"}}),a("el-link",[t._v(" "+t._s(e.actionStates[2]?"已":"")+"收藏 ")])],1):t._e()],1)])})),0)])],1)},r=[],s=a(16198),o=(a(35666),a(9653),{name:"commentLists",props:{allowZan:{type:Boolean,default:!1},allowLike:{type:Boolean,default:!1},showReplyForm:{type:Boolean,default:!1},title:{type:String,default:"评论"},dataId:{type:[Number,String],default:0},dataModel:{type:String,default:""},urlPrefix:{type:String,default:""}},data:function(){return{loading:!1,dataList:[],item:{extra:{tinymce:{height:300,toolbar:"formatselect fontsizeselect | link image media blockquote codesample | bold italic underline strikethrough | forecolor backcolor bullist numlist | code fullscreen | newyear"}}},replyTarget:"",comment:{anonymous:0,tpid:0,tpidIndex:-1,pid:0,dataId:0,dataModel:this.dataModel,content:"",images:[],url:""}}},created:function(){this.comment.dataId=this.dataId,this.loadData()},watch:{dataId:function(t){this.comment.dataId=this.dataId,this.loadData()},dataModel:function(t){this.loadData()}},methods:{doreply:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;a>=0&&(console.log("index-id",this.dataList[a].id),this.comment.tpidIndex=a,this.comment.tpid=this.dataList[a].id),this.comment.dataId=this.dataId,this.comment.pid=t,this.showReplyForm=!0,this.replyTarget=e,console.log("comment",this.comment)},reply:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.comment.url=t.urlPrefix+"/"+t.comment.dataId,console.log(t.comment),t.comment.content){e.next=5;break}return t.$xyutil.showToast({title:"请填写回复",icon:"error",duration:2e3}),e.abrupt("return",!1);case 5:return e.next=7,t.$xyutil.request({url:"/v1/comment/comment/add",method:"post",data:t.comment,header:{}});case 7:a=e.sent,200==a.code?(t.$xyutil.showToast({title:"提交成功",icon:"none",duration:2e3}),t.$emit("update:showReplyForm",!1),a.data.comment.userInfo=t.$store.state.user.userInfo,t.comment.tpid>0?t.dataList[t.comment.tpidIndex].children.push(a.data.comment):t.dataList.push(a.data.comment),t.replyTarget="",t.comment={anonymous:0,tpid:0,tpidIndex:-1,pid:0,dataId:0,dataModel:t.dataModel,content:"",images:[],url:""}):t.$xyutil.showToast({title:a.msg,icon:"none",duration:2e3});case 9:case"end":return e.stop()}}),e)})))()},actionClick:function(t,e,a){var i=arguments,r=this;return(0,s.Z)(regeneratorRuntime.mark((function s(){var o,n,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return o=i.length>3&&void 0!==i[3]?i[3]:-1,n=0,-1!=o?n=r.dataList[t].children[o].id:(console.log(o),n=r.dataList[t].id),s.next=5,r.$xyutil.request({url:"/v1/action/action/set",data:{dataId:n,dataModel:e,actionType:a},method:"post"});case 5:l=s.sent,200==l.code?(-1!=o?r.$set(r.dataList[t].children[o].actionStates,a,l.data.currentValue):r.$set(r.dataList[t].actionStates,a,l.data.currentValue),r.$xyutil.showToast({title:l.msg,icon:"success",duration:2e3})):r.$xyutil.showToast({title:l.msg,icon:"loading",duration:3e3});case 7:case"end":return s.stop()}}),s)})))()},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.dataId&&t.dataModel){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.next=5,t.$xyutil.request({url:"/v1/comment/comment/lists",data:{dataId:t.dataId,dataModel:t.dataModel},method:"get"});case 5:a=e.sent,200==a.code?(t.dataList=a.data.dataList,0==t.dataList.length&&t.$emit("update:showReplyForm",!0)):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"465da541",null),u=c.exports},37718:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap my-wrap"},[a("el-container",[a("el-header",[a("xy-header",{attrs:{transparent:!1}})],1),a("el-container",{staticClass:"container main-container"},[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"auto"}},[a("el-menu",{attrs:{collapse:t.isCollapse,"default-active":t.defaultActive,router:"","default-openeds":["0","1","2"]}},[a("el-submenu",{attrs:{index:"0"}},[a("template",{slot:"title"},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户")])]),a("el-menu-item",{class:"/user/center"==t.$route.path?"active":"",attrs:{index:"/user/center"}},[a("i",{staticClass:"el-icon-user"}),t._v("个人中心"),a("i",{staticClass:"active-img"})])],2)],1)],1),a("el-main",[a("router-view")],1)],1)],1)],1)},r=[],s=a(16198),o=(a(35666),{data:function(){return{isCollapse:!1,defaultActive:"",keyword:""}},created:function(){this.$xyutil.isLogin(!1,!0)},watch:{defaultActive:function(t){}},methods:{toggleNav:function(){this.isCollapse=!this.isCollapse},logout:function(){var t=this;this.$confirm("确定要注销登录吗？","提示",{confirmButtonText:"注销",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then((0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("user/setToken",""),t.$store.dispatch("user/setUserInfo",""),e.next=4,t.$xyutil.request({url:"/v1/core/user/logout",method:"delete"});case 4:a=e.sent,200==a.code?(t.$xyutil.showToast({title:"注销成功",icon:"success",duration:2e3}),window.location.href=t.$xyutil.config.baseDomain()):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 6:case"end":return e.stop()}}),e)})))).catch((function(){}))},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/api",data:{},method:"get"});case 2:a=e.sent,200==a.code||t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,null,null),u=c.exports},96837:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"container"},[a("el-row",{staticClass:"user-info m-b flex flex-wrap",attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{attrs:{xs:12,sm:12}},[a("div",{staticClass:"avatar-box flex flex-alignCenter"},[a("div",[a("img",{staticClass:"avatar",attrs:{src:t.$store.state.user.userInfo.avatar,alt:"avatar"}})]),a("div",[a("div",{staticClass:"nickname"},[t._v(t._s(t.$store.state.user.userInfo.nickname))]),a("div",{staticClass:"uid"},[t._v("UID: "+t._s(t.$store.state.user.userInfo.id))])])])]),a("el-col",{staticClass:"count-list flex",attrs:{xs:12,sm:5}},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("粉丝")]),a("div",{staticClass:"value"},[t._v("0")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("关注")]),a("div",{staticClass:"value"},[t._v("0")])])])],1),a("userLoginHoistory")],1)])},r=[],s=a(16198),o=(a(35666),a(36956)),n={components:{userLoginHoistory:o["default"]},data:function(){return{}},created:function(){},methods:{loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/core/user/center",data:{},method:"get"});case 2:a=e.sent,200==a.code||t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"0d747406",null),d=u.exports},17353:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{type:"flex",justify:"space-around"}},[a("div",{staticClass:"cropper text-center"},[t.loadedScript?a("vue-cropper",{ref:"cropper",staticClass:"m-b",attrs:{img:t.option.img,outputSize:t.option.size,outputType:t.option.outputType,info:t.option.info,full:t.option.full,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixedBox:t.option.fixedBox},on:{realTime:t.realTime}}):t._e(),a("span",{staticClass:"text-gray ts-14"},[a("i",{staticClass:"xyicon xyicon-help-o ts-14"}),t._v(" 滚动鼠标滚轮来缩放图片 ")])],1),a("div",{staticClass:"previewBox"},[a("div",{staticClass:"preview-wrap"},[a("div",{staticClass:"preview",style:t.previews.div},[a("img",{style:t.previews.img,attrs:{src:t.previews.url}})])]),a("el-row",{staticClass:"m-t-md m-b",attrs:{type:"flex",justify:"center"}},[a("el-upload",{attrs:{action:"","show-file-list":!1,"auto-upload":!1,"on-change":t.uploadImg}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" 更换头像 ")])],1)],1),a("br"),a("el-row",[a("el-button",{attrs:{icon:"el-icon-plus",circle:"",size:"mini"},on:{click:function(e){return t.changeScale(1)}}}),a("el-button",{attrs:{icon:"el-icon-minus",circle:"",size:"mini"},on:{click:function(e){return t.changeScale(-1)}}}),a("el-button",{attrs:{icon:"el-icon-download",circle:"",size:"mini"},on:{click:function(e){return t.down("blob")}}}),a("el-button",{attrs:{icon:"el-icon-refresh-left",circle:"",size:"mini"},on:{click:t.rotateLeft}}),a("el-button",{attrs:{icon:"el-icon-refresh-right",circle:"",size:"mini"},on:{click:t.rotateRight}})],1)],1)]),a("div",{staticClass:"m-t-md flex flex-end p-r-md"},[a("el-button",{attrs:{round:""},on:{click:function(e){t.showPopup=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",round:""},on:{click:t.saveEditAvatar}},[t._v("保存")])],1)],1)},r=[],s=a(9726),o=a(16198),n=(a(74916),a(15306),a(41539),a(39714),a(66992),a(78783),a(33948),a(60285),a(41637),a(68309),a(88674),a(35666),{name:"editAvatar",props:{showPopup:!1},data:function(){return{loadedScript:!1,filename:"",avatarURL:"",previews:{},option:{img:"",info:!0,outputSize:1,full:!0,outputType:"png",canMove:!0,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:150,autoCropHeight:150,fixed:!0,fixedBox:!0}}},created:function(){var t=(0,o.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadScript();case 2:Vue.use(window["vue-cropper"].default),this.loadedScript=!0,this.option.img=this.$store.state.user.userInfo.avatar,this.filename=this.guid()+".png";case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{},methods:{guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,a="x"==t?e:3&e|8;return a.toString(16)}))},saveEditAvatar:function(){this.finish("blob")},changeScale:function(t){t=t||1,this.$refs.cropper.changeScale(t)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},finish:function(t){var e=this;"blob"===t?this.$refs.cropper.getCropBlob(function(){var t=(0,o.Z)(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,e.$xyutil.uploadFile({driver:e.$store.state.app.uploadDriver,signUrl:"/v1/upload_oss/index/sign",url:"/v1/core/index/upload",header:{token:e.$xyutil.config.getToken()},blobInfo:{blob:function(){return a},filename:function(){return this.filename}}});case 3:i=t.sent,i.data?(e.avatarURL=i.data.url,e.submit()):e.$xyutil.showToast({title:"上传失败",icon:"loading",duration:3e3});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.$refs.cropper.getCropData((function(t){}))},realTime:function(t){this.previews=t},down:function(t){var e=document.createElement("a");e.download="author-img","blob"===t?this.$refs.cropper.getCropBlob((function(t){e.href=window.URL.createObjectURL(t),e.click()})):this.$refs.cropper.getCropData((function(t){e.href=t,e.click()}))},uploadImg:function(t){var e=this;this.filename=t.name;var a=new FileReader;a.onload=function(t){var a;a="object"===(0,s.Z)(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,e.option.img=a},a.readAsArrayBuffer(t.raw)},submit:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.avatarURL){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$xyutil.request({url:"/v1/core/user/avatar",data:{avatar:t.avatarURL},method:"put"});case 4:a=e.sent,200==a.code?(t.$xyutil.showToast({title:a.msg,icon:"success",duration:2e3}),t.$store.state.user.userInfo.avatar=t.avatarURL,t.showPopup=!1):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 6:case"end":return e.stop()}}),e)})))()},loadScript:function(){var t=this;return new Promise((function(e,a){t.VueScript2.load("https://cdn.jsdelivr.net/npm/vue-cropper@0.4.9/dist/index.js").then((function(){e()}))}))}}}),l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"95e0135e",null),d=u.exports},56226:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"80px","padding-bottom":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box hidden-sm-and-down",attrs:{md:10,lg:11}},[a("img",{attrs:{src:t.$store.state.app.loginPic,width:"600"}})]),a("el-col",{staticClass:"login-box bg-white",attrs:{xs:24,sm:{span:14,offset:5},md:15,lg:13}},[a("div",{staticClass:"title m-b-md"},[t._v(" 登录 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.ruleLogin}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-person-outline",placeholder:"请输入用户名、邮箱或手机号"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit.apply(null,arguments)}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("div",{staticClass:"agreement"},[a("el-checkbox",{model:{value:t.form.rememberLogin,callback:function(e){t.$set(t.form,"rememberLogin",e)},expression:"form.rememberLogin"}},[t._v("记住登录")])],1),a("xy-captcha",{on:{success:t.handleSubmit}},[a("el-button",{staticClass:"full submit-btn",attrs:{id:"Captcha",size:"large",loading:t.form.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(" 登录 ")])],1),a("div",{staticClass:"actions flex"},[a("div",[a("router-link",{attrs:{to:"/user/resetPassword"}},[t._v("忘记密码")])],1),a("div",[t._v(" 还没有账号？ "),a("router-link",{attrs:{to:"/user/register"}},[t._v("注册")])],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.qrloginShow,expression:"!qrloginShow"}],staticClass:"qrlogin",on:{click:function(e){t.qrloginShow=!0}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.qrloginShow,expression:"qrloginShow"}],staticClass:"qrlogin-modal"},[a("div",{staticClass:"flex space-between m-b"},[a("div",{staticClass:"ts-18"},[t._v(" 登录 ")]),a("div",[a("span",{staticClass:"cursor-pointer text-gray",on:{click:function(e){t.qrloginShow=!1}}},[t._v("账号密码登录")])])]),a("qrlogin",{staticClass:"text-center m-t-lg",attrs:{qrloginShow:t.qrloginShow,type:"wxapp"},on:{success:t.qrsuccess}})],1)],1)],1)],1)]),a("xy-footer"),a("xy-safety-verify",{ref:"sv",on:{"verify-request":t.handleSubmit},model:{value:t.verifyData,callback:function(e){t.verifyData=e},expression:"verifyData"}})],1)},r=[],s=a(16198),o=(a(35666),a(32564),a(97913)),n={components:{qrlogin:o.Z},data:function(){return{isDemo:!1,qrloginShow:!0,verifyData:"",form:{rememberLogin:!1,loading:!1,account:"",password:""},ruleLogin:{account:[{required:!0,message:"请填写账号",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}},created:function(){1==this.isDemo&&(this.form.account="jry",this.form.password="Windows9")},methods:{qrsuccess:function(){this.$xyutil.switchTab({url:"/"})},handleSubmit:function(){var t=(0,s.Z)(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.form,this.verifyData&&(e._verify=this.verifyData),this.form.loading=!0,a=this,setTimeout((function(){a.form.loading=!1}),5e3),t.next=7,this.$xyutil.request({url:"/v1/core/user/login",data:e,method:"post"});case 7:if(i=t.sent,200!=i.code){t.next=17;break}this.$store.commit("user/setToken",i.data.token),this.$store.commit("user/setUserInfo",i.data.userInfo),this.$refs.sv.close(),this.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),this.verifyData="",this.$xyutil.switchTab({url:"/"}),t.next=23;break;case 17:if(401003!=i.code){t.next=22;break}return this.$refs.sv.open(i.data.verifyList),t.abrupt("return");case 22:this.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 23:this.form.loading=!1;case 24:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"3a00f7f1",null),d=u.exports},61082:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"80px","padding-bottom":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box",attrs:{xs:1,sm:1,md:14,lg:14}},[a("img",{attrs:{src:t.$store.state.app.loginPic,width:"600"}})]),a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title m-b-md"},[t._v(" 欢迎注册"+t._s(t.$store.state.app.siteInfo.title)+" ")]),a("el-tabs",{attrs:{stretch:""},on:{"tab-click":t.handleClick},model:{value:t.regTab,callback:function(e){t.regTab=e},expression:"regTab"}},[t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")>=0?a("el-tab-pane",{staticClass:"p-t",attrs:{label:"邮箱注册",name:"email"}},[t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")>=0?a("RegEmail",{on:{"reg-success":t.regSuccess}}):t._e()],1):t._e(),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0?a("el-tab-pane",{staticClass:"p-t",attrs:{label:"手机注册",name:"mobile"}},[t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0?a("RegMobile",{on:{"reg-success":t.regSuccess}}):t._e()],1):t._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.qrloginShow,expression:"!qrloginShow"}],staticClass:"qrlogin",on:{click:function(e){t.qrloginShow=!0}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.qrloginShow,expression:"qrloginShow"}],staticClass:"qrlogin-modal"},[a("div",{staticClass:"flex space-between m-b"},[a("div",{staticClass:"ts-18"},[t._v(" 登录 ")]),a("div",[a("span",{staticClass:"cursor-pointer text-gray",on:{click:function(e){t.qrloginShow=!1}}},[t._v("账号密码登录")])])]),a("qrlogin",{staticClass:"text-center",attrs:{qrloginShow:t.qrloginShow,type:t.wxapp}})],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(97913),o=a(71616),n=a(31785),l={components:{qrlogin:s.Z,RegEmail:o["default"],RegMobile:n["default"]},data:function(){return{regTab:"email",qrloginShow:!1}},created:function(){this.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")>=0?this.regTab="email":this.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0?this.regTab="mobile":this.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_username")>=0&&(this.regTab="username")},methods:{regSuccess:function(){this.$xyutil.navigateTo("/")}}},c=l,u=a(1001),d=(0,u.Z)(c,i,r,!1,null,"014a79ac",null),m=d.exports},23400:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"main-banner"},[a("h1",{staticClass:"title"},[t._v("课程中心")]),a("p",{staticClass:"info m-t-md p-l p-r"},[a("Searchbar")],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"tw5 m-b ts-24 m-t"},[t._v(" 推荐课程 ")]),a("el-row",{staticClass:"cate-list flex-wrap",attrs:{gutter:30}},t._l(t.itemList,(function(e,i){return a("el-col",{key:i,attrs:{xs:24,sm:12,md:8,lg:6}},[a("router-link",{attrs:{to:"/course/item/info/"+e.id}},[a("div",{staticClass:"cate-item"},[a("img",{staticClass:"cover",attrs:{src:e.cover,alt:""}}),a("div",{staticClass:"bottom"},[t._v(t._s(e.title))])])])],1)})),1),0==t.itemList.length?a("el-empty",{attrs:{description:"暂无课程"}}):t._e()],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(37811)),n={components:{Searchbar:o.Z},data:function(){return{keyword:"",cateList:[],itemList:[]}},created:function(){this.loadItems(),this.loadCates()},watch:{},methods:{loadCates:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/course/cate/lists",data:{},method:"get"});case 2:a=e.sent,200==a.code?t.cateList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},loadItems:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/course/item/lists",data:{},method:"get"});case 2:a=e.sent,200==a.code?t.itemList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"4b47d0c6",null),d=u.exports},77813:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"main-banner"},[a("div",{staticClass:"container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v(t._s(t.info.title))])],1),a("div",{staticClass:"course-title m-b-sm"},[t._v(" "+t._s(t.chapterList[t.chapterIndex]?t.chapterList[t.chapterIndex].title:"")+" ")]),a("el-row",{staticClass:"course-content",attrs:{gutter:0}},[a("el-col",{attrs:{xs:24,sm:24,md:17,lg:17,offset:0}},[a("div",{staticClass:"player-wrap m-t m-b"},[t.loadedScript&&"video"==t.courseType?a("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",attrs:{options:t.playerOptions,playsinline:!0},on:{play:function(e){return t.onPlayerPlay(e)},pause:function(e){return t.onPlayerPause(e)},ended:function(e){return t.onPlayerEnded(e)},loadeddata:function(e){return t.onPlayerLoadeddata(e)},waiting:function(e){return t.onPlayerWaiting(e)},playing:function(e){return t.onPlayerPlaying(e)},timeupdate:function(e){return t.onPlayerTimeupdate(e)},canplay:function(e){return t.onPlayerCanplay(e)},canplaythrough:function(e){return t.onPlayerCanplaythrough(e)},ready:t.playerReadied,statechanged:function(e){return t.playerStateChanged(e)}}}):"pdf"==t.courseType?a("div",{staticClass:"pdf-box"},[a("vue-pdf-app",{staticStyle:{height:"1000px"},attrs:{pdf:t.fileUrl}})],1):"office"==t.courseType?a("iframe",{attrs:{width:"100%",height:"1000px",src:"https://view.officeapps.live.com/op/view.aspx?src="+t.fileUrl}}):t._e()],1),a("div",{staticClass:"player-bottom flex space-between p-l p-r p-b-sm"},[a("div",{staticClass:"text-left"},[t.chapterIndex>=0&&t.chapterList[t.chapterIndex]?a("a",{staticClass:"ts-13",attrs:{target:"_blank",href:t.$xyutil.baseDomain()+"/api/v1/course/chapter/download/"+t.chapterList[t.chapterIndex].id,rel:"noopener noreferrer"}},[a("i",{staticClass:"xyicon xyicon-download1"}),t._v(" 下载 ")]):t._e()]),t.chapterList[t.chapterIndex]?a("div",{staticClass:"text-left"},[a("span",{staticClass:"ts-14"},[t._v(" "+t._s(t.chapterIndex>=0?t.chapterList[t.chapterIndex].viewCountShow:0)+"次播放 ")])]):t._e()])]),a("el-col",{attrs:{xs:24,sm:24,md:7,lg:7,offset:0}},[a("div",{staticClass:"p-t-md text-left p-l"},[a("h4",{staticClass:"m-b"},[t._v("选集（"+t._s(t.chapterList.length)+"）")]),a("div",{staticStyle:{height:"100%","overflow-y":"scroll"}},t._l(t.chapterList,(function(e,i){return a("router-link",{key:i,attrs:{to:"/course/item/info/"+t.id+"?chapter="+i}},[a("div",{staticClass:"flex m-b-sm cursor-pointer"},[a("div",[a("img",{staticStyle:{"border-radius":"3px"},attrs:{src:e.cover,alt:"",width:"120",height:"70"}})]),a("div",{staticClass:"flex-1 m-l-sm"},[a("h4",{staticClass:"title ts-16",staticStyle:{color:"#b4b4b4","line-height":"16px"}},[t._v(" "+t._s(e.title)+" ")]),a("div",{staticClass:"m-t-sm ts-12 text-666"},[t._v(t._s(e.viewCountShow)+"播放")])])])])})),1)])])],1)],1)]),a("div",{staticClass:"container m-b"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:17,lg:17,offset:0}},[a("div",{staticClass:"m-t-sm"},[a("comment-lists",{attrs:{title:"全部评论",urlPrefix:"/course",showReplyForm:t.showReplyForm,dataId:t.id,dataModel:"course_item"},on:{"update:showReplyForm":function(e){t.showReplyForm=e},"update:show-reply-form":function(e){t.showReplyForm=e}}})],1)]),a("el-col",{attrs:{xs:24,sm:24,md:7,lg:7,offset:0}},[a("h4",{staticClass:"m-t-sm m-b ts-18 tw5"},[t._v("相关推荐")]),t._l(t.recommendList,(function(e,i){return a("router-link",{key:i,attrs:{to:"/course/item/info/"+e.id}},[a("div",{staticClass:"flex m-b-sm"},[a("div",[a("img",{staticStyle:{"border-radius":"3px"},attrs:{src:e.cover,alt:"",width:"120",height:"70"}})]),a("div",{staticClass:"flex-1 m-l-sm"},[a("h4",{staticClass:"title ts-16 text-333",staticStyle:{"line-height":"16px"}},[t._v(" "+t._s(e.title)+" ")]),a("div",{staticClass:"m-t-sm ts-12 text-999"},[t._v(t._s(e.viewCountShow)+"播放")])])])])}))],2)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(41539),a(88674),a(35666),a(52852)),n={components:{"comment-lists":o.Z},data:function(){return{id:0,info:{title:""},chapterList:[],recommendList:[],chapterIndex:-1,loading:!1,showReplyForm:!0,loadedScript:!1,courseType:"video",playerOptions:{width:"100%",height:"450",autoplay:!1,muted:!1,language:"zh-CN",playbackRates:[.7,1,1.5,2],sources:[{type:"video/mp4",src:""}],poster:""},fileUrl:"",pageNum:1,pageTotalNum:1,loadedRatio:0}},computed:{player:function(){var t,e;return null===(t=this.$refs)||void 0===t||null===(e=t.videoPlayer)||void 0===e?void 0:e.player}},created:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.id=t.$route.params.id,t.loadData(),t.$route.query.chapter>=0&&(t.chapterIndex=t.$route.query.chapter),e.next=5,t.loadScript();case 5:t.loadedScript=!0;case 6:case"end":return e.stop()}}),e)})))()},watch:{chapterIndex:function(t){this.updateChapter()},$route:function(t,e){this.id=this.$route.params.id,"video"==this.courseType&&this.player.off(),this.loadData(),this.$route.query.chapter>=0&&(this.chapterIndex=this.$route.query.chapter)}},methods:{loadScript:function(){var t=this,e=this;return new Promise((function(a,i){t.VueLink2.load("https://unpkg.com/vue-pdf-app@2.1.0/dist/icons/main.css").then((function(){})),e.VueScript2.load("https://unpkg.com/vue-pdf-app@2.1.0/dist/vue-pdf-app.umd.min.js").then((function(){a(),Vue.component("VuePdfApp",window["vue-pdf-app"])}))}))},prePage:function(){var t=this.pageNum;t=t>1?t-1:this.pageTotalNum,this.pageNum=t},nextPage:function(){var t=this.pageNum;t=t<this.pageTotalNum?t+1:1,this.pageNum=t},updateChapter:function(){if(this.chapterIndex>=0&&this.chapterList.length>0){var t,e;if(this.chapterList[this.chapterIndex].playFile.length>0){var a=this.chapterList[this.chapterIndex].playFile[0].url,i=a.lastIndexOf("."),r=a.substring(i+1);switch(r){case"mp4":this.courseType="video",this.playerOptions.sources[0].src=a,this.playerOptions.poster=this.chapterList[this.chapterIndex].cover,this.loadChapter(this.chapterList[this.chapterIndex].id);break;case"pdf":this.courseType="pdf",this.fileUrl=a;break;case"pptx":case"docx":case"xlsx":case"ppt":case"doc":case"xls":this.courseType="office",this.fileUrl=a;break;default:alert("暂不支持的格式");break}}else this.courseType="video",this.playerOptions.poster="",this.playerOptions.sources[0].src="";null===(t=this.chapterList[this.chapterIndex])||void 0===t||null===(e=t.files)||void 0===e||e.length}else this.courseType="video",this.playerOptions.poster="",this.playerOptions.sources[0].src=""},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/course/item/info/"+t.id,data:{recommend:1},method:"get"});case 3:a=e.sent,200==a.code?(t.info=a.data.info,t.chapterList=a.data.chapterList,t.recommendList=a.data.recommendList,t.chapterList.length>0&&!(t.$route.query.chapter>=0)?t.chapterIndex=0:t.chapterIndex=t.$route.query.chapter,t.updateChapter()):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},loadChapter:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$xyutil.request({url:"/v1/course/chapter/info/"+t,method:"get"});case 2:i=a.sent,200==i.code||e.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 4:case"end":return a.stop()}}),a)})))()},onPlayerPlay:function(t){},onPlayerPause:function(t){},onPlayerEnded:function(t){},onPlayerLoadeddata:function(t){},onPlayerWaiting:function(t){},onPlayerPlaying:function(t){},onPlayerTimeupdate:function(t){},onPlayerCanplay:function(t){},onPlayerCanplaythrough:function(t){},playerStateChanged:function(t){},playerReadied:function(t){console.log("example player 1 readied",t),t.currentTime(0)}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"2ba834f4",null),d=u.exports},31213:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"main-banner"},[a("h1",{staticClass:"title"},[t._v(t._s(t.cataInfo.title))]),a("p",{staticClass:"info m-t-md p-l p-r"},[a("Searchbar")],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"tw5 m-b ts-24 m-t"},[t._v(" 课程列表 ")]),a("el-row",{staticClass:"cate-list flex-wrap",attrs:{gutter:30}},t._l(t.itemList,(function(e,i){return a("el-col",{key:i,attrs:{xs:24,sm:12,md:8,lg:6}},[a("router-link",{attrs:{to:"/course/item/info/"+e.id}},[a("div",{staticClass:"cate-item"},[a("img",{staticClass:"cover",attrs:{src:e.cover,alt:""}}),a("div",{staticClass:"bottom"},[t._v(t._s(e.title))])])])],1)})),1),0==t.itemList.length?a("el-empty",{attrs:{description:"此分类暂无课程"}}):t._e()],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(37811)),n={components:{Searchbar:o.Z},data:function(){return{cateId:0,cataInfo:{title:""},itemList:[]}},created:function(){this.cateId=this.$route.query.cateId,this.loadItems()},watch:{$route:function(t,e){this.cateId=this.$route.query.cateId,this.loadItems()}},methods:{loadItems:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/course/item/lists",data:{cateId:t.cateId},method:"get"});case 2:a=e.sent,200==a.code?(t.cataInfo=a.data.cateInfo,t.itemList=a.data.dataList):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"74768d8a",null),d=u.exports},71901:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"main-banner"},[a("h1",{staticClass:"title"},[t._v("课程搜索")]),a("p",{staticClass:"info m-t-md p-l p-r"},[a("Searchbar")],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"tw5 m-b ts-24 m-t"},[t._v(" 搜索结果 ")]),a("el-row",{staticClass:"cate-list flex-wrap",attrs:{gutter:30}},t._l(t.itemList,(function(e,i){return a("el-col",{key:i,attrs:{xs:24,sm:12,md:8,lg:6}},[a("router-link",{attrs:{to:"/course/item/info/"+e.id}},[a("div",{staticClass:"cate-item"},[a("img",{staticClass:"cover",attrs:{src:e.cover,alt:""}}),a("div",{staticClass:"bottom"},[t._v(t._s(e.title))])])])],1)})),1),0==t.itemList.length?a("el-empty",{attrs:{description:"暂无结果"}}):t._e()],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(37811)),n={components:{Searchbar:o.Z},data:function(){return{keyword:0,itemList:[]}},created:function(){this.keyword=this.$route.query.keyword,this.loadItems()},watch:{$route:function(t,e){this.keyword=this.$route.query.keyword,this.loadItems()}},methods:{loadItems:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/course/item/lists",data:{keyword:t.keyword},method:"get"});case 2:a=e.sent,200==a.code?t.itemList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"aec0f902",null),d=u.exports},37811:function(t,e,a){a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-input",{staticClass:"banner-search",attrs:{size:"default",placeholder:"请输入课程关键词"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",type:"primary",size:"default"},on:{click:t.search},slot:"append"},[a("i",{staticClass:"xyicon xyicon-search"})])],1)},r=[],s=a(16198),o=(a(35666),{name:"Seatchbar",data:function(){return{keyword:""}},created:function(){this.keyword=this.$route.query.keyword},watch:{$route:function(t,e){this.keyword=this.$route.query.keyword}},methods:{search:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$router.push({path:"/course/item/search",query:{keyword:t.keyword}});case 1:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"129d632e",null),u=c.exports},42602:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main p-t-sm"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container1",attrs:{"element-loading-text":"拼命加载中"}},[a("el-card",{staticStyle:{"min-height":"400px"},attrs:{shadow:"none"}},[a("el-link",{staticClass:"hidden-lg-and-up m-b",attrs:{type:"primary"},on:{click:function(e){t.navShow=!0}}},[t._v(" 打开目录 ")]),a("el-drawer",{attrs:{title:"文档目录",visible:t.navShow,size:"250px",direction:"ltr"},on:{"update:visible":function(e){t.navShow=e}}},[a("el-tree",{staticClass:"m-b-md",attrs:{data:t.dataList,"node-key":"id","default-expand-all":!1,"highlight-current":"","expand-on-click-node":!0},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,r=e.data;return a("div",{staticClass:"custom-tree-node flex flex-1 flex-alignCenter"},[a("div",{staticClass:"flex-1 ts-14 tw5 flex flex-alignCenter",staticStyle:{height:"100%"},on:{click:function(e){return t.open(i,r)}}},[t._v(" "+t._s(r.title)+" ")])])}}])})],1),a("el-row",{staticClass:"flex flex-wrap",attrs:{type:"flex",gutter:25}},[a("el-col",{staticClass:"left hidden-md-and-down",attrs:{xs:0,sm:24,md:5,lg:5,xl:4}},[a("el-tree",{staticClass:"m-b-md",attrs:{data:t.dataList,"node-key":"id","default-expand-all":!1,"default-expanded-keys":t.defaultExpandedKeys,"highlight-current":"","expand-on-click-node":!0},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,r=e.data;return a("div",{staticClass:"custom-tree-node flex flex-1 flex-alignCenter"},[a("div",{staticClass:"flex-1 ts-14 tw5 flex flex-alignCenter",staticStyle:{height:"100%"},on:{click:function(e){return t.open(i,r)}}},[t._v(" "+t._s(r.title)+" ")])])}}])})],1),a("el-col",{staticClass:"right",attrs:{xs:24,sm:24,md:24,lg:{span:17,offset:1},xl:{span:14,offset:3},id:"right"}},[a("xy-mavon-editor",{attrs:{defaultOpen:"preview",codeStyle:"solarized-dark",previewBackground:"#fff",navigation:!1,editable:!1,subfield:!1,border:!1,ishljs:!1,toolbarsFlag:!1},model:{value:t.current.content,callback:function(e){t.$set(t.current,"content",e)},expression:"current.content"}}),a("div",{staticClass:"m-t"},t._l(t.current.children,(function(e,i){return a("div",{key:i},[a("el-button",{staticClass:"ts-16 tw5",attrs:{type:"text"},on:{click:function(a){return t.open("",e)}}},[t._v(" "+t._s(e.title)+" ")])],1)})),0),t.current.id?a("div",{staticClass:"m-t-md"},[a("comment-lists",{attrs:{title:"评论",urlPrefix:"/docs/"+this.id,showReplyForm:t.showReplyForm,dataId:t.current.id,dataModel:"doc_chapter"},on:{"update:showReplyForm":function(e){t.showReplyForm=e},"update:show-reply-form":function(e){t.showReplyForm=e}}})],1):t._e()],1)],1)],1)],1)])],1)},r=[],s=a(16198),o=(a(41539),a(54747),a(88674),a(74916),a(23123),a(35666),a(52852)),n=a(19755),l=a.n(n),c=a(10311),u=a.n(c),d=function(t){l()("pre code").each((function(){var t=l()(this).text().split("\n").length-1,e=l()("<ol/>").addClass("pre-numbering"),a=l()('<i title="copy"/>').addClass("el-icon-document-copy code-copy");l()(this).parent().addClass("code").append(e).append(a);for(var i=0;i<t;i++)e.append(l()("<li/>"))})),l()("pre.code i.code-copy").click((function(t){var e=l()(t.target).siblings("code").text(),a=l()("<textarea>"+e+"</textarea>");l()("body").append(a),a[0].select(),document.execCommand("Copy"),a.remove(),u().prototype.$xyutil.showToast({title:"代码复制成功",icon:"none",duration:1e3})}))},m={components:{"comment-lists":o.Z},data:function(){return{id:0,dataList:[],current:{},loading:!1,showReplyForm:!0,query:{},navShow:!1,defaultExpandedKeys:[]}},created:function(){var t=(0,s.Z)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.id=this.$route.params.id,this.query=this.$xyutil.getUrlQuery(),t.next=4,this.loadData();case 4:this.query.id?(this.current=this.$xyutil.treeSearch(this.dataList,this.query.id),console.log(this.current)):this.current=this.dataList[0],this.$nextTick((function(){e.highlighthandle(),d()}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{$route:function(t,e){this.id=this.$route.params.id,this.loadData()}},methods:{highlighthandle:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadScript();case 2:a=document.querySelectorAll("pre.code"),a.forEach((function(t){hljs.highlightBlock(t)}));case 4:case"end":return e.stop()}}),e)})))()},loadScript:function(){var t=this,e=this;return new Promise((function(a,i){e.VueScript2.load(t.$xyutil.config.jsBaseUrl+"libs/highlightjs/highlight.min.js").then((function(){a()}))}))},open:function(t,e){var a=this;this.current=e,this.navShow=!1;var i=location.href;i=location.href.split("?");var r=i[0]+"?id=".concat(e.id);window.history.replaceState("","",r);var s=document.getElementById("right");s.scrollTop=0,this.$nextTick((function(){a.highlighthandle(),d()}))},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/doc/chapter/trees/"+t.id,data:{},method:"get"});case 3:a=e.sent,200==a.code?(t.dataList=a.data.dataList,t.defaultExpandedKeys=a.data.info.defaultExpandedKeys):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},p=m,f=a(1001),h=(0,f.Z)(p,i,r,!1,null,"56a6c2b7",null),v=h.exports},91157:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main p-t"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":"拼命加载中"}},[a("el-row",{staticClass:"flex flex-wrap m-b-sm",attrs:{type:"flex",gutter:25}},[a("el-col",{attrs:{xs:24,md:8,lg:6}},[a("img",{staticClass:"cover",attrs:{src:t.info.cover,alt:t.info.title}})]),a("el-col",{attrs:{xs:24,md:16,lg:18}},[a("div",{staticClass:"flex space-between flex-alignCenter"},[a("h1",{staticClass:"title ts-28"},[t._v(t._s(t.info.title))]),a("div",{staticClass:"ts-16"},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.actionClick(t.id,"ext_addon",1)}}},[a("i",{staticClass:"xyicon xyicon-zan ts-14"}),t._v(" 点赞 ")]),a("el-button",{attrs:{type:"danger",size:"small",plain:""},on:{click:function(e){return t.actionClick(t.id,"ext_addon",2)}}},[a("i",{staticClass:"xyicon xyicon-heart ts-14"}),t._v(" 收藏 ")])],1)]),a("div",{staticClass:"m-b-sm ts-14"},[t._v("更新日期："+t._s(t.$xyutil.timeFormat(t.info.updateTime)))]),a("div",{staticClass:"m-b-sm"},["0.00"!=t.info.price?a("div",{staticClass:"subtitle text-error ts-14"},[t._v("￥"+t._s(t.info.price))]):a("div",{staticClass:"subtitle text-success ts-14"},[t._v("免费")])]),t.info.collecting?a("div",{staticClass:"text-error ts-13"},[t._v(" 本插件征集开发者中，获得通过的开发者将拥有插件优先展示的权力，详情请加交流群。 ")]):t._e()])],1),a("el-card",{staticStyle:{"min-height":"400px"},attrs:{shadow:"none"}},[a("div",{staticClass:"flex space-between ts-16",attrs:{slot:"header"},slot:"header"},[a("div",[a("span",{staticClass:"tw6 ts-18"},[t._v("介绍")])]),a("div",[t.info.uid==t.$store.state.user.userInfo.id?a("span",{staticClass:"cursor-pointer ts-14",on:{click:function(e){t.item.pageData.show=!0}}},[t._v("修改")]):t._e()])]),a("div",{staticClass:"ts-16",domProps:{innerHTML:t._s(t.info.content)}})]),a("div",{staticClass:"m-t-sm"},[a("comment-lists",{attrs:{title:"回复",urlPrefix:"/ext",showReplyForm:t.showReplyForm,dataId:t.id,dataModel:"ext_addon"},on:{"update:showReplyForm":function(e){t.showReplyForm=e},"update:show-reply-form":function(e){t.showReplyForm=e}}})],1)],1)]),a("el-dialog",{staticClass:"ts-16",attrs:{title:"修改插件",visible:t.item.pageData.show,width:"70%"},on:{"update:visible":function(e){return t.$set(t.item.pageData,"show",e)}}},[a("xy-builder-form",{attrs:{api:"/v1/ext/addon/edit/"+this.id,show:t.item.pageData.show,pitem:t.item},on:{close:function(e){return t.closeModel(t.item,e)}}})],1),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(53100)),n=a(52852),l={components:{xyBuilderForm:o["default"],commentLists:n.Z},data:function(){return{id:0,info:{title:"",content:""},item:{pageData:{show:!1}},loading:!1,showReplyForm:!1}},mounted:function(){this.id=this.$route.params.id,this.loadData()},watch:{$route:function(t,e){this.id=this.$route.params.id,this.loadData()}},methods:{closeModel:function(t,e){this.item.pageData.show=!1,e&&this.loadData()},actionClick:function(t,e,a){var i=this;return(0,s.Z)(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,i.$xyutil.request({url:"/v1/action/action/set",data:{dataId:t,dataModel:e,actionType:a},method:"post"});case 2:s=r.sent,200==s.code?i.$xyutil.showToast({title:s.msg,icon:"success",duration:2e3}):i.$xyutil.showToast({title:s.msg,icon:"loading",duration:3e3});case 4:case"end":return r.stop()}}),r)})))()},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/ext/addon/info/"+t.id,data:{},method:"get"});case 3:a=e.sent,200==a.code?t.info=a.data.info:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},c=l,u=a(1001),d=(0,u.Z)(c,i,r,!1,null,"62081884",null),m=d.exports},64581:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container p-t"},[a("div",{staticClass:"sub-header text-center m-t-md m-b-md"},[a("div",{staticClass:"ts-26 tw5 m-b"},[t._v("插件市场")]),a("div",{staticClass:"text-gray ts-22 tw3"},[t._v("基于"+t._s(t.$store.state.app.siteInfo.title)+"框架开发的应用和插件！")])]),a("div",{staticClass:"flex space-between ts-16"},[a("div",{}),a("div",{},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.item.pageData.show=!0}}},[t._v(" 发布 ")])],1)]),a("el-row",{staticClass:"case-list flex flex-wrap",attrs:{type:"flex",gutter:15}},t._l(t.dataList,(function(e,i){return a("el-col",{key:i,staticClass:"item",attrs:{xs:24,sm:12,md:8,lg:6},nativeOn:{click:function(a){return t.navTo(e)}}},[a("div",{staticClass:"image cursor-pointer"},[a("img",{attrs:{src:e.cover,alt:e.title}})]),a("div",{staticClass:"bottom bg-white"},[a("div",{staticClass:"flex space-between"},[a("div",{staticClass:"title ts-14"},[t._v(t._s(e.title))]),e.collecting?a("div",{staticClass:"ts-12 text-error"},[t._v("征集中")]):t._e()]),a("div",{staticClass:"info flex space-between"},[a("div",{staticClass:"ts-12 text-gray"},[a("i",{staticClass:"xyicon xyicon-my-o ts-12"}),t._v(" "+t._s(e.userNickname)+" ")]),"0.00"!=e.price?a("div",{staticClass:"subtitle text-error ts-13"},[t._v("￥"+t._s(e.price))]):a("div",{staticClass:"subtitle text-success ts-13"},[t._v("免费")])])])])})),1)],1)]),a("el-dialog",{staticClass:"ts-16",attrs:{title:"发布插件",visible:t.item.pageData.show,width:"70%"},on:{"update:visible":function(e){return t.$set(t.item.pageData,"show",e)}}},[a("xy-builder-form",{attrs:{api:"/v1/ext/addon/add",show:t.item.pageData.show,pitem:t.item},on:{close:function(e){return t.closeModel(t.item,e)}}})],1),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(66992),a(41539),a(88674),a(78783),a(33948),{components:{},data:function(){return{dataList:[],item:{pageData:{show:!1}}}},beforeCreate:function(){this.$options.components["xy-builder-form"]=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,53100))}},created:function(){this.loadlists()},methods:{navTo:function(t){this.$xyutil.navigateTo({url:"/ext/"+t.id})},closeModel:function(t,e){this.item.pageData.show=!1,e&&this.loadlists()},loadlists:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/ext/addon/lists",data:{},method:"get"});case 2:a=e.sent,200==a.code?t.dataList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"79c2996e",null),u=c.exports},17304:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"container p-t"},[a("el-breadcrumb",{staticClass:"p-l m-b-lg",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/user/center"}}},[t._v("个人设置")]),a("el-breadcrumb-item",[t._v("绑定谷歌验证码")])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:22,sm:20,md:16,lg:14}},[a("div",{staticClass:"top-tip"},[t._v("谷歌验证器是一款动态口令工具，工作原理类似短信动态验证。绑定后每30s生成一个动态验证码，验证码可用于登录、提现、修改安全设置等操作的安全验证。")]),a("div",{staticStyle:{height:"500px"}},[a("el-steps",{attrs:{direction:"vertical",space1:"60",active:0}},[a("el-step",{attrs:{status:"process",title:"下载谷歌验证"}},[a("div",{attrs:{slot:"description"},slot:"description"},[a("div",{staticClass:"des"},[t._v("iOS用户登录App Store搜索“Authenticator”下载安卓用户登录应用商店或使用手机浏览器搜索“谷歌验证器”下载")]),a("div",{staticStyle:{"margin-bottom":"60px"}},[a("img",{staticStyle:{"margin-right":"60px"},attrs:{src:"https://cdn.jsdelivr.net/gh/starideas/xyfront/image/appstore.png",alt:"appstore"}}),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/starideas/xyfront/image/googleplay.png",alt:"googleplay"}})])])]),a("el-step",{attrs:{status:"process",title:"在谷歌验证器中添加密钥并备份"}},[a("div",{attrs:{slot:"description"},slot:"description"},[a("div",{staticClass:"des"},[t._v("打开谷歌验证器，扫描下方二维码或手动输入下述密钥添加验证令牌。")]),a("div",{staticClass:"gauth flex"},[a("div",{staticClass:"qr"},[a("xy-qrcode",{attrs:{value:t.gauthQrcode,options:{width:118}}})],1),a("div",[a("div",{staticClass:"key"},[t._v("Key："+t._s(t.gauthSecret))]),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.gauthSecret,expression:"gauthSecret",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"}],staticClass:"copy"},[a("i",{staticClass:"el-icon-copy-document"}),t._v(" 复制秘钥 ")])])])])]),a("el-step",{attrs:{status:"process",title:"输入谷歌验证器中6位验证码",description:""}})],1)],1),a("el-row",{staticClass:"m-t",staticStyle:{"margin-left":"30px"},attrs:{type:"flex",justify:"start",align:"middle"}},[a("el-col",{staticClass:"login-box bg-white1 p-a-0",attrs:{xs:22,sm:22,md:18,lg:18}},[a("div",{staticClass:"m-b"},[t._v(" 谷歌验证码 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}})],1),t.verifyList.indexOf("email")>=0?a("el-form-item",{attrs:{prop:"emailVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.emailVerify,callback:function(e){t.$set(t.form,"emailVerify",e)},expression:"form.emailVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"绑定谷歌验证"},on:{verifysuccess:t.getVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("mobile")>=0?a("el-form-item",{attrs:{prop:"mobileVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.mobileVerify,callback:function(e){t.$set(t.form,"mobileVerify",e)},expression:"form.mobileVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"绑定谷歌验证"},on:{verifysuccess:t.getMobileVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("password")>=0?a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 绑定 ")])],1)],1)],1)],1)],1)],1)])},r=[],s=a(16198),o=(a(32564),a(35666),{data:function(){return{verifyList:[],loading:!1,gauthSecret:"加载中...",gauthQrcode:"",form:{verify:"",password:"",emailVerify:"",emailToken:"",mobileVerify:"",mobileToken:""},rule:{verify:[{required:!0,message:"请填写谷歌验证码",trigger:"blur"},{type:"string",min:6,message:"验证码为6位",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{copySuccess:function(){alert("拷贝成功")},getVerifyToken:function(t){this.form.emailToken=t.token},getMobileVerifyToken:function(t){this.form.mobileToken=t.token},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/gauth/user/bind",method:"get"});case 2:a=e.sent,"200"==a.code?(t.verifyList=a.data.dataList,t.gauthSecret=a.data.gauthSecret,t.gauthQrcode=a.data.gauthQrcode):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/gauth/user/bind",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$xyutil.navigateBack()):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"70ce831e",null),u=c.exports},71998:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container p-t"},[a("el-breadcrumb",{staticClass:"m-b-lg",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/user/center"}}},[t._v("个人设置")]),a("el-breadcrumb-item",[t._v("换绑谷歌验证码")])],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{xs:22,sm:20,md:16,lg:14}},[a("div",{staticClass:"top-tip"},[t._v("谷歌验证器是一款动态口令工具，工作原理类似短信动态验证。绑定后每30s生成一个动态验证码，验证码可用于登录、提现、修改安全设置等操作的安全验证。")]),a("div",{staticStyle:{height:"500px"}},[a("el-steps",{attrs:{direction:"vertical",space1:"60",active:0}},[a("el-step",{attrs:{status:"process",title:"下载谷歌验证"}},[a("div",{attrs:{slot:"description"},slot:"description"},[a("div",{staticClass:"des"},[t._v("iOS用户登录App Store搜索“Authenticator”下载安卓用户登录应用商店或使用手机浏览器搜索“谷歌验证器”下载")]),a("div",{staticStyle:{"margin-bottom":"60px"}},[a("img",{staticStyle:{"margin-right":"60px"},attrs:{src:"https://cdn.jsdelivr.net/gh/starideas/xyfront/image/appstore.png",alt:"appstore"}}),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/starideas/xyfront/image/googleplay.png",alt:"googleplay"}})])])]),a("el-step",{attrs:{status:"process",title:"在谷歌验证器中添加密钥并备份"}},[a("div",{attrs:{slot:"description"},slot:"description"},[a("div",{staticClass:"des"},[t._v("打开谷歌验证器，扫描下方二维码或手动输入下述密钥添加验证令牌。")]),a("div",{staticClass:"gauth flex"},[a("div",{staticClass:"qr"},[a("vue-lazy-component",{attrs:{timeout:5e3}},[a("xy-qrcode",{attrs:{value:t.gauthQrcode,options:{width:118}}})],1)],1),a("div",[a("div",{staticClass:"key"},[t._v("Key："+t._s(t.gauthSecret))]),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.gauthSecret,expression:"gauthSecret",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"}],staticClass:"copy"},[a("i",{staticClass:"el-icon-copy-document"}),t._v(" 复制秘钥 ")])])])])]),a("el-step",{attrs:{status:"process",title:"输入谷歌验证器中6位验证码",description:""}})],1)],1),a("el-row",{staticClass:"m-t",staticStyle:{"margin-left":"30px"},attrs:{type:"flex",justify:"start",align:"middle"}},[a("el-col",{staticClass:"login-box bg-white1 p-a-0",attrs:{xs:22,sm:22,md:18,lg:18}},[a("div",{staticClass:"m-b"},[t._v(" 谷歌验证码 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}})],1),t.verifyList.indexOf("email")>=0?a("el-form-item",{attrs:{prop:"emailVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.emailVerify,callback:function(e){t.$set(t.form,"emailVerify",e)},expression:"form.emailVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"换绑谷歌验证"},on:{verifysuccess:t.getVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("mobile")>=0?a("el-form-item",{attrs:{prop:"mobileVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.mobileVerify,callback:function(e){t.$set(t.form,"mobileVerify",e)},expression:"form.mobileVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"换绑谷歌验证"},on:{verifysuccess:t.getMobileVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("password")>=0?a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 绑定 ")])],1)],1)],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(32564),a(35666),{data:function(){return{verifyList:[],loading:!1,gauthSecret:"加载中...",gauthQrcode:"",form:{verify:"",password:"",emailVerify:"",emailToken:"",mobileVerify:"",mobileToken:""},rule:{verify:[{required:!0,message:"请填写谷歌验证码",trigger:"blur"},{type:"string",min:6,message:"验证码为6位",trigger:"blur"}]}}},created:function(){this.loadData()},mounted:function(){},methods:{copySuccess:function(){alert("拷贝成功")},getVerifyToken:function(t){this.form.emailToken=t.token},getMobileVerifyToken:function(t){this.form.mobileToken=t.token},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/gauth/user/change",method:"get"});case 2:a=e.sent,"200"==a.code?(t.verifyList=a.data.dataList,t.gauthSecret=a.data.gauthSecret,t.gauthQrcode=a.data.gauthQrcode):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/gauth/user/change",data:t.form,method:"put"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$xyutil.navigateBack()):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"e5d259f0",null),u=c.exports},84801:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header",{attrs:{transparent:!0}}),a("div",{staticClass:"main"},[a("xy-builder-page2",{attrs:{data:t.homeJson}})],1),a("xy-footer")],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wrapper"},[t._l(t.data,(function(e,i){return["banner"==e.type?a("div",{key:i},[a("div",{staticClass:"banner-instalce",style:{height:e.height}},[a("el-carousel",{attrs:{height:e.height,interval:3e4}},t._l(e.lists,(function(i,r){return a("el-carousel-item",{key:r},[a("div",{staticClass:"bg flex pos-a",style:{height:e.height}},[i.background.image?a("img",{staticClass:"bgImg",style:{height:i.height},attrs:{src:i.background.image}}):t._e(),i.bgVideo?a("video",{staticStyle:{width:"100%"},attrs:{"webkit-playsinline":"true",playsinline:"true",src:i.bgVideo.src,autoplay:"autoplay",loop:i.bgVideo.loop}}):t._e()]),a("div",{staticClass:"pos-a container flex space-between flex-alignCenter",style:{height:e.height}},[a("div",{staticClass:"tc-w xs-margin-center"},[a("el-row",{attrs:{type:"flex",justify:"spance-between",align:"middle"}},[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:11,xl:12}},[a("div",{staticClass:"m-b title"},[t._v(t._s(i.title))]),i.subtitle?a("div",{staticClass:"m-b subtitle"},[t._v(t._s(i.subtitle))]):t._e(),i.description?a("div",{staticClass:"m-b-md description hidden-xs-only"},[t._v(t._s(i.description))]):t._e(),i.actions?a("div",{staticClass:"ts-14"},t._l(i.actions,(function(e,i){return a("el-button",{key:i,attrs:{size:e.size,plain:e.plain,round:e.round,type:e.type},on:{click:function(a){return t.$xyutil.navigateTo({url:e.url})}}},[t._v(" "+t._s(e.label)+" ")])})),1):t._e()]),a("el-col",{attrs:{xs:0,sm:0,md:6,lg:8,xl:10}})],1)],1),a("div")])])})),1)],1)]):"slider"==e.type?a("div",{key:i},[a("el-carousel",{attrs:{height:e.height,interval:5e3,arrow:"always"}},[a("el-carousel-item")],1)],1):"session1"==e.type?a("div",{key:i},[a("div",{staticClass:"bg-white"},[a("div",{staticClass:"container"},[a("el-row",{staticStyle:{padding:"50px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{staticStyle:{"text-align":"center","font-size":"20px","margin-bottom":"80px"},attrs:{span:16}},[a("div",{staticStyle:{width:"550px"}},[a("h3",[t._v(t._s(e.title))]),a("p",{staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(e.description)+" ")])])]),a("el-col",{attrs:{span:8}},[a("img",{staticStyle:{height:"200px"},attrs:{src:e.image}})])],1)],1)])]):"session2"==e.type?a("div",{key:i},[a("div",{staticClass:"session2 flex flex-column flex-center flex-alignCenter",style:{height:e.height,background:e.background}},[a("div",{staticClass:"container",style:{color:e.style.color}},[e.title?a("div",{staticClass:"text-center m-b tw5 ts-32"},[t._v(t._s(e.title))]):t._e(),e.description?a("div",{staticClass:"text-center m-b-lg ts-17"},[t._v(t._s(e.description))]):t._e(),e.list?a("el-row",{staticClass:"list flex flex-wrap",attrs:{type:"flex",justify:"center",align:"middle"}},t._l(e.list,(function(e,i){return a("el-col",{key:i,staticClass:"item m-b-md xs-flex xs-flex-alignCenter xs-space-between",attrs:{xs:24,md:8,lg:8}},[a("div",{staticClass:"text-center m-b xs-m-b-0"},[a("img",{style:{borderRadius:e.imageRadius},attrs:{src:e.image?e.image:"https://i.loli.net/2020/07/08/1HlwfyUQ5zjr4Tg.png"}})]),a("div",{staticClass:"p-l p-r flex-1"},[a("div",{staticClass:"title text-center xs-text-left ts-16 tw6 m-b-sm"},[t._v(t._s(e.title))]),e.description?a("div",{staticClass:"title text-center xs-text-left ts-14"},[t._v(t._s(e.description))]):t._e()])])})),1):t._e()],1)])]):"session3"==e.type?a("div",{key:i},[a("div",{staticClass:"session3",style:{height:e.height,background:e.background}},[a("div",{staticClass:"container"},[a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"text-center m-b-md"},[a("div",{staticClass:"text-center m-b tw5 ts-32"},[t._v(t._s(e.title))]),a("p",{staticClass:"ts-18"},[t._v(" "+t._s(e.description)+" ")])])]),a("el-col",{staticClass:"text-center",attrs:{span:24}},[a("img",{staticStyle:{width:"80%"},attrs:{src:e.image.src}})])],1)],1)])]):"session4"==e.type?a("div",{key:i},[a("div",{staticClass:"session4",style:{height:e.height,background:e.background}},[a("div",{staticClass:"container"},[a("div",{staticClass:"text-center"},[a("span",{staticClass:"bg-white button text-primary cursor-pointer ts-20",on:{click:function(a){return t.$xyutil.navigateTo({url:e.button.url})}}},[t._v(t._s(e.button.title))])])])])]):t._e()]}))],2)},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xy-three-psv",attrs:{id:"viewer"}})},l=[],c=a(16198),u=(a(58933),a(2953),a(22456),{name:"xyThreePsv",props:{item:{},value:{type:[String],default:""},header:{type:Object,default:function(){return{cloudId:0,eid:0,token:""}}}},data:function(){return{PSV:null,factoryLink:"",loadedScript:!1,imageLoaded:!1}},watch:{value:function(t){var e=this;this.factoryLink=t,this.loadedScript&&(this.PSV?(this.imageLoaded=!1,this.PSV.setPanorama(this.factoryLink,!0,!0).then((function(){e.imageLoaded=!0}))):this.initPhotoSphere())}},created:function(){var t=(0,c.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.factoryLink=this.value,t.next=3,this.loadScript();case 3:this.loadedScript=!0,this.initPhotoSphere();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{initPhotoSphere:function(){this.PSV=new PhotoSphereViewer.Viewer({container:document.getElementById("viewer"),panorama:this.factoryLink,navbar:!1,fisheye:!1,autorotateDelay:100,autorotateSpeed:"0.2rpm",moveSpeed:1})},loadScript:function(){var t=this,e=this;return new Promise((function(a,i){e.VueLink2.load(t.$xyutil.config.cdnDomain+"/npm/photo-sphere-viewer@4/dist/photo-sphere-viewer.min.css").then((function(){})),e.VueScript2.load(t.$xyutil.config.cdnDomain+"/npm/uevent@2/browser.min.js").then((function(){})),e.VueScript2.load(t.$xyutil.config.cdnDomain+"/npm/three@0.125.2/build/three.min.js").then((function(){e.VueScript2.load(this.$xyutil.config.cdnDomain+"/npm/photo-sphere-viewer@4/dist/photo-sphere-viewer.js").then((function(){a()}))}))}))}}}),d=u,m=a(1001),p=(0,m.Z)(d,n,l,!1,null,"2ec66510",null),f=p.exports,h={name:"XyBuilderPage",components:{"three-psv":f},props:{data:""},data:function(){return{}},created:function(){},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},computed:{},watch:{},methods:{}},v=h,g=(0,m.Z)(v,s,o,!1,null,"9262637c",null),y=g.exports,x={components:{XyBuilderPage2:y},data:function(){return{homeJson:[{type:"banner",height:"45vw",lists:[{background:{image:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/8b787550-440c-49f3-9ef8-645e490455da.jpg",color:"#2b85e4"},title:this.$store.state.app.siteInfo.title+this.$store.state.app.siteInfo.slogan,subTitle:"",description:"为了避免与uni-admin产品名称混淆，特将本框架名称改为uiadmin，避免混淆的同时尽量保留原有记忆。UiAdmin是一套零前端代码通用后台，采用前后端分离技术，数据交互采用json格式；通过后端Builder不需要一行前端代码就能构建一个vue+element的现代化后台；同时我们打造一了套兼容性的API标准，从SpringBoot、ThinkPHP开始，逐步覆盖Furion、eggjs等多语言框架。",actions:[{url:"https://uiadmin.jiangruyi.com/docs/uniadmin",type:"warning",label:"PHP版",size:"medium",plain:!1,round:!0},{url:"https://uiadmin.jiangruyi.com/docs/summer",type:"info",label:"Java版",size:"medium",plain:!1,round:!0},{url:"https://uiadmin.jiangruyi.com/docs/DNAdmin",type:"success",label:".NET版",size:"medium",plain:!1,round:!0}]}]},{type:"session3",title:"UiAdmin后台预览",description:"整个后台通过我们先进的Builder页面自动生成技术解析json渲染而成",image:{src:"https://cdn.jiangruyi.com/sbase/image/uniadmin/ui4-1.png"}},{type:"session2",style:{color:"#fff"},background:"url(https://web.starideas.net//theme/icms-web/core/public/img/bg27.jpg)",title:"优秀特性",description:"利用下面的优秀特性加速您的开发",list:[{image:"",imageRadius:"50%",title:"模块化",description:"模块作为一个最小功能包，可以被创建、导出、分发、安装。"},{image:"",imageRadius:"50%",title:"Builder构建",description:"基于自主研发的第二代(vue+cloud)Builder页面构建技术可以非常快速高效的构建后台页面，支持list、form、info、tab、stack、excel等。"},{image:"",imageRadius:"50%",title:"跨语言兼容",description:"将来迁移语言非常方便，php、java、python、node、.net等都可以支持，前端更是不限制语言，多个语言支持通过统一的API标准兼容"},{image:"",imageRadius:"50%",title:"权限管理",description:"基于完善的自建权限控制管理、无限父子级权限分组、可自由分配子级权限、一个管理员可同时属于多个组别"},{image:"",imageRadius:"50%",title:"全API开发",description:"前后台全部基于API分离式开发，后台也可以基于API开发客户端，同时拥有双路由机制，也支持前后端不分离传统式开发。"},{image:"",imageRadius:"50%",title:"多平台支持",description:"pc端采用vue等方式实现，手机端采用uni-app技术， 达到一次开发全面覆盖iOS、安卓、微信小程序、支 付宝小程序、百度小程序、头条小程序、H5等平台。"}]},{type:"session2",style:{},title:"为什么选择我们",description:"越来越多的个人和企业都选择了UiAdmin",list:[{image:"https://cdn.jiangruyi.com/sbase/image/s27148761.jpg",imageRadius:"50%",title:"开源免费",description:"无需授权即可商业使用，代码开源免费。"},{image:"https://cdn.jiangruyi.com/sbase/image/120.jpg",imageRadius:"50%",title:"开发快捷",description:"基于自主研发的模块化技术、第二代前后端分离Builder可以非常快速的开发出您的应用。"},{image:"https://cdn.jiangruyi.com/sbase/image/earth.jpg",imageRadius:"50%",title:"生态良好",description:"立足PHP、全面兼容java/.net/nodejs等其他语言，社区小伙伴都非常热心的互相帮助。"}]},{type:"session2",style:{},background:"#ddd",list:[{image:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-aliyun-dyuvtmfbcqs424986f/7504dbc0-62fe-11eb-8a36-ebb87efcf8c0.jpg",imageRadius:"50%",description:"UiAdmin帮助我们节省了大量开发成本，项目顺利上线！"},{image:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-aliyun-dyuvtmfbcqs424986f/c4b42e50-62fe-11eb-8d54-21c4ca4ce5d7.jpg",imageRadius:"50%",description:"UiAdmin的API接口文档后台填写，自动生成前端开发用的文档功能真的解放了生产力很好用。"},{image:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-aliyun-dyuvtmfbcqs424986f/c39d8e30-62fe-11eb-8d54-21c4ca4ce5d7.jpg",imageRadius:"50%",description:"UiAdmin的动态页面Builder技术很好用，只要一个人就能完成后台所有工作！"}]},{type:"session4",style:{},background:"#2b85e4 url(https://cdn.jiangruyi.com/sbase/image/bg-dot.png) no-repeat 50% 50%",button:{title:"立即体验",url:"https://gitee.com/jry/uiadmin"}}]}},created:function(){},methods:{}},b=x,w=(0,m.Z)(b,i,r,!1,null,"73c21958",null),_=w.exports},72130:function(t,e,a){a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card",staticStyle:{"min-height":"300px"},attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix ts-18",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("热门")])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"case-list",staticStyle:{"min-height":"300px"},attrs:{"element-loading-text":"拼命加载中"}},t._l(t.dataListHot,(function(e,i){return a("div",{key:i,staticClass:"item p-b-xs border-bottom_1px"},[a("div",{staticClass:"bg-white"},[a("div",{staticClass:"title ts-14",on:{click:function(a){return t.$xyutil.navigateTo({url:"/ask/"+e.id})}}},[t._v(t._s(e.title))]),a("div",{staticClass:"info flex space-between text-gray ts-12"},[a("div",[t._v(t._s(e.userInfo.nickname))]),a("div",[t._v(t._s(e.viewCount)+"次浏览")])]),a("div",{staticClass:"subtitle text-gray ts-12"},[t._v(t._s(e.subtitle))])])])})),0)])],1)},r=[],s=a(16198),o=(a(35666),{name:"hotAsk",data:function(){return{loading:!1,dataListNew:[],dataListHot:[]}},props:{cateId:0},created:function(){this.loadHot()},watch:{cateId:function(t){this.loadHot()}},methods:{loadHot:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.cateId){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,e.next=5,t.$xyutil.request({url:"/v1/icms/post/lists/"+t.cateId,data:{siteRec:"hot"},method:"get"});case 5:a=e.sent,200==a.code?t.dataListHot=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"6c7b2347",null),u=c.exports},12251:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main p-t"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":"拼命加载中"}},[a("el-card",{staticStyle:{"min-height":"400px"},attrs:{shadow:"none"}},[a("h1",{staticClass:"title text-center"},[t._v(t._s(t.info.title))]),a("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],domProps:{innerHTML:t._s(t.info.content)}})])],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),{data:function(){return{id:0,info:{},loading:!1}},mounted:function(){this.id=this.$route.params.id,this.loadData()},watch:{$route:function(t,e){this.id=this.$route.params.id,this.loadData()}},methods:{loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/icms/post/info/"+t.id,data:{},method:"get"});case 3:a=e.sent,200==a.code?t.info=a.data.info:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"955ceb8e",null),u=c.exports},52819:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main p-t"},[a("div",{staticClass:"container"},[a("el-row",{staticClass:"flex flex-wrap",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{xs:24,lg:17}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix tw6 ts-18",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.info.title))])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"ts-16",staticStyle:{"min-height":"200px"},attrs:{"element-loading-text":"拼命加载中"}},[a("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],domProps:{innerHTML:t._s(t.info.content)}})]),a("div",{staticClass:"actions m-t flex flex-alignCenter"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.actionClick(t.id,"icms_post",5)}}},[t._v(" "+t._s(t.info.actionStates[5]?"已关注":"关注问题")+" ")]),a("el-button",{staticClass:"m-r-md",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){t.showReplyForm=!0}}},[t._v("我来回答")]),a("div",{on:{click:function(e){return t.actionClick(t.id,"icms_post",2)}}},[a("i",{staticClass:"xyicon xyicon-heart ts-14",staticStyle:{"margin-right":"3px"}}),a("el-link",[t._v(" "+t._s(t.info.actionStates[2]?"已":"")+"收藏 ")])],1)],1)]),a("div",{staticClass:"m-t-sm"},[a("comment-lists",{attrs:{title:"回复",urlPrefix:"/ask",showReplyForm:t.showReplyForm,dataId:t.id,dataModel:"icms_post"},on:{"update:showReplyForm":function(e){t.showReplyForm=e},"update:show-reply-form":function(e){t.showReplyForm=e}}})],1)],1),a("el-col",{attrs:{xs:24,lg:7}},[a("hot-ask",{attrs:{cateId:t.info.cateId}})],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(72130)),n=a(52852),l={components:{"comment-lists":n.Z,"hot-ask":o.Z},data:function(){return{id:0,info:{title:"",content:"",actionStates:{}},showReplyForm:!1,loading:!1,dataListHot:[]}},mounted:function(){this.id=this.$route.params.id,this.loadData()},watch:{$route:function(t,e){this.id=this.$route.params.id,this.loadData()}},methods:{actionClick:function(t,e,a){var i=this;return(0,s.Z)(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,i.$xyutil.request({url:"/v1/action/action/set",data:{dataId:t,dataModel:e,actionType:a},method:"post"});case 2:s=r.sent,200==s.code?(i.$set(i.info.actionStates,a,s.data.currentValue),i.$xyutil.showToast({title:s.msg,icon:"success",duration:2e3})):i.$xyutil.showToast({title:s.msg,icon:"loading",duration:3e3});case 4:case"end":return r.stop()}}),r)})))()},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/icms/post/info/"+t.id,data:{},method:"get"});case 3:a=e.sent,200==a.code?t.info=a.data.info:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},c=l,u=a(1001),d=(0,u.Z)(c,i,r,!1,null,"f15facc8",null),m=d.exports},61028:function(t,e,a){a.r(e),a.d(e,{default:function(){return k}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},["iframe"==t.$store.state.app.mainNav[t.$store.state.app.currentNav].listsTpl?a("div",{staticStyle:{position:"absolute",top:"50px",bottom:"0",left:"0",right:"0"}},[a("iframe",{staticStyle:{border:"0",width:"100%",height:"100%"},attrs:{src:t.$store.state.app.mainNav[t.$store.state.app.currentNav].url}})]):t._e(),a("div",{staticClass:"container p-t"},[t.$store.state.app.mainNav[t.$store.state.app.currentNav].bannerName?a("div",{staticClass:"sub-header text-center m-t-md m-b-md"},[a("div",{staticClass:"ts-26 tw5 m-b"},[t._v(t._s(t.$store.state.app.mainNav[t.$store.state.app.currentNav].bannerName))]),a("div",{staticClass:"text-gray ts-22 tw3"},[t._v(t._s(t.$store.state.app.mainNav[t.$store.state.app.currentNav].subtitle))])]):t._e(),"page"==t.$store.state.app.mainNav[t.$store.state.app.currentNav].listsTpl?[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{shadow:"none","element-loading-text":"拼命加载中"}},[a("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],staticClass:"ts-16",domProps:{innerHTML:t._s(t.content)}})])]:"case"==t.$store.state.app.mainNav[t.$store.state.app.currentNav].listsTpl?a("div",[a("lists-case",{attrs:{loading:t.loading,list:t.dataList}})],1):"ask"==t.$store.state.app.mainNav[t.$store.state.app.currentNav].listsTpl?a("div",[a("lists-ask",{attrs:{loading:t.loading,list:t.dataList,cateId:t.$store.state.app.mainNav[t.$store.state.app.currentNav].id},on:{"refresh-ist":t.loadlists}})],1):t._e()],2)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(74916),a(15306),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"case-list"},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"flex flex-wrap",staticStyle:{"min-height":"300px"},attrs:{type:"flex",justify:"center",align:"middle","element-loading-text":"拼命加载中"}},t._l(t.dataList,(function(e,i){return a("el-col",{key:i,staticClass:"item",attrs:{xs:24,sm:12,md:8,lg:8}},[a("div",{staticClass:"image"},[a("img",{attrs:{src:e.cover,alt:e.title}})]),a("div",{staticClass:"p-a bg-white"},[a("div",{staticClass:"title ts-16"},[t._v(t._s(e.title))]),a("div",{staticClass:"info flex space-between text-gray ts-12"},[a("div",[t._v(t._s(e.userInfo.nickname))]),a("div",[t._v(t._s(e.viewCount)+"次浏览")])]),a("div",{staticClass:"subtitle text-gray ts-12"},[t._v(t._s(e.subtitle))])])])})),1)],1)])}),n=[],l={name:"listsCase",data:function(){return{dataList:[]}},props:{loading:!1,list:{type:Array,default:function(){return[]}}},created:function(){this.dataList=this.list},watch:{list:function(){this.dataList=this.list}},methods:{}},c=l,u=a(1001),d=(0,u.Z)(c,o,n,!1,null,"dc1c848a",null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"flex flex-wrap",attrs:{type:"flex",gutter:20}},[a("el-col",{staticClass:"m-b-sm",attrs:{xs:24,lg:17}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix ts-18",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最新")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.item.pageData.show=!0}}},[t._v("发布帖子")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"case-list",staticStyle:{"min-height":"300px"},attrs:{"element-loading-text":"拼命加载中"}},t._l(t.dataList,(function(e,i){return a("div",{key:i,staticClass:"item flex flex-alignCenter border-bottom_1px"},[a("div",{staticClass:"m-r text-center bg-indo"},[a("el-alert",{staticClass:"p-a-xs",attrs:{closable:!1,type:"info"}},[a("div",{staticClass:"ts-14"},[t._v(t._s(e.commentCount))]),a("div",{staticClass:"text-gray ts-12"},[t._v("回复")])])],1),a("div",{staticClass:"m-r text-center text-gray"},[a("div",{staticClass:"ts-18"},[t._v(t._s(e.viewCount))]),a("div",{staticClass:" ts-12"},[t._v("浏览")])]),a("div",{staticClass:"bg-white flex-1"},[a("div",{staticClass:"title ts-16",on:{click:function(a){return t.$xyutil.navigateTo({url:"/ask/"+e.id})}}},[t._v(t._s(e.title))]),a("div",{staticClass:"info flex space-between text-gray ts-12"},[a("div",[t._v(t._s(e.userInfo.nickname))]),a("div",[t._v("发布于"+t._s(t.$xyutil.timeFormat(e.postTime)))])]),a("div",{staticClass:"subtitle text-gray ts-12"},[t._v(t._s(e.subtitle))])])])})),0)])],1),a("el-col",{staticClass:"m-b-sm",attrs:{xs:24,lg:7}},[a("hot-ask",{attrs:{cateId:t.cateId}})],1)],1),a("el-dialog",{staticClass:"ts-16",attrs:{title:"发布帖子",visible:t.item.pageData.show,width:"70%"},on:{"update:visible":function(e){return t.$set(t.item.pageData,"show",e)}}},[a("xy-builder-form",{attrs:{api:"/v1/icms/post/add?cateId="+t.cateId,show:t.item.pageData.show,pitem:t.item},on:{close:function(e){return t.closeModel(t.item,e)}}})],1)],1)},f=[],h=(a(66992),a(41539),a(88674),a(78783),a(33948),a(72130)),v={name:"listsAsk",components:{"hot-ask":h.Z},data:function(){return{item:{pageData:{show:!1}},dataList:[]}},props:{loading:!1,cateId:0,list:{type:Array,default:function(){return[]}}},beforeCreate:function(){this.$options.components["xy-builder-form"]=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,53100))}},created:function(){this.dataList=this.list},watch:{list:function(t){this.dataList=t}},methods:{closeModel:function(t,e){this.item.pageData.show=!1,e&&this.$emit("refresh-ist")}}},g=v,y=(0,u.Z)(g,p,f,!1,null,"17a6f853",null),x=y.exports,b={watch:{$route:function(t,e){this.loadlists()}},components:{"lists-case":m,"lists-ask":x},data:function(){return{loading:!1,dataList:[]}},created:function(){this.loadlists()},computed:{content:function(){return this.$store.state.app.mainNav[this.$store.state.app.currentNav].content.replace(/\<img/gi,'<img style="max-width:100%;height:auto" ')}},methods:{loadlists:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==t.$store.state.app.mainNav[t.$store.state.app.currentNav].cateType){e.next=2;break}return e.abrupt("return");case 2:return t.dataList=[],t.loading=!0,e.next=6,t.$xyutil.request({url:"/v1/icms/post/lists/"+t.$store.state.app.mainNav[t.$store.state.app.currentNav].id,data:{},method:"get"});case 6:a=e.sent,200==a.code?t.dataList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()}}},w=b,_=(0,u.Z)(w,i,r,!1,null,"69b6b7b0",null),k=_.exports},513:function(t,e,a){a.r(e);var i,r,s=a(1001),o={},n=(0,s.Z)(o,i,r,!1,null,null,null);e["default"]=n.exports},99136:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outerBox"},[a("div",{staticClass:"backOperation"},[a("a",{attrs:{href:"#"},on:{click:function(e){return t.$router.back(-1)}}},[t._v(" 返回上一级 "),a("span",{staticStyle:{display:"inline-block","margin-left":"5px"}},[t._v(">>")])]),a("span"),a("p",[t._v("消息 > 消息详情")])]),a("div",{staticClass:"box text-center bg-white"},[t._m(0),a("div",{staticClass:"inner p-t-sm"},[a("div",{staticClass:"ts-30 tw5 m-b-lg"},[t._v(" "+t._s(t.info.title)+" ")]),a("div",{staticClass:"content pos-r"},[t._v(" "+t._s(t.info.content)+" "),t._m(1)])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content text-left ts-14 lh-1 text-primary "},[a("div",{staticClass:"bg-primary inline-block m-t m-l-sm",staticStyle:{"margin-bottom":"-2px",width:"14px",height:"14px"}}),t._v(" 公告 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pos-a",staticStyle:{left:"10px",top:"0"}},[a("i",{staticClass:"xyicon xyicon-notify1  ts-22 text-primary"})])}],s=a(16198),o=(a(35666),{name:"MsgDetail",components:{},data:function(){return{loading:!1,id:0,info:{}}},created:function(){this.id=this.$route.query.id,this.loadData()},methods:{loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/msg/msg/info/"+t.id,method:"get"});case 3:a=e.sent,200==a.code?t.info=a.data.info:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"4052c64b",null),u=c.exports},13096:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mcRight"},[a("div",{staticClass:"backImage"},[a("div",{staticClass:"title"},t._l(t.tabs,(function(e,i){return a("button",{key:i,class:{OnBtnChange:i==t.current},on:{click:function(e){return t.addClass(i)}}},[t._v(" "+t._s(e.title)+" ")])})),0),t._m(0)]),a("div",{staticClass:"content"},[a("el-table",{ref:"mytable",attrs:{data:t.tableData,"tooltip-effect":"dark","row-class-name":t.tableRowClassName}},[a("template",{slot:"empty"},[a("div",{staticClass:"lh-1 p-t-lg p-b-lg"},[a("div",{staticClass:"ts-16 m-t-sm",staticStyle:{color:"#A5A5A5"}},[a("span",[t._v("暂无消息")])])])]),a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"标题",width:"1020"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.isRead?a("span",{staticClass:"newRed"},[t._v("·")]):t._e(),a("span",{staticClass:"cursor-pointer",on:{click:function(a){return t.$router.push({path:"/msg/msg/info",query:{id:e.row.id}})}}},[t._v(" "+t._s(e.row.title)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"发送时间",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$xyutil.timeFormat(t.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"cate",label:"类别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.cate?a("span",[t._v("系统通知")]):t._e(),3==e.row.cate?a("span",[t._v("站内公告")]):t._e()]}}])})],2)],1),a("div",{staticClass:"Pagination flex space-between"},[a("button",{on:{click:t.readBatch}},[a("i",{staticClass:"iconfont iconbiaojiyidu"}),t._v(" 标记已读 ")]),a("button",{on:{click:t.deleteBatch}},[a("i",{staticClass:"iconfont xyicon xyicon-trash"}),t._v(" 删除 ")]),a("button",{on:{click:t.readAll}},[a("i",{staticClass:"iconfont xyicon xyicon-eye"}),t._v(" 全部已读 ")]),a("button",{on:{click:t.deleteAll}},[a("i",{staticClass:"iconfont xyicon xyicon-trash"}),t._v(" 全部删除 ")]),a("div",{staticClass:"fenyeNum"},[a("el-pagination",{attrs:{"current-page":t.dataPage.page,background:"","page-sizes":[10,20,30,40],"page-size":t.dataPage.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataPage.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("button",[t._v("状态筛选： 全部 ▼")])])}],s=a(16198),o=(a(41539),a(54747),a(35666),{data:function(){return{loading:!1,current:0,tabs:[{value:0,title:"全部类型消息"},{value:3,title:"站内公告"},{value:2,title:"系统通知"}],tableData:[],dataPage:{total:0,page:1,limit:10}}},created:function(){this.loadlists()},methods:{addClass:function(t){this.current=t,this.loadlists()},loadlists:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/msg/msg/my",data:{cate:t.tabs[t.current].value,page:t.dataPage.page,limit:t.dataPage.limit},method:"get"});case 3:a=e.sent,200==a.code?(t.tableData=a.data.dataList,t.dataPage=a.data.dataPage):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},getSelectedIds:function(){var t=this.$refs.mytable.selection;if(0!=t.length){var e="";return t.forEach((function(t){e=e+","+t.id})),e}this.$xyutil.showToast({title:"请选择消息",icon:"loading",duration:3e3})},readBatch:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getSelectedIds(),e.next=3,t.$xyutil.request({url:"/v1/msg/msg/readBatch",data:{ids:a},method:"put"});case 3:i=e.sent,200==i.code?(t.loadlists(),t.$xyutil.showToast({title:i.msg,icon:"loading",duration:2e3})):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 5:case"end":return e.stop()}}),e)})))()},deleteBatch:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getSelectedIds(),e.next=3,t.$xyutil.request({url:"/v1/msg/msg/deleteBatch",data:{ids:a},method:"delete"});case 3:i=e.sent,200==i.code?(t.loadlists(),t.$xyutil.showToast({title:i.msg,icon:"loading",duration:2e3})):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 5:case"end":return e.stop()}}),e)})))()},readAll:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/msg/msg/readAll",method:"put"});case 2:a=e.sent,200==a.code?(t.loadlists(),t.$xyutil.showToast({title:a.msg,icon:"loading",duration:2e3})):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},deleteAll:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/msg/msg/deleteAll",method:"delete"});case 2:a=e.sent,200==a.code?(t.loadlists(),t.$xyutil.showToast({title:a.msg,icon:"loading",duration:2e3})):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},tableRowClassName:function(t){var e=t.row,a=t.rowIndex;console.log(e,a)},handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.dataPage.limit=t,this.loadlists()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.dataPage.page=t,this.loadlists()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"514f6b4d",null),u=c.exports},20980:function(t,e,a){a.r(e);var i,r,s=a(1001),o={},n=(0,s.Z)(o,i,r,!1,null,null,null);e["default"]=n.exports},35361:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"8%"}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 重置资金密码 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"paypwd"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入6-18位支付密码"},model:{value:t.form.paypwd,callback:function(e){t.$set(t.form,"paypwd",e)},expression:"form.paypwd"}})],1),t.verifyList.indexOf("email")>=0?a("el-form-item",{attrs:{prop:"emailVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.emailVerify,callback:function(e){t.$set(t.form,"emailVerify",e)},expression:"form.emailVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"重置资金密码"},on:{verifysuccess:t.getVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("mobile")>=0?a("el-form-item",{attrs:{prop:"mobileVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.mobileVerify,callback:function(e){t.$set(t.form,"mobileVerify",e)},expression:"form.mobileVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"重置资金密码"},on:{verifysuccess:t.getMobileVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("gauth")>=0?a("el-form-item",{attrs:{prop:"gauth"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:t.form.gauth,callback:function(e){t.$set(t.form,"gauth",e)},expression:"form.gauth"}})],1):t._e(),t.verifyList.indexOf("password")>=0?a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 确认 ")])],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(32564),a(35666),{data:function(){return{verifyList:[],loading:!1,form:{paypwd:"",password:"",emailVerify:"",emailToken:"",mobileVerify:"",mobileToken:"",gauth:""},rule:{paypwd:[{required:!0,message:"请填写支付密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{getVerifyToken:function(t){this.form.emailToken=t.token},getMobileVerifyToken:function(t){this.form.mobileToken=t.token},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/paypwd/pwd/change",method:"get"});case 2:a=e.sent,"200"==a.code?t.verifyList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/paypwd/pwd/change",data:t.form,method:"put"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$xyutil.navigateBack()):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"523f4ee4",null),u=c.exports},80029:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"8%"}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 设置资金密码 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"paypwd"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入6-18位支付密码"},model:{value:t.form.paypwd,callback:function(e){t.$set(t.form,"paypwd",e)},expression:"form.paypwd"}})],1),t.verifyList.indexOf("email")>=0?a("el-form-item",{attrs:{prop:"emailVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.emailVerify,callback:function(e){t.$set(t.form,"emailVerify",e)},expression:"form.emailVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"设置资金密码"},on:{verifysuccess:t.getVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("mobile")>=0?a("el-form-item",{attrs:{prop:"mobileVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.mobileVerify,callback:function(e){t.$set(t.form,"mobileVerify",e)},expression:"form.mobileVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"设置资金密码"},on:{verifysuccess:t.getMobileVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("gauth")>=0?a("el-form-item",{attrs:{prop:"gauth"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:t.form.gauth,callback:function(e){t.$set(t.form,"gauth",e)},expression:"form.gauth"}})],1):t._e(),t.verifyList.indexOf("password")>=0?a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 确认 ")])],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(32564),a(35666),{data:function(){return{verifyList:[],loading:!1,form:{paypwd:"",password:"",emailVerify:"",emailToken:"",mobileVerify:"",mobileToken:"",gauth:""},rule:{paypwd:[{required:!0,message:"请填写支付密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{getVerifyToken:function(t){this.form.emailToken=t.token},getMobileVerifyToken:function(t){this.form.mobileToken=t.token},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/paypwd/pwd/set",method:"get"});case 2:a=e.sent,"200"==a.code?t.verifyList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/paypwd/pwd/set",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$xyutil.navigateBack()):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"3f014a78",null),u=c.exports},29766:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"100px","padding-bottom":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box hidden-sm-and-down",attrs:{md:10,lg:16}},[a("img",{attrs:{src:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/a5530bd3-6d32-483a-a8be-394e6016043f.png",width:"630"}})]),"choose"==t.show?a("el-col",{staticClass:"login-box bg-white",attrs:{xs:24,sm:{span:14,offset:5},md:15,lg:9}},[a("div",{staticClass:"success-box text-center"},[a("h4",{staticClass:"title"},[t._v(" 账号绑定 ")]),a("p",[t._v(" 您的微信未绑定"+t._s(t.$store.state.app.siteInfo.title)+"账户，请选择操作 ")]),a("el-button",{staticClass:"full cert",attrs:{size:"large",type:"primary"},on:{click:function(e){t.show="mobileVerify"}}},[t._v(" 绑定已有账户 ")]),a("el-button",{staticClass:"full skip",attrs:{size:"large"},on:{click:function(e){return t.handleRegister()}}},[t._v(" 创建新账户 ")])],1),a("div",{staticClass:"bottom flex space-between flex-alignCenter"})]):t._e(),"mobileVerify"==t.show?a("el-col",{staticClass:"login-box bg-white",attrs:{xs:24,sm:{span:14,offset:5},md:15,lg:9}},[a("div",{staticClass:"title"},[t._v(" 用户绑定并登录 ")]),a("div",{staticClass:"subtitle"},[t._v(" 还没有注册吗？ "),a("router-link",{attrs:{to:"/user/register"}},[t._v(" 请点击这里 ")])],1),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-person-outline",placeholder:"请输入您的手机号码"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("div",{staticClass:"flex flex-alignCenter"},[a("el-form-item",{staticClass:"flex-1",attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}})],1),a("xy-send-verify",{staticClass:"send-verity-button",attrs:{slot1:"append",url:"/v1/sms/verify/send",type:"手机号",account:t.form.account,title:"用户登录"},on:{verifysuccess:t.getVerifyToken}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.form.loading,type:"primary"},on:{click:function(e){return t.handleBind("mobildVerify")}}},[t._v(" 绑定 ")]),a("div",{staticClass:"actions flex m-t"},[a("div",{on:{click:function(e){t.show="password"}}},[t._v(" 使用账号密码绑定 ")]),a("div",[a("router-link",{attrs:{to:"/user/resetPassword"}},[t._v(" 忘记密码？ ")])],1)])],1),a("div",{staticClass:"bottom flex space-between flex-alignCenter",on:{click:function(e){t.show="choose"}}})],1):t._e(),"password"==t.show?a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 用户绑定并登录 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-person-outline",placeholder:"请输入您的邮箱地址或手机号码"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.form.loading,type:"primary"},on:{click:function(e){return t.handleBind("password")}}},[t._v(" 绑定 ")]),a("div",{staticClass:"actions flex m-t"},[a("div",{on:{click:function(e){t.show="mobileVerify"}}},[t._v(" 使用手机验证码绑定 ")]),a("div",[a("router-link",{attrs:{to:"/user/resetPassword"}},[t._v(" 忘记密码？ ")])],1)])],1),a("div",{staticClass:"bottom flex space-between flex-alignCenter",on:{click:function(e){t.show="choose"}}})],1):t._e()],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(32564),{data:function(){return{show:"choose",type:"",form:{loading:!1,seed:"",bindType:"",account:"",password:"",verify:"",token:""},rule:{account:[{required:!0,message:"请填写账号",trigger:"blur"}]}}},created:function(){this.type=this.$route.query.type,this.form.seed=this.$route.query.seed},methods:{getVerifyToken:function(t){this.form.token=t},handleRegister:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),i="",e.t0=t.type,e.next="wxmp"===e.t0?7:"wxapp"===e.t0?9:11;break;case 7:return i="/v1/wxmp/user/register",e.abrupt("break",13);case 9:return i="/v1/wxapp/user/register",e.abrupt("break",13);case 11:return e.abrupt("return");case 13:return e.next=15,t.$xyutil.request({url:i,data:t.form,method:"post"});case 15:r=e.sent,"200"==r.code?(t.$store.commit("user/setToken",r.data.token),t.$store.commit("user/setUserInfo",r.data.userInfo),t.$xyutil.showToast({title:r.msg,icon:"success",duration:2e3}),t.$xyutil.navigateTo("/my")):t.$xyutil.showToast({title:r.msg,icon:"loading",duration:3e3}),t.loading=!1;case 18:case"end":return e.stop()}}),e)})))()},handleBind:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.form.bindType=t,e.loading=!0,i=e,setTimeout((function(){i.loading=!1}),5e3),"",a.t0=e.type,a.next="wxmp"===a.t0?8:"wxapp"===a.t0?10:12;break;case 8:return"/v1/wxmp/user/bind",a.abrupt("break",14);case 10:return"/v1/wxapp/user/bind",a.abrupt("break",14);case 12:return a.abrupt("return");case 14:return a.next=16,e.$xyutil.request({url:"/v1/third_login/user/bind",data:e.form,method:"post"});case 16:r=a.sent,"200"==r.code?(e.$store.commit("user/setToken",r.data.token),e.$store.commit("user/setUserInfo",r.data.userInfo),e.$xyutil.showToast({title:r.msg,icon:"success",duration:2e3}),e.$xyutil.navigateTo("/my")):e.$xyutil.showToast({title:r.msg,icon:"loading",duration:3e3}),e.loading=!1;case 19:case"end":return a.stop()}}),a)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"29df62c0",null),u=c.exports},97913:function(t,e,a){a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"qr-box",on:{click:t.loadData}},[t.qrurl?a("div",[a("xy-qrcode",{staticClass:"qrcode",style:{opacity:t.timeout?.3:1},attrs:{value:t.qrurl,options:{width:t.width}}}),t.timeout?a("span",{staticClass:"xyicon xyicon-history"}):t._e()],1):a("div",{staticClass:"no-qr",style:{width:this.width+"px",height:this.width+"px",background:this.bgColor}}),a("div",{staticClass:"tip m-t text-666"},[t._v(t._s(t.tip))])])},r=[],s=a(16198),o=(a(35666),a(9653),a(32564),{props:{qrloginShow:!1,type:"",cate:{type:Number,default:0},tip:{type:String,default:"使用微信扫一扫"},width:{type:Number,default:200},bgColor:{type:String,default:"#eee"}},data:function(){return{seed:"",qrurl:"",timer:null,timeout:!1}},mounted:function(){this.qrloginShow&&this.loadData()},watch:{qrloginShow:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=6;break}return a.next=3,e.loadData();case 3:e.qrurl&&(e.timer=setInterval(e.getLogin,2e3)),a.next=7;break;case 6:clearInterval(e.timer);case 7:case"end":return a.stop()}}),a)})))()}},beforeDestroy:function(){clearInterval(this.timer)},methods:{loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/qrlogin/qrlogin/getSeed",data:{type:t.type,cate:t.cate},method:"get"});case 2:a=e.sent,200==a.code?(t.seed=a.data.seed,t.qrurl=a.data.qrurl,t.timeout=!1,clearInterval(t.timer),t.timer=setInterval(t.getLogin,2e3)):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},getLogin:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/qrlogin/qrlogin/getLogin?seed="+t.seed,method:"get"});case 2:a=e.sent,200==a.code&&(a.data.timeout?(t.timeout=!0,clearInterval(t.timer)):(clearInterval(t.timer),1==t.cate?(t.$xyutil.showToast({title:a.msg,icon:"success",duration:2e3}),t.$emit("success")):a.data.userInfo?(a.data.token&&t.$store.commit("user/setToken",a.data.token),t.$store.commit("user/setUserInfo",a.data.userInfo),t.$xyutil.showToast({title:a.msg,icon:"success",duration:2e3}),t.$emit("success")):t.$router.push({path:"/qrlogin/login",query:{seed:t.seed,type:t.type}})));case 4:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"bd7f2e0c",null),u=c.exports},42813:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"content p-t-md"},[a("el-steps",{attrs:{active:t.active,"align-left":""}},[a("el-step",{attrs:{title:"登录密码",description:""}}),a("el-step",{attrs:{title:"验证新邮箱",description:""}}),a("el-step",{attrs:{title:"绑定成功",description:""}})],1),a("div",{staticClass:"step-tabs"},[1==t.active?a("el-form",{ref:"formVerifyPassword",attrs:{"label-position":"left","label-width":"0px"}},[a("div",{staticClass:"m-b-md ts-18 tw4"},[t._v("请输入您的登录密码")]),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.verifyPassword}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){return t.$router.back()}}},[t._v("暂不修改")])],1)],1):t._e(),2==t.active?a("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"email",label:"请输入邮箱"}},[a("el-input",{attrs:{size:"medium",type:"text",prefix:"ios-at-outline",placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"verify",label:"验证码"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}}),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",size:"medium"}},[a("xy-send-verify",{attrs:{url:"/v1/email/verify/send",type:"邮箱",account:t.form.email,title:"手机绑定"},on:{verifysuccess:t.getVerifyToken}})],1)],1)]),t.verifyList.indexOf("mobile")>=0?a("el-form-item",{attrs:{prop:"mobileVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.mobileVerify,callback:function(e){t.$set(t.form,"mobileVerify",e)},expression:"form.mobileVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"邮箱绑定"},on:{verifysuccess:t.getMobileVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("gauth")>=0?a("el-form-item",{attrs:{prop:"gauth"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:t.form.gauth,callback:function(e){t.$set(t.form,"gauth",e)},expression:"form.gauth"}})],1):t._e(),t.verifyList.indexOf("password")>=0?a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 确定 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),3==t.active?a("div",[t._m(0),a("div",{staticClass:"m-t-lg"},[a("router-link",{attrs:{to:"/user/login"}},[a("el-button",{staticClass:"primary-linear",attrs:{size:"small",type:"primary",round:""}},[t._v("重新登录")])],1)],1)]):t._e()],1)],1)]),a("div",[a("el-alert",{attrs:{type:"primary"}},[a("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),a("span",[t._v("收不到验证码？")])]),a("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、网络通讯异常可能会造成邮箱丢失，请重新获取或稍后再试。"),a("br"),t._v(" 2、请核实邮箱邮件是否被拦截，检查垃圾箱。"),a("br"),t._v(" 3、如果邮箱已经停用， 请选择其他验证方式 。"),a("br")])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"xyicon xyicon-check3 ts-30 m-r-sm",staticStyle:{color:"#4AC711"}}),a("span",{staticClass:"ts-20 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("绑定邮箱成功。")])])}],s=a(16198),o=(a(32564),a(35666),a(39765)),n={mixins:[o["default"]],data:function(){return{active:1,verifyList:[],loading:!1,form:{email:"",password:"",verify:"",token:"",mobile:"",mobileVerify:"",mobileToken:"",gauth:""},rule:{email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{verifyPassword:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.doVerifyPassword();case 2:a=e.sent,"200"==a.code&&t.active++;case 4:case"end":return e.stop()}}),e)})))()},getVerifyToken:function(t){this.form.token=t.token},getMobileVerifyToken:function(t){this.form.mobileToken=t.token},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/reg_email/user/bind",method:"get"});case 2:a=e.sent,"200"==a.code?t.verifyList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_email/user/bind",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"18b4bd18",null),d=u.exports},57475:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"content p-t-md"},[a("el-steps",{attrs:{active:t.active,"align-left":""}},[a("el-step",{attrs:{title:"登录密码",description:""}}),a("el-step",{attrs:{title:"验证旧邮箱",description:""}}),a("el-step",{attrs:{title:"验证新邮箱",description:""}}),a("el-step",{attrs:{title:"绑定成功",description:""}})],1),a("div",{staticClass:"step-tabs"},[1==t.active?a("el-form",{ref:"formVerifyPassword",attrs:{"label-position":"left","label-width":"0px"}},[a("div",{staticClass:"m-b-md ts-18 tw4"},[t._v("请输入您的登录密码")]),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.verifyPassword}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){return t.$router.back()}}},[t._v("暂不修改")])],1)],1):t._e(),2==t.active?a("el-form",{ref:"formVerfyEmail",attrs:{"label-position":"left","label-width":"140px",model:t.formVerfyEmail}},[a("div",{staticClass:"m-b-md ts-12 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("为确认您本人操作，需要您进行邮箱验证码验证身份。")]),a("el-form-item",{attrs:{prop:"mobile",label:"请输入旧邮箱"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",type:"text",prefix:"ios-at-outline",disabled:"",placeholder:"请输入旧邮箱"},model:{value:t.formVerfyEmail.email,callback:function(e){t.$set(t.formVerfyEmail,"email",e)},expression:"formVerfyEmail.email"}}),a("div",{staticClass:"text-gray m-l-md"},[t._v(" 邮箱不可用？点此提交工单 ")])],1)]),a("el-form-item",{attrs:{prop:"verify",label:"验证码"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.formVerfyEmail.verify,callback:function(e){t.$set(t.formVerfyEmail,"verify",e)},expression:"formVerfyEmail.verify"}}),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",size:"medium"}},[a("xy-send-verify",{attrs:{url:"/v1/email/verify/send",type:"邮箱",account:t.formVerfyEmail.email,title:"手机换绑"},on:{verifysuccess:t.getVerifyTokenVerfyEmail}})],1)],1)]),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.verifyEmail()}}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),3==t.active?a("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"email",label:"请输入新邮箱号"}},[a("el-input",{attrs:{size:"medium",type:"text",prefix:"ios-at-outline",placeholder:"请输入新邮箱号"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"verify",label:"验证码"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}}),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",size:"medium"}},[a("xy-send-verify",{attrs:{url:"/v1/email/verify/send",type:"邮箱",verifyUser:1,account:t.form.mobile,title:"邮箱换绑"},on:{verifysuccess:t.getVerifyToken}})],1)],1)]),t.verifyList.indexOf("mobile")>=0?a("el-form-item",{attrs:{prop:"mobileVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.mobileVerify,callback:function(e){t.$set(t.form,"mobileVerify",e)},expression:"form.mobileVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"邮箱换绑"},on:{verifysuccess:t.getMobileVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("gauth")>=0?a("el-form-item",{attrs:{prop:"gauth"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:t.form.gauth,callback:function(e){t.$set(t.form,"gauth",e)},expression:"form.gauth"}})],1):t._e(),t.verifyList.indexOf("password")>=0?a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 确定 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),4==t.active?a("div",[t._m(0),a("div",{staticClass:"m-t-lg"},[a("router-link",{attrs:{to:"/user/login"}},[a("el-button",{staticClass:"primary-linear",attrs:{size:"small",type:"primary",round:""}},[t._v("重新登录")])],1)],1)]):t._e()],1)],1)]),a("div",[a("el-alert",{attrs:{type:"primary"}},[a("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),a("span",[t._v("收不到短信验证码？")])]),a("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、网络通讯异常可能会造成邮箱丢失，请重新获取或稍后再试。"),a("br"),t._v(" 2、请核实邮箱邮件是否被拦截，检查垃圾箱。"),a("br"),t._v(" 3、如果邮箱已经停用， 请选择其他验证方式 。"),a("br")])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"xyicon xyicon-check3 ts-30 m-r-sm",staticStyle:{color:"#4AC711"}}),a("span",{staticClass:"ts-20 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("换绑邮箱成功。")])])}],s=a(16198),o=(a(32564),a(35666),a(39765)),n={mixins:[o["default"]],data:function(){return{active:1,verifyList:[],loading:!1,formVerfyEmail:{email:this.$store.state.user.userInfo.email.identifier,verify:"",token:""},form:{email:"",password:"",verify:"",token:"",mobile:"",mobileVerify:"",mobileToken:"",gauth:""},rule:{email:[{required:!0,message:"请填写新邮箱",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{verifyPassword:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.doVerifyPassword();case 2:a=e.sent,"200"==a.code&&t.active++;case 4:case"end":return e.stop()}}),e)})))()},getVerifyTokenVerfyEmail:function(t){this.formVerfyEmail.token=t.token},verifyEmail:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_email/user/verify",data:t.formVerfyEmail,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},getVerifyToken:function(t){this.form.token=t.token},getMobileVerifyToken:function(t){this.form.mobileToken=t.token},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/reg_email/user/change",method:"get"});case 2:a=e.sent,"200"==a.code?t.verifyList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_email/user/change",data:t.form,method:"put"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"6d3eb8c5",null),d=u.exports},55111:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"content p-t-md"},[a("el-steps",{attrs:{active:t.active,"align-left":""}},[a("el-step",{attrs:{title:"验证邮箱",description:""}}),a("el-step",{attrs:{title:"输入新密码",description:""}}),a("el-step",{attrs:{title:"修改成功",description:""}})],1),a("div",{staticClass:"step-tabs"},[1==t.active?a("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("div",{staticClass:"m-b-md ts-12 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("为确认您本人操作，需要您进行邮箱验证码验证身份。")]),a("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[a("el-input",{attrs:{disabled:"",size:"medium",type:"text",prefix:"ios-at-outline",placeholder:t.form.mobile?"邮箱":"未绑定邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"verify",label:"验证码"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}}),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",size:"medium"}},[a("xy-send-verify",{attrs:{url:"/v1/email/verify/send",type:"邮箱",account:t.form.email,title:"修改密码"},on:{verifysuccess:t.getVerifyToken}})],1)],1)]),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.goStep2}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){return t.$router.back()}}},[t._v("暂不修改")])],1)],1):t._e(),2==t.active?a("el-form",{ref:"formVerifyPassword",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("div",{staticClass:"m-b-md ts-18 tw4"},[t._v("请输入您的登录密码")]),a("el-form-item",{attrs:{prop:"newPassword",label:"输入新的密码"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"输入新的密码"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),a("el-form-item",{attrs:{prop:"rePassword",label:"再次输入"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"再次输入"},model:{value:t.form.rePassword,callback:function(e){t.$set(t.form,"rePassword",e)},expression:"form.rePassword"}})],1),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),3==t.active?a("div",[t._m(0),a("div",{staticClass:"m-t-lg"},[a("router-link",{attrs:{to:"/user/login"}},[a("el-button",{staticClass:"primary-linear",attrs:{size:"small",type:"primary",round:""}},[t._v("重新登录")])],1)],1)]):t._e()],1)],1)]),a("div",[a("el-alert",{attrs:{type:"primary"}},[a("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),a("span",[t._v("收不到验证码？")])]),a("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、网络通讯异常可能会造成邮箱丢失，请重新获取或稍后再试。"),a("br"),t._v(" 2、请核实邮箱邮件是否被拦截，检查垃圾箱。"),a("br"),t._v(" 3、如果邮箱已经停用， 请选择其他验证方式 。"),a("br")])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"xyicon xyicon-check3 ts-30 m-r-sm",staticStyle:{color:"#4AC711"}}),a("span",{staticClass:"ts-20 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("修改登录密码成功，请您牢记密码。")])])}],s=a(16198),o=(a(35666),a(32564),{data:function(){var t;return{active:1,loading:!1,form:{email:null===(t=this.$store.state.user.userInfo.email)||void 0===t?void 0:t.identifier,verify:"",token:"",newPassword:"",rePassword:""},rule:{email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],rePassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){var t;null!==(t=this.$store.state.user.userInfo.email)&&void 0!==t&&t.identifier||this.$xyutil.showToast({title:"未绑定邮箱",icon:"loading",duration:3e3})},methods:{goStep2:function(){this.form.email&&this.form.verify&&this.form.token?this.active++:this.$xyutil.showToast({title:"验证失败",icon:"loading",duration:3e3})},getVerifyToken:function(t){this.form.token=t},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_email/user/restPassword",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"ef26cac0",null),u=c.exports},71616:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-at-outline",placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",account:t.form.email,title:"用户注册"},on:{verifysuccess:t.getVerifyToken},slot:"append"})],1)],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入6-18位密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t.$store.state.app.siteInfo.regInvite>0?a("el-form-item",{attrs:{prop:"inviteCode"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邀请码"+t.inviteSuffix},model:{value:t.form.inviteCode,callback:function(e){t.$set(t.form,"inviteCode",e)},expression:"form.inviteCode"}})],1):t._e(),a("div",{staticClass:"agreement"},[a("el-checkbox",{model:{value:t.form.agreement,callback:function(e){t.$set(t.form,"agreement",e)},expression:"form.agreement"}},[t._v("我已阅读并同意")]),a("router-link",{attrs:{to:"/agreement/用户协议"}},[t._v("《"+t._s(t.$store.state.app.siteInfo.title)+"用户协议》")]),t._v("和 "),a("router-link",{attrs:{to:"/agreement/隐私政策"}},[t._v("《"+t._s(t.$store.state.app.siteInfo.title)+"隐私政策》")])],1),a("el-button",{staticClass:"full submit-btn",attrs:{disabled:!t.form.agreement,size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 注册 ")]),a("div",{staticClass:"actions flex"},[a("div"),a("div",[t._v(" 已有账号？ "),a("router-link",{attrs:{to:"/user/login"}},[t._v("登录")])],1)])],1)},r=[],s=a(16198),o=(a(35666),a(32564),{data:function(){return{loading:!1,inviteSuffix:"",form:{email:"",password:"",rePassword:"",verify:"",token:"",inviteCode:"",agreement:!1},rule:{email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){switch(this.$store.state.app.siteInfo.regInvite){case 1:this.inviteSuffix="（可选）";break;case 2:this.inviteSuffix="（必填）";break}this.form.inviteCode=this.$store.state.app.inviteCode},methods:{getVerifyToken:function(t){this.form.token=t.token},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("app/setData",{key:"inviteCode",value:t.form.inviteCode}),t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=6,t.$xyutil.request({url:"/v1/reg_email/user/register",data:t.form,method:"post"});case 6:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$emit("reg-success")):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"ef62c786",null),u=c.exports},65928:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"100px","padding-bottom":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box",attrs:{xs:1,sm:1,md:14,lg:14}},[a("img",{attrs:{src:t.$store.state.app.loginPic,width:"600"}})]),a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 邮箱重置密码 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-at-outline",placeholder:"邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-lock-outline",placeholder:"验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",account:t.form.email,title:"重置密码"},on:{verifysuccess:t.getVerifyToken},slot:"append"})],1)],1),a("el-form-item",{attrs:{prop:"newPassword"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"新密码"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 立即重置 ")])],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(32564),{data:function(){return{loading:!1,form:{email:"",newPassword:"",verify:"",token:""},rule:{email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){this.$route.query.account&&(this.form.email=this.$route.query.account)},methods:{getVerifyToken:function(t){this.form.token=t},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_email/user/restPassword",data:t.form,method:"put"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$xyutil.navigateTo("/")):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"8d7b49d6",null),u=c.exports},39820:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"100px","padding-bottom":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box",attrs:{xs:1,sm:1,md:14,lg:14}},[a("img",{attrs:{src:t.$store.state.app.loginPic,width:"600"}})]),a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 邮箱重置密码 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{size:"large",type:"text",disabled:!0,prefix:"ios-at-outline",placeholder:"邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"newPassword"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"输入新密码"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),a("el-form-item",{attrs:{prop:"rePassword"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"重复输入新密码"},model:{value:t.form.rePassword,callback:function(e){t.$set(t.form,"rePassword",e)},expression:"form.rePassword"}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 立即重置 ")])],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(32564),{data:function(){return{loading:!1,form:{email:"",newPassword:"",rePassword:"",token:""},rule:{email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],rePassword:[{required:!0,message:"请重复输入新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){var t=this.$xyutil.getUrlQuery();this.form.email=t["email"],this.form.token=t["token"]},methods:{getVerifyToken:function(t){this.form.token=t},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_email/user/restPasswordByLink",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$xyutil.navigateTo("/user/login")):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"547b4528",null),u=c.exports},78796:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"100px","padding-bottom":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box",attrs:{xs:1,sm:1,md:14,lg:14}},[a("img",{attrs:{src:t.$store.state.app.loginPic,width:"600"}})]),a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 邮箱找回 ")]),a("el-tabs",{attrs:{stretch:""},on:{"tab-click":t.handleClick},model:{value:t.regTab,callback:function(e){t.regTab=e},expression:"regTab"}},[t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0?a("el-tab-pane",{staticClass:"p-t",attrs:{label:"手机号码",name:"mobile"}}):t._e(),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")>=0?a("el-tab-pane",{staticClass:"p-t",attrs:{label:"邮箱找回",name:"email"}}):t._e()],1),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-at-outline",placeholder:"请输入注册时绑定的邮箱号码"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 发送邮件 ")])],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(32564),{data:function(){return{regTab:"email",sendResult:!1,loading:!1,form:{email:"",redirect:window.location.protocol+"//"+window.location.host+"/reg_email/user/resetPasswordByLink"},rule:{email:[{required:!0,message:"请填写邮箱",trigger:"blur"}]}}},created:function(){},methods:{handleClick:function(){switch(this.regTab){case"mobile":this.$xyutil.navigateTo("/reg_mobile/user/resetPassword");break;case"email":this.$xyutil.navigateTo("/reg_email/user/resetPasswordSend");break}},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_email/user/sendResetLink",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.sendResult=!0):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"dad48b72",null),u=c.exports},63635:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"content p-t-md"},[a("el-steps",{attrs:{active:t.active,"align-left":""}},[a("el-step",{attrs:{title:"登录密码",description:""}}),a("el-step",{attrs:{title:"验证新手机",description:""}}),a("el-step",{attrs:{title:"绑定成功",description:""}})],1),a("div",{staticClass:"step-tabs"},[1==t.active?a("el-form",{ref:"formVerifyPassword",attrs:{"label-position":"left","label-width":"0px"}},[a("div",{staticClass:"m-b-md ts-18 tw4"},[t._v("请输入您的登录密码")]),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.verifyPassword}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){return t.$router.back()}}},[t._v("暂不修改")])],1)],1):t._e(),2==t.active?a("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"mobile",label:"请输入手机号"}},[a("el-input",{attrs:{size:"medium",type:"text",prefix:"ios-at-outline",placeholder:"请输入手机号"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}},[a("template",{slot:"prepend"},[a("vue-country-code",{attrs:{defaultCountry:"CN",enabledCountryCode:""},on:{onSelect:t.onCountrySelect}})],1)],2)],1),a("el-form-item",{attrs:{prop:"verify",label:"验证码"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}}),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",size:"medium"}},[a("xy-send-verify",{attrs:{url:"/v1/sms/verify/send",type:"手机号",account:t.form.mobile,title:"手机绑定"},on:{verifysuccess:t.getVerifyToken}})],1)],1)]),t.verifyList.indexOf("email")>=0?a("el-form-item",{attrs:{prop:"emailVerify"}},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.emailVerify,callback:function(e){t.$set(t.form,"emailVerify",e)},expression:"form.emailVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"手机绑定"},on:{verifysuccess:t.getEmailVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("gauth")>=0?a("el-form-item",{attrs:{prop:"gauth"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:t.form.gauth,callback:function(e){t.$set(t.form,"gauth",e)},expression:"form.gauth"}})],1):t._e(),t.verifyList.indexOf("password")>=0?a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 确定 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),3==t.active?a("div",[t._m(0),a("div",{staticClass:"m-t-lg"},[a("router-link",{attrs:{to:"/user/login"}},[a("el-button",{staticClass:"primary-linear",attrs:{size:"small",type:"primary",round:""}},[t._v("重新登录")])],1)],1)]):t._e()],1)],1)]),a("div",[a("el-alert",{attrs:{type:"primary"}},[a("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),a("span",[t._v("收不到短信验证码？")])]),a("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。"),a("br"),t._v(" 2、请核实手机是否已欠费停机，或者屏蔽了系统短信。"),a("br"),t._v(" 3、如果手机已丢失或停用， 请选择其他验证方式 。"),a("br"),t._v(" 4、您也可以尝试将SIM卡移动到另一部手机，然后重试。"),a("br")])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"xyicon xyicon-check3 ts-30 m-r-sm",staticStyle:{color:"#4AC711"}}),a("span",{staticClass:"ts-20 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("绑定手机号成功。")])])}],s=a(16198),o=(a(68309),a(32564),a(35666),a(39765)),n=a(60222),l=a.n(n),c={mixins:[o["default"]],components:{VueCountryCode:l()},data:function(){return{active:1,verifyList:[],loading:!1,form:{countryCode:"+86",mobile:"",password:"",verify:"",token:"",email:"",emailVerify:"",emailToken:"",gauth:""},rule:{mobile:[{required:!0,message:"请填写手机号",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{verifyPassword:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.doVerifyPassword();case 2:a=e.sent,"200"==a.code&&t.active++;case 4:case"end":return e.stop()}}),e)})))()},onCountrySelect:function(t){t.name,t.iso2;var e=t.dialCode;this.form.countryCode="+"+e},getVerifyToken:function(t){this.form.token=t.token},getEmailVerifyToken:function(){this.form.emailToken=res.token},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/reg_mobile/user/bind",method:"get"});case 2:a=e.sent,"200"==a.code?t.verifyList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_mobile/user/bind",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},u=c,d=a(1001),m=(0,d.Z)(u,i,r,!1,null,"1620cd78",null),p=m.exports},11349:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"content p-t-md"},[a("el-steps",{attrs:{active:t.active,"align-left":""}},[a("el-step",{attrs:{title:"登录密码",description:""}}),a("el-step",{attrs:{title:"验证旧手机号",description:""}}),a("el-step",{attrs:{title:"验证新手机",description:""}}),a("el-step",{attrs:{title:"绑定成功",description:""}})],1),a("div",{staticClass:"step-tabs"},[1==t.active?a("el-form",{ref:"formVerifyPassword",attrs:{"label-position":"left","label-width":"0px"}},[a("div",{staticClass:"m-b-md ts-18 tw4"},[t._v("请输入您的登录密码")]),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.verifyPassword}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){return t.$router.back()}}},[t._v("暂不修改")])],1)],1):t._e(),2==t.active?a("el-form",{ref:"formVerfyMobile",attrs:{"label-position":"left","label-width":"140px",model:t.formVerfyMobile}},[a("div",{staticClass:"m-b-md ts-12 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("为确认您本人操作，需要您进行手机验证码验证身份。")]),a("el-form-item",{attrs:{prop:"mobile",label:"请输入旧手机号"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",type:"text",prefix:"ios-at-outline",disabled:"",placeholder:"请输入旧手机号"},model:{value:t.formVerfyMobile.mobile,callback:function(e){t.$set(t.formVerfyMobile,"mobile",e)},expression:"formVerfyMobile.mobile"}},[a("template",{slot:"prepend"},[a("vue-country-code",{attrs:{defaultCountry:"CN",enabledCountryCode:""},on:{onSelect:t.onVerifyCountrySelect}})],1)],2),a("div",{staticClass:"text-gray m-l-md"},[t._v(" 手机号码不可用？点此提交工单 ")])],1)]),a("el-form-item",{attrs:{prop:"verify",label:"验证码"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.formVerfyMobile.verify,callback:function(e){t.$set(t.formVerfyMobile,"verify",e)},expression:"formVerfyMobile.verify"}}),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",size:"medium"}},[a("xy-send-verify",{attrs:{url:"/v1/sms/verify/send",type:"手机号",verifyUser:1,account:t.formVerfyMobile.mobile,title:"手机换绑"},on:{verifysuccess:t.getVerifyTokenVerfyMobile}})],1)],1)]),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.verifyMobile()}}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),3==t.active?a("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"mobile",label:"请输入新手机号"}},[a("el-input",{attrs:{size:"medium",type:"text",prefix:"ios-at-outline",placeholder:"请输入新手机号"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}},[a("template",{slot:"prepend"},[a("vue-country-code",{attrs:{defaultCountry:"CN",enabledCountryCode:""},on:{onSelect:t.onCountrySelect}})],1)],2)],1),a("el-form-item",{attrs:{prop:"verify",label:"验证码"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}}),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",size:"medium"}},[a("xy-send-verify",{attrs:{url:"/v1/sms/verify/send",type:"手机号",account:"form.mobile",title:"手机换绑"},on:{verifysuccess:t.getVerifyToken}})],1)],1)]),t.verifyList.indexOf("email")>=0?a("el-form-item",{attrs:{prop:"emailVerify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邮箱验证码"},model:{value:t.form.emailVerify,callback:function(e){t.$set(t.form,"emailVerify",e)},expression:"form.emailVerify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"手机换绑"},on:{verifysuccess:t.getEmailVerifyToken},slot:"append"})],1)],1):t._e(),t.verifyList.indexOf("gauth")>=0?a("el-form-item",{attrs:{prop:"gauth"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入谷歌验证码"},model:{value:t.form.gauth,callback:function(e){t.$set(t.form,"gauth",e)},expression:"form.gauth"}})],1):t._e(),t.verifyList.indexOf("password")>=0?a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入登录密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 确定 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),4==t.active?a("div",[t._m(0),a("div",{staticClass:"m-t-lg"},[a("router-link",{attrs:{to:"/user/login"}},[a("el-button",{staticClass:"primary-linear",attrs:{size:"small",type:"primary",round:""}},[t._v("重新登录")])],1)],1)]):t._e()],1)],1)]),a("div",[a("el-alert",{attrs:{type:"primary"}},[a("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),a("span",[t._v("收不到短信验证码？")])]),a("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。"),a("br"),t._v(" 2、请核实手机是否已欠费停机，或者屏蔽了系统短信。"),a("br"),t._v(" 3、如果手机已丢失或停用， 请选择其他验证方式 。"),a("br"),t._v(" 4、您也可以尝试将SIM卡移动到另一部手机，然后重试。"),a("br")])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"xyicon xyicon-check3 ts-30 m-r-sm",staticStyle:{color:"#4AC711"}}),a("span",{staticClass:"ts-20 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("换绑手机号成功。")])])}],s=a(16198),o=(a(68309),a(32564),a(35666),a(39765)),n=a(60222),l=a.n(n),c={mixins:[o["default"]],components:{VueCountryCode:l()},data:function(){var t;return{active:1,verifyList:[],loading:!1,formVerfyMobile:{countryCode:null===(t=this.$store.state.user.userInfo.mobile)||void 0===t?void 0:t.identityGroup,mobile:this.$store.state.user.userInfo.mobile.identifier,verify:"",token:""},form:{countryCode:"+86",mobile:"",password:"",verify:"",token:"",email:"",emailVerify:"",emailToken:"",gauth:""},rule:{mobile:[{required:!0,message:"请填写新手机号",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{verifyPassword:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.doVerifyPassword();case 2:a=e.sent,"200"==a.code&&t.active++;case 4:case"end":return e.stop()}}),e)})))()},getVerifyTokenVerfyMobile:function(t){this.formVerfyMobile.token=t.token},onVerifyCountrySelect:function(t){t.name,t.iso2;var e=t.dialCode;this.formVerfyMobile.countryCode="+"+e},verifyMobile:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_mobile/user/verify",data:t.formVerfyMobile,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},onCountrySelect:function(t){t.name,t.iso2;var e=t.dialCode;this.form.countryCode="+"+e},getVerifyToken:function(t){this.form.token=t.token},getEmailVerifyToken:function(){this.form.emailToken=res.token},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/reg_mobile/user/change",method:"get"});case 2:a=e.sent,"200"==a.code?t.verifyList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_mobile/user/change",data:t.form,method:"put"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},u=c,d=a(1001),m=(0,d.Z)(u,i,r,!1,null,"2e777740",null),p=m.exports},13573:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"content p-t-md"},[a("el-steps",{attrs:{active:t.active,"align-left":""}},[a("el-step",{attrs:{title:"验证手机号",description:""}}),a("el-step",{attrs:{title:"输入新密码",description:""}}),a("el-step",{attrs:{title:"修改成功",description:""}})],1),a("div",{staticClass:"step-tabs"},[1==t.active?a("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("div",{staticClass:"m-b-md ts-12 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("为确认您本人操作，需要您进行手机验证码验证身份。")]),a("el-form-item",{attrs:{prop:"mobile",label:"手机号"}},[a("el-input",{attrs:{disabled:"",size:"medium",type:"text",prefix:"ios-at-outline",placeholder:t.form.mobile?"手机号":"未绑定手机号"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}},[a("template",{slot:"prepend"},[a("vue-country-code",{attrs:{defaultCountry:"CN",enabledCountryCode:""},on:{onSelect:t.onCountrySelect}})],1)],2)],1),a("el-form-item",{attrs:{prop:"verify",label:"验证码"}},[a("div",{staticClass:"flex"},[a("el-input",{attrs:{size:"medium",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入手机验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}}),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",size:"medium"}},[a("xy-send-verify",{attrs:{url:"/v1/sms/verify/send",type:"手机号",account:t.form.mobile,title:"修改密码"},on:{verifysuccess:t.getVerifyToken}})],1)],1)]),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.goStep2}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){return t.$router.back()}}},[t._v("暂不修改")])],1)],1):t._e(),2==t.active?a("el-form",{ref:"formVerifyPassword",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("div",{staticClass:"m-b-md ts-18 tw4"},[t._v("请输入您的登录密码")]),a("el-form-item",{attrs:{prop:"newPassword",label:"输入新的密码"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"输入新的密码"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),a("el-form-item",{attrs:{prop:"rePassword",label:"再次输入"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"再次输入"},model:{value:t.form.rePassword,callback:function(e){t.$set(t.form,"rePassword",e)},expression:"form.rePassword"}})],1),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),3==t.active?a("div",[t._m(0),a("div",{staticClass:"m-t-lg"},[a("router-link",{attrs:{to:"/user/login"}},[a("el-button",{staticClass:"primary-linear",attrs:{size:"small",type:"primary",round:""}},[t._v("重新登录")])],1)],1)]):t._e()],1)],1)]),a("div",[a("el-alert",{attrs:{type:"primary"}},[a("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),a("span",[t._v("收不到短信验证码？")])]),a("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。"),a("br"),t._v(" 2、请核实手机是否已欠费停机，或者屏蔽了系统短信。"),a("br"),t._v(" 3、如果手机已丢失或停用， 请选择其他验证方式 。"),a("br"),t._v(" 4、您也可以尝试将SIM卡移动到另一部手机，然后重试。"),a("br")])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"xyicon xyicon-check3 ts-30 m-r-sm",staticStyle:{color:"#4AC711"}}),a("span",{staticClass:"ts-20 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("修改登录密码成功，请您牢记密码。")])])}],s=a(16198),o=(a(35666),a(68309),a(32564),a(60222)),n=a.n(o),l={components:{VueCountryCode:n()},data:function(){var t,e;return{active:1,loading:!1,form:{countryCode:null===(t=this.$store.state.user.userInfo.mobile)||void 0===t?void 0:t.identityGroup,mobile:null===(e=this.$store.state.user.userInfo.mobile)||void 0===e?void 0:e.identifier,verify:"",token:"",newPassword:"",rePassword:""},rule:{mobile:[{required:!0,message:"请填写手机号",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],rePassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){var t;null!==(t=this.$store.state.user.userInfo.mobile)&&void 0!==t&&t.identifier||this.$xyutil.showToast({title:"未绑定手机",icon:"loading",duration:3e3})},methods:{goStep2:function(){this.form.mobile&&this.form.verify&&this.form.token?this.active++:this.$xyutil.showToast({title:"验证失败",icon:"loading",duration:3e3})},onCountrySelect:function(t){t.name,t.iso2;var e=t.dialCode;this.form.countryCode="+"+e},getVerifyToken:function(t){this.form.token=t},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_mobile/user/restPassword",data:t.form,method:"put"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},c=l,u=a(1001),d=(0,u.Z)(c,i,r,!1,null,"c7ad93ea",null),m=d.exports},71906:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"5%","padding-bottom":"100px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box",attrs:{xs:1,sm:1,md:14,lg:14}},[a("img",{attrs:{src:t.$store.state.app.loginPic,width:"600"}})]),a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title text-left"},[t._v(" 手机验证码登录 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.ruleLogin}},[a("div",{staticClass:"actions flex m-b-sm"},[a("div"),a("div",[a("router-link",{attrs:{to:"/user/register"}},[t._v("免费注册>")])],1)]),a("el-form-item",{attrs:{prop:"mobile"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-person-outline",placeholder:"请输入您的手机号码"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}},[a("template",{slot:"prepend"},[a("vue-country-code",{attrs:{defaultCountry:"CN",enabledCountryCode:""},on:{onSelect:t.onCountrySelect}})],1)],2)],1),a("div",{staticClass:"flex flex-alignCenter"},[a("el-form-item",{staticClass:"flex-1",attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit.apply(null,arguments)}},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}})],1),a("xy-send-verify",{staticClass:"send-verity-button",attrs:{url:"/v1/sms/verify/send",type:"手机号",account:t.form.mobile,title:"用户登录"},on:{verifysuccess:t.getVerifyToken}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.form.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(" 登录 ")]),a("div",{staticClass:"actions flex m-t"},[a("div",[a("router-link",{attrs:{to:"/user/login"}},[t._v(" 使用邮箱地址或手机号登录 > ")])],1),a("div",[a("el-checkbox",{model:{value:t.form.rememberLogin,callback:function(e){t.$set(t.form,"rememberLogin",e)},expression:"form.rememberLogin"}},[t._v("记住密码")])],1)])],1),a("div",{staticClass:"bottom flex space-between flex-alignCenter"},[a("div",{staticClass:"other-login"},[t._v(" 其他登录方式 "),a("span",{staticClass:"m-l-md m-r-md"},[t._v("|")]),a("span",[a("span",{staticClass:"item",on:{click:function(e){t.qrloginShow=!0}}},[a("a",[a("i",{staticClass:"xyicon xyicon-wexin"})])]),a("span",{staticClass:"item"},[a("a",[a("i",{staticClass:"xyicon xyicon-qq"})])])])]),a("div",[a("router-link",{attrs:{to:"/user/resetPassword"}},[t._v(" 忘记密码？ ")])],1)]),a("div",{staticClass:"qrlogin-left"},[a("span",{staticClass:"xyicon xyicon-privacy"}),t._v(" 扫码登录更安全 ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.qrloginShow,expression:"!qrloginShow"}],staticClass:"qrlogin",on:{click:function(e){t.qrloginShow=!0}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.qrloginShow,expression:"qrloginShow"}],staticClass:"qrlogin-modal"},[a("div",{staticClass:"flex space-between m-b"},[a("div",{staticClass:"ts-18"},[t._v(" 登录 ")]),a("div",[a("span",{staticClass:"cursor-pointer text-gray",on:{click:function(e){t.qrloginShow=!1}}},[t._v("账号密码登录")])])]),a("qrlogin",{staticClass:"text-center",attrs:{qrloginShow:t.qrloginShow,type:t.wxapp},on:{success:t.qrsuccess}})],1)],1)],1)],1)]),a("xy-footer"),a("xy-safety-verify",{ref:"sv",on:{"verify-request":t.handleSubmit},model:{value:t.verifyData,callback:function(e){t.verifyData=e},expression:"verifyData"}})],1)},r=[],s=a(16198),o=(a(35666),a(68309),a(32564),a(97913)),n=a(60222),l=a.n(n),c={components:{qrlogin:o.Z,VueCountryCode:l()},data:function(){return{isDemo:!1,qrloginShow:!1,verifyData:"",form:{rememberLogin:!1,loading:!1,countryCode:"+86",moblie:"",verify:"",token:""},ruleLogin:{mobile:[{required:!0,message:"请填写账号",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"},{type:"string",min:6,message:"验证码为6位",trigger:"blur"}]}}},created:function(){},methods:{qrsuccess:function(){this.$xyutil.switchTab({url:"/"})},onCountrySelect:function(t){t.name,t.iso2;var e=t.dialCode;this.form.countryCode="+"+e},getVerifyToken:function(t){this.form.token=t.token},handleSubmit:function(){var t=(0,s.Z)(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.form,this.verifyData&&(e._verify=this.verifyData),this.form.loading=!0,a=this,setTimeout((function(){a.form.loading=!1}),5e3),t.next=7,this.$xyutil.request({url:"/v1/reg_mobile/user/login",data:e,method:"post"});case 7:if(i=t.sent,200!=i.code){t.next=17;break}this.$store.commit("user/setToken",i.data.token),this.$store.commit("user/setUserInfo",i.data.userInfo),this.$refs.sv.close(),this.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),this.verifyData="",this.$xyutil.switchTab({url:"/my"}),t.next=23;break;case 17:if(401003!=i.code){t.next=22;break}return this.$refs.sv.open(i.data.verifyList),t.abrupt("return");case 22:this.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 23:this.form.loading=!1;case 24:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},u=c,d=a(1001),m=(0,d.Z)(u,i,r,!1,null,"5a41d898",null),p=m.exports},31785:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"mobile"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-at-outline",placeholder:"请输入手机号"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}},[a("template",{slot:"prepend"},[a("vue-country-code",{attrs:{defaultCountry:"CN",enabledCountryCode:""},on:{onSelect:t.onCountrySelect}})],1)],2)],1),a("el-form-item",{attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",account:t.form.mobile,title:"用户注册"},on:{verifysuccess:t.getVerifyToken},slot:"append"})],1)],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入6-18位密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t.$store.state.app.siteInfo.regInvite>0?a("el-form-item",{attrs:{prop:"inviteCode"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-lock-outline",placeholder:"请输入邀请码"+t.inviteSuffix},model:{value:t.form.inviteCode,callback:function(e){t.$set(t.form,"inviteCode",e)},expression:"form.inviteCode"}})],1):t._e(),a("div",{staticClass:"agreement"},[a("el-checkbox",{model:{value:t.form.agreement,callback:function(e){t.$set(t.form,"agreement",e)},expression:"form.agreement"}},[t._v("我已阅读并同意")]),a("router-link",{attrs:{to:"/agreement/用户协议"}},[t._v("《"+t._s(t.$store.state.app.siteInfo.title)+"用户协议》")]),t._v("和 "),a("router-link",{attrs:{to:"/agreement/隐私政策"}},[t._v("《"+t._s(t.$store.state.app.siteInfo.title)+"隐私政策》")])],1),a("el-button",{staticClass:"full submit-btn",attrs:{disabled:!t.form.agreement,size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 注册 ")]),a("div",{staticClass:"actions flex"},[a("div"),a("div",[t._v(" 已有账号？ "),a("router-link",{attrs:{to:"/user/login"}},[t._v("登录")])],1)])],1)},r=[],s=a(16198),o=(a(35666),a(68309),a(32564),a(60222)),n=a.n(o),l={components:{VueCountryCode:n()},data:function(){return{loading:!1,inviteSuffix:"",form:{countryCode:"+86",mobile:"",password:"",rePassword:"",verify:"",token:"",inviteCode:"",agreement:!1},rule:{mobile:[{required:!0,message:"请填写手机号",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){switch(this.$store.state.app.siteInfo.regInvite){case 1:this.inviteSuffix="（可选）";break;case 2:this.inviteSuffix="（必填）";break}this.form.inviteCode=this.$store.state.app.inviteCode},methods:{onCountrySelect:function(t){t.name,t.iso2;var e=t.dialCode;this.form.countryCode="+"+e},getVerifyToken:function(t){this.form.token=t.token},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("app/setData",{key:"inviteCode",value:t.form.inviteCode}),t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=6,t.$xyutil.request({url:"/v1/reg_mobile/user/register",data:t.form,method:"post"});case 6:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$emit("reg-success")):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()}}},c=l,u=a(1001),d=(0,u.Z)(c,i,r,!1,null,"cb2a0540",null),m=d.exports},23046:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"100px","padding-bottom":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box",attrs:{xs:1,sm:1,md:14,lg:14}},[a("img",{attrs:{src:t.$store.state.app.loginPic,width:"600"}})]),a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 忘记密码 ")]),a("el-tabs",{attrs:{stretch:""},on:{"tab-click":t.handleClick},model:{value:t.regTab,callback:function(e){t.regTab=e},expression:"regTab"}},[t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0?a("el-tab-pane",{staticClass:"p-t",attrs:{label:"手机号码",name:"mobile"}}):t._e(),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")>=0?a("el-tab-pane",{staticClass:"p-t",attrs:{label:"",name:"email"}}):t._e()],1),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"mobile"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-at-outline",placeholder:"手机号"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}},[a("template",{slot:"prepend"},[a("vue-country-code",{attrs:{defaultCountry:"CN",enabledCountryCode:""},on:{onSelect:t.onCountrySelect}})],1)],2)],1),a("el-form-item",{attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-lock-outline",placeholder:"验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}},[a("xy-send-verify",{attrs:{slot:"append",url:"/v1/sms/verify/send",type:"手机号",account:t.form.mobile,title:"重置密码"},on:{verifysuccess:t.getVerifyToken},slot:"append"})],1)],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"新密码"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 立即重置 ")])],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(68309),a(32564),a(60222)),n=a.n(o),l={components:{VueCountryCode:n()},data:function(){return{regTab:"mobile",loading:!1,form:{countryCode:"+86",mobile:"",newPassword:"",verify:"",token:""},rule:{mobile:[{required:!0,message:"请填写手机号",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}},created:function(){this.$route.query.account&&(this.form.mobile=this.$route.query.account)},methods:{handleClick:function(){switch(this.regTab){case"mobile":this.$xyutil.navigateTo("/reg_mobile/user/resetPassword");break;case"email":this.$xyutil.navigateTo("/reg_email/user/resetPasswordSend");break}},onCountrySelect:function(t){t.name,t.iso2;var e=t.dialCode;this.form.countryCode="+"+e},getVerifyToken:function(t){this.form.token=t},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_mobile/user/restPassword",data:t.form,method:"put"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$xyutil.navigateTo("/")):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},c=l,u=a(1001),d=(0,u.Z)(c,i,r,!1,null,"281876e4",null),m=d.exports},88615:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"content p-t-md"},[a("el-steps",{attrs:{active:t.active,"align-left":""}},[a("el-step",{attrs:{title:"验证密码",description:""}}),a("el-step",{attrs:{title:"输入新密码",description:""}}),a("el-step",{attrs:{title:"修改成功",description:""}})],1),a("div",{staticClass:"step-tabs"},[1==t.active?a("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"0px"}},[a("div",{staticClass:"m-b-md ts-12 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("请输入您的登录密码:")]),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"输入登录密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.verifyPassword}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){return t.$router.back()}}},[t._v("暂不修改")])],1)],1):t._e(),2==t.active?a("el-form",{ref:"formVerifyPassword",attrs:{"label-position":"left","label-width":"140px",model:t.form,rules:t.rule}},[a("div",{staticClass:"m-b-md ts-18 tw4"},[t._v("请输入您的登录密码")]),a("el-form-item",{attrs:{prop:"newPassword",label:"输入新的密码"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"输入新的密码"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),a("el-form-item",{attrs:{prop:"rePassword",label:"再次输入"}},[a("el-input",{attrs:{size:"medium",type:"password",prefix:"ios-lock-outline",placeholder:"再次输入"},model:{value:t.form.rePassword,callback:function(e){t.$set(t.form,"rePassword",e)},expression:"form.rePassword"}})],1),a("div",{staticClass:"m-t-lg"},[a("el-button",{staticClass:"submit-btn primary-linear m-r",attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("form")}}},[t._v(" 下一步 ")]),a("el-link",{staticClass:"back ts-14",on:{click:function(e){t.active--}}},[t._v("返回上一步")])],1)],1):t._e(),3==t.active?a("div",[t._m(0),a("div",{staticClass:"m-t-lg"},[a("router-link",{attrs:{to:"/user/login"}},[a("el-button",{staticClass:"primary-linear",attrs:{size:"small",type:"primary",round:""}},[t._v("重新登录")])],1)],1)]):t._e()],1)],1)]),a("div",[a("el-alert",{attrs:{type:"primary"}},[a("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),a("span",[t._v("忘记密码？")])]),a("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、请先重置密码，然后重试。"),a("br"),t._v(" 2、您也可以选择其它验证方式修改密码。"),a("br")])])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"xyicon xyicon-check3 ts-30 m-r-sm",staticStyle:{color:"#4AC711"}}),a("span",{staticClass:"ts-20 tw4",staticStyle:{color:"#2A2B2E"}},[t._v("修改登录密码成功，请您牢记密码。")])])}],s=a(16198),o=(a(32564),a(35666),a(39765)),n={mixins:[o["default"]],data:function(){return{active:1,loading:!1,form:{oldPassword:"",newPassword:"",rePassword:""},rule:{oldPassword:[{required:!0,message:"请填写当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],rePassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}},created:function(){},methods:{verifyPassword:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.doVerifyPassword();case 2:a=e.sent,"200"==a.code&&t.active++;case 4:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.form.oldPassword=t.password,t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=6,t.$xyutil.request({url:"/v1/reg_username/user/restPassword",data:t.form,method:"put"});case 6:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.active++):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"1c9249e1",null),d=u.exports},24756:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"flex space-between"},[0==t.manage?a("div",[t.loginTypes.indexOf("qq")>=0?a("i",{staticClass:"xyicon xyicon-qq ts-30 m-r",staticStyle:{color:"rgb(18, 150, 219)"}}):t._e(),t.loginTypes.indexOf("wxmp")>=0?a("i",{staticClass:"xyicon xyicon-weixin ts-30",staticStyle:{color:"rgb(100, 174, 67)"}}):t._e()]):a("div",{staticClass:"flex-1"},[t.loginTypes.indexOf("qq")>=0?a("div",{staticClass:"flex space-between flex-alignCenter m-b"},[a("i",{staticClass:"xyicon xyicon-qq ts-30 m-r",staticStyle:{color:"rgb(18, 150, 219)"}}),a("div",{staticStyle:{width:"80px"}},[t._v("QQ")]),t.hasBind("qq")?a("div",{staticClass:"flex-1 text-gray"},[t._v("已绑定")]):a("div",{staticClass:"flex-1 text-gray"},[t._v("未绑定")]),a("div",[t.hasBind("qq")?a("el-button",{attrs:{size:"medium",type:""},on:{click:function(e){t.unBind(t.hasBindIndex("qq"))}}},[t._v("解绑")]):a("el-button",{staticClass:"primary-linear",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.showDialog("qq")}}},[t._v("绑定")])],1)]):t._e(),t.loginTypes.indexOf("wxmp")>=0?a("div",{staticClass:"flex space-between flex-alignCenter m-b"},[a("i",{staticClass:"xyicon xyicon-weixin ts-30 m-r",staticStyle:{color:"rgb(100, 174, 67)"}}),a("div",{staticStyle:{width:"80px"}},[t._v("微信")]),t.hasBind("wxmp")?a("div",{staticClass:"flex-1 text-gray"},[t._v("已绑定")]):a("div",{staticClass:"flex-1 text-gray"},[t._v("未绑定")]),a("div",[t.hasBind("wxmp")?a("el-button",{attrs:{size:"medium",type:""},on:{click:function(e){t.unBind(t.hasBindIndex("wxmp"))}}},[t._v("解绑")]):a("el-button",{staticClass:"primary-linear",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.showDialog("wx")}}},[t._v("绑定")])],1)]):t._e()]),a("div",{staticClass:"actions"},[t.manage?t._e():a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(e){t.manage=!t.manage}}},[t._v("管理")])],1)]),a("el-dialog",{attrs:{title:"绑定",visible:t.bindDialog,width:"440px"},on:{"update:visible":function(e){t.bindDialog=e}}},[a("div",{staticClass:"m-b-md"},[a("h4",[t._v("绑定第三方账号前请输入您的账号密码以完成验证：")]),a("div",{staticClass:"flex space-between flex-alignCenter"},[a("el-input",{staticStyle:{width:"234px","box-sizing":"border-box"},attrs:{size:"mini",placeholder:"请输入您的"+t.$store.state.app.siteInfo.title+"账户密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t.verifyState?a("div",{staticClass:"ts-12 text-primary"},[t._v("验证成功")]):t._e()],1)]),"wx"==t.bindWhich?[t.qrloginShow?a("qrlogin",{staticClass:"text-center",attrs:{qrloginShow:t.qrloginShow,tip:"请使用微信扫描二维码完成绑定",width:168,bgColor:"#05B9CF",type:"wxmp",cate:1},on:{success:t.qrsuccess}}):t._e()]:t._e(),t.verifyState?t._e():a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.bindDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.doVerifyPassword()}}},[t._v("绑定")])],1)],2)],1)},r=[],s=a(16198),o=(a(35666),a(69826),a(41539),a(34553),a(32564),a(40561),a(97913)),n={props:{redirectBase:"",isPage:!1},components:{qrlogin:o.Z},data:function(){return{manage:!1,loading:!1,loginTypes:["qq","weixin"],myBindList:[],bindDialog:!1,bindWhich:"",verifyState:!1,qrloginShow:!1,password:"",form:{bindType:"login",type:"",code:"",redirect:""}}},created:function(){if($store.state.app.siteInfo.versionFuncsAll.indexOf("third_login")>=0){this.loadData();var t=this.$xyutil.getUrlQuery();if(t["code"]){if(this.form.type=this.$route.params.type,!this.form.type)return void alert("type获取不到值");this.form.code=t["code"],this.handleBind()}}},computed:{},methods:{hasBind:function(t){var e=this.myBindList.find((function(e){return e.identityType==t}));return e},hasBindIndex:function(t){var e=this.myBindList.findIndex((function(e){return e.identityType==t}));return e},doVerifyPassword:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/reg_username/user/verifyPassword",data:{password:t.password},method:"post"});case 5:return i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.verifyState=!0,"wx"==t.bindWhich?t.qrloginShow=!0:t.getAuthUrl(t.bindWhich)):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))()},showDialog:function(t){this.bindDialog=!0,this.bindWhich=t},qrsuccess:function(){this.qrloginShow=!1},getAuthUrl:function(t){window.location.href=this.$xyutil.config.baseDomain()+"/third_login/user/authorization.html?type="+t+"&redirect="+this.getRedirectUrl(t)},getRedirectUrl:function(t){return this.redirectBase?this.redirectBase=t:window.location.protocol+"//"+window.location.host+this.$route.path+"/"+t},handleBind:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.form.redirect=t.getRedirectUrl(t.form.type),t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=6,t.$xyutil.request({url:"/v1/third_login/user/bind",data:t.form,method:"post"});case 6:i=e.sent,"200"==i.code?(t.$store.commit("user/setUserInfo",i.data.userInfo),t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.isPage?t.$router.push({name:"/my"}):t.$emit("success")):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()},unBind:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,i=e,setTimeout((function(){i.loading=!1}),5e3),a.next=5,e.$xyutil.request({url:"/v1/third_login/user/unbind",data:{id:e.myBindList[t].id},method:"delete"});case 5:r=a.sent,"200"==r.code?(e.$xyutil.showToast({title:r.msg,icon:"success",duration:2e3}),e.myBindList=e.myBindList.splice(t,1)):e.$xyutil.showToast({title:r.msg,icon:"loading",duration:3e3}),e.loading=!1;case 8:case"end":return a.stop()}}),a)})))()},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/third_login/user/my",method:"get"});case 5:i=e.sent,"200"==i.code?(t.myBindList=i.data.dataList,t.loginTypes=i.data.loginTypes):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"94448af2",null),d=u.exports},27562:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"100px","padding-bottom":"80px"}},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticClass:"left-box",attrs:{xs:1,sm:1,md:14,lg:14}},[a("img",{attrs:{src:t.$store.state.app.loginPic,width:"600"}})]),"choose"==t.show?a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"success-box text-center"},[a("h4",{staticClass:"title"},[t._v(" 用户登录 ")]),a("p",[t._v(" 您的"+t._s(t.form.type)+"未绑定"+t._s(t.$store.state.app.siteInfo.title)+"账户，请绑定后完成登录 ")]),a("el-button",{staticClass:"full cert",attrs:{size:"large",type:"primary"},on:{click:function(e){t.show="mobileVerify"}}},[t._v(" 绑定已有账户 ")]),a("el-button",{staticClass:"full skip",attrs:{size:"large"},on:{click:function(e){return t.handleRegister()}}},[t._v(" 创建新账户 ")])],1),a("div",{staticClass:"bottom flex space-between flex-alignCenter"})]):t._e(),"mobileVerify"==t.show?a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 用户绑定并登录 ")]),a("div",{staticClass:"subtitle"},[t._v(" 还没有注册吗？ "),a("router-link",{attrs:{to:"/user/register"}},[t._v(" 请点击这里 ")])],1),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-person-outline",placeholder:"请输入您的手机号码"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("div",{staticClass:"flex flex-alignCenter"},[a("el-form-item",{staticClass:"flex-1",attrs:{prop:"verify"}},[a("el-input",{attrs:{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",placeholder:"请输入验证码"},model:{value:t.form.verify,callback:function(e){t.$set(t.form,"verify",e)},expression:"form.verify"}})],1),a("xy-send-verify",{staticClass:"send-verity-button",attrs:{slot1:"append",url:"/v1/sms/verify/send",type:"手机号",account:t.form.account,title:"用户登录"},on:{verifysuccess:t.getVerifyToken}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.form.loading,type:"primary"},on:{click:function(e){return t.handleBind("mobildVerify")}}},[t._v(" 绑定 ")]),a("div",{staticClass:"actions flex m-t"},[a("div",{on:{click:function(e){t.show="password"}}},[t._v(" 使用账号密码绑定 ")]),a("div",[a("router-link",{attrs:{to:"/user/resetPassword"}},[t._v(" 忘记密码？ ")])],1)])],1),a("div",{staticClass:"bottom flex space-between flex-alignCenter",on:{click:function(e){t.show="choose"}}})],1):t._e(),"password"==t.show?a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:10,lg:10}},[a("div",{staticClass:"title"},[t._v(" 用户绑定并登录 ")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-person-outline",placeholder:"请输入您的邮箱地址或手机号码"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{size:"large",type:"password",prefix:"ios-lock-outline",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.form.loading,type:"primary"},on:{click:function(e){return t.handleBind("password")}}},[t._v(" 绑定 ")]),a("div",{staticClass:"actions flex m-t"},[a("div",{on:{click:function(e){t.show="mobileVerify"}}},[t._v(" 使用手机验证码绑定 ")]),a("div",[a("router-link",{attrs:{to:"/reg_mobile/user/resetPassword"}},[t._v(" 忘记密码？ ")])],1)])],1),a("div",{staticClass:"bottom flex space-between flex-alignCenter",on:{click:function(e){t.show="choose"}}})],1):t._e()],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(32564),{data:function(){return{show:"choose",form:{loading:!1,type:"",code:"",redirect:"",bindType:"",account:"",password:"",verify:"",token:""},rule:{account:[{required:!0,message:"请填写账号",trigger:"blur"}]}}},created:function(){var t=this.$xyutil.getUrlQuery();this.form.type=this.$route.params.type,this.form.code=t["code"],this.form.redirect=window.location.protocol+"//"+window.location.host+"/third_login/user/callback/"+this.form.type},methods:{getVerifyToken:function(t){this.form.token=t},handleRegister:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/third_login/user/register",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$store.commit("user/setToken",i.data.token),t.$store.commit("user/setUserInfo",i.data.userInfo),t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$xyutil.navigateTo("/my")):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},handleBind:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.form.bindType=t,e.loading=!0,i=e,setTimeout((function(){i.loading=!1}),5e3),a.next=6,e.$xyutil.request({url:"/v1/third_login/user/bind",data:e.form,method:"post"});case 6:r=a.sent,"200"==r.code?(e.$store.commit("user/setToken",r.data.token),e.$store.commit("user/setUserInfo",r.data.userInfo),e.$xyutil.showToast({title:r.msg,icon:"success",duration:2e3}),e.$xyutil.navigateTo("/my")):e.$xyutil.showToast({title:r.msg,icon:"loading",duration:3e3}),e.loading=!1;case 9:case"end":return a.stop()}}),a)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"244e6975",null),u=c.exports},87478:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.publicAttrCates,(function(e,i){return a("div",{key:i},[a("div",{staticClass:"title tw4 ts-16 m-b-xs m-t"},[t._v(t._s(e.title))]),a("div",{staticClass:"box bg-white"},[a("el-form",{attrs:{model:t.extendInfo[e.name],"label-width":"140px","label-suffix":":",size:"medium"}},t._l(e.attrList,(function(i,r){return a("div",{key:r},[a("el-form-item",{attrs:{label:i.title}},["text"==i.type?[a("el-input",{attrs:{size:"medium",placeholder:i.placeholder},model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}})]:"select"==i.type?[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},t._l(i.options,(function(e,i){return a("el-option",{key:i,attrs:{label:e.title,value:t.getOptionValue(e)}})})),1)]:"cascader2"==i.type?[a("xy-cascader2",{attrs:{options:i.options},model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}})]:"radio"==i.type?[a("el-radio-group",{model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},t._l(i.options,(function(e,i){return a("el-radio",{key:i,attrs:{label:t.getOptionValue(e)}},[t._v(" "+t._s(e.title)+" ")])})),1)]:"checkbox"==i.type?[a("el-checkbox-group",{model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},t._l(i.options,(function(e,i){return a("el-checkbox",{key:i,attrs:{label:t.getOptionValue(e)}},[t._v(" "+t._s(e.title)+" ")])})),1)]:t._e()],2),i.tip?a("div",{staticClass:"text-gray ts-12 m-l-md"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs"}),a("span",[t._v(t._s(i.tip))])]):t._e()],1)})),0),a("div",{staticClass:"p-b",staticStyle:{width:"100%"}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(a){return t.saveInfo(e.name)}}},[t._v("保存设置")])],1)],1)])})),t.userTypeList.length>0?a("div",[a("div",{staticClass:"title tw4 ts-16 m-b-xs m-t"},[t._v("联系信息")]),a("div",{staticClass:"box bg-white"},[a("div",[a("el-form",{attrs:{"label-width":"140px","label-suffix":":"}},[a("el-form-item",{attrs:{label:"身份"}},[a("el-radio-group",{model:{value:t.userType,callback:function(e){t.userType=e},expression:"userType"}},t._l(t.userTypeList,(function(e,i){return a("el-radio",{key:i,attrs:{label:e.id}},[t._v(" "+t._s(e.title)+" ")])})),1)],1)],1)],1),t._l(t.userTypeList,(function(e,i){return a("div",{key:i},[e.id==t.userType?[t._l(e.attrCates,(function(e,i){return a("div",{key:i},[a("el-form",{attrs:{model:t.extendInfo[e.name],"label-width":"140px","label-suffix":":"}},t._l(e.attrList,(function(i,r){return a("div",{key:r},[a("el-form-item",{attrs:{label:i.title}},["text"==i.type?[a("el-input",{attrs:{size:"medium",placeholder:i.placeholder},model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}})]:"select"==i.type?[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},t._l(i.options,(function(e,i){return a("el-option",{key:i,attrs:{label:e.title,value:t.getOptionValue(e)}})})),1)]:"radio"==i.type?[a("el-radio-group",{model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},t._l(i.options,(function(e,i){return a("el-radio",{key:i,attrs:{label:t.getOptionValue(e)}},[t._v(" "+t._s(e.title)+" ")])})),1)]:"checkbox"==i.type?[a("el-checkbox-group",{model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}},t._l(i.options,(function(e,i){return a("el-checkbox",{key:i,attrs:{label:t.getOptionValue(e)}},[t._v(" "+t._s(e.title)+" ")])})),1)]:"region"==i.type?[a("xy-cascader",{attrs:{init:t.regionInit},model:{value:t.extendInfo[e.name][i.name],callback:function(a){t.$set(t.extendInfo[e.name],i.name,a)},expression:"extendInfo[item.name][item1.name]"}})]:t._e(),i.tip?a("div",{staticClass:"text-gray ts-12"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs"}),a("span",[t._v(t._s(i.tip))])]):t._e()],2)],1)})),0)],1)})),a("div",{staticClass:"p-b m-r-lg",staticStyle:{width:"100%"}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(a){return t.saveTypeInfo(e.attrCateNames)}}},[t._v("保存设置")])],1)]:t._e()],2)}))],2)]):t._e()],2)},r=[],s=a(16198),o=(a(35666),a(74916),a(23123),a(41539),a(54747),{name:"editExtendInfo",data:function(){return{loading:!1,extendInfo:{},publicAttrCates:[],userTypeList:[],userType:1,regionInit:{showInput:!1,labelField:"name",valueField:"name",deep:1,maxLevel:3,nodeKey:"id",lazy:!0,action:"/v1/region/region/lists"}}},created:function(){this.loadData()},watch:{"extendInfo.own.country":{handler:function(t){this.regionInit.showInput="中国"!=t},deep:!0,immediate:!0},"extendInfo.org.country":{handler:function(t){this.regionInit.showInput="中国"!=t},deep:!0,immediate:!0}},methods:{getOptionValue:function(t){return null!==t&&void 0!==t&&t.value?null===t||void 0===t?void 0:t.value:null===t||void 0===t?void 0:t.title},saveTypeInfo:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=t.split(","),i={},t.forEach((function(t){i[t]=e.extendInfo[t]})),a.next=5,e.$xyutil.request({url:"/v1/user/user/extendInfo",data:{userType:e.usertype,extendInfo:i},method:"put"});case 5:r=a.sent,200==r.code?e.$xyutil.showToast({title:r.msg,icon:"loading",duration:2e3}):e.$xyutil.showToast({title:r.msg,icon:"loading",duration:3e3});case 7:case"end":return a.stop()}}),a)})))()},saveInfo:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i={},i[t]=e.extendInfo[t],a.next=4,e.$xyutil.request({url:"/v1/user/user/extendInfo",data:{extendInfo:i},method:"put"});case 4:r=a.sent,200==r.code?e.$xyutil.showToast({title:r.msg,icon:"loading",duration:2e3}):e.$xyutil.showToast({title:r.msg,icon:"loading",duration:3e3});case 6:case"end":return a.stop()}}),a)})))()},loadData:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$xyutil.request({url:"/v1/user/user/extendInfo",data:{},method:"get"});case 2:a=t.sent,200==a.code?(e.userTypeList=a.data.userTypeList,e.publicAttrCates=a.data.publicAttrCates,e.extendInfo=a.data.extendInfo):e.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return t.stop()}}),t)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"630a6a70",null),u=c.exports},3567:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"content p-t-md"},[a("div",{staticClass:"top-tip"},[t._v(" 为了您的帐号安全，在修改账号密码前，您需要先验证登录邮箱或绑定手机号或密码验证。 ")]),a("div",{staticClass:"title"},[t._v(" 选择验证方式: ")]),a("div",{staticClass:"flex flex-wrap"},[t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")>=0?a("div",{staticClass:"choose-box"},[a("div",{staticClass:"title"},[t._v("邮箱验证")]),a("div",{staticClass:"subtitle"},[t._v("我们将发送验证码到您的邮箱进行验证")]),a("router-link",{attrs:{to:"/reg_email/user/editPassword"}},[a("el-button",{staticClass:"primary-linear",attrs:{type:"primary",size:"medium",round:""}},[t._v("立即验证")])],1)],1):t._e(),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0?a("div",{staticClass:"choose-box"},[a("div",{staticClass:"title"},[t._v("手机验证")]),a("div",{staticClass:"subtitle"},[t._v("如手机可以接收短信，可选择此验证方法")]),a("router-link",{attrs:{to:"/reg_mobile/user/editPassword"}},[a("el-button",{staticClass:"primary-linear",attrs:{type:"primary",size:"medium",round:""}},[t._v("立即验证")])],1)],1):t._e(),a("div",{staticClass:"choose-box"},[a("div",{staticClass:"title"},[t._v("密码验证")]),a("div",{staticClass:"subtitle"},[t._v("输入当前密码进行验证")]),a("router-link",{attrs:{to:"/reg_username/user/editPassword"}},[a("el-button",{staticClass:"primary-linear",attrs:{type:"primary",size:"medium",round:""}},[t._v("立即验证")])],1)],1)])])]),a("div",[a("el-alert",{attrs:{type:"primary"}},[a("span",{staticClass:"ts-14",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs text-primary"}),a("span",[t._v("收不到短信验证码？")])]),a("div",{staticClass:"lh-2 ts-12 p-l"},[t._v(" 1、网络通讯异常可能会造成短信丢失，请重新获取或稍后再试。"),a("br"),t._v(" 2、请核实手机是否已欠费停机，或者屏蔽了系统短信。"),a("br"),t._v(" 3、如果手机已丢失或停用， 请选择其他验证方式 。"),a("br"),t._v(" 4、您也可以尝试将SIM卡移动到另一部手机，然后重试。"),a("br")])])],1)])},r=[],s={data:function(){return{}},created:function(){},watch:{},methods:{}},o=s,n=a(1001),l=(0,n.Z)(o,i,r,!1,null,"039e5f7e",null),c=l.exports},36956:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"center-box safe-box m-b"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("最近登录记录")])]),a("div",{staticClass:"content clearfix"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.loginHistory,stripe:""}},[a("el-table-column",{attrs:{prop:"loginTime",label:"时间","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$xyutil.timeFormat(e.row.loginTime)))])]}}])}),a("el-table-column",{attrs:{prop:"clientIp",label:"IP地址","min-width":"180"}}),a("el-table-column",{attrs:{prop:"city",label:"地点"}})],1)],1)])},r=[],s=a(16198),o=(a(35666),{components:{},data:function(){return{loginHistory:[]}},created:function(){this.loadLoginHistory()},methods:{loadLoginHistory:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/user/user/loginHistory",method:"get"});case 2:a=e.sent,200==a.code?t.loginHistory=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"16a1a6e9",null),u=c.exports},73525:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"m-b-sm"},[a("div",{staticClass:"back cursor-pointer ts-13",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"xyicon xyicon-left1"}),t._v(" 返回 ")])]),a("div",{staticClass:"box profile-box"},[a("div",{staticClass:"content flex flex-alignCenter"},[a("div",{staticClass:"avatar-box text-center"},[a("el-avatar",{attrs:{size:108,src:t.$store.state.user.userInfo.avatar}}),a("div",[a("el-link",{on:{click:function(e){t.showEditAvatar=!0}}},[t._v("修改")])],1)],1),a("div",{staticClass:"profile"},[a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("昵称:")]),a("span",{staticClass:"m-r-md text-666"},[t._v(t._s(t.$store.state.user.userInfo.nickname))]),a("span",{staticClass:"title"},[t._v("UID:")]),a("span",{staticClass:"m-r-md text-666"},[t._v(t._s(t.$store.state.user.userInfo.id))]),a("span",{staticClass:"title m-l-lg"},[t._v("注册时间：")]),a("span",[t._v(t._s(t.$xyutil.timeFormat(t.$store.state.user.userInfo.registerTime)))])]),a("div",{staticClass:"item"},[a("span",[t._v("实名认证：")]),t.$store.state.user.userInfo.moduleExtend.user_cert?[1==t.$store.state.user.userInfo.moduleExtend.user_cert.certCate?a("el-tag",{staticClass:"m-r",attrs:{type:"success",effect:"light",size:"small"}},[t._v("个人实名认证")]):t._e(),2==t.$store.state.user.userInfo.moduleExtend.user_cert.certCate?a("el-tag",{staticClass:"m-r",attrs:{type:"success",effect:"light",size:"small"}},[t._v("企业实名认证")]):t._e()]:a("el-tag",{staticClass:"m-r",attrs:{type:"warning",effect:"light",size:"small"}},[t._v("未认证")]),a("router-link",{staticClass:"ts-14",attrs:{to:"/user_cert/cert/index"}},[t._v("详情")])],2),a("div",{staticClass:"item flex flex-alignCenter"},[a("span",{staticClass:"title"},[t._v("当前账户安全级别：")]),a("xy-safety-level",{attrs:{level:t.$store.state.user.userInfo.moduleExtend.user.safetyLevel}})],1),a("div",{staticClass:"tip"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs"}),t.$store.state.user.userInfo.moduleExtend.user.safetyLevel<3?a("span",[t._v(" 当前安全级别较低，建议完善个人资料或者修改登录密码 ")]):t._e(),3==t.$store.state.user.userInfo.moduleExtend.user.safetyLevel?a("span",[t._v(" 当前账号很安全，建议完善个人资料或者定期修改登录密码 ")]):t._e()])])]),a("el-divider",{staticClass:"m-a-0",staticStyle:{background:"#EEEEEE"}}),a("div",{staticClass:"content identity-list"},[a("el-form",{ref:"form",staticStyle:{"max-width":"570px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"登录密码:"}},[a("div",{staticClass:"flex space-between"},[a("el-input",{attrs:{size:"medium",value:"***********"}}),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.$router.push({name:"/user/editPassword"})}}},[t._v("修改")])],1)],1)]),a("el-form-item",{attrs:{label:"绑定手机号:"}},[t.$store.state.user.userInfo.mobile.identifier?a("div",{staticClass:"flex space-between"},[a("el-input",{attrs:{size:"medium",value:t.$store.state.user.userInfo.mobile.identifier}}),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.$router.push({name:"/reg_mobile/user/change"})}}},[t._v("修改")])],1)],1):a("div",{staticClass:"flex space-between"},[a("div",{staticClass:"label"},[t._v("未绑定手机号")]),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:function(e){return t.$router.push({name:"/reg_mobile/user/bind"})}}},[t._v("去绑定")])],1),a("div",{staticClass:"p-r-md"},[a("i",{staticClass:"xyicon xyicon-help-o"})])])]),a("el-form-item",{attrs:{label:"绑定邮箱:"}},[t.$store.state.user.userInfo.email.identifier?a("div",{staticClass:"flex space-between"},[a("el-input",{attrs:{size:"medium",value:t.$store.state.user.userInfo.email.identifier}}),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.$router.push({name:"/reg_email/user/change"})}}},[t._v("修改")])],1)],1):a("div",{staticClass:"flex space-between"},[a("div",{staticClass:"label"},[t._v("未绑定邮箱")]),a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:function(e){return t.$router.push({name:"/reg_email/user/bind"})}}},[t._v("去绑定")])],1),a("div",{staticClass:"p-r-md"},[a("i",{staticClass:"xyicon xyicon-help-o"})])]),a("div",{staticClass:"text-gray ts-12 m-l-md"},[a("i",{staticClass:"xyicon xyicon-help-o m-r-xs"}),a("span",[t._v("手机号和邮箱绑定之后，都可作为登录账号")])])]),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("third_login")>=0?a("el-form-item",{staticClass:"m-t-md",attrs:{label:"第三方账号："}},[a("third-login-bind",{on:{success:t.bindSuccess}})],1):t._e()],1)],1)],1),a("div",[a("div",{staticClass:"content"},[a("edit-extend-info")],1)]),a("el-dialog",{attrs:{title:"修改头像",visible:t.showEditAvatar,width:"800px"},on:{"update:visible":function(e){t.showEditAvatar=e}}},[a("edit-avatar",{attrs:{"show-popup":t.showEditAvatar}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},r=[],s=a(16198),o=(a(35666),a(24756)),n=a(87478),l=a(17353),c={components:{"third-login-bind":o["default"],"edit-extend-info":n["default"],"edit-avatar":l["default"]},data:function(){return{showEditAvatar:!1}},created:function(){},watch:{},methods:{bindSuccess:function(){},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/api",data:{},method:"get"});case 2:a=e.sent,200==a.code||t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},u=c,d=a(1001),m=(0,d.Z)(u,i,r,!1,null,"0fcd79ea",null),p=m.exports},21607:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container",staticStyle:{"padding-top":"15%"}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{staticClass:"login-box bg-white",attrs:{xs:22,sm:12,md:11,lg:11}},[a("div",{staticClass:"title"},[t._v(" 重置登录密码 ")]),a("div",{staticClass:"tip text-center"},[t._v(" 为了您的资金安全，修改安全设置后，24小时内不允许交易、提现和资金划转 ")]),a("el-form",{ref:"formLogin",attrs:{model:t.formLogin,rules:t.ruleLogin}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{size:"large",type:"text",prefix:"ios-person-outline",placeholder:"请输入邮箱或手机号"},model:{value:t.formLogin.account,callback:function(e){t.$set(t.formLogin,"account",e)},expression:"formLogin.account"}})],1),a("el-button",{staticClass:"full submit-btn",attrs:{size:"large",loading:t.formLogin.loading,type:"primary"},on:{click:function(e){return t.handleSubmit("formLogin")}}},[t._v(" 确定 ")])],1)],1)],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),a(32564),{data:function(){return{isDemo:!1,formLogin:{loading:!1,account:""},ruleLogin:{account:[{required:!0,message:"请填写账号",trigger:"blur"}]}}},created:function(){},methods:{handleSubmit:function(){var t=(0,s.Z)(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.formLogin.loading=!0,e=this,setTimeout((function(){e.formLogin.loading=!1}),5e3),t.next=5,this.$xyutil.request({url:"/v1/user/user/checkAccount",data:this.formLogin,method:"get"});case 5:a=t.sent,200==a.code?this.$xyutil.navigateTo({path:a.data.url,query:{account:this.formLogin.account}}):this.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),this.formLogin.loading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"fa9d58dc",null),u=c.exports},39274:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"center-box safe-box m-b"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("安全设置")])]),a("div",{staticClass:"content clearfix"},[a("div",{staticClass:"count-list"},[t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("手机绑定")]),a("span",{staticClass:"tip"},[t._v("短信验证用于登录和修改安全验证")])]),a("div",{staticClass:"fr"},[t.safeSet["mobile"]?t._e():a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/reg_mobile/user/bind"})}}},[t._v("绑定")]),t.safeSet["mobile"]?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/reg_mobile/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")>=0?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("邮箱绑定")]),a("span",{staticClass:"tip"},[t._v("为了您的账户安全，请绑定邮箱")])]),a("div",{staticClass:"fr"},[t.safeSet["email"]?t._e():a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/reg_email/user/bind"})}}},[t._v("绑定")]),t.safeSet["email"]?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/reg_email/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("登录密码")]),a("span",{staticClass:"tip"},[t._v("登录时使用，是您的第一道安全防线")])]),a("div",{staticClass:"fr"},[t.safeSet["password"]&&t.safeSet["password"]["isset"]?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/user/editPassword"})}}},[t._v("修改")]):t._e(),t.safeSet["password"]&&!t.safeSet["password"]["isset"]?a("el-button",{attrs:{type:"primary",size:"medium",plain:""}},[t._v("设置")]):t._e()],1)]),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("paypwd")>=0?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("资金密码")]),a("span",{staticClass:"tip"},[t._v("交易时使用，开启手机验证或者谷歌验证后方可进行设置")])]),a("div",{staticClass:"fr"},[t.safeSet["paypwd"]&&t.safeSet["paypwd"]["isset"]?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/paypwd/change"})}}},[t._v("修改")]):t._e(),t.safeSet["paypwd"]&&!t.safeSet["paypwd"]["isset"]?a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/paypwd/set"})}}},[t._v("设置")]):t._e()],1)]):t._e(),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("gauth")>=0?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("谷歌验证")]),a("span",{staticClass:"tip"},[t._v("为了您的账户安全，请绑定谷歌验证器")])]),a("div",{staticClass:"fr"},[t.safeSet["gauth"]?t._e():a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/gauth/user/bind"})}}},[t._v("绑定")]),t.safeSet["gauth"]?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.$xyutil.navigateTo({url:"/gauth/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),t.$store.state.app.siteInfo.versionFuncsAll.indexOf("gauth")>=0||t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0||t.$store.state.app.siteInfo.versionFuncsAll.indexOf("email")>=0?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("二次验证")]),a("span",{staticClass:"tip"},[t._v("开启后，每次登录均需要通过短信或谷歌验证")])]),a("div",{staticClass:"fr"},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.handle2fa},model:{value:t.mfa,callback:function(e){t.mfa=e},expression:"mfa"}})],1)]):t._e()])]),a("xy-safety-verify",{ref:"sv",on:{"verify-request":t.handle2fa,cancel:t.close},model:{value:t.verifyData,callback:function(e){t.verifyData=e},expression:"verifyData"}})],1)},r=[],s=a(16198),o=(a(35666),{data:function(){return{safeSet:{},verifyData:"",mfa:0}},created:function(){this.loadSafeSet(),this.mfa=this.safeSet["2fa"]},methods:{close:function(){this.mfa=this.safeSet["2fa"]},handle2fa:function(){var t=(0,s.Z)(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={action:e},this.verifyData&&(a._verify=this.verifyData),t.next=4,this.$xyutil.request({url:"/v1/user/user/loginVerifySet",data:a,method:"put"});case 4:if(i=t.sent,200!=i.code){t.next=11;break}this.$refs.sv.close(),this.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),this.verifyData="",t.next=16;break;case 11:if(401003!=i.code){t.next=14;break}return this.$refs.sv.open(i.data.verifyList),t.abrupt("return");case 14:this.mfa=this.safeSet["2fa"],this.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),loadSafeSet:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/user/user/safeSet",method:"get"});case 2:a=e.sent,200==a.code?t.safeSet=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"10ed032b",null),u=c.exports},47010:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title text-center"},[t._v(t._s(t.info.title))]),a("div",{domProps:{innerHTML:t._s(t.info.content)}})])]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),{data:function(){return{id:0,info:{}}},mounted:function(){this.id=this.$route.params.id,this.loadData()},watch:{$route:function(t,e){this.id=this.$route.params.id,this.loadData()}},methods:{loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/user_agreement/agreement/info",data:{title:t.id},method:"get"});case 2:a=e.sent,200==a.code?t.info=a.data.info:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"06f99a0f",null),u=c.exports},99853:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"banner"},[a("div",{staticClass:"container"},[t._m(0),a("el-card",{staticClass:"invite-box m-t-lg p-a-md",attrs:{shadow:"never"}},[a("div",{staticClass:"tw6 ts-22"},[t._v("立刻邀请")]),a("div",{staticClass:"text-gray ts-14 m-t-xs"},[t._v("通过分享您的专属链接邀请您的朋友。您的专属邀请码可用于截屏分享和面对面分享。")]),a("div",{staticClass:"text-gray ts-14 m-t-md"},[t._v("专属邀请码")]),a("div",{staticClass:"tw6 ts-22 m-t-xs"},[a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.info.inviteCode,expression:"info.inviteCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"}],staticClass:"copy"},[t._v(" "+t._s(t.info.inviteCode)+" "),a("i",{staticClass:"el-icon-copy-document ts-16"})])]),a("div",{staticClass:"tw6 ts-22 m-t-md m-b-xs"},[t._v("专属邀请链接")]),a("div",{staticClass:"text-gray ts-14"},[a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.qrcodeUrl,expression:"qrcodeUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"}],staticClass:"copy"},[t._v(" "+t._s(t.qrcodeUrl)+" "),a("i",{staticClass:"el-icon-copy-document ts-14"})])]),a("div",{staticClass:"m-t-lg"},[a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.inviteWords+t.qrcodeUrl,expression:"inviteWords + qrcodeUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"}],staticClass:"copy"},[a("el-button",{staticClass:"invite-btn full",attrs:{tyoe:"primary"}},[t._v("立即邀请")])],1)])]),a("el-card",{staticClass:"invite-box m-t-lg p-a-md",attrs:{shadow:"never"}},t._l(t.invitedList,(function(e,i){return a("div",{key:i},[t._v(" 手机号："+t._s(e.mobile?e.mobile:"***********")+" ")])})),0)],1)])]),a("xy-footer")],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-t-lg"},[a("div",{staticClass:"title ts-30 tw6"},[t._v("邀请好友")]),a("p",{staticClass:"info"},[t._v(" 邀请系统升级，邀请好友共享最高平台惊喜和福利，和好友一起加入吧。 ")])])}],s=a(16198),o=(a(35666),{components:{},data:function(){return{qrcodeUrl:"",inviteWords:"注册有惊喜，大礼送不停，快来一起加入吧，",info:{title:"",inviteCode:"----"},dataList:[],invitedList:[]}},created:function(){this.loadData()},watch:{},methods:{copySuccess:function(){alert("拷贝成功")},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/user_invite/invite/code",method:"get"});case 2:return a=e.sent,200==a.code&&(t.info=a.data.info,t.qrcodeUrl=t.$xyutil.config.baseDomain()+"/user/register?inviteCode="+t.info.inviteCode),e.next=6,t.$xyutil.request({url:"/v1/user_invite/invite/my",method:"get"});case 6:i=e.sent,200==i.code&&(t.invitedList=i.data.dataList);case 8:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"5b71e1c5",null),u=c.exports},9846:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"backOperation"},[a("a",{attrs:{href:"#"},on:{click:function(e){return t.$router.back(-1)}}},[t._v(" 返回上一级 "),a("span",{staticStyle:{display:"inline-block","margin-left":"5px"}},[t._v(">>")])]),a("span"),a("p",[t._v("账户设置 > 充值 > "+t._s(t.payTypeList[t.payType].name)+"支付")])]),a("div",{staticClass:"box bg-white"},[a("div",{staticClass:"payleft"},[a("h4",[t._v("请打开"+t._s(t.payTypeList[t.payType].name)+"app进行扫码支付")]),a("p",[t._v(" 充值金额: "),a("span",[t._v("¥")]),a("span",{staticClass:"money"},[t._v(t._s(t.money))])]),a("p",[t._v(" 订单号： "),a("span",{staticClass:"order"},[t._v(t._s(t.orderNum))])]),a("div",{staticClass:"erweimabox"},[a("div",[a("xy-qrcode",{staticClass:"qrcode",style:{opacity:t.timeout?.3:1},attrs:{value:t.payString,options:{width:190,margin:0}}})],1),a("div",{staticClass:"wenzi flex space-bwtween"},[t._m(0),a("div",[a("span",[t._v("打开手机"+t._s(t.payTypeList[t.payType].name))]),a("span",[t._v("扫一扫进行付款")])])])]),a("div",{staticClass:"successcreated flex space-between1"},[a("span",{staticClass:"xyicon xyicon-check3 text-primary"}),a("div",[a("p",[a("span",[t._v(t._s(t.$store.state.user.userInfo.nickname))]),a("span",[t._v("已成功创建订单")])]),a("p",[t._v("请尽快在手机"+t._s(t.payTypeList[t.payType].name)+"上完成付款")])])])]),a("div",{staticClass:"middle"},[a("img",{attrs:{src:t.payTypeList[t.payType].img,alt:""}})])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"xyicon xyicon-scan text-primary"})])}],s={name:"pay",data:function(){return{payType:"",payTypeList:{alipay:{name:"支付宝",img:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/331b4005-3a99-45e9-adda-880a2d56656f.png"},wxpay:{name:"微信",img:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/e09f305d-52b5-4ccc-a2ee-2f3be3dc7186.png"}},orderNum:686457867545677,money:"0",payString:"https://uniadmin.jiangruyi.com"}},created:function(){var t=this.$xyutil.getUrlQuery();this.payType=t.payType,this.orderNum=t.tradeNo,this.payString=decodeURIComponent(t.payString),this.money=t.realMoney},filters:{orderNumLize:function(t){return t?(t=t.substr(0,2)+"******"+t.substr(11),t):""}},methods:{getPayResult:function(){}}},o=s,n=a(1001),l=(0,n.Z)(o,i,r,!1,null,"7bb144c8",null),c=l.exports},96533:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payCategorywrap"},[a("div",{staticClass:"breadCrumb"},[a("ul",[a("li",{staticClass:"breakBtn",on:{click:function(e){return t.$router.back(-1)}}},[t._v("返回>>")]),a("li",[t._v("账户总览>")]),a("li",[t._v("充值")])])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"payCategory",attrs:{"element-loading-text":"充值订单创建中"}},[a("div",{staticClass:"tabTitle"},[a("ul",[a("li",{staticClass:"cursor-pointer",class:{tabActive:1==t.tabIndex},on:{click:function(e){return t.toggleTab(1)}}},[t._v("个人充值")]),a("li",{staticClass:"cursor-pointer",class:{tabActive:2==t.tabIndex},on:{click:function(e){return t.toggleTab(2)}}},[t._v("对公账户")])])]),a("div",{staticClass:"tabPanel"},[1==t.tabIndex?a("div",{staticClass:"perPanel"},[a("div",{staticClass:"pay-account-info"},[a("p",{staticClass:"account-name"},[t._v("充值账户:")]),a("p",{staticClass:"account-info"},[t._v(t._s(t.$store.state.user.userInfo.nickname)+"（id:"+t._s(t.$store.state.user.userInfo.id)+"）")])]),a("div",{staticClass:"pay-account-info"},[a("p",{staticClass:"account-name"},[t._v("当前余额:")]),a("p",{staticClass:"account-info"},[t._v(" ¥ "),a("span",[t._v(t._s(t.balance))])])]),a("div",{staticClass:"pay-account-info"},[a("p",{staticClass:"account-name"},[t._v("充值余额:")]),a("el-input",{staticClass:"pay-number",attrs:{type:"number",placeholder:"¥"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1),a("div",{staticClass:"pay-account-info"},[a("p",{staticClass:"account-name"},[t._v("支付方式:")]),t._l(t.payMethodArr,(function(e,i){return a("div",{key:i,staticClass:"payWay",class:{payWayBorderActive:e.payType==t.payType},on:{click:function(a){t.payType=e.payType}}},[a("img",{attrs:{src:e.payMethodImg,alt:""}}),a("p",[t._v(t._s(e.payName))]),e.check?a("span"):t._e()])}))],2),a("div",{staticClass:"bankOption"},["bankpay"==t.payType?a("div",t._l(t.bankList,(function(e,i){return a("div",{key:i,staticClass:"perBank",class:{borderActive:i==t.payTypeSubIndex},on:{click:function(e){t.payTypeSubIndex=i}}},[a("img",{attrs:{src:e.logo,alt:""}}),e.check?a("span",{staticClass:"checkIcon"}):t._e()])})),0):t._e(),a("p",{staticClass:"deal"},[a("el-checkbox",{model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}}),t._v(" 充值余额提示： 账户余额可用来购买"+t._s(t.$store.state.app.siteInfo.title)+"所有的产品服务。目前暂时不支持余额提现功能。 ")],1),a("button",{staticClass:"submitBtn cursor-pointer",on:{click:t.submit}},[t._v(" 立即充值 ")]),a("a",{staticClass:"target",attrs:{href:"",target:"_blank"}})])]):t._e(),2==t.tabIndex?a("div",{staticClass:"perPanel"},[t._m(0),t._m(1)]):t._e()])]),t.switchAlert?a("div",{staticClass:"full-scroll",on:{click:function(e){return t.clientClose(e)}}},[a("div",{staticClass:"alert-box"},[a("div",{staticClass:"close-btn",on:{click:function(e){return t.closeAlert()}}},[a("a",{attrs:{href:"JavaScript:void(1);"}},[t._v("×")])]),a("h3",[t._v("充值")]),a("div",{staticClass:"payMoneyBox"},[a("div",{staticClass:"payNumber"},[a("p",{staticClass:"payLabel"},[t._v("充值方式：")]),a("div",{staticClass:"payMode"},[a("p",[t._v(t._s(t.payType))])])]),a("div",{staticClass:"payNumber"},[a("p",{staticClass:"payLabel"},[t._v("充值金额：")]),a("p",{staticClass:"payMoneyNumber"},[t._v(" ¥ "),a("span",[t._v(t._s(t.orderSets.realMoney))])])])]),t._m(2),a("div",{staticClass:"btn-group"},[a("div",{staticClass:"alert-sub-btn",on:{click:function(e){return t.closeAlert()}}},[a("a",{attrs:{href:"javascript:void(1);"}},[t._v("确认")])]),a("div",{staticClass:"alert-issue-btn",on:{click:function(e){return t.closeAlert()}}},[a("a",{attrs:{href:"javascript:void(1);"}},[t._v("充值失败遇到问题")])])])])]):t._e()])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accountPayTip"},[a("p",{staticClass:"tipOne"},[a("span",{staticClass:"iconfont iconyiwen"}),t._v("为了您的合法权益，转账时请备注您的乐帆云账号。 ")]),a("p",{staticClass:"payTipText"},[t._v('如银行不支持"@"符号输入，请使用中文“艾特”替代。eg：mail@qiniu.com；mail艾特qiniu.com。')]),a("p",{staticClass:"payTipText"},[t._v("银行转账会需要至少 3 个工作日到账，期间请耐心等待，如遇到问题可以联系销售或者技术支持")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"companeyInfo"},[a("li",[a("p",[t._v(" 开户行： "),a("span",[t._v("哈弗开会了卡和的银行")])])]),a("li",[a("p",[t._v(" 开户行： "),a("span",[t._v("哈弗开会了卡和的银行")])])]),a("li",[a("p",[t._v(" 开户行： "),a("span",[t._v("哈弗开会了卡和的银行")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payTip"},[a("p",[t._v("支付遇到问题？")]),a("ul",[a("li",[a("span"),t._v(" 请先确认第三方支付网站是否交易完成。 ")]),a("li",[a("span"),t._v(" 建议使用第三方网站支持的浏览器进行支付。 ")]),a("li",[a("span"),t._v(" 暂时不能使用信用卡支付功能。 ")]),a("li",[a("span"),t._v(" 第三方支付网站显示交易成功，但账户中没有充值流水，请发起工单将问题提交给我们 ")])])])}],s=a(16198),o=(a(68309),a(35666),{name:"Recharge",components:{},data:function(){var t,e,a;return{loading:!1,agree:!1,balance:null===(t=this.$store.state.user.userInfo)||void 0===t||null===(e=t.moduleExtend)||void 0===e||null===(a=e.user_score[1])||void 0===a?void 0:a.balance,scoreList:[],form:{money:.01},payType:"alipay",payTypeSubIndex:0,orderInfo:[],orderSets:{totalMoney:0,realMoney:0},tradeNo:"",tabIndex:1,payMethodArr:[{payName:"支付宝",payType:"alipay",payMethodImg:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/c2220767-a9c5-46d3-910a-b9a6d5ee26e7.png",check:!0},{payName:"微信",payType:"wxpay",payMethodImg:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/4b7081e3-0e42-48a2-bb02-18e537c3d4a1.png",check:!1},{payName:"银行卡",payType:"bankpay",payMethodImg:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/d8e1a7ba-a23d-4841-9f8c-a299c725d778.png",check:!1}],bankList:[{name:"中国银行",logo:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/376ae143-b854-4561-bdf2-054307feb2f8.png"},{name:"中国建设银行",logo:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/c509efe8-7d7d-4978-b320-f3a3379c0a7a.png"},{name:"中国工商银行",logo:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/b7e4d3d4-e2dc-49b1-9f00-658395707ed7.png"},{name:"中国农业银行",logo:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/52c6331d-67bd-453d-8e36-2d2fcf1801a8.png"},{name:"浦发银行",logo:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/40324d5e-d32b-4d8a-a533-1d965c35c635.png"},{name:"中国民生银行",logo:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/5cfb94b5-0505-4e8f-869f-fd96917ba75c.png"},{name:"中国邮政",logo:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/20471e07-9e14-4313-acd9-b078b2eca850.png"},{name:"交通银行",logo:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/41d2f715-bc62-44cc-b243-41a26626ec64.png"}]}},created:function(){this.loadBalance()},methods:{loadBalance:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/user_score/score/my",data:{typeId:1},method:"get"});case 2:a=e.sent,200==a.code?(t.scoreList=a.data.dataList,t.balance=t.scoreList[0].balance):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},clientClose:function(t){var e=document.querySelector(".alert-box");e&&(e.contains(t.target)||this.$store.commit("accountSet/switchPayAlert",!1))},toggleTab:function(t){this.tabIndex=t,console.log(this.tabIndex)},getPayResult:function(){},submit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.agree){e.next=3;break}return t.$xyutil.showToast({title:"请勾选提示表示同意",icon:"loading",duration:3e3}),e.abrupt("return",!1);case 3:return t.loading=!0,e.next=6,t.$xyutil.request({url:"/v1/order/order/create",data:{orderInfo:[{spuId:1,skuId:0,amount:t.form.money/1,extra:{typeId:1}}],extra:{module:"user_score",service:"score"}},method:"post"});case 6:if(a=e.sent,200!=a.code){e.next=12;break}t.orderInfo=a.data.orderInfo,t.orderSets=a.data.orderSets,e.next=15;break;case 12:return t.loading=!1,t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),e.abrupt("return");case 15:return e.next=17,t.$xyutil.request({url:"/v1/order/order/submit",data:{orderInfo:t.orderInfo,extra:{module:"user_score",service:"score"}},method:"post"});case 17:if(i=e.sent,200!=i.code){e.next=22;break}t.tradeNo=i.data.tradeNo,e.next=25;break;case 22:return t.loading=!1,t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),e.abrupt("return");case 25:return e.next=27,t.$xyutil.request({url:"/v1/pay/order/dopay",data:{tradeNo:t.tradeNo,payType:t.payType,payPlatform:"pc",payTypeSub:t.bankList[t.payTypeSubIndex].name},method:"post"});case 27:r=e.sent,200==r.code?(t.loading=!1,t.$store.state.accountSet.payAlert=!0,r.data.isRedirect?window.open(r.data.payString,"_blank"):window.open("/user_score/score/pay?realMoney="+t.orderSets.realMoney+"&payType="+t.payType+"&tradeNo="+t.tradeNo+"&payString="+r.data.payString,"_blank")):(t.loading=!1,t.$xyutil.showToast({title:r.msg,icon:"loading",duration:3e3}));case 29:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"15d2e69a",null),u=c.exports},1287:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top-box1"}),a("div",{staticClass:"box bg-white"},[a("div",{staticClass:"header border-bottom_1px"},[t._v(" 资产明细 ")]),a("div",{staticClass:"content"},[a("el-form",{staticClass:"filters",attrs:{model:t.filters,size:"small",inline:!0,"label-suffix":":","label-width":"130px"}},[a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.filters.orderNo,callback:function(e){t.$set(t.filters,"orderNo",e)},expression:"filters.orderNo"}})],1),a("el-form-item",{attrs:{label:"支付流水号"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.filters.tradeNo,callback:function(e){t.$set(t.filters,"tradeNo",e)},expression:"filters.tradeNo"}})],1),a("el-form-item",{attrs:{label:"变动时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filters.dateRange,callback:function(e){t.$set(t.filters,"dateRange",e)},expression:"filters.dateRange"}})],1),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.filters.tradeType,callback:function(e){t.$set(t.filters,"tradeType",e)},expression:"filters.tradeType"}},[a("el-option",{attrs:{label:"充值",value:"recharge"}}),a("el-option",{attrs:{label:"提现",value:"widthdraw"}}),a("el-option",{attrs:{label:"转账",value:"transfer"}}),a("el-option",{attrs:{label:"调账",value:"fix"}}),a("el-option",{attrs:{label:"退款",value:"refound"}}),a("el-option",{attrs:{label:"消费",value:"pay"}})],1)],1),a("el-button",{staticClass:"m-l-md",attrs:{type:"primary",plain:"",size:"small"},on:{click:t.loadData}},[t._v("搜索")]),a("el-button",{attrs:{type:"default",plain:"",size:"small"},on:{click:t.reset}},[t._v("重置")])],1),a("el-table",{attrs:{data:t.dataList,"highlight-current-row":"","header-cell-style":{background:"#EDEDED",color:"#000000",paddingTop:"9px",paddingBottom:"9px"}}},[a("el-table-column",{attrs:{label:"订单号",prop:"orderNo"}}),a("el-table-column",{attrs:{label:"变动时间",prop:"createtime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$xyutil.timeFormat(t.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{label:"收支类型",prop:"amount"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.amount>0?a("span",{staticClass:"text-primary"},[t._v("收入")]):e.row.amount<0?a("span",{staticClass:"text-primary"},[t._v("支出")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"交易类型",prop:"tradeTypeLabel"}}),a("el-table-column",{attrs:{label:"支付方式",prop:"typeId"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.typeId?a("span",{staticClass:"text-primary"},[t._v("用户余额")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"支付流水号",prop:"tradeNo"}}),a("el-table-column",{attrs:{label:"备注",prop:"title"}}),a("el-table-column",{attrs:{label:"账期",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$xyutil.timeFormat(t.row.createTime)("yyyy-MM"))+" ")]}}])}),a("el-table-column",{attrs:{label:"金额",prop:"amount"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.amount>=0?a("span",{staticClass:"text-primary"},[t._v("+"+t._s(e.row.amount))]):e.row.amount<0?a("span",{staticClass:"text-primary"},[t._v(t._s(e.row.amount))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"余额",prop:"balance"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.balance))])]}}])})],1),a("div",{staticClass:"pagination flex m-t flex-end"},[a("el-pagination",{attrs:{"current-page":t.dataPage.page,background:"","page-sizes":[10,20,30,40],"page-size":t.dataPage.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataPage.total},on:{"size-change":t.limitChange,"current-change":t.pageChange,"update:currentPage":function(e){return t.$set(t.dataPage,"page",e)},"update:current-page":function(e){return t.$set(t.dataPage,"page",e)},"update:pageSize":function(e){return t.$set(t.dataPage,"limit",e)},"update:page-size":function(e){return t.$set(t.dataPage,"limit",e)}}})],1)],1)])])},r=[],s=a(93019),o=a(16198),n=(a(35666),{data:function(){var t,e;return{loading:!1,filtersDefault:{id:"",orderNo:"",tradeNo:"",dateRange:[],tradeType:""},filters:{id:"",orderNo:"",tradeNo:"",dateRange:[],tradeType:""},dataList:[],dataPage:{total:0,page:1,limit:10},email:null===(t=this.$store.state.user.userInfo)||void 0===t||null===(e=t.email)||void 0===e?void 0:e.identifier}},created:function(){this.loadData()},watch:{},methods:{reset:function(){this.filters=this.filtersDefault},loadData:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/user_score/score_log/my/1",data:(0,s.Z)({page:t.dataPage.page,limit:t.dataPage.limit},t.filters),method:"get"});case 2:a=e.sent,200==a.code?(t.dataList=a.data.dataList,t.dataPage=a.data.dataPage):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},pageChange:function(t){this.loadData()},limitChange:function(t){this.dataPage.page=1,this.loadData()}}}),l=n,c=a(1001),u=(0,c.Z)(l,i,r,!1,null,"a62e2f42",null),d=u.exports},44672:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box"},[a("h4",{staticClass:"addTitle"},[t._v("创建工单")]),a("form",{staticClass:"addOrderForm",attrs:{action:""}},[a("div",[t._m(0),a("div",{staticClass:"right"},[a("div",[a("el-radio",{attrs:{label:1},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[t._v("一般")]),a("el-radio",{attrs:{label:2},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[t._v("重要")])],1),a("p",{staticClass:"firstP"},[t._v("选择优先级为一般：业务咨询或普通业务受影响，需要协助")])])]),a("div",[t._m(1),a("div",{staticClass:"right"},[a("div",[a("el-select",{staticClass:"typeSelect",attrs:{placeholder:"请选择"},model:{value:t.form.cate,callback:function(e){t.$set(t.form,"cate",e)},expression:"form.cate"}},t._l(t.cateList,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)])]),a("div",[t._m(2),a("div",{staticClass:"right "},[a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],attrs:{placeholder:"若提交密码或AccessKeys等信息，请通过'机密信息'方式添加，并在问题处理完毕后及时修改。"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})])])]),a("div",[t._m(3),a("div",{staticClass:"right"},[a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.secretInfo,expression:"form.secretInfo"}],attrs:{placeholder:"请在此填写账户、密码等机密信息，提交后机密信息将做加密处理。"},domProps:{value:t.form.secretInfo},on:{input:function(e){e.target.composing||t.$set(t.form,"secretInfo",e.target.value)}}})])])]),a("div",[t._m(4),a("div",{staticClass:"right"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],attrs:{type:"text"},domProps:{value:t.form.tel},on:{input:function(e){e.target.composing||t.$set(t.form,"tel",e.target.value)}}})]),a("p",[t._v("默认为您的绑定手机号，紧急情况时乐帆云工程师会与您联系，请您填写正确的手机号。")])])]),a("div",[t._m(5),a("div",{staticClass:"right"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel2,expression:"form.tel2"}],attrs:{type:"text"},domProps:{value:t.form.tel2},on:{input:function(e){e.target.composing||t.$set(t.form,"tel2",e.target.value)}}})]),a("p",[t._v("默认为您的绑定手机号，紧急情况时乐帆云工程师会与您联系，请您填写正确的手机号。")])])]),a("div",[t._m(6),a("div",{staticClass:"right"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{type:"text",placeholder:""},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}})])])]),a("div",[t._m(7),a("div",{staticClass:"right"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email2,expression:"form.email2"}],attrs:{type:"text",placeholder:""},domProps:{value:t.form.email2},on:{input:function(e){e.target.composing||t.$set(t.form,"email2",e.target.value)}}})])])]),a("div",[t._m(8),a("div",{staticClass:"right"},[a("xy-upload",{attrs:{item:t.item,header:{}},model:{value:t.form.files,callback:function(e){t.$set(t.form,"files",e)},expression:"form.files"}})],1)]),a("el-button",{staticClass:"m-b-md",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("span",[t._v("*")]),a("label",{staticStyle:{"margin-left":"5px"},attrs:{for:""}},[t._v("优先级:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left middleSpan"},[a("span",[t._v("*")]),a("label",{attrs:{for:""}},[t._v("选择类别:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left middleSpan"},[a("span",[t._v("*")]),a("label",{attrs:{for:""}},[t._v("问题描述:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("label",{attrs:{for:""}},[t._v("机密信息:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left middleSpan"},[a("span",[t._v("*")]),a("label",{attrs:{for:""}},[t._v("手机号:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("label",{attrs:{for:""}},[t._v("接收短信提醒:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("label",{attrs:{for:""}},[t._v("邮箱:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("label",{attrs:{for:""}},[t._v("抄送邮箱:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"left"},[a("label",{attrs:{for:""}},[t._v("上传附件:")])])}],s=a(16198),o=(a(35666),a(32564),{name:"WorkSheetAdd",props:[],data:function(){var t;return{loading:!1,item:{name:"files",extra:{type:"files",drag:!1,driver:this.$store.state.app.uploadDriver,signUrl:"",action:"",tip:"",format:"jpg,png,bmp",maxSize:2048}},form:{level:1,cate:"",description:"",tel:null===(t=this.$store.state.user.userInfo.mobile)||void 0===t?void 0:t.identifier,tel2:"",email:"",email2:"",files:[]},cateList:{}}},created:function(){this.loadlists()},methods:{handleSubmit:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t,setTimeout((function(){a.loading=!1}),5e3),e.next=5,t.$xyutil.request({url:"/v1/worksheet/worksheet/add",data:t.form,method:"post"});case 5:i=e.sent,"200"==i.code?(t.$xyutil.showToast({title:i.msg,icon:"success",duration:2e3}),t.$router.back()):t.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3}),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},loadlists:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/worksheet/worksheet/add",method:"get"});case 3:a=e.sent,200==a.code?t.cateList=a.data.cateList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"4752653a",null),u=c.exports},76756:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"top"},[a("button",{staticClass:"addOrder",attrs:{type:"button"},on:{click:function(e){return t.$router.push({path:"/worksheet/worksheet/add"})}}},[a("span",{staticClass:"iconfont iconbianji"}),t._v(" 提交工单 ")]),t._m(0),a("button",{staticClass:"toSearch",attrs:{type:"button"}},[t._v("查找")])]),a("div",{staticClass:"orderList"},[a("el-table",{staticClass:"orderTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{color:"#181818",fontSize:"14px",backgroundColor:"#F5F9FA"}}},[a("el-table-column",{attrs:{prop:"id",label:"工单编号"}}),a("el-table-column",{attrs:{prop:"description",label:"问题内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.description)+" ")]}}])}),a("el-table-column",{attrs:{prop:"cateTitle",label:"问题类别"}}),a("el-table-column",{attrs:{prop:"createTime",label:"提交时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$xyutil.timeFormat(t.row.createTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"state"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.state?a("span",[t._v("待客服回复")]):2==e.row.state?a("span",[t._v("待您回复")]):0==e.row.state?a("span",[t._v("已关闭")]):t._e()]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"iconfont iconshaixuan"}),a("span",[t._v("状态(全部)")]),a("span",{staticClass:"iconfont iconsanjiaoxiabiaozhengfangxing"})])],2),a("el-table-column",{attrs:{prop:"name",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return a("ul",{staticClass:"operateBtn"},[a("li",{on:{click:function(e){return t.$router.push({path:"/worksheet/worksheet/info"})}}},[a("span",{staticClass:"iconfont iconchakan"}),a("button",[t._v("查看")])]),a("li",{on:{click:function(a){return t.close(e.row.rowIndex)}}},[a("span",{staticClass:"iconfont iconzantingtingzhi"}),a("button",[t._v("关闭")])]),a("li",{on:{click:function(a){return t.deleteOne(e.row.rowIndex)}}},[a("span",{staticClass:"iconfont iconshanchu"}),a("button",[t._v("删除")])])])}}])})],1)],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("input",{attrs:{type:"text"}}),a("span",{staticClass:"iconfont iconsousuo"})])}],s=a(16198),o=(a(35666),{name:"WorkSheet",props:[],components:{},data:function(){return{loading:!1,tableData:[],dataPage:{total:0,page:1,limit:10}}},created:function(){this.loadlists()},methods:{close:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$xyutil.request({url:"/v1/worksheet/worksheet/close/"+e.tableData[t].id,method:"put"});case 2:i=a.sent,200==i.code?(e.tableData[t].state=0,e.$xyutil.showToast({title:i.msg,icon:"loading",duration:2e3})):e.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 4:case"end":return a.stop()}}),a)})))()},deleteOne:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.getSelectedIds(),a.next=3,e.$xyutil.request({url:"/v1/worksheet/worksheet/delete/"+e.tableData[t].id,method:"delete"});case 3:i=a.sent,200==i.code?(e.loadlists(),e.$xyutil.showToast({title:i.msg,icon:"loading",duration:2e3})):e.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 5:case"end":return a.stop()}}),a)})))()},loadlists:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$xyutil.request({url:"/v1/worksheet/worksheet/my",data:{page:t.dataPage.page,limit:t.dataPage.limit},method:"get"});case 3:a=e.sent,200==a.code?(t.tableData=a.data.dataList,t.dataPage=a.data.dataPage):t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"b8cfdd5e",null),u=c.exports},94813:function(t,e,a){a.r(e);var i,r,s=a(1001),o={},n=(0,s.Z)(o,i,r,!1,null,null,null);e["default"]=n.exports},1209:function(t,e,a){a.r(e);var i,r,s=a(1001),o={},n=(0,s.Z)(o,i,r,!1,null,null,null);e["default"]=n.exports},74796:function(t,e,a){a.r(e);var i,r,s=a(1001),o={},n=(0,s.Z)(o,i,r,!1,null,null,null);e["default"]=n.exports},52219:function(t,e,a){a.r(e);var i,r,s=a(1001),o={},n=(0,s.Z)(o,i,r,!1,null,null,null);e["default"]=n.exports},65835:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container p-t-md"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:17,offset:0}},[a("div",{staticClass:"filter-box ts-13 bg-white p-a-md"},[a("xy-filter-list",{staticClass:"p-t-sm",attrs:{options:t.filterOptions,rows:2},on:{changed:t.toggleOption}})],1),a("div",{staticClass:"m-t bg-white project-list p-a-md"},[t._l(t.dataList,(function(e,i){return[a("div",{key:i,staticClass:"project-list_item flex border-bottom_1px"},[a("div",{staticClass:"m-r"},[a("img",{staticClass:"cover",attrs:{src:e.cover,alt:"",width:"140",height:"80"}})]),a("div",{staticClass:"flex-1"},[a("div",{staticClass:"flex space-between"},[a("h3",{staticClass:"ts-17"},[t._v(t._s(e.title))]),a("div",{staticClass:"ts-13"},[a("span",{staticClass:"text-999"},[t._v("可议价")]),a("span",{staticClass:"text-danger price"},[t._v("¥"+t._s(e.price))])])]),a("ul",{staticClass:"flex ts-13 m-t-sm m-b-xs"},[a("li",{staticClass:"m-r"},[t._v("招募："+t._s(e.requireRoleLabel))]),a("li",{staticClass:"m-r"},[t._v("类型："+t._s(e.typeLabel))]),a("li",{staticClass:"m-r"},[t._v("周期："+t._s(e.period)+"天")])]),a("div",{staticClass:"text-666 ts-12"},[a("span",{staticClass:"m-r"},[t._v("发布")]),a("span",[t._v(t._s(e.applyCount)+"人报名")])])])])]}))],2)]),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:7,offset:0}},[a("div",{staticClass:"m-b p-a bg-white"},[a("router-link",{attrs:{to:"/zb/project/add"}},[a("el-button",{staticClass:"full",attrs:{type:"primary",size:"default"}},[t._v("发布项目")])],1)],1),a("div",{staticClass:"m-b p-a bg-white text-center"},[a("el-avatar",{staticClass:"m-b",attrs:{icon:"el-icon-user-solid",size:"large",shape:"circle",src:t.$store.state.user.userInfo.avatar,fit:"fill"}}),a("div",{staticClass:"m-b"},[t._v(" "+t._s(t.$store.state.user.userInfo.nickname)+" ")]),a("div",{staticClass:"m-b"},[t._v(" "+t._s(t.$store.state.user.userInfo.city)+" ")]),a("div",{staticClass:"flex space-between"},[a("div",[t._v(" 报名中：0/5 ")]),a("div",[t._v(" 合作中：0/5 ")])])],1),a("div",{staticClass:"m-b p-a bg-white"},[a("xy-title",{staticClass:"m-b"},[t._v("开发者接单步骤")]),a("el-steps",{staticStyle:{height:"260px"},attrs:{active:1,direction:"vertical","process-status":"wait","finish-status":"wait"}},t._l(t.devSteps,(function(t){return a("el-step",{key:t.key,attrs:{title:t.title}})})),1)],1),a("div",[a("img",{attrs:{width:"100%",src:"https://656e-env-iknzbddq-1254055692.tcb.qcloud.la/cloudbase-cms/upload/2022-01-28/j3p7bd309hfgeiz1bhibn8k8c42fzl9p_.jpg",alt:""}})])])],1)],1)]),a("xy-footer")],1)},r=[],s=a(16198),o=(a(35666),{data:function(){return{filterOptions:[{name:"requireRole",title:"角色",type:"radio",options:[{title:"全部",value:""},{title:"开发团队",value:"team"},{title:"开发工程师",value:"devloper"},{title:"产品设计师",value:"designer"},{title:"测试工程师",value:"tester"},{title:"产品/项目经理",value:"producter"}]},{name:"tag",title:"项目标签",type:"radio",options:[{title:"全部",value:""},{title:"需求明确",value:"需求明确"},{title:"全新产品",value:"全新产品"},{title:"二次开发",value:"二次开发"},{title:"工具插件",value:"工具插件"},{title:"接口开发",value:"接口开发"}]},{name:"type",title:"项目类型",type:"radio",options:[{title:"全部",value:""},{title:"Web网站",value:"pc"},{title:"手机APP",value:"mapp"},{title:"微信小程序",value:"wxapp"},{title:"微信公众号",value:"wxmp"},{title:"H5网站",value:"h5"},{title:"其它",value:"other"}]},{name:"price",title:"项目预算",type:"radio",options:[{title:"全部",value:0},{title:"0-5K",value:1},{title:"5K-1万",value:2},{title:"1万-3万",value:3},{title:"3万-5W",value:4},{title:"5W以上",value:5}]},{name:"period",title:"项目周期",type:"radio",options:[{title:"全部",value:0},{title:"小于30天",value:1},{title:"30天-60天",value:2},{title:"60天-90天",value:3},{title:"90天以上",value:4}]}],filters:{},dataList:{},devSteps:[{title:"注册并实名认证"},{title:"报名参与项目"},{title:"需求方选中合作方"},{title:"确认接受项目"},{title:"划分项目阶段并开始"},{title:"阶段交付并收款"}]}},created:function(){this.loadData()},watch:{},methods:{toggleOption:function(t){this.filters=t,this.loadData()},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$xyutil.request({url:"/v1/zb/project/lists",data:t.filters,method:"get"});case 2:a=e.sent,200==a.code?t.dataList=a.data.dataList:t.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"23361bf2",null),u=c.exports},29116:function(t,e,a){a.r(e);var i,r,s=a(1001),o={},n=(0,s.Z)(o,i,r,!1,null,null,null);e["default"]=n.exports},65947:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xy-builder-comp xy-builder-wrap-col"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"col-box"},[a("el-row",{attrs:{gutter:25}},[a("el-col",{staticClass:"left m-b-md",attrs:{xs:24,sm:24,md:6,lg:4}},[a("el-tree",{attrs:{data:t.colData.dataList,"node-key":"id","default-expand-all":"","highlight-current":"",draggable:"","expand-on-click-node":!0},on:{"node-contextmenu":t.handleContextmenu,"node-drop":t.handleDrop},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,r=e.data;return a("div",{staticClass:"custom-tree-node flex flex-1 flex-alignCenter"},[a("div",{staticClass:"flex-1 ts-14 tw5 flex flex-alignCenter",on:{click:function(e){return t.editPre(i,r)}}},[t._v(" "+t._s(r.title)+" ")]),a("div",{staticClass:"actions ts-13",staticStyle:{display:"none"}},[a("el-link",{staticClass:"m-r-xs",attrs:{type:"text"},on:{click:function(){return t.append(i,r)}}},[t._v(" 添加子项 ")]),a("el-link",{attrs:{type:"danger"},on:{click:function(){return t.remove(i,r)}}},[t._v(" 删除 ")])],1)])}}])}),a("el-button",{staticClass:"full",attrs:{type:"text"},on:{click:function(){return t.append()}}},[t._v(" 添加 ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"menu",attrs:{id:"contextmenu"}},[a("div",{staticClass:"contextmenu__item",on:{click:function(){return t.append(t.cnode,t.cdata)}}},[t._v("添加子项")]),a("div",{staticClass:"contextmenu__item",on:{click:function(){return t.remove(t.cnode,t.cdata)}}},[t._v("删除")])])],1),a("el-col",{staticClass:"right",attrs:{xs:24,sm:24,md:18,lg:20}},[a("XyBuilderForm",{ref:"rightForm",attrs:{api:t.currentEditApi,show:!0,header:t.header},on:{close:function(e){return t.closeModel(e)}}})],1)],1)],1)])},r=[],s=a(93019),o=a(62032),n=a(16198),l=(a(24337),a(60626),a(58933),a(2953),a(21747),a(6750),a(50740),a(55700),a(57020),a(42943),a(46627)),c=a.n(l),u=a(47578),d={name:"XyBuilderCol",props:{api:"",header:{type:Object,default:function(){return{cloudId:0,eid:0}}},pitem:{type:Object,default:function(){return{}}},show:!1,predata:""},data:function(){return{id:0,ready:!1,loading:!1,menuVisible:!1,cnode:null,cdata:null,colData:{dataList:[]},currentEditApi:""}},watch:{show:function(t){this.stackData={},1==t&&this.loadData()}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return Promise.resolve().then(a.bind(a,14106))},this.$options.components.XyBuilderForm=function(){return Promise.resolve().then(a.bind(a,53100))},this.$options.components.XyBuilderInfo=function(){return a.e(700).then(a.bind(a,36664))},this.$options.components.XyBuilderTab=function(){return a.e(700).then(a.bind(a,93628))}},created:function(){this.predata?this.readyProcess(this.predata):this.loadData()},methods:{closeModel:function(){},handleContextmenu:function(t,e,a,i){this.cnode=a,this.cdata=e,this.menuVisible=!1,this.menuVisible=!0,event.preventDefault();var r=document.querySelector(".menu");this.styleMenu(r)},foo:function(){this.menuVisible=!1,document.removeEventListener("click",this.foo)},styleMenu:function(t){event.clientX>1800?t.style.left=event.clientX-100+"px":t.style.left=event.clientX-200+"px",document.addEventListener("click",this.foo),event.clientY>700?t.style.top=event.clientY-300+"px":t.style.top=event.clientY-150+"px"},handleDrop:function(t,e,a,i){var r=this;return(0,n.Z)(regeneratorRuntime.mark((function i(){var s,o,n,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:console.log("tree drag enter: ",e.data),console.log(a),r.colData.rightButtonList.forEach((function(t){"edit"==t.name&&(s=t)})),o="",n=0,i.t0=a,i.next="inner"===i.t0?8:"before"===i.t0?10:"after"===i.t0?13:16;break;case 8:return o=e.data.uniqeId,i.abrupt("break",16);case 10:return o=e.data.puniqeId,n=e.data.sortnum-1,i.abrupt("break",16);case 13:return o=e.data.puniqeId,n=e.data.sortnum+1,i.abrupt("break",16);case 16:return i.next=18,r.$xyutil.request({url:s.pageData.api+"/"+t.data.id,method:"put",data:{puniqeId:o,sortnum:n},header:{CloudId:r.header.cloudId,Eid:r.header.eid}});case 18:l=i.sent,"200"==l.code?r.$xyutil.showToast({title:l.msg,icon:"success",duration:1e3}):r.$xyutil.showToast({title:l.msg,icon:"error",duration:3e3});case 20:case"end":return i.stop()}}),i)})))()},editPre:function(t,e){var a=this;return(0,n.Z)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a.$refs.rightForm.getCount()>1?a.$confirm("您有修改内容未保存，确认离开当前页面吗？","提示",{confirmButtonText:"确认离开",cancelButtonText:"留在页面",confirmButtonClass:"el-button--danger",closeOnClickModal:!1,type:"error"}).then((0,n.Z)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:a.edit(t,e);case 1:case"end":return i.stop()}}),i)})))).catch((function(){})):a.edit(t,e);case 1:case"end":return i.stop()}}),i)})))()},edit:function(t,e){var a=this;return(0,n.Z)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.$refs.rightForm.getCount(),a.cnode=null,a.cdata=null,a.menuVisible=!1,i=a,a.colData.rightButtonList.forEach((function(t){if("edit"==t.name){var a=t,r="",s=new Object;if(a.pageData.apiSuffix){var n,l=a.pageData.apiSuffix,u=(0,o.Z)(l);try{for(u.s();!(n=u.n()).done;){var d=n.value;r=r+"/"+e[d]}}catch(v){u.e(v)}finally{u.f()}}else r="/"+e.id;if(a.pageData.querySuffix){var m,p=a.pageData.querySuffix,f=(0,o.Z)(p);try{for(f.s();!(m=f.n()).done;){var h=m.value;1==h[2]?s[h[0]]=h[1]:s[h[0]]=e[h[1]]}}catch(v){f.e(v)}finally{f.f()}}if(""!=c().stringify(s)?i.currentEditApi=a.pageData.api+r+"?"+c().stringify(s):i.currentEditApi=a.pageData.api+r,!i.currentEditApi)return!1}}));case 6:case"end":return t.stop()}}),t)})))()},append:function(t,e){var a=this;return(0,n.Z)(regeneratorRuntime.mark((function i(){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(console.log(t),console.log(e),e||(e={},e.bookId=a.id,e.puniqeId="",e.title="根节点"),r="",a.colData.rightButtonList.forEach((function(t){"addChild"==t.name&&(r=t.pageData.api)})),r){i.next=7;break}return i.abrupt("return",!1);case 7:a.$prompt("请输入标题","创建“"+e.title+"”的子项",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var i=(0,n.Z)(regeneratorRuntime.mark((function i(s){var o,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=s.value,i.next=3,a.$xyutil.request({url:r,method:"post",data:{bookId:e.bookId,puniqeId:e.uniqeId,title:o},header:{CloudId:a.header.cloudId,Eid:a.header.eid}});case 3:n=i.sent,"200"==n.code?(a.$xyutil.showToast({title:n.msg,icon:"success",duration:1e3}),e.children||a.$set(e,"children",[]),t?e.children.push(n.data.info):a.colData.dataList.push(n.data.info)):a.$xyutil.showToast({title:n.msg,icon:"error",duration:3e3});case 5:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()).catch((function(){a.$message({type:"info",message:"取消输入"})}));case 8:case"end":return i.stop()}}),i)})))()},remove:function(t,e){var a=this,i=this,r="";if(this.colData.rightButtonList.forEach((function(t){"delete"==t.name&&(r=t)})),!r.pageData.api)return!1;var s="",l=new Object;if(r.pageData.apiSuffix){var u,d=r.pageData.apiSuffix,m=(0,o.Z)(d);try{for(m.s();!(u=m.n()).done;){var p=u.value;s=s+"/"+e[p]}}catch(y){m.e(y)}finally{m.f()}}else s="/"+e.id;if(r.pageData.querySuffix){var f,h=r.pageData.querySuffix,v=(0,o.Z)(h);try{for(v.s();!(f=v.n()).done;){var g=f.value;1==g[2]?l[g[0]]=g[1]:l[g[0]]=e[g[1]]}}catch(y){v.e(y)}finally{v.f()}}this.$confirm(r.pageData.content,r.pageData.title,{confirmButtonText:r.pageData.okText,cancelButtonText:r.pageData.cancelText,dangerouslyUseHTMLString:!0,closeOnClickModal:!1,type:"warning"}).then((0,n.Z)(regeneratorRuntime.mark((function o(){var n,u,d,m,p,f;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=r.pageData.api+s,""!=c().stringify(l)&&(n=n+"?"+c().stringify(l)),o.next=4,i.$xyutil.request({url:n,method:r.pageData.formMethod,header:i.header});case 4:u=o.sent,"200"==u.code?(d=t.parent,m=d.data.children||d.data,p=m.findIndex((function(t){return t.id===e.id})),m.splice(p,1),i.$xyutil.showToast({title:u.msg,icon:"success",duration:1e3}),a.$store.state.app.uiAudio&&(f=new Audio,f.src="https://cdn.jsdelivr.net/gh/starideas/xyfront/audio/delete.mp3",f.play())):i.$xyutil.showToast({title:u.msg,icon:"loading",duration:3e3});case 6:case"end":return o.stop()}}),o)})))).catch((function(){if(a.$store.state.app.uiAudio){var t=new Audio;t.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_CLOSE,t.play()}}))},readyProcess:function(t){var e=u.Z.readyList({listData:t},this.$store.state.app.apiInfo);this.colData=(0,s.Z)({},e.listData),this.ready=!0},loadData:function(){var t=arguments,e=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){var i,r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"",""!=i&&(e.api=i),e.loading=!0,!e.api){a.next=8;break}return a.next=6,e.$xyutil.request({url:e.api,method:"get",header:{CloudId:null===(r=e.header)||void 0===r?void 0:r.cloudId,Eid:null===(s=e.header)||void 0===s?void 0:s.eid}});case 6:o=a.sent,"200"==o.code?(e.readyProcess(o.data.listData),e.id=o.data.id,e.loading=!1):e.$xyutil.showToast({title:o.msg,icon:"loading",duration:3e3});case 8:e.loading=!1;case 9:case"end":return a.stop()}}),a)})))()}}},m=d,p=a(1001),f=(0,p.Z)(m,i,r,!1,null,"f556dcae",null),h=f.exports},53100:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"xy-builder-comp xy-builder-wrap-form",attrs:{"element-loading-text":"拼命加载中"}},[""!=t.formData&&t.ready?a("div",[t._l(t.formData.alertList.top,(function(e,i){return[e.show&&!0===e.show?a("el-alert",{key:i,attrs:{type:e.type,"show-icon":!1,closable:!1,effect:"dark"}},[a("div",{staticClass:"m-b-sm",domProps:{innerHTML:t._s(e.desc)}})]):t._e()]})),t.formData.formTabs.length>0?[a("el-tabs",{attrs:{value:t.formData.formTabs[0].name}},[t._l(t.formData.formTabs,(function(e,i){return[e.formItems&&e.formItems.length>0?a("el-tab-pane",{key:i+"_"+e.name,attrs:{label:e.title,name:e.name}},[a("el-form",{ref:t.ref+"_"+e.name,refInFor:!0,attrs:{model:t.formData.formValues[e.name].tabValues,"label-position":t.formData.config.labelPosition||t.labelPosition,"label-width":t.labelWidth+""},nativeOn:{submit:function(t){t.preventDefault()}}},[t._l(e.formItems,(function(i,r){return[a("XyBuilderformItem",{key:r,ref:"formitem_"+e.name+"_"+i.name,refInFor:!0,attrs:{item:i,formValues:t.formData.formValues[e.name].tabValues,formRules:e.formRules,header:t.header,prop:i.name,showDev:t.showDev,config:t.formData.config}})]}))],2)],1):t._e()]}))],2)]:[a("el-form",{ref:t.ref,attrs:{size:"medium",model:t.formData.formValues,"status-icon":!0,"label-position":t.formData.config.labelPosition||t.labelPosition,"label-width":t.formData.config.labelWidth||t.labelWidth},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-row",{attrs:{type:"flex",gutter:0}},[a("el-col",{staticClass:"form-top",attrs:{span:24}},[a("div",{staticClass:"form-group form-group-default m-b"},[a("el-row",{staticClass:"flex flex-wrap",attrs:{type:"flex",gutter:20}},[t._l(t.formData.formItems,(function(e,i){return[a("el-col",{key:i,staticClass:"form-item-col",attrs:{xs:24,sm:24,md:e.extra.span?e.extra.span:24}},[e.extra.inGroup?t._e():a("XyBuilderformItem",{ref:"formitem_"+e.name,refInFor:!0,attrs:{item:e,formValues:t.formData.formValues,formRules:t.formData.formRules,header:t.header,prop:e.name,showDev:t.showDev,config:t.formData.config}})],1)]}))],2)],1)])],1),a("el-row",{staticClass:"form-label-top flex flex-wrap",attrs:{gutter:20}},t._l(t.formData.formCols,(function(e,i){return a("el-col",{key:i,attrs:{xs:24,sm:24,md:24,lg:e.span.lg}},[e.itemList.length>0?[t._l(t.formData.formGroups,(function(i,r){return[e.itemList.includes(i.name)?a("div",{key:r,staticClass:"form-group m-b"},[a("div",{staticClass:"p-b-xs tw5 ts-14"},[a("xy-title",[t._v(t._s(i.title))])],1),t._l(t.formData.formItems,(function(e,r){return[i.itemList.includes(e.name)?a("XyBuilderformItem",{key:r,ref:"formitem_"+e.name,refInFor:!0,attrs:{item:e,formValues:t.formData.formValues,formRules:t.formData.formRules,header:t.header,prop:e.name,showDev:t.showDev,config:t.formData.config}}):t._e()]})),a("div",{staticClass:"p-t-xs ts-13 text-gray"},[a("text",[t._v(t._s(i.extra.tip))])])],2):t._e()]}))]:t._e()],2)})),1)],1)],t._l(t.formData.alertList.bottom,(function(e,i){return[e.show&&!0===e.show?a("el-alert",{key:i,attrs:{type:e.type,"show-icon":!1,closable:!1,effect:"dark"}},[a("div",{staticClass:"m-b-sm",domProps:{innerHTML:t._s(e.desc)}})]):t._e()]})),t.res.msg?a("el-alert",{attrs:{type:"error","show-icon":"",closable:""},on:{close:function(e){t.res={}}}},[t._v(t._s(t.res.msg))]):t._e(),a("div",{staticClass:"m-t m-b flex footer-buttons"},[t.formData.config.hideSubmitButton?t._e():a("div",{staticClass:"item",style:{width:t.formData.config.footerButtonLength||"120px"}},[a("el-button",{staticClass:"full",attrs:{loading:t.subloading,type:"primary"},on:{click:function(e){return t.submit()}}},[t._v(" "+t._s(t.formData.config.submitButtonTitle||"确认")+" ")])],1),t.formData.config.hideCancelButton?t._e():a("div",{staticClass:"item",style:{width:t.formData.config.footerButtonLength||"120px"}},[a("el-button",{staticClass:"full",attrs:{type:"default"},on:{click:function(e){return t.cancel()}}},[t._v(" "+t._s(t.formData.config.cancelButtonTitle||"取消")+" ")])],1)]),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:this.formData.config.continue&&"post"==this.formData.formMethod,expression:"this.formData.config.continue && this.formData.formMethod == 'post'"}],model:{value:t.addNext,callback:function(e){t.addNext=e},expression:"addNext"}},[t._v("继续录入下一条")])],2):t._e(),a("xy-safety-verify",{ref:"sv",on:{"verify-request":t.submitForm},model:{value:t.verifyData,callback:function(e){t.verifyData=e},expression:"verifyData"}})],1)},r=[],s=a(93019),o=a(16198),n=(a(24337),a(60626),a(58933),a(2953),a(21747),a(6750),a(51117),a(25656),a(11405),a(55700),a(90466),a(40730),a(47578)),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",{staticClass:"builder-form-item"},[t.item.extra.hide||t.item.extra.isDev&&!t.showDev||"hidden"==t.item.type?t._e():["tabs"==t.item.type?[a("el-tabs",{attrs:{value:t.item.extra.options[0].name,animated:!1}},[t._l(t.item.extra.options,(function(e,i){return[a("el-tab-pane",{key:i+"_"+e.name,attrs:{label:e.title,name:e.name}},[t._l(e.options,(function(i,r){return[a("XyBuilderFormItem",{key:r,ref:"this.itememtab_"+e.name+"_"+i.name,refInFor:!0,attrs:{item:i,formValues:t.formValues,formRules:t.formRules,header:t.header,prop:t.item.name,showDev:t.showDev,config:t.config}})]}))],2)]}))],2)]:a("el-form-item",{attrs:{label:t.item.title,prop:t.prop,rules:t.formRules[t.item.name]?t.formRules[t.item.name]:[]}},["divider"==t.item.type?[a("el-divider")]:"hidden"==t.item.type?[a("span",{staticClass:"hidden"},[t._v(t._s(t.item.value))])]:"static"==t.item.type?[a("span",[t._v(t._s(t.item.value))]),a("el-input",{staticClass:"hidden",attrs:{disabled:t.item.extra.disabled,placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"link"==t.item.type?[a("a",{attrs:{href:t.item.value,target:"_blank"}},[t._v(t._s(t.item.extra.title))])]:"audio"==t.item.type?[a("audio",{attrs:{src:t.formValues[t.item.name][0].url,controls:"controls"}},[t._v(" 您的浏览器不支持 audio 标签。 ")])]:"video"==t.item.type?[a("video",{attrs:{src:t.formValues[t.item.name][0].url,controls:"controls",width:"700"}},[t._v(" 您的浏览器不支持 video 标签。 ")])]:"text"==t.item.type?[a("el-input",{attrs:{disabled:t.item.extra.disabled,placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"password"==t.item.type?[a("el-input",{attrs:{disabled:t.item.extra.disabled,type:"password",placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"url"==t.item.type?[a("el-input",{attrs:{disabled:t.item.extra.disabled,type:"url",placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"email"==t.item.type?[a("el-input",{attrs:{disabled:t.item.extra.disabled,type:"email",placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"number"==t.item.type?[a("el-input",{attrs:{disabled:t.item.extra.disabled,type:"number",placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"digit"==t.item.type?[a("el-input",{attrs:{disabled:t.item.extra.disabled,type:"text",placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"tel"==t.item.type?[a("el-input",{attrs:{disabled:t.item.extra.disabled,type:"tel",placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"textarea"==t.item.type||"array"==t.item.type?[a("el-input",{attrs:{disabled:t.item.extra.disabled,type:"textarea",autosize:{minRows:t.item.extra.minRows?t.item.extra.minRows:3,maxRows:t.item.extra.maxRows?t.item.extra.maxRows:10},placeholder:t.item.extra.placeholder},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"select"==t.item.type?[a("el-select",{staticClass:"full",attrs:{clearable:"",filterable:"",disabled:t.item.extra.disabled},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}},t._l(t.item.extra.options,(function(t,e,i){return a("el-option",{key:i,attrs:{label:t.title,value:t.value}})})),1)]:"selects"==t.item.type?[a("el-select",{staticClass:"full",attrs:{filterable:!0,multiple:!0,disabled:t.item.extra.disabled},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}},t._l(t.item.extra.options,(function(t,e,i){return a("el-option",{key:i,attrs:{label:t.title,value:t.value}})})),1)]:"radio"==t.item.type?[a("el-radio-group",{model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}},t._l(t.item.extra.options,(function(e,i,r){return a("el-radio",{key:r,attrs:{disabled:t.item.extra.disabled,label:e.value}},[e.icon?a("i",{class:e.icon}):t._e(),a("span",[t._v(t._s(e.title))])])})),1)]:"checkbox"==t.item.type?[a("xy-checkbox-group",{attrs:{disabled:t.item.extra.disabled,options:t.item.extra.options},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"switch"==t.item.type?[a("el-switch",{attrs:{disabled:t.item.extra.disabled,"active-value":t.item.extra.options[1].value,"active-text":t.item.extra.options[1].title,"inactive-value":t.item.extra.options[0].value,"inactive-text":t.item.extra.options[0].title},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"slider"==t.item.type?[a("el-slider",{attrs:{disabled:t.item.extra.disabled},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"tags"==t.item.type?[a("xy-tags-input",{attrs:{disabled:t.item.extra.disabled},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"datepicker"==t.item.type?[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",disabled:t.item.extra.disabled,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"datetimepicker"==t.item.type?[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",disabled:t.item.extra.disabled,format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"daterangepicker"==t.item.type?[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",disabled:t.item.extra.disabled,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"datetimerangepicker"==t.item.type?[a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",disabled:t.item.extra.disabled,format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"timeselect"==t.item.type?[a("el-time-select",{attrs:{type:"time",placeholder:"选择时间",disabled:t.item.extra.disabled,"picker-options":{start:t.item.extra.start?t.item.extra.start:"00:00",step:t.item.extra.step?t.item.extra.step:"00:15",end:t.item.extra.end?t.item.extra.end:"23:00"}},on:{change:t.timeSelectChange},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"timerangeselect"==t.item.type?[a("div",{staticClass:"flex"},[a("el-time-select",{attrs:{type:"time",placeholder:"选择时间",disabled:t.item.extra.disabled,"picker-options":{start:t.item.extra.start?t.item.extra.start:"00:00",step:t.item.extra.step?t.item.extra.step:"00:15",end:t.item.extra.end?t.item.extra.end:"00:00"}},model:{value:t.formValues[t.item.name][0],callback:function(e){t.$set(t.formValues[t.item.name],0,e)},expression:"formValues[item.name][0]"}}),a("el-time-select",{attrs:{type:"time",placeholder:"选择时间",disabled:t.item.extra.disabled,"picker-options":{start:t.item.extra.start?t.item.extra.start:"00:00",step:t.item.extra.step?t.item.extra.step:"00:15",end:t.item.extra.end?t.item.extra.end:"00:00",minTime:t.formValues[t.item.name][0]}},model:{value:t.formValues[t.item.name][1],callback:function(e){t.$set(t.formValues[t.item.name],1,e)},expression:"formValues[item.name][1]"}})],1)]:"timepicker"==t.item.type?[a("el-time-picker",{attrs:{type:"time",placeholder:"选择时间",disabled:t.item.extra.disabled,"picker-options":{selectableRange:t.item.extra.selectableRange?t.item.extra.selectableRange:"08:30:00 - 22:30:00"},"value-format":t.item.extra.format?t.item.extra.format:"HH:mm:ss"},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"timerangepicker"==t.item.type?[a("el-time-picker",{attrs:{type:"timerange","is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间区间",disabled:t.item.extra.disabled,"picker-options":{selectableRange:t.item.extra.selectableRange?t.item.extra.selectableRange:"08:30:00 - 22:30:00"},"value-format":t.item.extra.format?t.item.extra.format:"HH:mm:ss"},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"rate"==t.item.type?[a("el-rate",{attrs:{disabled:t.item.extra.disabled},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"cascader"==t.item.type||"region"==t.item.type?[a("xy-cascader",{attrs:{item:t.item,header:{cloudId:t.header.cloudId,eid:t.header.eid}},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"colorpicker"==t.item.type?[a("el-color-picker",{attrs:{disabled:t.item.extra.disabled},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"image"==t.item.type?[a("xy-upload",{attrs:{options:{type:"image",drag:!0},item:t.item,img:{name:"",title:""},header:t.header},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"imageflex"==t.item.type?[a("div",{staticStyle:{display:"flex"}},t._l(t.item.extra.options,(function(e,i){return a("div",{key:i,staticStyle:{"padding-right":"15px"}},[a("xy-upload",{attrs:{options:{type:"image",drag:!1},item:t.item,img:e,header:t.header},model:{value:t.formValues[t.item.name][e.value],callback:function(a){t.$set(t.formValues[t.item.name],e.value,a)},expression:"formValues[item.name][img.value]"}})],1)})),0)]:"images"==t.item.type?[a("xy-upload",{attrs:{options:{type:"images",drag:!0},item:t.item,header:t.header},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"file"==t.item.type?[a("xy-upload",{attrs:{options:{type:"file",drag:!1},drag:!1,item:t.item,header:t.header},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"files"==t.item.type?[a("xy-upload",{attrs:{options:{type:"files",drag:!1},item:t.item,header:t.header},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"poster"==t.item.type?[a("xy-poster-custom",{attrs:{item:t.item,header:t.header},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"selectlist"==t.item.type?[t._v(" "+t._s(t.formValues[t.item.name])+" "),a("a",{staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},on:{click:function(e){return t.rightButtonModal(t.item)}}},[t._v(" 点击选择 ")]),a("el-dialog",{attrs:{"append-to-body":!0,visible:t.item.extra.pageData.show,width:t.item.extra.pageData.width||600,title:t.item.extra.pageData.title},on:{"update:visible":function(e){return t.$set(t.item.extra.pageData,"show",e)}}},[a("XyBuilderList",{ref:"listselect_"+t.item.name,attrs:{showActions:!0,header:t.header,config:{listSelectType:"radio"},api:t.item.extra.pageData.apiBlank,show:t.item.extra.pageData.show},on:{"close-model":function(e){t.item.extra.pageData.show=!1}},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})],1)]:"selectlists"==t.item.type?[t._v(" "+t._s(t.formValues[t.item.name])+" "),a("a",{staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},on:{click:function(e){return t.rightButtonModal(t.item)}}},[t._v(" 点击选择 ")]),a("el-dialog",{attrs:{"append-to-body":!0,visible:t.item.extra.pageData.show,width:t.item.extra.pageData.width||600,title:t.item.extra.pageData.title},on:{"update:visible":function(e){return t.$set(t.item.extra.pageData,"show",e)}}},[a("XyBuilderList",{ref:"listselect_"+t.item.name,attrs:{showActions:!0,header:t.header,config:{listSelectType:"checkbox"},api:t.item.extra.pageData.apiBlank,show:t.item.extra.pageData.show},on:{"close-model":function(e){t.item.extra.pageData.show=!1}},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})],1)]:"formlist"==t.item.type?[a("el-row",{attrs:{gutter:12}},t._l(t.item.extra.options,(function(e,i,r){return a("div",{key:r},[a("el-col",{attrs:{span:e.span}},[t._v(" "+t._s(e.title)+" ")])],1)})),0),t._l(t.formValues[t.item.name],(function(e,i,r){return a("el-row",{key:r,staticStyle:{padding:"1px 0"},attrs:{gutter:12}},[t._l(t.item.extra.options,(function(e,r,s){return a("div",{key:s},[a("el-col",{attrs:{span:e.span}},[t.item.extra.options[r].type&&"text"==t.item.extra.options[r].type||t.item.extra.options[r].type&&"switch"==t.item.extra.options[r].type?[a("el-input",{model:{value:t.formValues[t.item.name][i][e.name],callback:function(a){t.$set(t.formValues[t.item.name][i],e.name,a)},expression:"formValues[item.name][key2][item3.name]"}})]:t.item.extra.options[r].type&&"datetimepicker"==t.item.extra.options[r].type?[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",disabled:t.item.extra.disabled,format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.formValues[t.item.name][i][e.name],callback:function(a){t.$set(t.formValues[t.item.name][i],e.name,a)},expression:"formValues[item.name][key2][item3.name]"}})]:[a("el-input",{model:{value:t.formValues[t.item.name][i][e.name],callback:function(a){t.$set(t.formValues[t.item.name][i],e.name,a)},expression:"formValues[item.name][key2][item3.name]"}})]],2)],1)})),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.formlistDelrow(i)}}},[t._v("删除")])],2)})),a("el-button",{staticStyle:{"margin-top":"8px"},attrs:{type:"dashed",icon:"md-add",size:"small"},on:{click:function(e){return t.formlistAddrow()}}},[t._v(" 增加一行 ")])]:"datalist"==t.item.type?[a("XyBuilderList",{ref:"list_"+t.item.name,attrs:{header:t.header,api:t.item.extra.pageData.apiBlank,show:t.item.extra.pageData.show}})]:"checkboxtree"==t.item.type?[a("xy-checkbox-tree",{attrs:{data:t.item.extra.data,nodeKey:t.item.extra.nodeKey,columns:t.item.extra.columns,disabled:t.item.extra.disabled},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"md"==t.item.type||"markdown"==t.item.type?[a("xy-mavon-editor",{staticStyle:{"min-height":"600px"},attrs:{item:t.item,header:t.header},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"html"==t.item.type||"tinymce"==t.item.type?[a("xy-editor-tinymce",{attrs:{item:t.item,header:t.header},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"sku"==t.item.type?[a("xy-shop-sku",{attrs:{item:t.item,header:{cloudId:t.header.cloudId,eid:t.header.eid}},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"skuPrice"==t.item.type?[a("xy-shop-skuprice",{attrs:{item:t.item,header:{cloudId:t.header.cloudId,eid:t.header.eid},formValues:t.formValues},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"fee"==t.item.type?[a("xy-deliver-fee",{attrs:{item:t.item,header:t.header,formValues:t.formValues},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"amap"==t.item.type?[a("xy-map-amap",{attrs:{item:t.item,header:t.header,formValues:t.formValues},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:"remote"==t.item.type?[a("XyBuilderRemote",{attrs:{item:t.item,header:t.header,outUrl:t.item.extra.outUrl,formValues:t.formValues},model:{value:t.formValues[t.item.name],callback:function(e){t.$set(t.formValues,t.item.name,e)},expression:"formValues[item.name]"}})]:[t._v(" "+t._s(t.item.name)+"未指定类型 ")],a("div",{staticStyle:{color:"#aaa","font-size":"12px"},domProps:{innerHTML:t._s(t.item.extra.tip)}})],2)]],2):t._e()},c=[],u=a(62032),d=a(9726),m=(a(82637),a(50740),a(42943),a(46627)),p=a.n(m),f={name:"XyBuilderFormItem",props:{prop:"",header:{type:Object,default:function(){return{cloudId:0,eid:0}}},config:{},item:{},formValues:{},formRules:{},showDev:!1},data:function(){return{ready:!1}},beforeCreate:function(){this.$options.components.XyBuilderTab=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,93628))},this.$options.components.XyBuilderInfo=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,36664))},this.$options.components.XyBuilderList=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,14106))},this.$options.components.XyBuilderRemote=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,88713))}},created:function(){if("checkbox"!=this.item.type&&"selects"!=this.item.type&&"images"!=this.item.type&&"file"!=this.item.type&&"files"!=this.item.type||""==this.formValues[this.item.name]&&(this.formValues[this.item.name]=[]),this.item.hasOwnProperty("value")||(this.item.value=""),this.item.extra||(this.item.extra={}),this.item.temp||(this.item.temp=""),this.item.extra.showModal||(this.item.extra.showModal=!1),this.item.extra.placeholder||(this.item.extra.placeholder=""),this.item.extra.tip||(this.item.extra.tip=""),this.item.extra.disabled||(this.item.extra.disabled=!1),this.item.extra.hide||(this.item.extra.hide=!1),this.item.extra.isDev||(this.item.extra.isDev=0),this.item.extra.pageData){var t=this.item.extra.pageData;t.width?!1===isNaN(t.width)&&(t.width=t.width+"px"):t.width="800px",t.hasOwnProperty("height")||(t.height="auto"),t.hasOwnProperty("pageType")||(t.pageType="modal"),t.hasOwnProperty("modalType")||(t.modalType="form"),t.hasOwnProperty("formMethod")||(t.formMethod="delete"),t.hasOwnProperty("show")||(t.show=!1),t.hasOwnProperty("path")||(t.path=""),t.hasOwnProperty("api")||(t.api=""),t.hasOwnProperty("apiBlank")||(t.apiBlank=""),t.hasOwnProperty("apiSuffix")||(t.apiSuffix=["id"]),t.hasOwnProperty("apiParams")||(t.apiParams=""),t.hasOwnProperty("querySuffix")||(t.querySuffix=[]),t.hasOwnProperty("queryParams")||(t.queryParams=""),t.hasOwnProperty("title")||(t.title=this.item.title),t.hasOwnProperty("content")||(t.content=""),t.hasOwnProperty("okText")||(t.okText=""),t.hasOwnProperty("cancelText")||(t.cancelText=""),t.hasOwnProperty("noRefresh")||(t.noRefresh=!1),t.hasOwnProperty("modalClosable")||(t.modalClosable=!1),t.hasOwnProperty("loading")||(t.loading=!1),t.hasOwnProperty("draggable")||(t.draggable=!1),t.hasOwnProperty("scrollable")||(t.scrollable=!0),t.outUrl&&apiInfo.hasOwnProperty("domainRoot")&&0!=t.outUrl.indexOf("http")&&(t.outUrl=this.$store.state.app.apiInfo.domainRoot+t.outUrl),this.item.extra.pageData=(0,s.Z)({},t)}var e=["sku","image","imageflex","images","file","files","html","tinymce","md","markdown"];if(e.includes(this.item.type)?(this.item.extra.hasUpload=!0,this.item.extra.hasOwnProperty("upload")||(this.item.extra.upload={})):this.item.extra.hasUpload=!1,this.item.extra.hasUpload){var a,i,r;if(!this.item.extra.hasOwnProperty("driver"))null!==(a=this.config)&&void 0!==a&&a.defaultUploadDriver?this.item.extra.driver=this.config.defaultUploadDriver.toLowerCase():null!==(i=this.$store.state.app)&&void 0!==i&&i.uploadDriver?this.item.extra.driver=this.$store.state.app.uploadDriver.toLowerCase():this.item.extra.driver="";if(!this.item.extra.hasOwnProperty("hasUploadModule"))this.item.extra.hasUploadModule=null===(r=this.config)||void 0===r?void 0:r.hasUploadModule;if(this.item.extra.hasOwnProperty("maxSize")||(this.item.extra.maxSize=this.config.defaultUploadMaxSize),this.item.extra.hasOwnProperty("maxSizeFile")||(this.config.hasOwnProperty("defaultUploadFileMaxSize")?this.item.extra.maxSizeFile=this.config.defaultUploadFileMaxSize:this.item.extra.maxSizeFile=20*this.config.defaultUploadMaxSize),this.item.extra.hasOwnProperty("action")||(this.item.extra.action=this.config.defaultUploadAction),this.item.extra.hasOwnProperty("spaceId")||"unicloud"!=this.item.extra.driver||(this.item.extra.spaceId=this.config.defaultUploadSpaceId,this.item.extra.clientSecret=this.config.defaultUploadClientSecret),this.item.extra.upload.hasOwnProperty("postdata")||(this.item.extra.upload.postdata={}),!this.item.extra.format){var o=["sku","image","imageflex","images"];o.includes(this.item.type)?this.item.extra.format=["jpg","jpeg","png","gif"]:this.item.extra.format=["jpg","jpeg","png","gif","ico","swf","flv","mp3","wav","wma","wmv","mid","avi","mpg","asf","rm","rmvb","mp4","doc","docx","xls","xlsx","ppt","pptx","pdf","wps","txt","zip","rar","gz","bz2","7z","ipa","apk","dmg","iso","pem","p12","wgt"]}}if(this.item.extra.options){if("string"==typeof this.item.extra.options){var n=this.$xyutil.isJson(this.item.extra.options);!1===n?n=this.item.extra.options:this.item.extra.options=n}var l=[];for(var c in this.item.extra.options){var m=this.item.extra.options[c];!1===isNaN(c)&&(c=parseInt(c)),"object"==(0,d.Z)(m)?(m.hasOwnProperty("value")||(m.hasOwnProperty("vField")?m.value=m[m.vField]:m.value=c),l.push(m)):l.push({title:m,value:c})}this.item.extra.options=l}else this.item.extra.options=[];switch(this.item.type){case"switch":case"select":case"radio":this.item.extra.options[0]&&"number"==typeof this.item.extra.options[0].value?""!==this.formValues[this.item.name]&&(this.formValues[this.item.name]=parseInt(this.formValues[this.item.name])):this.formValues[this.item.name]=this.formValues[this.item.name].toString();break;case"checkbox":case"selects":this.item.extra.options[0]&&"number"==typeof this.item.extra.options[0].value?""!==this.formValues[this.item.name]?this.formValues[this.item.name].forEach((function(t,e,a){a[e]=parseInt(t)})):this.formValues[this.item.name]=[]:this.formValues[this.item.name].forEach((function(t,e,a){a[e]=t.toString()}));break;case"imageflex":if(this.formValues[this.item.name]&&this.formValues[this.item.name].constructor!==Object){var p,f={},h=(0,u.Z)(this.item.extra.options);try{for(h.s();!(p=h.n()).done;){var v=p.value;f[v.value]=""}}catch(g){h.e(g)}finally{h.f()}this.formValues[this.item.name]=f}break;case"formlist":this.formValues[this.item.name]&&this.formValues[this.item.name].constructor===Array||(this.formValues[this.item.name]=[]);break;case"html":this.item.extra.hasOwnProperty("tinymce")||(this.item.extra.tinymce={});break;case"tinymce":this.item.extra.hasOwnProperty("tinymce")||(this.item.extra.tinymce={});break;case"datepicker":this.formValues[this.item.name]=this.$xyutil.timeFormat(this.formValues[this.item.name],"yyyy-MM-dd");break;case"datetimepicker":this.formValues[this.item.name]=this.$xyutil.timeFormat(this.formValues[this.item.name],"yyyy-MM-dd HH:mm");break;case"daterangepicker":this.formValues[this.item.name]=this.formatDates(this.formValues[this.item.name],"yyyy-MM-dd");break;case"datetimerangepicker":this.formValues[this.item.name]=this.formatDates(this.formValues[this.item.name],"yyyy-MM-dd HH:mm");break;default:break}this.ready=!0},methods:{timeSelectChange:function(t){this.$set(this.formValues,this.item.name,t)},rightButtonModal:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.item.extra,i="",r="",e.t0=a.pageData.modalType,e.next="list"===e.t0?6:9;break;case 6:return a.pageData.apiBlank=a.pageData.api+i+"?"+p().stringify(r),t.item.extra.pageData.show=!0,e.abrupt("break",12);case 9:return a.pageData.apiBlank=a.pageData.api+i+"?"+p().stringify(r),a.pageData.show=!0,e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})))()},formlistAddrow:function(){""==this.formValues[this.item.name]&&(this.formValues[this.item.name]=[]);var t,e={},a=(0,u.Z)(this.item.extra.options);try{for(a.s();!(t=a.n()).done;){var i=t.value;e[i.name]=""}}catch(r){a.e(r)}finally{a.f()}this.formValues[this.item.name].push(e)},formlistDelrow:function(t){this.formValues[this.item.name].splice(t,1)},formatDates:function(t,e){return t?2!=t.length?"":[this.$xyutil.timeFormat(t[0],e),this.$xyutil.timeFormat(t[1],e)]:""}},watch:{item:function(t){}}},h=f,v=a(1001),g=(0,v.Z)(h,l,c,!1,null,null,null),y=g.exports,x={name:"XyBuilderForm",components:{XyBuilderformItem:y},props:{api:"",header:{type:Object,default:function(){return{cloudId:0,eid:0}}},pitem:{type:Object,default:function(){return{}}},show:!1,predata:"",showDev:!1},data:function(){return{loading:!1,ready:!1,subloading:!1,ref:"form",formData:"",labelPosition:"left",labelWidth:"100px",res:{},addNext:!1,verifyData:"",count:0}},beforeCreate:function(){this.$options.components.XyBuilderTab=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,93628))},this.$options.components.XyBuilderInfo=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,36664))},this.$options.components.XyBuilderList=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,14106))}},created:function(){this.ref="form_"+(new Date).getTime(),this.predata?this.readyProcess(this.predata):this.loadData()},watch:{api:function(){this.loadData()},"formData.formValues":{handler:function(t,e){if(t){for(var a in this.formData.formItems)if(this.formData.formItems[a].extra.con){var i=this.formData.formItems[a].extra.con;this.getConditionTrueCount(i,t)===i.length?this.formData.formItems[a].extra.hide=!1:this.formData.formItems[a].extra.hide=!0}for(var r in this.formData.alertList.top)if(this.formData.alertList.top[r].condition){var s=this.formData.alertList.top[r].condition;this.getConditionTrueCount(s,t)===s.length?this.formData.alertList.top[r].show=!0:this.formData.alertList.top[r].show=!1}for(var o in this.formData.alertList.bottom)if(this.formData.alertList.bottom[o].condition){var n=this.formData.alertList.bottom[o].condition;this.getConditionTrueCount(n,t)===n.length?this.formData.alertList.bottom[o].show=!0:this.formData.alertList.bottom[o].show=!1}this.count++}},deep:!0,immediate:!0},show:function(t){1==t&&this.loadData()}},methods:{getCount:function(){return this.count},getConditionTrueCount:function(t,e){var a=0;for(var i in t)switch(t[i][1]){case"=":case"==":case"eq":e[t[i][0]]===t[i][2]&&a++;break;case"!=":case"neq":e[t[i][0]]!==t[i][2]&&a++;break;case">":case"gt":e[t[i][0]]>t[i][2]&&a++;break;case">=":case"egt":e[t[i][0]]>=t[i][2]&&a++;break;case"<":case"lt":e[t[i][0]]<t[i][2]&&a++;break;case"<=":case"elt":e[t[i][0]]<=t[i][2]&&a++;break;case"in":t[i][2].includes(e[t[i][0]])&&a++;break;case"has":e[t[i][0]].includes(t[i][2])&&a++;break;case"between":t[i][2][0]<e[t[i][0]]<t[i][2][1]&&a++;break}return a},loadData:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var a,i,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.api){e.next=2;break}return e.abrupt("return",!1);case 2:if(t.formData="",t.loading=!0,t.ready=!1,a=t,setTimeout((function(){a.loading=!1}),5e3),!t.api){e.next=14;break}return t.count=0,e.next=11,t.$xyutil.request({url:t.api,method:"get",header:{CloudId:null===(i=t.header)||void 0===i?void 0:i.cloudId,Eid:null===(r=t.header)||void 0===r?void 0:r.eid}});case 11:s=e.sent,t.loading=!1,"200"==s.code?t.readyProcess(s.data.formData):t.res=s;case 14:case"end":return e.stop()}}),e)})))()},readyProcess:function(t){var e=n.Z.readyForm({formData:t});this.formData=(0,s.Z)({},e.formData),this.ready=!0},submit:function(){var t=this;this.subloading=!0;var e=this;setTimeout((function(){e.subloading=!1}),5e3);var a=!1;if(0==this.formData.formRules.length)a=!0;else if(this.formData.formTabs.length>0){for(var i="",r=0;r<this.formData.formTabs.length;r++)this.$refs[this.ref+"_"+this.formData.formTabs[r]["name"]][0].validate((function(t){i+=t?"true":"false"}));-1==i.search("false")&&(a=!0)}else this.$refs[this.ref].validate((function(e){if(e)a=!0;else if(t.$store.state.app.uiAudio){var i=new Audio;i.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_OPEN,i.play()}}));return a?this.submitForm():(this.subloading=!1,!1)},submitForm:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){var a,i,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.formData.formValues,t.verifyData&&(a._verify=t.verifyData),e.next=4,t.$xyutil.request({url:t.formData.config.submitApi?t.formData.config.submitApi:t.api,method:t.formData.formMethod,data:a,header:{CloudId:t.header.cloudId,Eid:t.header.eid}});case 4:if(i=e.sent,"200"==i.code)if(t.verifyData="",t.count=0,t.$xyutil.showToast({title:i.msg,icon:"success",duration:1e3}),null!==i&&void 0!==i&&null!==(r=i.data)&&void 0!==r&&r.url)0!=i.data.url.indexOf("http")?t.$router.push(i.data.url):window.open(i.data.url);else if(t.addNext)if(t.formData.formTabs.length>0)for(s=0;s<t.formData.formTabs.length;s++)t.$refs[t.ref+"_"+t.formData.formTabs[s]["name"]][0].resetFields();else t.$refs[t.ref].resetFields();else t.$refs.sv.close(),null!==i&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.noback||t.$emit("close",!0);else 401003==i.code?(console.log(t.$refs.sv),t.$refs.sv.open(i.data.verifyList)):t.res=i;return t.subloading=!1,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))()},cancel:function(){this.$emit("close",!1)}}},b=x,w=(0,v.Z)(b,i,r,!1,null,"6156be4e",null),_=w.exports},36664:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],staticClass:"xy-builder-comp xy-builder-wrap-info"},[t.infoData.infoList?t._l(t.infoData.infoList,(function(e,i){return a("div",{key:i,staticClass:"item-group"},[a("xy-title",{directives:[{name:"show",rawName:"v-show",value:e.title,expression:"group.title"}],staticClass:"m-b-sm m-t"},[t._v(t._s(e.title))]),t.ready?a("el-row",t._l(e.data,(function(e,i){return a("div",{key:i},["list"==e.type?a("el-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[a("div",[a("XyBuilderList",{ref:"xy_builder_info_"+i,refInFor:!0,attrs:{header:t.header,show:!0,api:e.pageData?e.pageData.api:"",predata:e.value?e.value:""}})],1)]):"form"==e.type?a("el-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[a("div",[a("XyBuilderForm",{ref:"xy_builder_form_"+i,refInFor:!0,attrs:{header:t.header,show:!0,api:e.pageData?e.pageData.api:"",predata:e.value?e.value:""}})],1)]):"stack"==e.type?a("el-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[a("div",[a("XyBuilderStack",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{header:t.header,show:!0,api:e.pageData?e.pageData.api:"",predata:e.value?e.value:""}})],1)]):"count"==e.type?a("el-col",{staticClass:"info-item block",attrs:{xs:24,sm:24}},[e.value?a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex",justify:"start",align:"top"}},t._l(e.value,(function(e,i){return a("el-col",{key:i,attrs:{xs:12,xl:e.item.xl?e.item.xl:6,xxl:4}},[a("el-row",{staticClass:"count-item",style:{backgroundColor:e.item.bgColor},attrs:{type:"flex",justify:"center",align:"top"}},[a("el-col",{staticClass:"left"},[a("i",{staticClass:"icon",class:e.item.icon}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.item.title,expression:"it.item.title"}]},[t._v(t._s(e.item.title))])]),a("el-col",{staticClass:"right",style:{backgroundColor:e.item.bgColorRight||"#fff",color:e.item.bgColorRight?"#fff":""}},[a("div",{staticClass:"value"},[a("span",[t._v(t._s(e.current.value))]),a("span",{staticClass:"suffix"},[t._v(t._s(e.current.suffix))])]),a("div",{staticClass:"title"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.content.value,expression:"it.content.value"}],staticClass:"value"},[t._v(t._s(e.content.value))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.content.list,expression:"it.content.list"}],staticClass:"list"},t._l(e.content.list,(function(e,i){return a("div",{key:i,staticClass:"cell"},[t._v(" "+t._s(e.title)+"："+t._s(e.value)+" ")])})),0)])])],1)],1)})),1):t._e()],1):a("el-col",{staticClass:"info-item",attrs:{xs:24,sm:{span:e.extra.sm.span?e.extra.sm.span:8,offset:e.extra.sm.offset?e.extra.sm.offset:0,pull:e.extra.sm.pull?e.extra.sm.pull:0,push:e.extra.sm.push?e.extra.sm.push:0}}},[a("div",{staticClass:"title text-gray ts-13"},[t._v(" "+t._s(e.title)+"： ")]),a("div",{staticClass:"value ts-14"},["text"==e.type?[a("span",[t._v(t._s(e.value))])]:"image"==e.type?[a("img",{attrs:{src:e.value,width:e.extra.width||"40px"}})]:"label"==e.type?[a("span",{style:{color:t.getArrayField(e.extra.options,e.value,"color","")}},[t._v(" "+t._s(t.getArrayField(e.extra.options,e.value,"title",e.value))+" ")])]:t._e(),"link"==e.type?[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.goPage(e)}}},[t._v(t._s(e.value))]),a("div",{staticClass:"dialog-pool"},[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:t.currentItem.pageData.show,width:t.currentItem.pageData.width||"900",title:t.currentItem.pageData.title},on:{"update:visible":function(e){return t.$set(t.currentItem.pageData,"show",e)}}},[t.currentItem.pageData.show?["list"==t.currentItem.pageData.modalType?a("XyBuilderList",{ref:"dialog-pool-list",refInFor:!0,attrs:{header:t.header,api:t.currentItem.pageData.apiBlank,show:t.currentItem.pageData.show,pitem:t.currentItem}}):"form"==t.currentItem.pageData.modalType?a("XyBuilderForm",{ref:"dialog-pool-form",refInFor:!0,attrs:{header:t.header,api:t.currentItem.pageData.apiBlank,show:t.currentItem.pageData.show,pitem:t.currentItem,showDev:t.showDev}}):"html"==t.currentItem.pageData.modalType?a("div",{domProps:{innerHTML:t._s(t.currentItem.pageData.predata)}}):"htmls"==t.currentItem.pageData.modalType?a("div",t._l(t.currentItem.pageData.predata,(function(e,i){return a("div",{key:i,domProps:{innerHTML:t._s(e)}})})),0):"table"==t.currentItem.pageData.modalType?a("div",[a("el-table",{attrs:{data:t.currentItem.pageData.predata.data,border:"",stripe:""}},t._l(t.currentItem.pageData.predata.columns,(function(t){return a("el-table-column",{key:t.name,attrs:{prop:t.name,label:t.title,width:t.width}})})),1)],1):t._e()]:t._e()],2)],1)]:"tag"==e.type?[a("el-tag",{attrs:{hit:!1,effect:t.getArrayField(e.extra.options,e.value,"effect","light"),type:t.getArrayField(e.extra.options,e.value,"type",""),color:t.getArrayField(e.extra.options,e.value,"color","")}},[t._v(" "+t._s(t.getArrayField(e.extra.options,e.value,"title",e.value))+" ")])]:"tags"==e.type?[t._l(e.value,(function(i,r){return[a("el-tag",{key:r,attrs:{hit:!1,effect:t.getArrayField(e.extra.options,i,"effect","light"),type:t.getArrayField(e.extra.options,i,"type",""),color:t.getArrayField(e.extra.options,i,"color","")}},[t._v(" "+t._s(t.getArrayField(e.extra.options,i,"title",i))+" ")])]}))]:t._e(),"time"==e.type?[a("span",[t._v(t._s(t.$xyutil.timeFormat(e.value)))])]:t._e(),"url"==e.type?[a("a",{attrs:{href:e.value,target:"_blank"}},[t._v(t._s(e.extra.placeholder))])]:t._e()],2)])],1)})),0):t._e()],1)})):t._e()],2)},r=[],s=a(16198),o=a(9726),n=(a(24337),a(60626),a(58933),a(2953),a(21747),a(6750),a(57020),a(50740),a(12638)),l={mixins:[n.Z],name:"XyBuilderInfo",props:{api:"",header:{type:Object,default:function(){return{cloudId:0,eid:0}}},pitem:{type:Object,default:function(){return{}}},show:!1,predata:""},data:function(){return{ready:!1,loading:!1,infoData:{infoList:""},currentItem:{pageData:{pageType:"modal",modalTye:"",apiBlank:"",show:!1,title:"",predata:""}}}},watch:{show:function(t){this.infoData={},1==t&&this.loadData()}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,14106))},this.$options.components.XyBuilderForm=function(){return Promise.resolve().then(a.bind(a,53100))},this.$options.components.XyBuilderTab=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,93628))},this.$options.components.XyBuilderStack=function(){return a.e(700).then(a.bind(a,2599))}},created:function(){this.predata?this.processData(this.predata):this.loadData()},methods:{getArrayField:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!t||0==t.length)return e;"string"==typeof t[0].value&&(e+=""),"number"==typeof t[0].value&&(e=parseInt(e));var r=t.findIndex((function(t){return t.value===e}));return""==a?r:t[r]&&t[r].hasOwnProperty(a)&&t[r][a]?t[r][a]:i},processData:function(t){var e=this;t.infoList.forEach((function(t){t.data.forEach((function(t){if(t.hasOwnProperty("extra")||(t.extra={}),t.extra.hasOwnProperty("sm")||(t.extra.sm={}),t.extra.options){if("string"==typeof t.extra.options){var a=e.$xyutil.isJson(t.extra.options);!1===a?a=t.extra.options:t.extra.options=a}var i=[];for(var r in t.extra.options){var s=t.extra.options[r];!1===isNaN(r)&&(r=parseInt(r)),"object"==(0,o.Z)(s)?(s.hasOwnProperty("value")||(s.value=r),i.push(s)):i.push({title:s,value:r})}t.extra.options=i}else t.extra.options=[]}))})),console.log(t),this.infoData=t,this.ready=!0},loadData:function(){var t=arguments,e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i,r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"",""!=i&&(e.api=i),e.ready=!1,e.loading=!0,!e.api){a.next=9;break}return a.next=7,e.$xyutil.request({url:e.api,method:"get",header:{CloudId:null===(r=e.header)||void 0===r?void 0:r.cloudId,Eid:null===(s=e.header)||void 0===s?void 0:s.eid}});case 7:o=a.sent,"200"==o.code?(e.processData(o.data.infoData),e.loading=!1):e.$xyutil.showToast({title:o.msg,icon:"loading",duration:3e3});case 9:e.loading=!1;case 10:case"end":return a.stop()}}),a)})))()}}},c=l,u=a(1001),d=(0,u.Z)(c,i,r,!1,null,"3ce4df34",null),m=d.exports},14106:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xy-builder-comp xy-builder-wrap-list"},[t.listData.alertList&&t.listData.alertList.top?t._l(t.listData.alertList.top,(function(e,i){return a("el-alert",{key:i,attrs:{type:e.type,"show-icon":!1,closable:!1,effect:"dark"}},[a("div",{domProps:{innerHTML:t._s(e.desc)}})])})):t._e(),[t.listData.countList?a("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},t._l(t.listData.countList,(function(e,i){return a("el-col",{key:i,attrs:{xs:12,xl:e.item.xl?e.item.xl:6,xxl:4}},[a("el-row",{staticClass:"count-item",style:{backgroundColor:e.item.bgColor},attrs:{type:"flex",justify:"center",align:"top"}},[a("el-col",{staticClass:"left"},[a("i",{staticClass:"icon",class:e.item.icon}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.item.title,expression:"it.item.title"}]},[t._v(t._s(e.item.title))])]),a("el-col",{staticClass:"right",style:{backgroundColor:e.item.bgColorRight||"#fff",color:e.item.bgColorRight?"#fff":""}},[a("div",{staticClass:"value"},[a("span",[t._v(t._s(e.current.value))]),a("span",{staticClass:"suffix"},[t._v(t._s(e.current.suffix))])]),a("div",{staticClass:"title"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.content.value,expression:"it.content.value"}],staticClass:"value"},[t._v(t._s(e.content.value))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.content.list,expression:"it.content.list"}],staticClass:"list"},t._l(e.content.list,(function(e,i){return a("div",{key:i,staticClass:"cell"},[t._v(" "+t._s(e.title)+"："+t._s(e.value)+" ")])})),0)])])],1)],1)})),1):t._e(),t._l(t.listData.topButtonList,(function(e,i){return[a("transition",{key:"top_modal_"+i,attrs:{name:"el-zoom-in-top"}},[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],ref:"top_modal_"+e.name,refInFor:!0,attrs:{"close-on-click-modal":!!e.pageData.hasOwnProperty("modalClosable")&&e.pageData.modalClosable,"append-to-body":!0,visible:e.pageData.show,width:e.pageData.width||"800px",title:e.pageData.title},on:{open:t.dialogOpen,close:t.dialogClose,"update:visible":function(a){return t.$set(e.pageData,"show",a)}}},["form"==e.pageData.modalType?[a("XyBuilderForm",{ref:"top_dialog_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev},on:{close:function(a){return t.closeModel(e,a)}}})]:"list"==e.pageData.modalType?[a("XyBuilderList",{ref:"top_dialog_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev}})]:"tab"==e.pageData.modalType?[a("XyBuilderTab",{ref:"top_dialog_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev}})]:"stack"==e.pageData.modalType?[a("XyBuilderStack",{ref:"top_dialog_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev}})]:"info"==e.pageData.modalType?[a("XyBuilderInfo",{ref:"top_dialog_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev}})]:"col"==e.pageData.modalType?[a("XyBuilderCol",{ref:"top_dialog_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev}})]:"remote"==e.pageData.modalType?[a("XyBuilderRemote",{ref:"top_remote_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,outUrl:e.pageData.outUrl,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev},on:{close:function(a){return t.closeModel(e,a)}}})]:t._e()],2)],1)]})),a("div",{staticClass:"tool-box",style:{display:t.listData.filterItems&&t.listData.filterItems.length>2?"block":"flex",justifyContent:"space-between"}},[t._l(t.listData.topButtonList,(function(e,i){return a("div",{key:"button"+i,staticClass:"top-button-list"},["print"==e.pageData.modalType?a("el-button",{directives:[{name:"print",rawName:"v-print",value:"#table-box",expression:"'#table-box'"}],attrs:{type:e.style.type||"primary",size:e.style.size||"small"}},[t._v(" "+t._s(e.title)+" ")]):a("el-button",{staticStyle:{"margin-bottom":"10px","margin-right":"10px"},attrs:{"empty-text":"当前没有数据",type:e.style.type||"primary",size:e.style.size||"small",icon:e.style.icon},on:{click:function(e){return t.topButtonModal(i)}}},[t._v(" "+t._s(e.title)+" ")])],1)})),t.listData.filterItems&&t.listData.filterItems.length>0?a("div",{staticClass:"filter-list flex-1 flex",style:{justifyContent:t.listData.filterItems&&t.listData.filterItems.length>2?"flex-start":"flex-end"},attrs:{gutter:16}},[a("el-form",{ref:"formFilter",attrs:{"label-position":"left","label-width":"80px",inline:!0,size:"small",model:t.filterValues}},[t._l(t.listData.filterItems,(function(e,i){return[a("el-form-item",{key:i,staticClass:"filter-item",attrs:{label:e.title+":"}},["text"==e.type?[a("el-input",{attrs:{type:"text",placeholder:e.extra.placeholder},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.loadData())}},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"select"==e.type?[a("el-select",{attrs:{clearable:"",filterable:""},on:{"on-change":function(e){return t.loadData()}},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}},t._l(e.extra.options,(function(t,e,i){return a("el-option",{key:i,attrs:{label:t.title,value:t.value}})})),1)]:"radio"==e.type?[a("el-radio-group",{model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}},t._l(e.extra.options,(function(e,i,r){return a("el-radio",{key:r,attrs:{label:e.value}},[a("span",[t._v(t._s(e.title))])])})),1)]:"checkbox"==e.type?[a("el-checkbox-group",{model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}},t._l(e.extra.options,(function(e,i,r){return a("el-checkbox",{key:r,attrs:{label:e.value}},[t._v(" "+t._s(e.title)+" ")])})),1)]:"datepicker"==e.type?[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"timepicker"==e.type?[a("el-time-select",{attrs:{type:"time",placeholder:"选择时间","value-format":e.extra.format||"HH:mm:ss"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"timerangepicker"==e.type?[a("el-time-select",{attrs:{type:"timerange","is-range":"",placeholder:"选择时间区间","value-format":e.extra.format||"HH:mm:ss"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"datetimepicker"==e.type?[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"daterangepicker"==e.type?[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"datetimerangepicker"==e.type?[a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:t._e()],2)]})),[a("el-form-item",{staticClass:"filter-item ",attrs:{"label-width":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.loadData()}}},[t._v("查询")]),t.listData.filterExtra&&t.listData.filterExtra.exportBtn?t._l(t.listData.filterExtra.exportBtn,(function(e,i){return a("el-button",{key:i,staticClass:"m-l-xs",attrs:{type:e.type||"primary"},on:{click:function(e){return t.handleFilterExport(i)}}},[t._v(" "+t._s(e.title||"导出")+" ")])})):t._e()],2)]],2)],1):t._e()],2),t.listData.config.tableTitle?a("div",{staticClass:"m-b-sm table-title text-center",staticStyle:{"font-family":"SimSun"}},t._l(t.listData.config.tableTitle,(function(e,i){return a("div",{key:i,staticClass:"ts-30",style:{width:e.width}},[t._v(" "+t._s(e.value)+" ")])})),0):t._e(),t.listData.config.tableBefore?a("div",{staticClass:"m-b-sm table-title text-center flex space-around",staticStyle:{"font-family":"SimSun"}},t._l(t.listData.config.tableBefore,(function(e,i){return a("div",{key:i,staticClass:"ts-14"},[a("span",[t._v(t._s(e.title)+"：")]),a("span",[t._v(t._s(e.value))])])})),0):t._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],staticClass:"table-box",style:{minHeight:t.loading?"100px":"0"},attrs:{id:"table-box","element-loading-text":"拼命加载中"}},[t.listData.config.listAsTiemline||t.loading||!t.ready?t._e():a("el-table",{ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:t.listData.dataList,"row-key":"id","srow-key":t.listData.dataListParams?t.listData.dataListParams.expandKey:"id",border:!!t.listData.config.listBorder&&t.listData.config.listBorder,stripe:!!t.listData.config.listStripe&&t.listData.config.listStripe,"tree-props":{children:"children",hasChildren:"hasChildren"},"default-expand-all":!(!t.listData.config||!t.listData.config.listExpandAll)&&t.listData.config.listExpandAll},on:{"cell-click":t.cellClick,select:t.selectRow,"selection-change":t.handleSelectionChange,"select-all":t.selectAll}},[t.listData.dataListParams&&t.listData.dataListParams.selectable?a("el-table-column",{attrs:{type:"selection",width:"40"}}):t._e(),t._l(t.listData.columns,(function(e,i,r){return[e.children&&0!=e.children.length?[a("el-table-column",{key:r,attrs:{label:e.title}},[t._l(e.children,(function(e,i,r){return[e.children&&e.children.length>0?[a("el-table-column",{key:r,attrs:{label:e.title}},[t._l(e.children,(function(t,e,i){return[a("el-table-column",{key:i,attrs:{prop:t.name,label:t.title,width:t.extra.width,"min-width":t.extra.minWidth||"50px"}},[void 0],2)]}))],2)]:[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("table-column",{key:r,attrs:{myscope:i,mycolitem:e,header:t.header,pitem:t.pitem,listData:t.listData,current:t.current,currentItem:t.currentItem}})]}}],null,!0)})]]}))],2)]:[a("el-table-column",{key:r,attrs:{type:"id"==e.extra.type?"index":"default",fixed:"fui"!=t.$store.state.menu.adminTheme&&"rightButtonList"==e.extra.type&&"right",prop:e.name,label:e.title,width:e.extra.width?e.extra.width:void 0,"min-width":e.extra.minWidth&&"rightButtonList"!=e.extra.type?e.extra.minWidth:void 0},scopedSlots:t._u([{key:"default",fn:function(i){return[a("table-column",{attrs:{myscope:i,mycolitem:e,header:t.header,pitem:t.pitem,listData:t.listData,current:t.current,currentItem:t.currentItem}})]}}],null,!0)})]]}))],2),t.listData.config.listAsTiemline?a("div",[a("el-timeline",t._l(t.listData.dataList,(function(e,i){return a("el-timeline-item",{key:i,attrs:{timestamp:e[t.listData.config.listAsTiemline?t.listData.config.listAsTiemline:"createTime"],placement:"top"}},[a("el-card",[e.title?a("h4",[t._v(t._s(e.title))]):t._e(),t._l(t.listData.columns,(function(i,r){return a("div",{key:r},[i.name!=t.listData.config.listAsTiemline?a("p",["tag"==i.extra.type?[i.extra.options[t.getArrayIndex(i.extra.options,t.getVal({row:e},i))]?[a("span",[t._v(t._s(i.title)+"：")]),a("el-tag",{attrs:{hit:!1,size:"mini",effect:i.extra.options[t.getArrayIndex(i.extra.options,t.getVal({row:e},i))].effect||"dark",type:i.extra.options[t.getArrayIndex(i.extra.options,t.getVal({row:e},i))].type||"",color:i.extra.options[t.getArrayIndex(i.extra.options,t.getVal({row:e},i))].color||"default"}},[t._v(" "+t._s(i.extra.options[t.getArrayIndex(i.extra.options,t.getVal({row:e},i))].title||t.getVal({row:e},i))+" ")])]:[a("el-tag",{attrs:{size:"mini",hit:!1}},[t._v(" "+t._s(e[i.name])+" ")])]]:"rightButtonList"==i.extra.type?[a("el-table-column",{key:t.colkey,attrs:{fixed:(!t.$store.state.menu||"fui"!=t.$store.state.menu.adminTheme)&&"right",prop:i.name,label:i.title,width:i.extra.width}},[[a("div",[a("span",[t._v(t._s(i.title)+"：")]),t._l(t.listData.rightButtonList,(function(r,s){return[e[i.name]?[e[i.name].includes(r.name)?[a("a",{key:"rbutton"+s,class:"default"==r.style.type?"":"text-"+r.style.type,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{type:r.style.type,size:r.style.size,icon:r.style.icon},on:{click:function(a){return t.rightButtonModal(s,{row:e})}}},[t._v(" "+t._s(r.title)+" ")])]:t._e()]:[t.showByCondition(r,e)?a("a",{key:"rbutton"+s,class:"default"==r.style.type?"":"text-"+r.style.type,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{type:r.style.type,size:r.style.size,icon:r.style.icon},on:{click:function(a){return t.rightButtonModal(s,{row:e})}}},[t._v(" "+t._s(r.title)+" ")]):t._e()]]}))],2)]],2)]:[a("span",[t._v(t._s(i.title)+"：")]),t._v(t._s(e[i.name])+" ")]],2):t._e()])}))],2)],1)})),1)],1):t._e()],1),a("div",{staticClass:"flex space-between flex-alignCenter"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.listData.dataPage.total>0,expression:"listData.dataPage.total > 0"}],staticClass:"text-left m-t-sm m-b-sm",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":t.limit,"current-page":t.page,total:t.listData.dataPage.total},on:{"current-change":t.pageChange,"size-change":t.limitChange,"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}}),a("div",{staticClass:"p-l-lg p-r-lg"},[t.$store.state.menu&&"fui"==t.$store.state.menu.adminTheme?a("dv-decoration-2",{staticStyle:{width:"50%",height:"3px"}}):t._e()],1)],1),a("div",{staticClass:"dialog-pool"},[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:t.currentItem.pageData.show,width:t.currentItem.pageData.width||"900",title:t.currentItem.pageData.title},on:{open:t.dialogOpen,close:t.dialogClose,"update:visible":function(e){return t.$set(t.currentItem.pageData,"show",e)}}},[t.currentItem.pageData.show?["list"==t.currentItem.pageData.modalType?a("XyBuilderList",{ref:"dialog-pool-list",attrs:{header:t.header,api:t.currentItem.pageData.apiBlank,show:t.currentItem.pageData.show,pitem:t.currentItem,showDev:t.showDev}}):"form"==t.currentItem.pageData.modalType?a("XyBuilderForm",{ref:"dialog-pool-form",attrs:{header:t.header,api:t.currentItem.pageData.apiBlank,show:t.currentItem.pageData.show,pitem:t.currentItem,showDev:t.showDev}}):"htmls"==t.currentItem.pageData.modalType?a("div",t._l(t.currentItem.pageData.predata,(function(e,i){return a("div",{key:i,domProps:{innerHTML:t._s(e)}})})),0):"table"==t.currentItem.pageData.modalType?a("div",[a("el-table",{attrs:{data:t.currentItem.pageData.predata.data,border:"",stripe:""}},t._l(t.currentItem.pageData.predata.columns,(function(t){return a("el-table-column",{key:t.name,attrs:{prop:t.name,label:t.title,width:t.width}})})),1)],1):t._e()]:t._e()],2)],1),t._l(t.listData.rightButtonList,(function(e,i){return a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],key:"right_modal_"+i,ref:"right_modal_"+e.name,refInFor:!0,attrs:{"close-on-click-modal":!0===e.pageData.modalClosable,"append-to-body":!0,visible:e.pageData.show,width:e.pageData.width||"700",title:e.pageData.title},on:{open:t.dialogOpen,close:t.dialogClose,"update:visible":function(a){return t.$set(e.pageData,"show",a)}}},["form"==e.pageData.modalType?[e.pageData.show?a("XyBuilderForm",{ref:"right_form_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev},on:{close:function(a){return t.closeModel(e,a)}}}):t._e()]:"list"==e.pageData.modalType?[a("XyBuilderList",{ref:"right_list_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e,showDev:t.showDev}})]:"info"==e.pageData.modalType?[a("XyBuilderInfo",{ref:"right_info_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e,showDev:t.showDev}})]:"tab"==e.pageData.modalType?[a("XyBuilderTab",{ref:"right_info_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e}})]:"stack"==e.pageData.modalType?[a("XyBuilderStack",{ref:"right_stack_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e,showDev:t.showDev}})]:"remote"==e.pageData.modalType?[a("XyBuilderRemote",{ref:"right_remote_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,outUrl:e.pageData.outUrl,show:e.pageData.show,pitem:e,showDev:t.showDev},on:{close:function(a){return t.closeModel(e,a)}}})]:"col"==e.pageData.modalType?[a("XyBuilderCol",{ref:"right_remote_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e,showDev:t.showDev}})]:t._e()],2)})),1==this.showActions?a("div",[a("el-divider"),a("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",size:"default"},on:{click:function(e){return t.submit()}}},[t._v(" 确认选择 ")]),a("el-button",{attrs:{type:"text",size:"default"},on:{click:function(e){return t.cancel()}}},[t._v(" 取消操作 ")])],1):t._e()],t.listData.alertList&&t.listData.alertList.bottom?[a("div",t._l(t.listData.alertList.bottom,(function(e,i){return a("el-alert",{key:i,attrs:{type:e.type,"show-icon":!1,closable:!1,effect:"dark"}},[a("div",{domProps:{innerHTML:t._s(e.desc)}})])})),1)]:t._e()],2)},r=[],s=a(93019),o=a(16198),n=(a(24337),a(60626),a(58933),a(2953),a(21747),a(6750),a(50740),a(15899),a(46627)),l=a.n(n),c={name:"check",data:function(){return{hasCheckAll:!1,currentSelected:-1,currentSelecteds:[]}},created:function(){},mounted:function(){var t=(0,o.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),methods:{selectRow:function(t,e){var a,i,r,s;"radio"==(null===(a=this.listData)||void 0===a||null===(i=a.dataListParams)||void 0===i?void 0:i.selectType)?(this.$refs.dataTable.clearSelection(),this.$refs.dataTable.toggleRowSelection(e,!0),this.currentSelected=e.id,console.log(this.currentSelected)):"checkbox"==(null===(r=this.listData)||void 0===r||null===(s=r.dataListParams)||void 0===s?void 0:s.selectType)&&e.children&&this.checkChildRows(e.children)},handleSelectionChange:function(t){var e,a;if(console.log("handleSelectionChange",t),"checkbox"==(null===(e=this.listData)||void 0===e||null===(a=e.dataListParams)||void 0===a?void 0:a.selectType)){var i=[];t.forEach((function(t){i.push(t.id)})),this.currentSelecteds=i,console.log("currentSelecteds",this.currentSelecteds)}},selectAll:function(){var t,e,a,i;"radio"==(null===(t=this.listData)||void 0===t||null===(e=t.dataListParams)||void 0===e?void 0:e.selectType)?this.$refs.dataTable.clearSelection():"checkbox"==(null===(a=this.listData)||void 0===a||null===(i=a.dataListParams)||void 0===i?void 0:i.selectType)&&(this.hasCheckAll?(this.checkChildRows(this.listData.dataList,!1),this.hasCheckAll=!1):(this.checkChildRows(this.listData.dataList),this.hasCheckAll=!0))},checkChildRows:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.forEach((function(t){e.$refs.dataTable.toggleRowSelection(t,a),t.children&&e.checkChildRows(t.children,a)}))},checkRows:function(t){var e=this;t.forEach((function(t){e.currentSelecteds&&e.currentSelecteds.indexOf(t.id)>=0&&e.$refs.dataTable.toggleRowSelection(t,!0),t.children&&e.checkRows(t.children)}))},submit:function(){var t,e;"checkbox"==(null===(t=this.listData)||void 0===t||null===(e=t.dataListParams)||void 0===e?void 0:e.selectType)?this.$emit("input",this.currentSelecteds):this.$emit("input",this.currentSelected),this.$emit("close-model")}}},u=(a(55700),{name:"inlineEdit",data:function(){return{editFaild:[]}},created:function(){},mounted:function(){var t=(0,o.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),methods:{cellChange:function(t,e){var a=this;return(0,o.Z)(regeneratorRuntime.mark((function i(){var r,s,o,n,l,c,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&null!==(r=e.extra)&&void 0!==r&&r.url){i.next=3;break}return a.$xyutil.showToast({title:"未设置修改接口",icon:"error",duration:2e3}),i.abrupt("return",!1);case 3:return i.next=5,a.$xyutil.request({url:null===e||void 0===e||null===(s=e.extra)||void 0===s?void 0:s.url,method:"PUT",data:{table:null===(o=a.listData)||void 0===o||null===(n=o.dataListParams)||void 0===n?void 0:n.tableName,field:e.name,newval:t.row[e.name],id:t.row.id},header:{CloudId:null===(l=a.header)||void 0===l?void 0:l.cloudId,Eid:null===(c=a.header)||void 0===c?void 0:c.eid}});case 5:u=i.sent,200==u.code?(a.$xyutil.showToast({title:u.msg,icon:"success",duration:1e3}),a.current.row={},a.current.column={}):a.$xyutil.showToast({title:u.msg,icon:"error",duration:2e3}),console.log(a.listData.dataList[scope.$index][colitem.name]);case 8:case"end":return i.stop()}}),i)})))()},changeCheckbox:function(t){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function a(){var i,r,s,o,n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(scope),n=t.column.extra.url?t.column.extra.url:"/v1/admin/core/index/editField",(null===(i=e.header)||void 0===i?void 0:i.cloudId)>0&&(n=t.column.extra.url?t.column.extra.url:"/v1/iadmin/core/index/editField"),(null===(r=e.header)||void 0===r?void 0:r.Eid)>0&&(n=t.column.extra.url?t.column.extra.url:"/v1/eadmin/core/index/editField"),a.next=6,e.$xyutil.request({url:n,method:"PUT",data:{table:e.listData.dataListParams.tableName,field:t.column.name,newval:scope.row[t.column.name],id:scope.row.id},header:{CloudId:null===(s=e.header)||void 0===s?void 0:s.cloudId,Eid:null===(o=e.header)||void 0===o?void 0:o.eid}});case 6:l=a.sent,200==l.code?e.$Message.success(l.msg):e.$Message.error(l.msg);case 8:case"end":return a.stop()}}),a)})))()},changeSwitch:function(t,e,a){var i=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var s,o,n,l,c,u,d,m,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i.listData.dataListParams.tableName){r.next=3;break}return i.$xyutil.showToast({title:"未设置表名",icon:"error",duration:2e3}),r.abrupt("return",!1);case 3:return u=(null===a||void 0===a||null===(s=a.extra)||void 0===s?void 0:s.url)||"/v1/admin/core/index/editField",(null===(o=i.header)||void 0===o?void 0:o.cloudId)>0&&(u=(null===a||void 0===a||null===(d=a.extra)||void 0===d?void 0:d.url)||"/v1/iadmin/core/index/editField"),(null===(n=i.header)||void 0===n?void 0:n.Eid)>0&&(u=(null===a||void 0===a||null===(m=a.extra)||void 0===m?void 0:m.url)||"/v1/eadmin/core/index/editField"),i.listData.dataList[e.$index][a.name+"_loading"]=!0,r.next=9,i.$xyutil.request({url:u,method:"PUT",data:{table:i.listData.dataListParams.tableName,field:a.name,newval:t,id:e.row.id},header:{CloudId:null===(l=i.header)||void 0===l?void 0:l.cloudId,Eid:null===(c=i.header)||void 0===c?void 0:c.eid}});case 9:p=r.sent,200==p.code?i.$xyutil.showToast({title:p.msg,icon:"success",duration:1e3}):i.$xyutil.showToast({title:p.msg,icon:"error",duration:2e3});case 11:case"end":return r.stop()}}),r)})))()}}}),d=a(12638),m=a(62032),p=(a(90466),a(89046),a(57020),a(51117),a(25656),{name:"table-column-methods",data:function(){return{}},created:function(){},mounted:function(){var t=(0,o.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getVal:function(t,e){if(-1==e.name.indexOf("."))return t.row[e.name];var a=e.name.split(".");switch(a.length){case 2:return t.row[a[0]][a[1]];case 3:return t.row[a[0]][a[1]][a[2]];case 4:return t.row[a[0]][a[1]][a[2]][a[3]]}},getArrayIndex:function(t,e){var a=t.findIndex((function(t){return t.value===e}));return a},showByCondition:function(t,e){if(!t.pageData.hasOwnProperty("condition"))return!0;var a,i=(0,m.Z)(t.pageData.condition);try{for(i.s();!(a=i.n()).done;){var r=a.value;switch(r[1]){case"=":if(e[r[0]]!==r[2])return!1;break;case">":if(!(e[r[0]]>r[2]))return!1;break;case">=":if(!(e[r[0]]>=r[2]))return!1;break;case"<":if(!(e[r[0]]<r[2]))return!1;break;case"<=":if(!(e[r[0]]<=r[2]))return!1;break;case"in":if(!r[2].includes(e[r[0]]))return!1;break;case"has":if(!e[r[0]].includes(r[2]))return!1;break}}}catch(s){i.e(s)}finally{i.f()}return!0}}}),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xy-builder-list-table-column inline-block"},["html"==t.mycolitem.extra.type?[a("div",{domProps:{innerHTML:t._s(t.myscope.row[t.mycolitem.name])}})]:"id"==t.mycolitem.extra.type?[a("el-popover",{attrs:{placement:"top-start",title:"ID",width:"200",trigger:"hover",content:t.getVal(t.myscope,t.mycolitem)}},[a("span",{staticClass:"cursor-pointer",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.myscope.$index+1+(t.listData.dataPage.page-1)*t.listData.dataPage.limit))])])]:"group"==t.mycolitem.extra.type?t._l(t.mycolitem.extra.extend.fields,(function(e,i){return a("div",{key:i,staticClass:"group-mycolitem"},[a("div",{staticClass:"title"},[t._v(" "+t._s(e[1])+" : ")]),a("div",{staticClass:"value"},[t._v(" "+t._s(t.myscope.row[e[0]])+" ")])])})):"checkbox1"==t.mycolitem.extra.type?[a("el-checkbox-group",{on:{"on-change":function(e){return t.changeCheckbox(t.myscope)}},model:{value:t.myscope.row[t.mycolitem.name],callback:function(e){t.$set(t.myscope.row,t.mycolitem.name,e)},expression:"myscope.row[mycolitem.name]"}},t._l(t.mycolitem.extra.options,(function(e,i,r){return a("el-checkbox",{key:r,attrs:{disabled:!!t.mycolitem.extra.disabled&&t.mycolitem.extra.disabled,label:e.value}},[t._v(" "+t._s(e.title)+" ")])})),1)]:"switch"==t.mycolitem.extra.type?[a("el-switch",{attrs:{size:"mini","av-loading":"listData.dataList[myscope.$index][mycolitem.name + '_loading']","active-text1":t.mycolitem.extra.options[1].title,"inactive-text1":t.mycolitem.extra.options[0].title,"active-color":"#86c042","inactive-color":"#ddd","active-value":t.mycolitem.extra.options[1].value,"inactive-value":t.mycolitem.extra.options[0].value},on:{change:function(e){return t.changeSwitch(e,t.myscope,t.mycolitem)}},model:{value:t.myscope.row[t.mycolitem.name],callback:function(e){t.$set(t.myscope.row,t.mycolitem.name,e)},expression:"myscope.row[mycolitem.name]"}})]:"image"==t.mycolitem.extra.type?[a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:t.getVal(t.myscope,t.mycolitem)||t.CDN_URL+"/noimage.png",width:t.mycolitem.extra.extend&&t.mycolitem.extra.extend.width?t.mycolitem.extra.extend.width:"",height:t.mycolitem.extra.extend&&t.mycolitem.extra.extend.height?t.mycolitem.extra.extend.height:"35"}})]:"images"==t.mycolitem.extra.type?t._l(t.getVal(t.myscope,t.mycolitem),(function(e){return a("img",{key:e,staticStyle:{"vertical-align":"middle","margin-right":"2px"},attrs:{src:e.url||t.CDN_URL+"/noimage.png",width:t.mycolitem.extra.extend&&t.mycolitem.extra.extend.width?t.mycolitem.extra.extend.width:"",height:t.mycolitem.extra.extend&&t.mycolitem.extra.extend.height?t.mycolitem.extra.extend.height:"35"}})})):"audio"==t.mycolitem.extra.type?[a("audio",{staticStyle:{"vertical-align":"middle",width:"150px",height:"30px"},attrs:{controls:"controls",preload:"none"}},[a("source",{attrs:{src:t.getVal(t.myscope,t.mycolitem)}}),t._v(" Your browser does not support the audio element. ")])]:"rate"==t.mycolitem.extra.type?[a("el-rate",{staticStyle:{"vertical-align":"middle"},attrs:{"allow-half":"",disabled:"","show-text":!1,value:t.getVal(t.myscope,t.mycolitem)}})]:"progress"==t.mycolitem.extra.type?[t.mycolitem.extra.extend?a("el-progress",{staticStyle:{"vertical-align":"middle"},attrs:{type:t.mycolitem.extra.extend.type||"line",percentage:t.getVal(t.myscope,t.mycolitem),status:t.mycolitem.extra.extend&&t.mycolitem.extra.extend.status||"","text-inside":!0,"stroke-width":12}},[t.mycolitem.extra.extend.hideIcon?[t._v(" "+t._s(t.getVal(t.myscope,t.mycolitem))+"% ")]:t._e()],2):t._e()]:"tags"==t.mycolitem.extra.type?["string"==typeof t.mycolitem.name?[t._l(t.getVal(t.myscope,t.mycolitem),(function(e,i){return[t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,e)]?[a("el-tag",{key:i,attrs:{size:"mini",hit:!1,effect:t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,e)].effect||"dark",type:t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,e)].type||"",color:t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,e)].color||"default"}},[t._v(" "+t._s(t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,e)].title||e)+" ")])]:[a("el-tag",{key:i,attrs:{size:"mini",hit:!1}},[t._v(" "+t._s(e)+" ")])]]}))]:t._e()]:"tag"==t.mycolitem.extra.type?[t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,t.getVal(t.myscope,t.mycolitem))]?[a("el-tag",{attrs:{hit:!1,size:"mini",effect:t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,t.getVal(t.myscope,t.mycolitem))].effect||"dark",type:t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,t.getVal(t.myscope,t.mycolitem))].type||"",color:t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,t.getVal(t.myscope,t.mycolitem))].color||"default"}},[t._v(" "+t._s(t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,t.getVal(t.myscope,t.mycolitem))].title||t.getVal(t.myscope,t.mycolitem))+" ")])]:[a("el-tag",{attrs:{size:"mini",hit:!1}},[t._v(" "+t._s(t.myscope.row[t.mycolitem.name])+" ")])]]:"password"==t.mycolitem.extra.type?[t.mycolitem.extra.show?[t._v(" "+t._s(t.getVal(t.myscope,t.mycolitem))+" ")]:[t._v("******")],a("i",{attrs:{type:"el-icon-view"},on:{click:function(e){t.mycolitem.extra.show=!t.mycolitem.extra.show}}})]:"url"==t.mycolitem.extra.type?[a("a",{attrs:{target:"_blank",href:t.getVal(t.myscope,t.mycolitem)}},[t.mycolitem.extra.title?[t._v(" "+t._s(t.mycolitem.extra.title)+" ")]:[t._v(t._s(t.getVal(t.myscope,t.mycolitem)))]],2)]:"qrcode"==t.mycolitem.extra.type?[t.mycolitem.extra.title?[t._v(" "+t._s(t.mycolitem.extra.title)+" ")]:[t._v(t._s(t.getVal(t.myscope,t.mycolitem)))],a("el-popover",{attrs:{placement:"top-start",title:"扫码下载",width:"120px",trigger:"hover"}},[a("div",{staticClass:"flex flex-alignCenter flex-center",staticStyle:{width:"120px",height:"120px",background:"#fff"}},[a("xy-qrcode",{staticClass:"qrcode",style:{opacity:1},attrs:{value:t.getVal(t.myscope,t.mycolitem),options:{width:120,margin:3}}})],1),a("span",{staticClass:"cursor-pointer xyicon xyicon-qrcode",staticStyle:{"margin-left":"3px"},attrs:{slot:"reference"},slot:"reference"})])]:"time"==t.mycolitem.extra.type?[t._v(" "+t._s(t.$xyutil.timeFormat(t.myscope.row[t.mycolitem.name],t.mycolitem.extra.extend.format||""))+" ")]:"label"==t.mycolitem.extra.type?[a("span",{style:{color:t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,t.getVal(t.myscope,t.mycolitem))].color||""}},[t._v(" "+t._s(t.mycolitem.extra.options[t.getArrayIndex(t.mycolitem.extra.options,t.getVal(t.myscope,t.mycolitem))].title||t.getVal(t.myscope,t.mycolitem))+" ")])]:"link"==t.mycolitem.extra.type?[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.goPage(t.mycolitem,t.myscope)}}},[t._v(t._s(t.getVal(t.myscope,t.mycolitem)))])]:"multitext"==t.mycolitem.extra.type?[a("el-popover",{attrs:{placement:"top-start",title:"详情",width:"500",trigger:"hover",content:t.getVal(t.myscope,t.mycolitem)}},[a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v("查看")])])]:"json"==t.mycolitem.extra.type?t._l(t.getVal(t.myscope,t.mycolitem),(function(e,i){return a("div",{key:i,staticClass:"flex space-between border-bottom_1px"},t._l(t.mycolitem.extra.options,(function(i,r){return a("div",{key:r},[t._v(" "+t._s(e[i.name])+" ")])})),0)})):"rightButtonList"==t.mycolitem.extra.type?[a("div",{staticClass:"hidden-sm-and-up"},[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link text-primary"},[t._v(" 操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.listData.rightButtonList,(function(e,i){return[t.myscope.row[t.mycolitem.name]?[t.myscope.row[t.mycolitem.name].includes(e.name)?[a("el-dropdown-item",{key:"rbutton"+i,class:"default"==e.style.type?"":"text-"+e.style.type,nativeOn:{click:function(e){return t.rightButtonModal(i,t.myscope)}}},[t._v(" "+t._s(e.title)+" ")])]:t._e()]:[t.showByCondition(e,t.myscope.row)?a("el-dropdown-item",{key:"rbutton"+i,class:"default"==e.style.type?"":"text-"+e.style.type,nativeOn:{click:function(e){return t.rightButtonModal(i,t.myscope)}}},[t._v(" "+t._s(e.title)+" ")]):t._e()]]}))],2)],1)],1),a("div",{staticClass:"hidden-xs-only"},[t._l(t.listData.rightButtonList,(function(e,i){return[t.myscope.row[t.mycolitem.name]?[t.myscope.row[t.mycolitem.name].includes(e.name)?[a("el-tag",{key:"rbutton"+i,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{effect:"dark",type:e.style.type,size:e.style.size?e.style.size:"mini",icon:e.style.icon},on:{click:function(e){return t.rightButtonModal(i,t.myscope)}}},[t._v(" "+t._s(e.title)+" ")])]:t._e()]:[t.showByCondition(e,t.myscope.row)?a("el-tag",{key:"rbutton"+i,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{effect:"dark",type:e.style.type,size:e.style.size?e.style.size:"mini",icon:e.style.icon},on:{click:function(e){return t.rightButtonModal(i,t.myscope)}}},[t._v(" "+t._s(e.title)+" ")]):t._e()]]}))],2)]:[t.mycolitem.extra.celledit&&t.myscope.row.id==t.current.row.id&&t.mycolitem.name==t.current.column.property?[a("el-input",{attrs:{size:"small"},on:{change:function(e){return t.cellChange(t.myscope,t.mycolitem)}},model:{value:t.myscope.row[t.mycolitem.name],callback:function(e){t.$set(t.myscope.row,t.mycolitem.name,e)},expression:"myscope.row[mycolitem.name]"}})]:a("span",[t._v(t._s(t.getVal(t.myscope,t.mycolitem)))])]],2)},h=[],v={name:"TableColumn",mixins:[d.Z,u,p],props:{header:{type:Object,default:function(){return{cloudId:0,eid:0}}},listData:{type:Object,default:function(){return{}}},current:{type:Object,default:function(){return{}}},currentItem:{type:Object,default:function(){return{pageData:{pageType:"modal",apiBlank:"",show:!1}}}},pitem:{type:Object,default:function(){return{}}},mycolitem:{type:Object,default:function(){return{}}},myscope:{type:Object,default:function(){return{}}}},data:function(){return{CDN_URL:{VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_CDN_URL}},watch:{},created:function(){return(0,o.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{}},g=v,y=a(1001),x=(0,y.Z)(g,f,h,!1,null,null,null),b=x.exports,w=a(47578),_={name:"XyBuilderList",mixins:[c,u,d.Z,p],props:{api:"",header:{type:Object,default:function(){return{cloudId:0,eid:0}}},show:!1,predata:"",value:0,config:{type:Object,default:function(){return{}}},pitem:{type:Object,default:function(){return{}}},showActions:!1,showDev:!1},components:{"table-column":b},data:function(){return{ready:!1,current:{row:{},column:{}},loading:!1,page:1,limit:10,filterValues:{},listData:{alertList:{},dataList:[],dataListParams:[],topButtonList:[],rightButtonList:[],columns:[],dataPage:{total:0,limit:10,page:1},filterItems:[],filterValues:[],filterExtra:{},countList:[],config:{listExpandAll:!1,modalDefaultWidth:800}},currentItem:{pageData:{pageType:"modal",modalTye:"",apiBlank:"",show:!1,title:"",predata:""}}}},watch:{show:function(t){1==t&&this.loadData("",!0)}},beforeCreate:function(){this.$options.components.XyBuilderTab=function(){return a.e(700).then(a.bind(a,93628))},this.$options.components.XyBuilderInfo=function(){return a.e(700).then(a.bind(a,36664))},this.$options.components.XyBuilderForm=function(){return Promise.resolve().then(a.bind(a,53100))},this.$options.components.XyBuilderStack=function(){return a.e(700).then(a.bind(a,2599))},this.$options.components.XyBuilderRemote=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,88713))},this.$options.components.XyBuilderCol=function(){return a.e(700).then(a.bind(a,65947))}},created:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.predata?t.readyProcess(t.predata):t.loadData(),t.limit=t.listData.dataPage.limit;case 2:case"end":return e.stop()}}),e)})))()},methods:{cellClick:function(t,e,a,i){this.current.row=t,this.current.column=e},readyProcess:function(t){var e,a,i,r,o=this,n=w.Z.readyList({value:this.value,config:this.config,listData:t,filterValues:this.filterValues},this.$store.state.app.apiInfo);this.config=(0,s.Z)({},n.config),this.listData=(0,s.Z)({},n.listData),this.filterValues=(0,s.Z)({},n.filterValues),this.ready=!0,"checkbox"==(null===(e=this.listData)||void 0===e||null===(a=e.dataListParams)||void 0===a?void 0:a.selectType)?this.currentSelecteds=this.value:"radio"==(null===(i=this.listData)||void 0===i||null===(r=i.dataListParams)||void 0===r?void 0:r.selectType)&&(this.currentSelected=this.value),this.$nextTick((function(){var t,e,a,i;"checkbox"==(null===(t=o.listData)||void 0===t||null===(e=t.dataListParams)||void 0===e?void 0:e.selectType)?o.checkRows(o.listData.dataList):"radio"==(null===(a=o.listData)||void 0===a||null===(i=a.dataListParams)||void 0===i?void 0:i.selectType)&&o.listData.dataList.forEach((function(t){o.currentSelected==t.id&&o.$refs.dataTable.toggleRowSelection(t,!0)}))}))},cancel:function(){this.$emit("close-model")},getFilterParams:function(){var t={page:this.page,limit:this.limit};if(this.filterValues){var e=this.filterValues;if(this.listData.filterItems.length>0)for(var a in e)e.hasOwnProperty(a)&&null!==e[a]&&(e[a].constructor&&e[a].constructor===Array?t[a]=e[a].join(","):""!==e[a]&&(t[a]=e[a]))}return t},handleFilterExport:function(t){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function a(){var i,r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=l().stringify(e.getFilterParams()),o=e.$store.state.app.api.apiBase+e.listData.filterExtra.exportBtn[t].api+"?cloudId="+(null===(i=e.header)||void 0===i?void 0:i.cloudId)+"&token="+(null===(r=e.header)||void 0===r?void 0:r.token)+"&"+s,window.open(o);case 3:case"end":return a.stop()}}),a)})))()},pageChange:function(t){console.log("p:"+t),this.page=t,this.loadData()},limitChange:function(t){this.page=1,this.limit=t,this.loadData()},closeModel:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.pageData.show=!1;var a=this;this.$nextTick((function(){!t.pageData.noRefresh&&e&&a.loadData()}))},loadData:function(){var t=arguments,e=this;return(0,o.Z)(regeneratorRuntime.mark((function a(){var i,r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"",r=t.length>1&&void 0!==t[1]&&t[1],""!=i&&(e.api=i),e.loading=!0,e.ready=!1,s={},r||(s=e.getFilterParams()),!e.api){a.next=12;break}return a.next=10,e.$xyutil.request({url:e.api,method:"get",data:s,header:e.header});case 10:o=a.sent,"200"==o.code?e.readyProcess(o.data.listData):e.$xyutil.showToast({title:o.msg,icon:"error",duration:2e3});case 12:e.loading=!1;case 13:case"end":return a.stop()}}),a)})))()},dialogOpen:function(){if(this.$store.state.app.uiAudio){var t=new Audio;t.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_OPEN,t.play()}},dialogClose:function(){if(this.$store.state.app.uiAudio){var t=new Audio;t.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_CLOSE,t.play()}}}},k=_,C=(0,y.Z)(k,i,r,!1,null,"68a47bf9",null),$=C.exports},88713:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xy-builder-comp xy-builder-wrap-remote"},[a(t.currentView,t._b({tag:"component",on:{close:t.closeModal},model:{value:t.formValue,callback:function(e){t.formValue=e},expression:"formValue"}},"component",t.$props,!1))],1)},r=[],s=a(16198),o=(a(24337),a(39582),a(60190),a(38807),a(90466),a(593),a(58933),a(82637),a(99919),{props:{value:{type:[Object,Array,String,Number],default:function(){return{}}},formValues:{type:Object,default:function(){return{cloudId:0,eid:0}}},header:{type:Object,default:function(){return{cloudId:0,eid:0}}},show:!1,predata:"",item:{type:Object,default:function(){return{}}},pitem:{type:Object,default:function(){return{}}},api:{type:String,default:function(){return null}},outUrl:{type:String,default:function(){return null}},showDev:!1},data:function(){return{formValue:null,resData:null,cssId:null}},created:function(){this.formValue=this.value},computed:{currentView:function(){if(!this.resData)return{template:"<div class='remoteInfo'>正在加载中。。。</div>"};var t=this.resolveStr(this.resData),e=new Function("return ".concat(t.sctipts.slice(t.sctipts.indexOf("{"),t.sctipts.lastIndexOf("}")+1)))();if(e.template=t.templates,this.$el.setAttribute("class","remote css".concat(this.cssId)),!document.querySelector("style[id=css".concat(this.cssId,"]"))){var a="\n                    .css".concat(this.cssId,"{\n                        ").concat(t.styles,"\n                    }\n                ");this.resolveCss(a)}return e}},watch:{outUrl:function(){this.getVueComp()},formValue:function(){this.$emit("input",this.formValue)}},mounted:function(){this.getVueComp()},methods:{closeModal:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$emit("close",t)},getId:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var a=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?a:3&a|8).toString(16)}));return e},resolveCss:function(t){less.render(t).then(function(t){var e=document.createElement("style");if(e.setAttribute("type","text/css"),e.setAttribute("id","css"+this.cssId),e.styleSheet)e.styleSheet.cssText=t.css;else{var a=document.createTextNode(t.css);e.appendChild(a)}var i=document.getElementsByTagName("head");i.length?i[0].appendChild(e):document.documentElement.appendChild(e)}.bind(this))},resolveStr:function(t){return{templates:t.match(/<template>([\s\S]*)<\/template>/)[1],sctipts:t.match(/<script.*>([\s\S]*)<\/script>/)[1],styles:t.match(/<style.*>([\s\S]*)<\/style>/)[1]}},getVueComp:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$props.outUrl){e.next=3;break}return alert("Vue文件地址为空"),e.abrupt("return");case 3:return a=t.$props.outUrl,e.next=6,axios.get(a);case 6:i=e.sent,t.cssId=t.getId(),t.resData=i.data;case 9:case"end":return e.stop()}}),e)})))()},loadData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getVueComp();case 1:case"end":return e.stop()}}),e)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,null,null),u=c.exports},2599:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xy-builder-comp xy-builder-wrap-stack"},t._l(t.stackData.stackList,(function(e,i){return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:i,staticClass:"stack-list"},[a("xy-title",{directives:[{name:"show",rawName:"v-show",value:e.title,expression:"stack.title"}],staticClass:"m-b-sm"},[t._v(t._s(e.title))]),a("el-row",[a("el-col",{staticClass:"stack-item block",attrs:{xs:24,sm:24}},["tab"==e.pageData.modalType?[a("XyBuilderTab",{ref:"xy_builder_tab_"+i,refInFor:!0,attrs:{header:t.header,show:!0,predata:e.predata}})]:["list"==e.pageData.modalType?a("div",[a("XyBuilderList",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,predata:e.predata}})],1):"form"==e.pageData.modalType?a("div",[a("XyBuilderForm",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,predata:e.predata}})],1):"info"==e.pageData.modalType?a("div",[a("XyBuilderInfo",{ref:"xy_builder_stack_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,predata:e.predata}})],1):t._e()]],2)],1)],1)})),0)},r=[],s=a(16198),o=(a(24337),a(60626),a(58933),a(2953),a(21747),a(6750),{name:"XyBuilderStack",props:{api:"",header:{type:Object,default:function(){return{cloudId:0,eid:0}}},pitem:{type:Object,default:function(){return{}}},show:!1,predata:""},data:function(){return{loading:!1,stackData:{stackList:""}}},watch:{show:function(t){this.stackData={},1==t&&this.loadData()}},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,14106))},this.$options.components.XyBuilderForm=function(){return Promise.resolve().then(a.bind(a,53100))},this.$options.components.XyBuilderInfo=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,36664))},this.$options.components.XyBuilderTab=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,93628))}},created:function(){this.predata?this.stackData=this.predata:this.loadData()},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{loadData:function(){var t=arguments,e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i,r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"",""!=i&&(e.api=i),e.loading=!0,!e.api){a.next=8;break}return a.next=6,e.$xyutil.request({url:e.api,method:"get",header:{CloudId:null===(r=e.header)||void 0===r?void 0:r.cloudId,Eid:null===(s=e.header)||void 0===s?void 0:s.eid}});case 6:o=a.sent,"200"==o.code?(e.stackData=o.data.stackData,e.loading=!1):e.$xyutil.showToast({title:o.msg,icon:"loading",duration:3e3});case 8:e.loading=!1;case 9:case"end":return a.stop()}}),a)})))()}}}),n=o,l=a(1001),c=(0,l.Z)(n,i,r,!1,null,"4a8e0064",null),u=c.exports},93628:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",{staticClass:"xy-builder-comp xy-builder-wrap-tab"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:t.tabData.tabType||"card",animated:!1},on:{"tab-click":t.tabClick},model:{value:t.tabCurrent,callback:function(e){t.tabCurrent=e},expression:"tabCurrent"}},t._l(t.tabData.tabList,(function(e,i){return a("el-tab-pane",{key:i,attrs:{label:e.title,name:"tab_"+i}},[a("XyBuilderStack",{ref:"xy_builder_tab_innner_"+i,refInFor:!0,attrs:{header:t.header,api:"",show:e.show,predata:{stackList:e.list}}})],1)})),1)],1):t._e()},r=[],s=a(62032),o=a(16198),n=(a(24337),a(60626),a(58933),a(2953),a(21747),a(6750),a(90466),a(89046),a(55700),a(50740),a(46627)),l=a.n(n),c={name:"XyBuilderTab",props:{api:"",header:{type:Object,default:function(){return{cloudId:0,eid:0}}},pitem:{type:Object,default:function(){return{}}},predata:""},components:{},data:function(){return{loading:!1,ready:!1,tabData:{tabList:[],tabType:"card",countList:[]},tabCurrent:"tab_0"}},watch:{},beforeCreate:function(){this.$options.components.XyBuilderList=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,14106))},this.$options.components.XyBuilderInfo=function(){return Promise.all([a.e(736),a.e(700)]).then(a.bind(a,36664))},this.$options.components.XyBuilderForm=function(){return Promise.resolve().then(a.bind(a,53100))},this.$options.components.XyBuilderStack=function(){return a.e(700).then(a.bind(a,2599))}},created:function(){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.predata){e.next=4;break}t.readyProcess(t.predata),e.next=6;break;case 4:return e.next=6,t.loadData();case 6:t.getQueryParams(0);case 7:case"end":return e.stop()}}),e)})))()},beforeMount:function(){},mounted:function(){},activated:function(){},deativated:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{getQueryParams:function(t){if(this.tabData.tabList[t].list){var e,a=(0,s.Z)(this.tabData.tabList[t].list);try{for(a.s();!(e=a.n()).done;){var i=e.value,r="";i.pageData.api&&(r=i.pageData.api+i.pageData.apiParams);var o="";o="string"!=typeof i.pageData.queryParams?l().stringify(i.pageData.queryParams):0==i.pageData.queryParams.indexOf("?")?i.pageData.queryParams.substr(1):i.pageData.queryParams,o&&(r=r+"?"+o),i.pageData.apiBlank=r,i.pageData.show=!0}}catch(n){a.e(n)}finally{a.f()}}},tabClick:function(t,e){var a=t.name.split("_"),i=a[1];this.getQueryParams(i)},readyProcess:function(t){t&&(t.tabList.forEach((function(t){t.hasOwnProperty("show")||(t.show=!1),t.list.forEach((function(t){t.hasOwnProperty("predata")||(t.predata=""),t.hasOwnProperty("pageData")||(t.pageData={}),t.pageData.hasOwnProperty("count")||(t.pageData.count=0),t.pageData.hasOwnProperty("modalType")||(t.pageData.modalType="list"),t.pageData.hasOwnProperty("apiBlank")||(t.pageData.apiBlank=""),t.pageData.hasOwnProperty("api")||(t.pageData.api=""),t.pageData.hasOwnProperty("show")||(t.pageData.show=!1),t.pageData.hasOwnProperty("apiParams")||(t.pageData.apiParams=""),t.pageData.hasOwnProperty("queryParams")||(t.pageData.queryParams="")}))})),this.tabData=t,this.ready=!0)},loadData:function(){var t=arguments,e=this;return(0,o.Z)(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"",""!=i&&(e.api=i),e.loading=!0,!e.api){a.next=8;break}return a.next=6,e.$xyutil.request({url:e.api,method:"get",header:e.header});case 6:r=a.sent,"200"==r.code?e.readyProcess(r.data.tabData):e.$xyutil.showToast({title:r.msg,icon:"loading",duration:3e3});case 8:e.loading=!1;case 9:case"end":return a.stop()}}),a)})))()}}},u=c,d=a(1001),m=(0,d.Z)(u,i,r,!1,null,null,null),p=m.exports},47578:function(t,e,a){var i=a(9726),r=a(93019),s=(a(58933),a(50740),a(55700),a(7547),a(51117),a(82637),a(38807),a(25656),{readyList:function(t){var e,a,s=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(t.listData.hasOwnProperty("config")||(t.listData={}),t.listData.config||(t.listData.config={}),t.listData.topButtonList.forEach((function(t){var e;t.pageData.width?!1===isNaN(t.pageData.width)&&(t.pageData.width=t.pageData.width+"px"):t.pageData.width="800px",t.pageData.hasOwnProperty("height")||(t.pageData.height="auto"),t.pageData.hasOwnProperty("pageType")||(t.pageData.pageType="page"),t.pageData.hasOwnProperty("modalType")||(t.pageData.modalType="form"),t.pageData.hasOwnProperty("formMethod")||(t.pageData.formMethod="delete"),t.pageData.hasOwnProperty("show")||(t.pageData.show=!1),t.pageData.hasOwnProperty("path")||(t.pageData.path=""),t.pageData.hasOwnProperty("api")||(t.pageData.api=""),t.pageData.hasOwnProperty("apiBlank")||(t.pageData.apiBlank=""),t.pageData.hasOwnProperty("apiSuffix")||(t.pageData.apiSuffix=[]),t.pageData.hasOwnProperty("apiParams")||(t.pageData.apiParams=""),t.pageData.hasOwnProperty("querySuffix")||(t.pageData.querySuffix=[]),t.pageData.hasOwnProperty("queryParams")||(t.pageData.queryParams=""),t.pageData.hasOwnProperty("title")||(t.pageData.title=t.title),t.pageData.hasOwnProperty("content")||(t.pageData.content=""),t.pageData.hasOwnProperty("okText")||(t.pageData.okText=""),t.pageData.hasOwnProperty("cancelText")||(t.pageData.cancelText=""),t.pageData.hasOwnProperty("noRefresh")||(t.pageData.noRefresh=!1),t.pageData.hasOwnProperty("modalClosable")||(t.pageData.modalClosable=!1),t.pageData.hasOwnProperty("loading")||(t.pageData.loading=!1),t.pageData.hasOwnProperty("draggable")||(t.pageData.draggable=!1),t.pageData.hasOwnProperty("scrollable")||(t.pageData.scrollable=!0),t.pageData.outUrl&&o.hasOwnProperty("domainRoot")&&0!=t.pageData.outUrl.indexOf("http")&&(t.pageData.outUrl=o.domainRoot+t.pageData.outUrl),null!==(e=t.style)&&void 0!==e&&e.type||(t.style={type:"primary",size:"small",shape:"default",icon:""},"delete"==t.name&&(t.style.type="danger"))})),t.listData.rightButtonList.forEach((function(t){var e;t.pageData.width?!1===isNaN(t.pageData.width)&&(t.pageData.width=t.pageData.width+"px"):t.pageData.width="800px",t.pageData.hasOwnProperty("height")||(t.pageData.height="auto"),t.pageData.hasOwnProperty("pageType")||(t.pageData.pageType="page"),t.pageData.hasOwnProperty("modalType")||(t.pageData.modalType="form"),t.pageData.hasOwnProperty("formMethod")||(t.pageData.formMethod="delete"),t.pageData.hasOwnProperty("show")||(t.pageData.show=!1),t.pageData.hasOwnProperty("path")||(t.pageData.path=""),t.pageData.hasOwnProperty("api")||(t.pageData.api=""),t.pageData.hasOwnProperty("apiBlank")||(t.pageData.apiBlank=""),t.pageData.hasOwnProperty("apiSuffix")||(t.pageData.apiSuffix=["id"]),t.pageData.hasOwnProperty("apiParams")||(t.pageData.apiParams=""),t.pageData.hasOwnProperty("querySuffix")||(t.pageData.querySuffix=[]),t.pageData.hasOwnProperty("queryParams")||(t.pageData.queryParams=""),t.pageData.hasOwnProperty("title")||(t.pageData.title=t.title),t.pageData.hasOwnProperty("content")||(t.pageData.content=""),t.pageData.hasOwnProperty("okText")||(t.pageData.okText=""),t.pageData.hasOwnProperty("cancelText")||(t.pageData.cancelText=""),t.pageData.hasOwnProperty("noRefresh")||(t.pageData.noRefresh=!1),t.pageData.hasOwnProperty("modalClosable")||(t.pageData.modalClosable=!1),t.pageData.hasOwnProperty("loading")||(t.pageData.loading=!1),t.pageData.hasOwnProperty("draggable")||(t.pageData.draggable=!1),t.pageData.hasOwnProperty("scrollable")||(t.pageData.scrollable=!0),t.pageData.outUrl&&o.hasOwnProperty("domainRoot")&&0!=t.pageData.outUrl.indexOf("http")&&(t.pageData.outUrl=o.domainRoot+t.pageData.outUrl),null!==(e=t.style)&&void 0!==e&&e.type||(t.style={type:"default",size:"mini",shape:"default",icon:""},"delete"==t.name&&(t.style.type="danger"))})),t.hasOwnProperty("config"))&&(null!==(e=t.config)&&void 0!==e&&e.listSelectType&&(t.listData.dataListParams.selectType=null===(a=t.config)||void 0===a?void 0:a.listSelectType));t.listData.columns.forEach((function(t,e){if(t.index=e,t.hasOwnProperty("extra")||(t.extra={}),t.hasOwnProperty("pname")||(t.pname=0),t.extra.hasOwnProperty("template")&&(t.extra.type=t.extra.template),t.extra.hasOwnProperty("type")||(t.extra.type="text"),t.extra.hasOwnProperty("extend")||(t.extra.extend={}),t.extra.hasOwnProperty("width")||(t.extra.width=""),t.extra.hasOwnProperty("minWidth")||(t.extra.minWidth=""),t.extra.hasOwnProperty("show")||(t.extra.show=!0),t.extra.hasOwnProperty("loading")||(t.extra.loading=!1),t.extra.hasOwnProperty("options")||(t.extra.options=[]),t.extra.hasOwnProperty("show")||("password"==t.extra.type?t.extra.show=!1:t.extra.show=!0),t.extra.options){if(t.extra.optionsOriginal=(0,r.Z)({},t.extra.options),"string"==typeof t.extra.options){var a=s.$xyutil.isJson(t.extra.options);!1===a?a=t.extra.options:t.extra.options=a}var o=[];for(var n in t.extra.options){var l=t.extra.options[n];!1===isNaN(n)&&(n=parseInt(n)),"object"==(0,i.Z)(l)?(l.hasOwnProperty("value")||(l.value=n),o.push(l)):o.push({title:l,value:n})}t.extra.options=o}else t.extra.options=[]}));var n=function(t,e){var a={};return t.forEach((function(t){t.children=[],a[t.name]=t})),t.filter((function(t){return t.pname===e||(a[t.pname].children.push(t),!1)}))};return t.listData.columns=n(t.listData.columns,0),console.log(t.listData.columns),t.listData.filterValues={},t.listData.filterItems.forEach((function(e){if(e.hasOwnProperty("extra")||(e.extra={}),e.extra.hasOwnProperty("placeholder")||(e.extra.placeholder=""),e.extra.hasOwnProperty("tip")||(e.extra.tip=""),e.extra.hasOwnProperty("position")||(e.extra.position="left"),e.extra.options){if("string"==typeof e.extra.options){var a=s.$xyutil.isJson(e.extra.options);!1===a?a=e.extra.options:e.extra.options=a}var r=[];for(var o in e.extra.options){var n=e.extra.options[o];!1===isNaN(o)&&(o=parseInt(o)),"object"==(0,i.Z)(n)?(n.hasOwnProperty("value")||(n.value=o),r.push(n)):r.push({title:n,value:o})}e.extra.options=r}else e.extra.options=[];var l=["radio","switch","select"];l.includes(e.type)&&(e.value||(e.value=""),e.extra.options[0]&&"number"==typeof e.extra.options[0].value?""!==e.value&&(e.value=parseInt(e.value)):e.value=e.value.toString());var c=["selects","checkbox"];c.includes(e.type)&&(e.value||(e.value=[]),e.value.forEach((function(t){e.extra.options[0]&&"number"==typeof e.extra.options[0].value?""!==t&&(t=parseInt(t)):t=t.toString()}))),t.listData.filterValues[e.name]=e.value})),t.hasOwnProperty("filterValues")&&(t.filterValues=t.listData.filterValues),t},readyForm:function(t){t.formData.formValues.constructor===Array&&(t.formData.formValues={});var e={};t.formData.alertList||(t.formData.alertList={}),t.formData.alertList.top||(t.formData.alertList.top=[]),t.formData.alertList.top.forEach((function(t){t.show||(t.show=!1)})),t.formData.alertList.bottom||(t.formData.alertList.bottom=[]),t.formData.alertList.bottom.forEach((function(t){t.show||(t.show=!1)})),t.formData.config||(t.formData.config={}),t.formData.formCols||(t.formData.formCols=[]),t.formData.formGroups||(t.formData.formGroups=[]),t.formData.itemValues||(t.formData.itemValues={});var a=[];if(t.formData.formGroups.forEach((function(t){a=a.concat(t.itemList)})),t.formData.formCols.forEach((function(t,e,a){})),t.formData.formTabs.length>0)for(var i in t.formData.formTabs)if(t.formData.formTabs[i].hasOwnProperty("formItems"))for(var s in t.formData.formTabs[i].formItems){var o,n=t.formData.formTabs[i].formItems[s],l=["static","divider"];if(!l.includes(n.type))if("tabs"==n.type);else t.formData.itemValues[t.formData.formTabs[i].name]&&null!==(o=t.formData.itemValues[t.formData.formTabs[i].name])&&void 0!==o&&o.tabValues.hasOwnProperty(n.name)&&(t.formData.formTabs[i].formItems[s].value=t.formData.itemValues[t.formData.formTabs[i].name].tabValues[n.name]),e[t.formData.formTabs[i].name]||(e[t.formData.formTabs[i].name]={tabValues:{}}),e[t.formData.formTabs[i].name].tabValues[n.name]=t.formData.formTabs[i].formItems[s].value}var c=function(i){var r,s;null!==(r=t.formData.formItems[i])&&void 0!==r&&null!==(s=r.extra)&&void 0!==s&&s.position||(t.formData.formItems[i].extra.position=t.formData.config.itemDefaultPosition);var o=t.formData.formItems[i],n=["static","divider","link"];if(t.formData.formItems[i].extra||(t.formData.formItems[i].extra={}),t.formData.formItems[i].extra.hasOwnProperty("condition")&&t.formData.formItems[i].extra.condition.length>0&&(t.formData.formItems[i].extra.con=t.formData.formItems[i].extra.condition),t.formData.formItems[i].extra.hide||(t.formData.formItems[i].extra.hide=!1),"tabs"==o.type)for(var l in t.formData.formItems[i].extra.options)for(var c in t.formData.formItems[i].extra.options[l].options){var u=t.formData.formItems[i].extra.options[l].options[c];t.formData.itemValues.hasOwnProperty(u.name)&&(t.formData.formItems[i].extra.options[l].options[c].value=t.formData.itemValues[o.name]),n.includes(u.type)||(t.formData.formValues[o.name]=t.formData.formItems[i].extra.options[l].options[c].value)}else t.formData.itemValues.hasOwnProperty(o.name)&&(t.formData.formItems[i].value=t.formData.itemValues[o.name]),n.includes(o.type)||(e[o.name]=t.formData.formItems[i].value);o.extra.formGroup?(t.formData.formGroups.forEach((function(t,e,a){t.name==o.extra.formGroup&&a[e].itemList.push(o.name)})),t.formData.formItems[i].extra.inGroup=!0):a.includes(o.name)?t.formData.formItems[i].extra.inGroup=!0:t.formData.formItems[i].extra.inGroup=!1};for(var u in t.formData.formItems)c(u);return t.formData.formValues=(0,r.Z)({},e),t}});e["Z"]=s},12638:function(t,e,a){var i=a(62032),r=a(16198),s=(a(90466),a(593),a(55700),a(15899),a(24337),a(46627)),o=a.n(s);e["Z"]={name:"button",data:function(){return{}},created:function(){},mounted:function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),methods:{goPage:function(t,e){var a=this;return(0,r.Z)(regeneratorRuntime.mark((function s(){var n,l,c,u,d,m,p,f,h,v,g,y,x,b,w,_;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=a,l=t.extra,l.pageData.hasOwnProperty("pageType")||(l.pageData.pageType="modal"),c="",u="",d=new Object,e){if(l.pageData.apiSuffix){m=l.pageData.apiSuffix,p=(0,i.Z)(m);try{for(p.s();!(f=p.n()).done;)h=f.value,h.field?h.noSlash?u+=e.row[h.field]:u=u+"/"+e.row[h.field]:u=u+"/"+e.row[h]}catch(k){p.e(k)}finally{p.f()}}else u="/"+e.row.id;if(l.pageData.apiParams&&(u=l.pageData.apiParams+u),l.pageData.querySuffix){v=l.pageData.querySuffix,g=(0,i.Z)(v);try{for(g.s();!(y=g.n()).done;)x=y.value,1==x[2]?d[x[0]]=x[1]:d[x[0]]=e.row[x[1]]}catch(k){g.e(k)}finally{g.f()}}c=u,b="",b="string"!=typeof l.pageData.queryParams?o().stringify(l.pageData.queryParams):0==l.pageData.queryParams.indexOf("?")?l.pageData.queryParams.substr(1):l.pageData.queryParams,b?(c=c+"?"+b,o().stringify(d)&&(c=c+"&"+o().stringify(d))):o().stringify(d)&&(c=c+"?"+o().stringify(d)),l.pageData.querySuffixParse=d}a.currentItem.pageData.modalType=l.pageData.modalType,l.pageData.title&&(a.currentItem.pageData.title=l.pageData.title),s.t0=l.pageData.modalType,s.next="table"===s.t0||"html"===s.t0||"htmls"===s.t0?12:"url"===s.t0?17:"confirm"===s.t0?19:22;break;case 12:return a.currentItem.pageData.width=l.pageData.width,a.currentItem.pageData.apiBlank=l.pageData.api+c,a.currentItem.pageData.predata=l.pageData.predata,a.currentItem.pageData.show=!0,s.abrupt("break",39);case 17:return window.open(l.pageData.url+c),s.abrupt("break",39);case 19:return a.$store.state.app.uiAudio&&(w=new Audio,w.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_OPEN,w.play()),a.$confirm(l.pageData.content,l.pageData.title,{confirmButtonText:l.pageData.okText,cancelButtonText:l.pageData.cancelText,dangerouslyUseHTMLString:!0,closeOnClickModal:!1,type:"warning"}).then((0,r.Z)(regeneratorRuntime.mark((function t(){var e,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l.pageData.api+u,""!=o().stringify(d)&&(e=e+"?"+o().stringify(d)),t.next=4,n.$xyutil.request({url:e,method:l.pageData.formMethod,header:n.header});case 4:i=t.sent,"200"==i.code?(n.$xyutil.showToast({title:i.msg,icon:"success",duration:1e3}),a.$store.state.app.uiAudio&&(r=new Audio,r.src="https://cdn.jsdelivr.net/gh/starideas/xyfront/audio/delete.mp3",r.play()),l.pageData.noRefresh||n.loadData()):n.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3});case 6:case"end":return t.stop()}}),t)})))).catch((function(){if(a.$store.state.app.uiAudio){var t=new Audio;t.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_CLOSE,t.play()}})),s.abrupt("break",39);case 22:a.pitem.pageData&&"modal"==a.pitem.pageData.pageType&&(l.pageData.pageType=a.pitem.pageData.pageType),s.t1=l.pageData.pageType,s.next="replace"===s.t1?26:"page"===s.t1?28:"modal"===s.t1?32:36;break;case 26:return a.$router.replace({path:l.pageData.route+"/"+e.row.name}),s.abrupt("break",38);case 28:return _="",a.$store.state.menu.menuList.menuTree[a.$store.state.menu.currentSite].routePrefix&&(_=a.$store.state.menu.menuList.menuTree[a.$store.state.menu.currentSite].routePrefix),a.$router.push({path:_+"/pages"+l.pageData.api+u,query:d}),s.abrupt("break",38);case 32:return a.currentItem.pageData.width=l.pageData.width,a.currentItem.pageData.apiBlank=l.pageData.api+c,a.currentItem.pageData.show=!0,s.abrupt("break",38);case 36:return alert("未指定按钮pageType"),s.abrupt("break",38);case 38:return s.abrupt("break",39);case 39:case"end":return s.stop()}}),s)})))()},topButtonModal:function(t){var e=this,a=this,s=this.listData.topButtonList[t],n={};if(s.pageData.querySuffix){var l,c=s.pageData.querySuffix,u=(0,i.Z)(c);try{for(u.s();!(l=u.n()).done;){var d=l.value;1==d[2]?n[d[0]]=d[1]:"id"==d[1]&&(n[d[0]]=this.currentSelecteds.join(","))}}catch(g){u.e(g)}finally{u.f()}}var m=s.pageData.apiParams,p="";switch(p="string"!=typeof s.pageData.queryParams?o().stringify(s.pageData.queryParams):0==s.pageData.queryParams.indexOf("?")?s.pageData.queryParams.substr(1):s.pageData.queryParams,p?(m=m+"?"+p,o().stringify(n)&&(m=m+"&"+o().stringify(n))):o().stringify(n)&&(m=m+"?"+o().stringify(n)),s.pageData.querySuffixParse=n,s.pageData.modalType){case"url":window.open(s.pageData.url+m);break;case"confirm":if(this.$store.state.app.uiAudio){var f=new Audio;f.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_OPEN,f.play()}var h=this;this.$confirm(s.pageData.content,s.pageData.title,{confirmButtonText:s.pageData.okText,cancelButtonText:s.pageData.cancelText,dangerouslyUseHTMLString:!0,closeOnClickModal:!1,type:"warning"}).then((0,r.Z)(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.$xyutil.request({url:s.pageData.api+m,method:s.pageData.formMethod,header:{CloudId:h.cloudId,Eid:h.eid}});case 2:a=t.sent,"200"==a.code?(h.$Message.success(a.msg),e.$store.state.app.uiAudio&&(i=new Audio,i.src="https://cdn.jsdelivr.net/gh/starideas/xyfront/audio/delete.mp3",i.play()),s.pageData.noRefresh||h.loadData()):h.$xyutil.showToast({title:a.msg,icon:"error",duration:2e3});case 4:case"end":return t.stop()}}),t)})))).catch((function(){if(e.$store.state.app.uiAudio){var t=new Audio;t.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_CLOSE,t.play()}}));break;default:switch(this.pitem.pageData&&"modal"==this.pitem.pageData.pageType&&(s.pageData.pageType=this.pitem.pageData.pageType),s.pageData.pageType){case"page":var v="";this.$store.state.menu.menuList.menuTree[this.$store.state.menu.currentSite].routePrefix&&(v=this.$store.state.menu.menuList.menuTree[this.$store.state.menu.currentSite].routePrefix),this.$router.push({path:v+"/pages"+s.pageData.api+m});break;case"modal":s.pageData.apiBlank=s.pageData.api+m,s.pageData.show=!0;break}break}a.$nextTick((function(){"auto"!==s.pageData.height&&(console.log(a.$refs["top_modal_"+s.name][0].$el.querySelector(".el-dialog__body")),a.$refs["top_modal_"+s.name][0].$el.querySelector(".el-dialog").querySelector(".el-dialog__body").style.overflowY="scroll",a.$refs["top_modal_"+s.name][0].$el.querySelector(".el-dialog").querySelector(".el-dialog__body").style.height=s.pageData.height)}))},rightButtonModal:function(t,e,a){var s=this;return(0,r.Z)(regeneratorRuntime.mark((function a(){var n,l,c,u,d,m,p,f,h,v,g,y,x,b,w,_;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=s,l=s.listData.rightButtonList[t],c="",u=new Object,l.pageData.apiSuffix){d=l.pageData.apiSuffix,m=(0,i.Z)(d);try{for(m.s();!(p=m.n()).done;)f=p.value,f.field?f.noSlash?c+=e.row[f.field]:c=c+"/"+e.row[f.field]:c=c+"/"+e.row[f]}catch(k){m.e(k)}finally{m.f()}}else c="/"+e.row.id;if(l.pageData.apiParams&&(c=l.pageData.apiParams+c),l.pageData.querySuffix){h=l.pageData.querySuffix,v=(0,i.Z)(h);try{for(v.s();!(g=v.n()).done;)y=g.value,1==y[2]?u[y[0]]=y[1]:u[y[0]]=e.row[y[1]]}catch(k){v.e(k)}finally{v.f()}}if(x=c,b="",b="string"!=typeof l.pageData.queryParams?o().stringify(l.pageData.queryParams):0==l.pageData.queryParams.indexOf("?")?l.pageData.queryParams.substr(1):l.pageData.queryParams,b?(x=x+"?"+b,o().stringify(u)&&(x=x+"&"+o().stringify(u))):o().stringify(u)&&(x=x+"?"+o().stringify(u)),l.pageData.querySuffixParse=u,"replace"!=l.pageData.pageType){a.next=16;break}s.$router.replace({path:l.pageData.route+"/"+e.row.name}),a.next=38;break;case 16:a.t0=l.pageData.modalType,a.next="url"===a.t0?19:"confirm"===a.t0?21:24;break;case 19:return window.open(l.pageData.url+x),a.abrupt("break",38);case 21:return s.$store.state.app.uiAudio&&(w=new Audio,w.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_OPEN,w.play()),s.$confirm(l.pageData.content,l.pageData.title,{confirmButtonText:l.pageData.okText,cancelButtonText:l.pageData.cancelText,dangerouslyUseHTMLString:!0,closeOnClickModal:!1,type:"warning"}).then((0,r.Z)(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.$xyutil.request({url:l.pageData.api+x,method:l.pageData.formMethod,header:n.header});case 2:e=t.sent,"200"==e.code?(n.$xyutil.showToast({title:e.msg,icon:"success",duration:1e3}),s.$store.state.app.uiAudio&&(a=new Audio,a.src="https://cdn.jsdelivr.net/gh/starideas/xyfront/audio/delete.mp3",a.play()),l.pageData.noRefresh||n.loadData()):n.$xyutil.showToast({title:e.msg,icon:"loading",duration:3e3});case 4:case"end":return t.stop()}}),t)})))).catch((function(){if(s.$store.state.app.uiAudio){var t=new Audio;t.src={VUE_APP_BASE_DOMAIN:"jiangruyi.com",NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jiangruyi.com/vue/vue-starter/dist/"}.VUE_APP_AUDIO_CLOSE,t.play()}})),a.abrupt("break",38);case 24:s.pitem.pageData&&"modal"==s.pitem.pageData.pageType&&(l.pageData.pageType=s.pitem.pageData.pageType),a.t1=l.pageData.pageType,a.next="page"===a.t1?28:"modal"===a.t1?32:35;break;case 28:return _="",s.$store.state.menu.menuList.menuTree[s.$store.state.menu.currentSite].routePrefix&&(_=s.$store.state.menu.menuList.menuTree[s.$store.state.menu.currentSite].routePrefix),s.$router.push({path:_+"/pages"+l.pageData.api+c,query:u}),a.abrupt("break",37);case 32:return l.pageData.apiBlank=l.pageData.api+x,l.pageData.show=!0,a.abrupt("break",37);case 35:return alert("未指定按钮pageType"),a.abrupt("break",37);case 37:return a.abrupt("break",38);case 38:n.$nextTick((function(){"auto"!==l.pageData.height&&(n.$refs["right_modal_"+l.name][0].$el.querySelector(".el-dialog").querySelector(".el-dialog__body").style.overflowY="scroll",n.$refs["right_modal_"+l.name][0].$el.querySelector(".el-dialog").querySelector(".el-dialog__body").style.height=l.pageData.height)}));case 39:case"end":return a.stop()}}),a)})))()}}}}}]);
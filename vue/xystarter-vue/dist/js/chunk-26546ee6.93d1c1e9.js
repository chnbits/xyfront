(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-26546ee6"],{1146:function(t,e,s){"use strict";s.r(e),s("96cf");var a,i,n,r,l=s("1da1"),c=s("ca4c"),o=s("f3c6"),u=s("6f6d"),f=(s("c276"),{components:{XySafetyVerify:u.a},data:function(){return{safeSet:{},verifyData:"",mfa:0}},created:function(){this.loadSafeSet(),this.mfa=this.safeSet["2fa"]},methods:{close:function(){this.mfa=this.safeSet["2fa"]},handle2fa:(i=Object(l.a)(regeneratorRuntime.mark((function t(e){var s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={action:e},this.verifyData&&(s._verify=this.verifyData),t.next=4,this.util.request({url:"/v1/user/user/loginVerifySet",data:s,method:"put"});case 4:if(200!=(a=t.sent).code){t.next=11;break}this.$refs.sv.close(),this.util.showToast({title:a.msg,icon:"success",duration:2e3}),this.verifyData="",t.next=16;break;case 11:if(401003==a.code)return this.$refs.sv.open(a.data.verifyList),t.abrupt("return");t.next=14;break;case 14:this.mfa=this.safeSet["2fa"],this.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 16:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)}),loadSafeSet:(a=Object(l.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.util.request({url:"/v1/user/user/safeSet",method:"get"});case 2:200==(e=t.sent).code?this.safeSet=e.data.dataList:this.util.showToast({title:e.msg,icon:"loading",duration:3e3});case 4:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}}),d=(s("941d"),s("2877")),p=Object(d.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"center-box safe-box m-b"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"title"},[t._v("安全设置")])]),s("div",{staticClass:"content clearfix"},[s("div",{staticClass:"count-list"},[0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")?s("div",{staticClass:"item clear"},[s("div",{staticClass:"fl"},[s("span",{staticClass:"title"},[t._v("手机绑定")]),s("span",{staticClass:"tip"},[t._v("短信验证用于登录和修改安全验证")])]),s("div",{staticClass:"fr"},[t.safeSet.mobile?t._e():s("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/reg_mobile/user/bind"})}}},[t._v("绑定")]),t.safeSet.mobile?s("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/reg_mobile/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")?s("div",{staticClass:"item clear"},[s("div",{staticClass:"fl"},[s("span",{staticClass:"title"},[t._v("邮箱绑定")]),s("span",{staticClass:"tip"},[t._v("为了您的账户安全，请绑定邮箱")])]),s("div",{staticClass:"fr"},[t.safeSet.email?t._e():s("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/reg_email/user/bind"})}}},[t._v("绑定")]),t.safeSet.email?s("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/reg_email/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),s("div",{staticClass:"item clear"},[s("div",{staticClass:"fl"},[s("span",{staticClass:"title"},[t._v("登录密码")]),s("span",{staticClass:"tip"},[t._v("登录时使用，是您的第一道安全防线")])]),s("div",{staticClass:"fr"},[t.safeSet.password&&t.safeSet.password.isset?s("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/user/resetPassword"})}}},[t._v("修改")]):t._e(),t.safeSet.password&&!t.safeSet.password.isset?s("el-button",{attrs:{type:"primary",size:"medium",plain:""}},[t._v("设置")]):t._e()],1)]),0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("paypwd")?s("div",{staticClass:"item clear"},[s("div",{staticClass:"fl"},[s("span",{staticClass:"title"},[t._v("资金密码")]),s("span",{staticClass:"tip"},[t._v("交易时使用，开启手机验证或者谷歌验证后方可进行设置")])]),s("div",{staticClass:"fr"},[t.safeSet.paypwd&&t.safeSet.paypwd.isset?s("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/paypwd/change"})}}},[t._v("修改")]):t._e(),t.safeSet.paypwd&&!t.safeSet.paypwd.isset?s("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/paypwd/set"})}}},[t._v("设置")]):t._e()],1)]):t._e(),0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("gauth")?s("div",{staticClass:"item clear"},[s("div",{staticClass:"fl"},[s("span",{staticClass:"title"},[t._v("谷歌验证")]),s("span",{staticClass:"tip"},[t._v("为了您的账户安全，请绑定谷歌验证器")])]),s("div",{staticClass:"fr"},[t.safeSet.gauth?t._e():s("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/gauth/user/bind"})}}},[t._v("绑定")]),t.safeSet.gauth?s("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/gauth/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("gauth")||0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")||0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("email")?s("div",{staticClass:"item clear"},[s("div",{staticClass:"fl"},[s("span",{staticClass:"title"},[t._v("二次验证")]),s("span",{staticClass:"tip"},[t._v("开启后，每次登录均需要通过短信或谷歌验证")])]),s("div",{staticClass:"fr"},[s("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.handle2fa},model:{value:t.mfa,callback:function(e){t.mfa=e},expression:"mfa"}})],1)]):t._e()])]),s("XySafetyVerify",{ref:"sv",on:{"verify-request":t.handle2fa,cancel:t.close},model:{value:t.verifyData,callback:function(e){t.verifyData=e},expression:"verifyData"}})],1)}),[],!1,null,"2f386c40",null).exports,v={components:{},data:function(){return{loginHistory:[]}},created:function(){this.loadLoginHistory()},methods:{loadLoginHistory:(n=Object(l.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.util.request({url:"/v1/user/user/loginHistory",method:"get"});case 2:200==(e=t.sent).code?this.loginHistory=e.data.dataList:this.util.showToast({title:e.msg,icon:"loading",duration:3e3});case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}},m=(s("6dc3"),Object(d.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"center-box safe-box m-b"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"title"},[t._v("最近登录记录")])]),s("div",{staticClass:"content clearfix"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.loginHistory,stripe:""}},[s("el-table-column",{attrs:{prop:"loginTime",label:"时间","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("formatTime")(e.row.loginTime)))])]}}])}),s("el-table-column",{attrs:{prop:"clientIp",label:"IP地址","min-width":"180"}}),s("el-table-column",{attrs:{prop:"city",label:"地点"}})],1)],1)])}),[],!1,null,"bfd0d798",null).exports),h={components:{IaHead:c.a,IaFoot:o.a,userSafeSet:p,userLoginHoistory:m},data:function(){return{}},created:function(){},methods:{loadData:(r=Object(l.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.util.request({url:"/v1/core/user/center",data:{},method:"get"});case 2:200==(e=t.sent).code||this.util.showToast({title:e.msg,icon:"loading",duration:3e3});case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}},g=(s("a4e2"),Object(d.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap",attrs:{id:"wrap"}},[s("IaHead"),s("div",{staticClass:"main"},[s("div",{staticClass:"container"},[s("el-row",{staticClass:"user-info m-b",attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{xs:24,sm:4}},[s("div",{staticClass:"avatar-box flex"},[s("div",[s("img",{staticClass:"avatar",attrs:{src:t.$store.state.user.userInfo.avatar,alt:"avatar"}})]),s("div",[s("div",{staticClass:"nickname"},[t._v(t._s(t.$store.state.user.userInfo.nickname))]),s("div",{staticClass:"uid"},[t._v("UID: "+t._s(t.$store.state.user.userInfo.id))])])])]),s("el-col",{staticClass:"count-list flex",attrs:{xs:24,sm:5}},[s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("粉丝")]),s("div",{staticClass:"value"},[t._v("0")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"title"},[t._v("关注")]),s("div",{staticClass:"value"},[t._v("0")])])])],1),s("userSafeSet"),s("userLoginHoistory")],1)]),s("IaFoot")],1)}),[],!1,null,"637a51fd",null));e.default=g.exports},"6dc3":function(t,e,s){"use strict";var a=s("7412");s.n(a).a},7412:function(t,e,s){},"941d":function(t,e,s){"use strict";var a=s("cdd7");s.n(a).a},a4e2:function(t,e,s){"use strict";var a=s("f83e");s.n(a).a},cdd7:function(t,e,s){},f83e:function(t,e,s){}}]);
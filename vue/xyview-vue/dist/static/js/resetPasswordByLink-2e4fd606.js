import{_ as e}from"../../index.js";const t={data:()=>({loading:!1,form:{email:"",newPassword:"",rePassword:"",token:""},rule:{email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],rePassword:[{required:!0,message:"请重复输入新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}),created:function(){let e=this.$xyutil.getUrlQuery();this.form.email=decodeURIComponent(e.email),this.form.token=decodeURIComponent(e.token)},methods:{getVerifyToken(e){this.form.token=e.token},handleSubmit(){return e=this,t=null,o=function*(){this.loading=!0;let e=this;setTimeout((function(){e.loading=!1}),5e3);let t=yield this.$util.request({url:"/v1/reg_email/user/restPasswordByLink",data:this.form,method:"put"});"200"==t.code?(this.$util.showToast({title:t.msg,icon:"success",duration:2e3}),this.$xyutil.navigateTo("/user/login")):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1},new Promise(((l,r)=>{var s=e=>{try{i(o.next(e))}catch(t){r(t)}},a=e=>{try{i(o.throw(e))}catch(t){r(t)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,a);i((o=o.apply(e,t)).next())}));var e,t,o}}},o=window.Vue.resolveComponent,l=window.Vue.createVNode,r=window.Vue.createElementVNode,s=window.Vue.withCtx,a=window.Vue.createTextVNode,i=window.Vue.openBlock,n=window.Vue.createElementBlock,d={id:"wrap",class:"wrap"},u={class:"main"},m=r("div",{class:"main-banner hidden-md-and-up"},[r("h1",{class:"title m-t"}," 账号中心 ")],-1),c={class:"container main-content"},f=["src"],g=r("div",{class:"title"}," 邮箱重置密码 ",-1);const p=e(t,[["render",function(e,t,p,w,h,y){const x=o("xy-header"),V=o("el-col"),b=o("el-input"),P=o("el-form-item"),k=o("el-button"),v=o("xy-captcha"),_=o("el-form"),C=o("el-row"),T=o("xy-footer");return i(),n("div",d,[l(x),r("div",u,[m,r("div",c,[l(C,{type:"flex",justify:"space-between",align:"middle"},{default:s((()=>[l(V,{xs:1,sm:1,md:8,lg:10,class:"left-box hidden-sm-and-down"},{default:s((()=>[r("img",{src:e.$store.state.app.loginPic,width:"500"},null,8,f)])),_:1}),l(V,{xs:24,sm:{span:12,offset:6},md:{span:13,offset:0},lg:{span:9,offset:0},class:"login-box bg-white"},{default:s((()=>[g,l(_,{ref:"form",model:h.form,rules:h.rule},{default:s((()=>[l(P,{prop:"email"},{default:s((()=>[l(b,{size:"large",type:"text",disabled:!0,prefix:"ios-at-outline",modelValue:h.form.email,"onUpdate:modelValue":t[0]||(t[0]=e=>h.form.email=e),placeholder:"邮箱"},null,8,["modelValue"])])),_:1}),l(P,{prop:"newPassword"},{default:s((()=>[l(b,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:h.form.newPassword,"onUpdate:modelValue":t[1]||(t[1]=e=>h.form.newPassword=e),placeholder:"输入新密码"},null,8,["modelValue"])])),_:1}),l(P,{prop:"rePassword"},{default:s((()=>[l(b,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:h.form.rePassword,"onUpdate:modelValue":t[2]||(t[2]=e=>h.form.rePassword=e),placeholder:"重复输入新密码"},null,8,["modelValue"])])),_:1}),l(v,{onSuccess:t[4]||(t[4]=e=>y.handleSubmit("form"))},{default:s((()=>[l(k,{id:"Captcha",class:"full submit-btn",size:"large",loading:h.loading,type:"primary",onClick:t[3]||(t[3]=e=>y.handleSubmit("form"))},{default:s((()=>[a(" 立即重置 ")])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])]),l(T)])}]]);export{p as default};

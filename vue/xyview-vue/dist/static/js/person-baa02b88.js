var e=(e,t,i)=>new Promise(((l,a)=>{var s=e=>{try{n(i.next(e))}catch(t){a(t)}},o=e=>{try{n(i.throw(e))}catch(t){a(t)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,o);n((i=i.apply(e,t)).next())}));import{_ as t}from"../../index.js";const i={name:"chooseCertType",data(){return{loading:!1,qrDialog:!1,allowTypes:[3],info:{},apiType:0,url:"",timer:null,options:{type:"file",drag:!0,driver:this.$store.state.app.uploadDriver,signUrl:"",icon:"",placeholder:"",action:"",format:"mp4",maxSize:51200},certVideo:[],verifyData:""}},created(){this.loadData()},watch:{apiType(e){switch(clearInterval(this.timer),e){case 1:case 2:case 3:this.getFaceidQr();break;case 4:this.$message("请按要求录制视频并上传")}}},beforeUnmount(){clearInterval(this.timer)},methods:{next(){return e(this,null,(function*(){switch(this.apiType){case 1:case 2:this.$util.showToast({title:"请扫码完成认证",icon:"loading",duration:3e3});break;case 3:case 4:this.getFaceidQr()}}))},setApiType(e){this.url="",clearInterval(this.timer),this.apiType=e},getFaceidQr(){return e(this,null,(function*(){this.loading=!0;let e=yield this.$util.request({url:"/v1/user_cert/faceid/create/"+this.info.id,data:{apiType:this.apiType,certVideo:this.certVideo},method:"get"});this.loading=!1,200==e.code?3==this.apiType||4==this.apiType?this.$router.push("/user_cert/cert/index"):(this.url=e.data.url,this.qrDialog=!0,this.timer=setInterval(this.getState,2e3)):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}))},getState(){return e(this,null,(function*(){let e=yield this.$util.request({url:"/v1/user_cert/faceid/info/"+this.info.id,data:{},method:"get"});200==e.code&&3==e.data.info.level&&1==e.data.info.reviewState&&(window.location.href="/user_cert/cert/index")}))},loadData(){return e(this,null,(function*(){this.loading=!0;let e=yield this.$util.request({url:"/v1/user_cert/cert/my",data:{},method:"get"});this.loading=!1,200==e.code?this.info=e.data.info:this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}))}}},l=window.Vue.createTextVNode,a=window.Vue.resolveComponent,s=window.Vue.withCtx,o=window.Vue.createVNode,n=window.Vue.createElementVNode,r=window.Vue.toDisplayString,c=window.Vue.normalizeClass,d=window.Vue.openBlock,p=window.Vue.createElementBlock,u=window.Vue.createCommentVNode,h=window.Vue.createBlock,m=window.Vue.resolveDirective,y=window.Vue.withDirectives,f=window.Vue.pushScopeId,w=window.Vue.popScopeId,v=e=>(f("data-v-897d156e"),e=e(),w(),e),g={class:"bg-white p-t p-b"},x={class:"content p-a-md m-t-lg"},b=v((()=>n("h3",{class:"m-b-md ts-22 text-center"},"选择认证方式",-1))),T={class:"m-b-lg text-666 text-left flex space-center"},V={class:"lh-1-6 ts-14",style:{"max-width":"500px"}},_={class:"type-list p-t-lg p-b-lg"},k=v((()=>n("div",{class:"flex-1"},[n("h4",{class:"m-b"},[l("微信扫码"),n("span",null,"(即时完成)")]),n("div",{class:"text-666 ts-13 lh-1-6"},[n("p",null,"请使用本人微信扫码"),n("p",null,"需要已经绑定银行卡的微信账号扫码"),n("p",null,"完成授权操作后，实名将立即成功。")])],-1))),C=v((()=>n("div",{class:"flex-1"},[n("h4",{class:"m-b"},[l("支付宝扫码"),n("span",null,"(即时完成)")]),n("div",{class:"text-666 ts-13 lh-1-6"},[n("p",null,"请使用本人支付宝扫码"),n("p",null,"需要已经绑定银行卡的支付宝账号扫码"),n("p",null,"完成授权操作后，实名将立即成功。")])],-1))),D=v((()=>n("div",{class:"flex-1"},[n("h4",{class:"m-b"},[l("人工审核"),n("span",null,"(约3个工作日内完成)")]),n("div",{class:"text-666 ts-13 lh-1-6"},[n("p",null,"人工审核客服可能会通过绑定的手机号或者邮箱联系您"),n("p",null,"请注意何时客服身份，确保不要信息泄露。")])],-1))),$={class:"flex-1"},q=v((()=>n("h4",{class:"m-b"},[l("人工视频审核"),n("span",null,"(约3个工作日内完成)")],-1))),I={class:"text-666 ts-13 lh-1-6"},z=v((()=>n("p",null,"通请手持本人身份证录一段视频，进行上传提交人工审核。",-1))),N=v((()=>n("p",null,"人工视频审核需要视频清晰可见，无任何遮挡面部。",-1))),A=v((()=>n("i",{class:"xyicon xyicon-help-o ts-14 cursor-pointer"},null,-1))),S=v((()=>n("i",{class:"xyicon xyicon-plus",style:{"font-size":"48px",color:"#E1E1E1","margin-top":"18px","margin-bottom":"20px"}},null,-1))),E=v((()=>n("span",{class:"ts-12",style:{color:"7A7D83"}},"上传认证视频",-1))),F={class:"m-t"},U={slot:"footer"};const B=t(i,[["render",function(e,t,i,f,w,v){const B=a("el-breadcrumb-item"),Q=a("el-breadcrumb"),j=a("el-button"),P=a("el-popover"),G=a("xy-upload"),H=a("el-col"),J=a("el-row"),K=a("xy-qrcode"),L=a("el-dialog"),M=m("loading");return d(),p("div",g,[o(Q,{"separator-class":"el-icon-arrow-right",class:"p-l m-b"},{default:s((()=>[o(B,{to:{path:"/user/center"}},{default:s((()=>[l("个人设置")])),_:1}),o(B,{class:"cursor-pointer",onClick:t[0]||(t[0]=t=>e.$router.back(-1))},{default:s((()=>[l("个人信息填写")])),_:1}),o(B,null,{default:s((()=>[l("选择认证方式")])),_:1})])),_:1}),n("div",x,[b,n("div",T,[n("p",V," 即将实名身份(姓名："+r(w.info.realName)+" 身份证号："+r(w.info.certNo)+") ",1)]),y((d(),h(J,{type:"flex",justify:"center",align:"middle"},{default:s((()=>[o(H,{xs:22,sm:18,md:14,lg:18,class:"login-box bg-white"},{default:s((()=>[n("div",_,[w.allowTypes.includes(1)?(d(),p("div",{key:0,class:c(["flex space-between m-b-md",1==w.apiType?"active":""])},[k,o(j,{type:"primary",size:"default",plain:"",onClick:t[1]||(t[1]=e=>v.setApiType(1)),class:"cursor-pointer"},{default:s((()=>[l("立即认证")])),_:1})],2)):u("",!0),w.allowTypes.includes(2)?(d(),p("div",{key:1,class:c(["flex space-between m-b-md",2==w.apiType?"active":""])},[C,o(j,{type:"primary",size:"default",plain:"",onClick:t[2]||(t[2]=e=>v.setApiType(2)),class:"cursor-pointer"},{default:s((()=>[l("立即认证")])),_:1})],2)):u("",!0),w.allowTypes.includes(3)?(d(),p("div",{key:2,class:c(["flex space-between m-b-md",3==w.apiType?"active":""])},[D,o(j,{type:"primary",size:"default",plain:"",onClick:t[3]||(t[3]=e=>v.setApiType(3)),class:"cursor-pointer"},{default:s((()=>[l("下一步")])),_:1})],2)):u("",!0),w.allowTypes.includes(4)&&w.info.apiFailCount>=4?(d(),p("div",{key:3,class:c(["flex space-between m-b-md",4==w.apiType?"active":""]),onClick:t[6]||(t[6]=e=>v.setApiType(4))},[n("div",$,[q,n("div",I,[z,N,n("p",null,[l("请点击这里查看朗读内容 "),o(P,{placement:"top-start",title:"朗读内容",width:"260",trigger:"hover"},{reference:s((()=>[A])),default:s((()=>[n("div",null," 我是"+r(w.info.realName)+",身份证号是"+r(w.info.certNo)+",特此证明， 我所申请的"+r(e.$store.state.app.siteInfo.title)+"官网账号人工视频审核实名认证，均为我真实开设，我所提交的信息资料、 视频均为我本人自愿真实提交，我个人业务中所使用的相关产品均符合法律法律以及"+r(e.$store.state.app.siteInfo.title)+"的相关规定。 ",1)])),_:1})])])]),n("div",null,[4!=w.apiType?(d(),h(j,{key:0,type:"primary",size:"default",plain:"",onClick:t[4]||(t[4]=e=>v.setApiType(4)),class:"cursor-pointer"},{default:s((()=>[l("立即认证")])),_:1})):(d(),h(G,{key:1,style:{width:"auto !important"},options:w.options,header:{},modelValue:w.certVideo,"onUpdate:modelValue":t[5]||(t[5]=e=>w.certVideo=e)},{drag:s((()=>[S,E])),_:1},8,["options","modelValue"]))])],2)):u("",!0)]),n("div",F,[4==w.apiType?(d(),h(j,{key:0,class:"full submit-btn m-b-lg",size:"large",loading:w.loading,type:"primary",onClick:t[7]||(t[7]=e=>v.next())},{default:s((()=>[l(" 下一步 ")])),_:1},8,["loading"])):u("",!0)])])),_:1})])),_:1})),[[M,w.loading]])]),o(L,{title:"扫码认证",visible:w.qrDialog,"onUpdate:visible":t[9]||(t[9]=e=>w.qrDialog=e),width:"600px"},{default:s((()=>[o(K,{class:"qrcode",style:{opacity:1},value:w.url,options:{width:260}},null,8,["value"]),n("span",U,[o(j,{type:"primary",onClick:t[8]||(t[8]=e=>{w.qrDialog=!1})},{default:s((()=>[l("关闭")])),_:1})])])),_:1},8,["visible"])])}],["__scopeId","data-v-897d156e"]]);export{B as default};

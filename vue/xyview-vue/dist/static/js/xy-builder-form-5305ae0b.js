var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,o=(e,o)=>{for(var m in o||(o={}))a.call(o,m)&&l(e,m,o[m]);if(t)for(var m of t(o))i.call(o,m)&&l(e,m,o[m]);return e},m=(e,t,a)=>new Promise(((i,l)=>{var o=e=>{try{r(a.next(e))}catch(t){l(t)}},m=e=>{try{r(a.throw(e))}catch(t){l(t)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,m);r((a=a.apply(e,t)).next())}));import{b as r,_ as s}from"../../index.js";import{l as d,u as n}from"./index-e8ee17d1.js";const u=window.Vue.defineAsyncComponent,p={name:"XyBuilderFormItem",props:{prop:"",header:{type:Object,default:()=>({cloudId:0,eid:0})},config:{},item:{},formValues:{},formRules:{},showDev:!1,loading:!1},data:()=>({ready:!1}),components:{XyBuilderTab:u((()=>new Promise(((e,t)=>{r((()=>import("./xy-builder-tab-9eeb13e0.js")),["static/js/xy-builder-tab-9eeb13e0.js","index.js","static/css/index-fdd28e6e.css","static/js/index-e8ee17d1.js","static/css/xy-builder-tab-9f6b60da.css"]).then((t=>{e(t)}))})))),XyBuilderInfo:u((()=>new Promise(((e,t)=>{r((()=>import("./xy-builder-info-f33d5a6a.js")),["static/js/xy-builder-info-f33d5a6a.js","index.js","static/css/index-fdd28e6e.css","static/js/button-3b836efa.js","static/js/index-e8ee17d1.js","static/css/xy-builder-info-c015a854.css"]).then((t=>{e(t)}))})))),XyBuilderRemote:u((()=>new Promise(((e,t)=>{r((()=>import("./xy-builder-remote-18b3942c.js")),["static/js/xy-builder-remote-18b3942c.js","index.js","static/css/index-fdd28e6e.css"]).then((t=>{e(t)}))})))),XyBuilderStack:u((()=>new Promise(((e,t)=>{r((()=>import("./xy-builder-stack-965f4ee8.js")),["static/js/xy-builder-stack-965f4ee8.js","index.js","static/css/index-fdd28e6e.css"]).then((t=>{e(t)}))})))),XyBuilderList:u((()=>new Promise(((e,t)=>{r((()=>import("./xy-builder-list-04dd1086.js")),["static/js/xy-builder-list-04dd1086.js","index.js","static/css/index-fdd28e6e.css","static/js/index-e8ee17d1.js","static/js/button-3b836efa.js","static/css/xy-builder-list-350580b8.css"]).then((t=>{e(t)}))}))))},computed:{getColor:function(){let e="";for(let t of this.item.extra.options)t.value===this.formValues[this.item.name]&&(e=t.color);return e}},created:function(){var e,t,a,i;if("checkbox"!=this.item.type&&"selects"!=this.item.type&&"images"!=this.item.type&&"file"!=this.item.type&&"files"!=this.item.type&&"cascader"!=this.item.type&&"region"!=this.item.type||""!=this.formValues[this.item.name]&&this.formValues[this.item.name]||(this.formValues[this.item.name]=[]),this.item.hasOwnProperty("value")||(this.item.value=""),this.item.extra||(this.item.extra={}),this.item.temp||(this.item.temp=""),this.item.extra.showModal||(this.item.extra.showModal=!1),this.item.extra.placeholder||(this.item.extra.placeholder=""),this.item.extra.tip||(this.item.extra.tip=""),this.item.extra.disabled||(this.item.extra.disabled=!1),this.item.extra.hide||(this.item.extra.hide=!1),this.item.extra.isDev||(this.item.extra.isDev=0),this.item.extra.pageData){let e=this.item.extra.pageData;e.width?!1===isNaN(e.width)&&(e.width=e.width+"px"):e.width="800px",e.hasOwnProperty("height")||(e.height="auto"),e.hasOwnProperty("pageType")||(e.pageType="modal"),e.hasOwnProperty("modalType")||(e.modalType="form"),e.hasOwnProperty("formMethod")||(e.formMethod="delete"),e.hasOwnProperty("show")||(e.show=!1),e.hasOwnProperty("path")||(e.path=""),e.hasOwnProperty("api")||(e.api=""),e.hasOwnProperty("apiBlank")||(e.apiBlank=""),e.hasOwnProperty("apiSuffix")||(e.apiSuffix=["id"]),e.hasOwnProperty("apiParams")||(e.apiParams=""),e.hasOwnProperty("querySuffix")||(e.querySuffix=[]),e.hasOwnProperty("queryParams")||(e.queryParams=""),e.hasOwnProperty("title")||(e.title=this.item.title),e.hasOwnProperty("content")||(e.content=""),e.hasOwnProperty("okText")||(e.okText=""),e.hasOwnProperty("cancelText")||(e.cancelText=""),e.hasOwnProperty("noRefresh")||(e.noRefresh=!1),e.hasOwnProperty("modalClosable")||(e.modalClosable=!1),e.hasOwnProperty("loading")||(e.loading=!1),e.hasOwnProperty("draggable")||(e.draggable=!1),e.hasOwnProperty("scrollable")||(e.scrollable=!0),e.outUrl&&apiInfo.hasOwnProperty("domainRoot")&&0!=e.outUrl.indexOf("http")&&(e.outUrl=this.$store.state.app.apiInfo.domainRoot+e.outUrl),this.item.extra.pageData=o({},e)}if(["sku","image","imageflex","images","file","files","html","tinymce","md","markdown"].includes(this.item.type)?(this.item.extra.hasUpload=!0,this.item.extra.hasOwnProperty("upload")||(this.item.extra.upload={})):this.item.extra.hasUpload=!1,this.item.extra.hasUpload&&(this.item.extra.hasOwnProperty("driver")||((null==(e=this.config)?void 0:e.defaultUploadDriver)?this.item.extra.driver=this.config.defaultUploadDriver.toLowerCase():(null==(t=this.$store.state.app)?void 0:t.uploadDriver)?this.item.extra.driver=this.$store.state.app.uploadDriver.toLowerCase():this.item.extra.driver=""),this.item.extra.hasOwnProperty("hasUploadModule")||(this.item.extra.hasUploadModule=null==(a=this.config)?void 0:a.hasUploadModule),this.item.extra.hasOwnProperty("maxSize")||(this.item.extra.maxSize=this.config.defaultUploadMaxSize),this.item.extra.hasOwnProperty("maxSizeFile")||(this.config.hasOwnProperty("defaultUploadFileMaxSize")?this.item.extra.maxSizeFile=this.config.defaultUploadFileMaxSize:this.item.extra.maxSizeFile=20*this.config.defaultUploadMaxSize),this.item.extra.hasOwnProperty("action")||(this.item.extra.action=this.config.defaultUploadAction),this.item.extra.hasOwnProperty("spaceId")||"unicloud"!=this.item.extra.driver||(this.item.extra.provider=this.config.defaultUploadProvider||"aliyun",this.item.extra.spaceId=this.config.defaultUploadSpaceId,this.item.extra.clientSecret=this.config.defaultUploadClientSecret),this.item.extra.upload.hasOwnProperty("postdata")||(this.item.extra.upload.postdata={}),!this.item.extra.format)){["sku","image","imageflex","images"].includes(this.item.type)?this.item.extra.format=["jpg","jpeg","png","gif"]:this.item.extra.format=["jpg","jpeg","png","gif","ico","swf","flv","mp3","wav","wma","wmv","mid","avi","mpg","asf","rm","rmvb","mp4","doc","docx","xls","xlsx","ppt","pptx","pdf","wps","txt","zip","rar","gz","bz2","7z","ipa","apk","dmg","iso","pem","p12","wgt"]}if(this.item.extra.options){if("string"==typeof this.item.extra.options){let e=this.$xyutil.isJson(this.item.extra.options);!1===e?e=this.item.extra.options:this.item.extra.options=e}let e=[];for(let t in this.item.extra.options){let a=this.item.extra.options[t];!1===isNaN(t)&&(t=parseInt(t)),"object"==typeof a?(a.hasOwnProperty("value")||(a.hasOwnProperty("vField")?a.value=a[a.vField]:a.value=t),e.push(a)):e.push({title:a,value:t})}this.item.extra.options=e}else this.item.extra.options=[];switch(this.item.type){case"switch":case"select":case"radio":this.item.extra.options[0]&&"number"==typeof this.item.extra.options[0].value?""!==this.formValues[this.item.name]&&(this.formValues[this.item.name]=parseInt(this.formValues[this.item.name])):this.formValues[this.item.name]&&(this.formValues[this.item.name]=null==(i=this.formValues)?void 0:i[this.item.name].toString());break;case"checkbox":case"selects":this.formValues[this.item.name].constructor!==Array&&(this.formValues[this.item.name]=this.formValues[this.item.name].split(",")),this.item.extra.options[0]&&"number"==typeof this.item.extra.options[0].value?""!==this.formValues[this.item.name]&&this.formValues[this.item.name]?this.formValues[this.item.name].forEach(((e,t,a)=>{a[t]=parseInt(e)})):this.formValues[this.item.name]=[]:this.formValues[this.item.name].forEach(((e,t,a)=>{a[t]=e.toString()}));break;case"imageflex":if(this.formValues[this.item.name]&&this.formValues[this.item.name].constructor!==Object){let e={};for(let t of this.item.extra.options)e[t.value]="";this.formValues[this.item.name]=e}break;case"formlist":this.formValues[this.item.name]&&this.formValues[this.item.name].constructor===Array||(this.formValues[this.item.name]=[]);break;case"html":case"tinymce":this.item.extra.hasOwnProperty("tinymce")||(this.item.extra.tinymce={});break;case"datepicker":this.formValues[this.item.name]=this.$xyutil.timeFormat(this.formValues[this.item.name],"yyyy-MM-dd");break;case"datetimepicker":this.formValues[this.item.name]=this.$xyutil.timeFormat(this.formValues[this.item.name],"yyyy-MM-dd HH:mm");break;case"daterangepicker":this.formValues[this.item.name]=this.formatDates(this.formValues[this.item.name],"yyyy-MM-dd");break;case"datetimerangepicker":this.formValues[this.item.name]=this.formatDates(this.formValues[this.item.name],"yyyy-MM-dd HH:mm")}this.ready=!0},methods:{timeSelectChange(e){this.$set(this.formValues,this.item.name,e)},selectRemoteMethod(e){return m(this,null,(function*(){if(""!==e){this.loading=!0;let e=yield this.$xyutil.request({url:this.item.extra.remoteUrl,method:"get",data:data,header:this.header});"200"==e.code?(this.loading=!1,this.item.extra.options=e.data.dataList):this.$xyutil.showToast({title:e.msg,icon:"loading",duration:2e3})}else this.item.extra.options=[]}))},rightButtonModal(){return m(this,null,(function*(){let e=this.item.extra;if("list"===e.pageData.modalType)e.pageData.apiBlank=e.pageData.api+"?"+d.stringify(""),this.item.extra.pageData.show=!0;else e.pageData.apiBlank=e.pageData.api+"?"+d.stringify(""),e.pageData.show=!0}))},formlistAddrow(){""==this.formValues[this.item.name]&&(this.formValues[this.item.name]=[]);let e={};for(const t of this.item.extra.options)e[t.name]="";this.formValues[this.item.name].push(e)},formlistDelrow(e){this.formValues[this.item.name].splice(e,1)},formatDates(e,t){return e?2!=e.length?"":[this.$xyutil.timeFormat(e[0],t),this.$xyutil.timeFormat(e[1],t)]:""}},watch:{item(e){}}},h=window.Vue.renderList,f=window.Vue.Fragment,c=window.Vue.openBlock,y=window.Vue.createElementBlock,V=window.Vue.resolveComponent,x=window.Vue.createBlock,b=window.Vue.withCtx,g=window.Vue.createCommentVNode,w=window.Vue.toDisplayString,k=window.Vue.createElementVNode,v=window.Vue.createVNode,D=window.Vue.normalizeStyle,_=window.Vue.normalizeClass,U=window.Vue.createTextVNode,P=window.Vue.createSlots;window.Vue.pushScopeId,window.Vue.popScopeId;const M={key:0,class:"builder-form-item"},O={key:1,class:"hidden"},I=["href"],T=["src"],L=["src"],R={style:{display:"inline-flex","align-items":"center",float:"left"}},$={style:{}},C={key:0,style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},E={style:{float:"left"}},A={key:0,style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},B={key:27,class:"flex"},S={key:34,style:{display:"flex"}},Y=["innerHTML"];const z=s(p,[["render",function(e,t,a,i,l,o){const m=V("XyBuilderFormItem",!0),r=V("el-tab-pane"),s=V("el-tabs"),d=V("el-divider"),n=V("el-input"),u=V("el-option"),p=V("el-select"),z=V("el-radio"),j=V("el-radio-group"),H=V("xy-checkbox-group"),N=V("el-switch"),F=V("el-slider"),X=V("xy-tags-input"),q=V("el-date-picker"),W=V("el-time-select"),K=V("el-time-picker"),G=V("el-rate"),J=V("xy-cascader"),Q=V("el-color-picker"),Z=V("xy-upload"),ee=V("xy-poster-custom"),te=V("XyBuilderList"),ae=V("el-dialog"),ie=V("el-table-column"),le=V("el-button"),oe=V("el-table"),me=V("xy-checkbox-tree"),re=V("xy-mavon-editor"),se=V("xy-editor-tinymce"),de=V("xy-shop-sku"),ne=V("xy-shop-skuprice"),ue=V("xy-deliver-fee"),pe=V("xy-map-amap"),he=V("XyBuilderRemote"),fe=V("el-form-item");return l.ready?(c(),y("div",M,[a.item.extra.hide||a.item.extra.isDev&&!a.showDev||"hidden"==a.item.type?g("",!0):(c(),y(f,{key:0},["tabs"==a.item.type?(c(),x(s,{key:0,value:a.item.extra.options[0].name,animated:!1},{default:b((()=>[(c(!0),y(f,null,h(a.item.extra.options,((e,t)=>(c(),x(r,{key:t+"_"+e.name,label:e.title,name:e.name},{default:b((()=>[(c(!0),y(f,null,h(e.options,((t,i)=>(c(),x(m,{key:i,ref_for:!0,ref:"this.itememtab_"+e.name+"_"+t.name,item:t,formValues:a.formValues,formRules:a.formRules,header:a.header,prop:a.item.name,showDev:a.showDev,config:a.config},null,8,["item","formValues","formRules","header","prop","showDev","config"])))),128))])),_:2},1032,["label","name"])))),128))])),_:1},8,["value"])):(c(),x(fe,{key:1,label:a.item.title,prop:a.prop,rules:a.formRules[a.item.name]?a.formRules[a.item.name]:[]},{default:b((()=>["divider"==a.item.type?(c(),x(d,{key:0})):"hidden"==a.item.type?(c(),y("span",O,w(a.item.value),1)):"static"==a.item.type?(c(),y(f,{key:2},[k("span",null,w(a.item.value),1),v(n,{class:"hidden",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[0]||(t[0]=e=>a.formValues[a.item.name]=e),placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","placeholder"])],64)):"link"==a.item.type?(c(),y("a",{key:3,href:a.item.value,target:"_blank"},w(a.item.extra.title),9,I)):"audio"==a.item.type?(c(),y("audio",{key:4,src:a.formValues[a.item.name][0].url,controls:"controls"}," 您的浏览器不支持 audio 标签。 ",8,T)):"video"==a.item.type?(c(),y("video",{key:5,src:a.formValues[a.item.name][0].url,controls:"controls",width:"700"}," 您的浏览器不支持 video 标签。 ",8,L)):"text"==a.item.type?(c(),x(n,{key:6,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[1]||(t[1]=e=>a.formValues[a.item.name]=e),placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","placeholder"])):"password"==a.item.type?(c(),x(n,{key:7,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[2]||(t[2]=e=>a.formValues[a.item.name]=e),type:"password",placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","placeholder"])):"url"==a.item.type?(c(),x(n,{key:8,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[3]||(t[3]=e=>a.formValues[a.item.name]=e),type:"url",placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","placeholder"])):"email"==a.item.type?(c(),x(n,{key:9,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[4]||(t[4]=e=>a.formValues[a.item.name]=e),type:"email",placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","placeholder"])):"number"==a.item.type?(c(),x(n,{key:10,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[5]||(t[5]=e=>a.formValues[a.item.name]=e),type:"number",placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","placeholder"])):"digit"==a.item.type?(c(),x(n,{key:11,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[6]||(t[6]=e=>a.formValues[a.item.name]=e),type:"text",placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","placeholder"])):"tel"==a.item.type?(c(),x(n,{key:12,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[7]||(t[7]=e=>a.formValues[a.item.name]=e),type:"tel",placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","placeholder"])):"textarea"==a.item.type?(c(),x(n,{key:13,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[8]||(t[8]=e=>a.formValues[a.item.name]=e),type:"textarea",autosize:{minRows:a.item.extra.minRows?a.item.extra.minRows:3,maxRows:a.item.extra.maxRows?a.item.extra.maxRows:10},placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","autosize","placeholder"])):"array"==a.item.type?(c(),x(n,{key:14,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[9]||(t[9]=e=>a.formValues[a.item.name]=e),type:"textarea",autosize:{minRows:a.item.extra.minRows?a.item.extra.minRows:3,maxRows:a.item.extra.maxRows?a.item.extra.maxRows:10},placeholder:a.item.extra.placeholder},null,8,["disabled","modelValue","autosize","placeholder"])):"select"==a.item.type?(c(),x(p,{key:15,class:"full",clearable:"",filterable:"","remote-method":o.selectRemoteMethod,remote:!!a.item.extra.remote&&a.item.extra.remote,loading:a.loading,disabled:a.item.extra.disabled,onChange:e.optionsChange,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[10]||(t[10]=e=>a.formValues[a.item.name]=e)},{prefix:b((()=>{var e;return["dot"==(null==(e=a.item.extra)?void 0:e.prefixType)?(c(),y("span",{key:0,class:"m-r-xs",style:D([{width:"8px",height:"8px","border-radius":"50%"},{background:o.getColor}])},null,4)):g("",!0)]})),default:b((()=>[(c(!0),y(f,null,h(a.item.extra.options,((e,t,i)=>(c(),x(u,{key:i,label:e.title,value:e.value},{default:b((()=>{var t;return[k("span",R,["dot"==(null==(t=a.item.extra)?void 0:t.prefixType)?(c(),y("span",{key:0,class:"m-r-xs",style:D([{width:"8px",height:"8px","border-radius":"50%"},{background:e.color}])},null,4)):g("",!0),k("span",$,w(e.title),1)]),e.subtitle?(c(),y("span",C,w(e.subtitle),1)):g("",!0)]})),_:2},1032,["label","value"])))),128))])),_:1},8,["remote-method","remote","loading","disabled","onChange","modelValue"])):"selects"==a.item.type?(c(),x(p,{key:16,class:"full",multiple:!0,clearable:"",filterable:"","remote-method":o.selectRemoteMethod,remote:!!a.item.extra.remote&&a.item.extra.remote,loading:a.loading,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[11]||(t[11]=e=>a.formValues[a.item.name]=e)},{default:b((()=>[(c(!0),y(f,null,h(a.item.extra.options,((e,t,a)=>(c(),x(u,{key:a,label:e.title,value:e.value},{default:b((()=>[k("span",E,w(e.title),1),e.subtitle?(c(),y("span",A,w(e.subtitle),1)):g("",!0)])),_:2},1032,["label","value"])))),128))])),_:1},8,["remote-method","remote","loading","disabled","modelValue"])):"radio"==a.item.type?(c(),x(j,{key:17,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[12]||(t[12]=e=>a.formValues[a.item.name]=e)},{default:b((()=>[(c(!0),y(f,null,h(a.item.extra.options,((e,t,i)=>(c(),x(z,{disabled:a.item.extra.disabled,key:i,label:e.value},{default:b((()=>[e.icon?(c(),y("i",{key:0,class:_(e.icon)},null,2)):g("",!0),k("span",null,w(e.title),1)])),_:2},1032,["disabled","label"])))),128))])),_:1},8,["modelValue"])):"checkbox"==a.item.type?(c(),x(H,{key:18,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[13]||(t[13]=e=>a.formValues[a.item.name]=e),options:a.item.extra.options},null,8,["disabled","modelValue","options"])):"switch"==a.item.type?(c(),x(N,{key:19,disabled:a.item.extra.disabled,"active-value":a.item.extra.options[1].value,"active-text":a.item.extra.options[1].title,"inactive-value":a.item.extra.options[0].value,"inactive-text":a.item.extra.options[0].title,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[14]||(t[14]=e=>a.formValues[a.item.name]=e)},null,8,["disabled","active-value","active-text","inactive-value","inactive-text","modelValue"])):"slider"==a.item.type?(c(),x(F,{key:20,disabled:a.item.extra.disabled,min:a.item.extra.min||0,max:a.item.extra.max||100,step:a.item.extra.step||1,"show-input":a.item.extra.showInput||!1,"show-stops":a.item.extra.showStops||!1,range:a.item.extra.range||!1,vertical:a.item.extra.vertical||!1,height:a.item.extra.height||"60px",modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[15]||(t[15]=e=>a.formValues[a.item.name]=e)},null,8,["disabled","min","max","step","show-input","show-stops","range","vertical","height","modelValue"])):"tags"==a.item.type?(c(),x(X,{key:21,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[16]||(t[16]=e=>a.formValues[a.item.name]=e),disabled:a.item.extra.disabled},null,8,["modelValue","disabled"])):"datepicker"==a.item.type?(c(),x(q,{key:22,type:"date",placeholder:"选择日期",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[17]||(t[17]=e=>a.formValues[a.item.name]=e),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["disabled","modelValue"])):"datetimepicker"==a.item.type?(c(),x(q,{key:23,type:"datetime",placeholder:"选择日期时间",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[18]||(t[18]=e=>a.formValues[a.item.name]=e),format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["disabled","modelValue"])):"daterangepicker"==a.item.type?(c(),x(q,{key:24,type:"daterange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[19]||(t[19]=e=>a.formValues[a.item.name]=e),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["disabled","modelValue"])):"datetimerangepicker"==a.item.type?(c(),x(q,{key:25,type:"datetimerange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[20]||(t[20]=e=>a.formValues[a.item.name]=e),format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["disabled","modelValue"])):"timeselect"==a.item.type?(c(),x(W,{key:26,type:"time",placeholder:"选择时间",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[21]||(t[21]=e=>a.formValues[a.item.name]=e),onChange:o.timeSelectChange,"picker-options":{start:a.item.extra.start?a.item.extra.start:"00:00",step:a.item.extra.step?a.item.extra.step:"00:15",end:a.item.extra.end?a.item.extra.end:"23:00"}},null,8,["disabled","modelValue","onChange","picker-options"])):"timerangeselect"==a.item.type?(c(),y("div",B,[v(W,{type:"time",placeholder:"选择时间",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name][0],"onUpdate:modelValue":t[22]||(t[22]=e=>a.formValues[a.item.name][0]=e),"picker-options":{start:a.item.extra.start?a.item.extra.start:"00:00",step:a.item.extra.step?a.item.extra.step:"00:15",end:a.item.extra.end?a.item.extra.end:"00:00"}},null,8,["disabled","modelValue","picker-options"]),v(W,{type:"time",placeholder:"选择时间",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name][1],"onUpdate:modelValue":t[23]||(t[23]=e=>a.formValues[a.item.name][1]=e),"picker-options":{start:a.item.extra.start?a.item.extra.start:"00:00",step:a.item.extra.step?a.item.extra.step:"00:15",end:a.item.extra.end?a.item.extra.end:"00:00",minTime:a.formValues[a.item.name][0]}},null,8,["disabled","modelValue","picker-options"])])):"timepicker"==a.item.type?(c(),x(K,{key:28,type:"time",placeholder:"选择时间",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[24]||(t[24]=e=>a.formValues[a.item.name]=e),"picker-options":{selectableRange:a.item.extra.selectableRange?a.item.extra.selectableRange:"08:30:00 - 22:30:00"},"value-format":a.item.extra.format?a.item.extra.format:"HH:mm:ss"},null,8,["disabled","modelValue","picker-options","value-format"])):"timerangepicker"==a.item.type?(c(),x(K,{key:29,type:"timerange","is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间区间",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[25]||(t[25]=e=>a.formValues[a.item.name]=e),"picker-options":{selectableRange:a.item.extra.selectableRange?a.item.extra.selectableRange:"08:30:00 - 22:30:00"},"value-format":a.item.extra.format?a.item.extra.format:"HH:mm:ss"},null,8,["disabled","modelValue","picker-options","value-format"])):"rate"==a.item.type?(c(),x(G,{key:30,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[26]||(t[26]=e=>a.formValues[a.item.name]=e)},null,8,["disabled","modelValue"])):"cascader"==a.item.type||"region"==a.item.type?(c(),x(J,{key:31,item:a.item,header:{cloudId:a.header.cloudId,eid:a.header.eid},modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[27]||(t[27]=e=>a.formValues[a.item.name]=e)},null,8,["item","header","modelValue"])):"colorpicker"==a.item.type?(c(),x(Q,{key:32,disabled:a.item.extra.disabled,"show-alpha":a.item.extra.showAlpha||!1,"color-format":a.item.extra.colorForamt||"hex",modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[28]||(t[28]=e=>a.formValues[a.item.name]=e)},null,8,["disabled","show-alpha","color-format","modelValue"])):"image"==a.item.type?(c(),x(Z,{key:33,options:{type:"image",drag:!0},item:a.item,img:{name:"",title:""},header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[29]||(t[29]=e=>a.formValues[a.item.name]=e)},null,8,["item","header","modelValue"])):"imageflex"==a.item.type?(c(),y("div",S,[(c(!0),y(f,null,h(a.item.extra.options,((e,t)=>(c(),y("div",{key:t,style:{"padding-right":"15px"}},[v(Z,{options:{type:"image",drag:!1},item:a.item,img:e,header:a.header,modelValue:a.formValues[a.item.name][e.value],"onUpdate:modelValue":t=>a.formValues[a.item.name][e.value]=t},null,8,["item","img","header","modelValue","onUpdate:modelValue"])])))),128))])):"images"==a.item.type?(c(),x(Z,{key:35,options:{type:"images",drag:!0},item:a.item,header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[30]||(t[30]=e=>a.formValues[a.item.name]=e)},null,8,["item","header","modelValue"])):"file"==a.item.type?(c(),x(Z,{key:36,options:{type:"file",drag:!1},item:a.item,header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[31]||(t[31]=e=>a.formValues[a.item.name]=e)},null,8,["item","header","modelValue"])):"files"==a.item.type?(c(),x(Z,{key:37,options:{type:"files",drag:!1},item:a.item,header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[32]||(t[32]=e=>a.formValues[a.item.name]=e)},null,8,["item","header","modelValue"])):"poster"==a.item.type?(c(),x(ee,{key:38,item:a.item,header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[33]||(t[33]=e=>a.formValues[a.item.name]=e)},null,8,["item","header","modelValue"])):"selectlist"==a.item.type?(c(),y(f,{key:39},[U(w(a.formValues[a.item.name])+" ",1),k("a",{onClick:t[34]||(t[34]=e=>o.rightButtonModal(a.item)),style:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"}}," 点击选择 "),v(ae,{"append-to-body":!0,modelValue:a.item.extra.pageData.show,"onUpdate:modelValue":t[37]||(t[37]=e=>a.item.extra.pageData.show=e),width:a.item.extra.pageData.width||600,title:a.item.extra.pageData.title},{default:b((()=>[v(te,{modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[35]||(t[35]=e=>a.formValues[a.item.name]=e),showActions:!0,ref:"listselect_"+a.item.name,header:a.header,config:{listSelectType:"radio"},api:a.item.extra.pageData.apiBlank,show:a.item.extra.pageData.show,onCloseModel:t[36]||(t[36]=e=>a.item.extra.pageData.show=!1)},null,8,["modelValue","header","api","show"])])),_:1},8,["modelValue","width","title"])],64)):"selectlists"==a.item.type?(c(),y(f,{key:40},[U(w(a.formValues[a.item.name])+" ",1),k("a",{onClick:t[38]||(t[38]=e=>o.rightButtonModal(a.item)),style:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"}}," 点击选择 "),v(ae,{"append-to-body":!0,modelValue:a.item.extra.pageData.show,"onUpdate:modelValue":t[41]||(t[41]=e=>a.item.extra.pageData.show=e),width:a.item.extra.pageData.width||600,title:a.item.extra.pageData.title},{default:b((()=>[v(te,{modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[39]||(t[39]=e=>a.formValues[a.item.name]=e),showActions:!0,ref:"listselect_"+a.item.name,header:a.header,config:{listSelectType:"checkbox"},api:a.item.extra.pageData.apiBlank,show:a.item.extra.pageData.show,onCloseModel:t[40]||(t[40]=e=>a.item.extra.pageData.show=!1)},null,8,["modelValue","header","api","show"])])),_:1},8,["modelValue","width","title"])],64)):"formlist"==a.item.type?(c(),y(f,{key:41},[v(oe,{class:"formlist-table",data:a.formValues[a.item.name],stripe:"",style:{width:"100%"}},{default:b((()=>[v(ie,{type:"index",width:"30"}),(c(!0),y(f,null,h(a.item.extra.options,((e,t,i)=>(c(),x(ie,{key:i,prop:e.name,label:e.title,"min-width":e.minWidth?e.minWidth:"150px"},P({_:2},["text"==e.type?{name:"default",fn:b((t=>[v(n,{modelValue:a.formValues[a.item.name][t.$index][e.name],"onUpdate:modelValue":i=>a.formValues[a.item.name][t.$index][e.name]=i},null,8,["modelValue","onUpdate:modelValue"])])),key:"0"}:"switch"==e.type?{name:"default",fn:b((t=>[v(N,{"active-value":1,"active-text":"是","inactive-value":0,"inactive-text":"否",modelValue:a.formValues[a.item.name][t.$index][e.name],"onUpdate:modelValue":i=>a.formValues[a.item.name][t.$index][e.name]=i},null,8,["modelValue","onUpdate:modelValue"])])),key:"1"}:"select"==e.type?{name:"default",fn:b((t=>[v(p,{class:"full",clearable:"",filterable:"",modelValue:a.formValues[a.item.name][t.$index][e.name],"onUpdate:modelValue":i=>a.formValues[a.item.name][t.$index][e.name]=i},{default:b((()=>[(c(!0),y(f,null,h(e.options,((e,t,a)=>(c(),x(u,{key:a,label:e.title,value:e.value},{default:b((()=>[k("span",{style:{float:"left"}},w(e.title),1),e.subtitle?(c(),y("span",{key:0,style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},w(e.subtitle),1)):g("",!0)])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),key:"2"}:"datetimepicker"==e.type?{name:"default",fn:b((t=>[v(q,{type:"datetime",placeholder:"选择日期时间",disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name][t.$index][e.name],"onUpdate:modelValue":i=>a.formValues[a.item.name][t.$index][e.name]=i,format:"YYYY-MM-dd HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["disabled","modelValue","onUpdate:modelValue"])])),key:"3"}:"image"==e.type?{name:"default",fn:b((t=>[v(Z,{options:{type:"image",drag:!1},item:e,img:{name:"",title:""},header:a.header,modelValue:a.formValues[a.item.name][t.$index][e.name],"onUpdate:modelValue":i=>a.formValues[a.item.name][t.$index][e.name]=i},null,8,["item","header","modelValue","onUpdate:modelValue"])])),key:"4"}:"file"==e.type?{name:"default",fn:b((t=>[v(Z,{options:{type:"file",drag:!1},item:e,img:{name:"",title:""},header:a.header,modelValue:a.formValues[a.item.name][t.$index][e.name],"onUpdate:modelValue":i=>a.formValues[a.item.name][t.$index][e.name]=i},null,8,["item","header","modelValue","onUpdate:modelValue"])])),key:"5"}:"static"==e.type?{name:"default",fn:b((t=>[U(w(a.formValues[a.item.name][t.$index][e.name]),1)])),key:"6"}:{name:"default",fn:b((t=>[v(n,{modelValue:a.formValues[a.item.name][t.$index][e.name],"onUpdate:modelValue":i=>a.formValues[a.item.name][t.$index][e.name]=i},null,8,["modelValue","onUpdate:modelValue"])])),key:"7"}]),1032,["prop","label","min-width"])))),128)),v(ie,{width:"120"},{default:b((e=>[1!=a.item.extra.disabled?(c(),x(le,{key:0,type:"danger",size:"small",onClick:t=>o.formlistDelrow(e.$index)},{default:b((()=>[U("删除")])),_:2},1032,["onClick"])):g("",!0)])),_:1})])),_:1},8,["data"]),1!=a.item.extra.disabled?(c(),x(le,{key:0,type:"default",onClick:t[42]||(t[42]=e=>o.formlistAddrow()),style:{"margin-top":"8px"}},{default:b((()=>[U(" 增加一行 ")])),_:1})):g("",!0)],64)):"datalist"==a.item.type?(c(),x(te,{key:42,ref:"list_"+a.item.name,header:a.header,api:a.item.extra.pageData.apiBlank,show:a.item.extra.pageData.show},null,8,["header","api","show"])):"checkboxtree"==a.item.type?(c(),x(me,{key:43,data:a.item.extra.data,nodeKey:a.item.extra.nodeKey,columns:a.item.extra.columns,disabled:a.item.extra.disabled,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[43]||(t[43]=e=>a.formValues[a.item.name]=e)},null,8,["data","nodeKey","columns","disabled","modelValue"])):"md"==a.item.type||"markdown"==a.item.type?(c(),x(re,{key:44,height:a.item.extra.height?a.item.extra.height:"400px",item:a.item,header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[44]||(t[44]=e=>a.formValues[a.item.name]=e)},null,8,["height","item","header","modelValue"])):"html"==a.item.type||"tinymce"==a.item.type?(c(),x(se,{key:45,item:a.item,header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[45]||(t[45]=e=>a.formValues[a.item.name]=e)},null,8,["item","header","modelValue"])):"sku"==a.item.type?(c(),x(de,{key:46,item:a.item,header:{cloudId:a.header.cloudId,eid:a.header.eid},modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[46]||(t[46]=e=>a.formValues[a.item.name]=e)},null,8,["item","header","modelValue"])):"skuPrice"==a.item.type?(c(),x(ne,{key:47,item:a.item,header:{cloudId:a.header.cloudId,eid:a.header.eid},modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[47]||(t[47]=e=>a.formValues[a.item.name]=e),formValues:a.formValues},null,8,["item","header","modelValue","formValues"])):"fee"==a.item.type?(c(),x(ue,{key:48,item:a.item,header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[48]||(t[48]=e=>a.formValues[a.item.name]=e),formValues:a.formValues},null,8,["item","header","modelValue","formValues"])):"amap"==a.item.type?(c(),x(pe,{key:49,item:a.item,header:a.header,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[49]||(t[49]=e=>a.formValues[a.item.name]=e),formValues:a.formValues},null,8,["item","header","modelValue","formValues"])):"remote"==a.item.type?(c(),x(he,{key:50,item:a.item,header:a.header,outUrl:a.item.extra.outUrl,modelValue:a.formValues[a.item.name],"onUpdate:modelValue":t[50]||(t[50]=e=>a.formValues[a.item.name]=e),formValues:a.formValues},null,8,["item","header","outUrl","modelValue","formValues"])):(c(),y(f,{key:51},[U(w(a.item.name)+"未指定类型 ",1)],64)),k("div",{style:{color:"#aaa","font-size":"12px"},innerHTML:a.item.extra.tip},null,8,Y)])),_:1},8,["label","prop","rules"]))],64))])):g("",!0)}],["__scopeId","data-v-396de93c"]]),j=window.Vue.defineAsyncComponent,H={name:"XyBuilderForm",props:{api:"",header:{type:Object,default:()=>({cloudId:0,eid:0})},pitem:{type:Object,default:()=>({})},show:!1,predata:"",showDev:!1},data(){var e,t;return{loading:!1,ready:!1,subloading:!1,ref:"form",formData:"",labelPosition:"left",labelWidth:"100px",res:{},addNext:!1,verifyData:"",count:0,buttonType:(null==(t=null==(e=this.$store.state)?void 0:e.app)?void 0:t.buttonType)||"dark"}},components:{XyBuilderformItem:z,XyBuilderTab:j((()=>new Promise(((e,t)=>{r((()=>import("./xy-builder-tab-9eeb13e0.js")),["static/js/xy-builder-tab-9eeb13e0.js","index.js","static/css/index-fdd28e6e.css","static/js/index-e8ee17d1.js","static/css/xy-builder-tab-9f6b60da.css"]).then((t=>{e(t)}))})))),XyBuilderInfo:j((()=>new Promise(((e,t)=>{r((()=>import("./xy-builder-info-f33d5a6a.js")),["static/js/xy-builder-info-f33d5a6a.js","index.js","static/css/index-fdd28e6e.css","static/js/button-3b836efa.js","static/js/index-e8ee17d1.js","static/css/xy-builder-info-c015a854.css"]).then((t=>{e(t)}))})))),XyBuilderList:j((()=>new Promise(((e,t)=>{r((()=>import("./xy-builder-list-04dd1086.js")),["static/js/xy-builder-list-04dd1086.js","index.js","static/css/index-fdd28e6e.css","static/js/index-e8ee17d1.js","static/js/button-3b836efa.js","static/css/xy-builder-list-350580b8.css"]).then((t=>{e(t)}))}))))},created(){this.ref="form_"+(new Date).getTime(),this.predata?this.readyProcess(this.predata):this.loadData()},watch:{api(){this.loadData()},"formData.formValues":{handler(e,t){if(e){for(const t in this.formData.formItems)if(this.formData.formItems[t].extra.con){let a=this.formData.formItems[t].extra.con;this.getConditionTrueCount(a,e)===a.length?this.formData.formItems[t].extra.hide=!1:this.formData.formItems[t].extra.hide=!0}for(let t in this.formData.alertList.top)if(this.formData.alertList.top[t].condition){let a=this.formData.alertList.top[t].condition;this.getConditionTrueCount(a,e)===a.length?this.formData.alertList.top[t].show=!0:this.formData.alertList.top[t].show=!1}for(let t in this.formData.alertList.bottom)if(this.formData.alertList.bottom[t].condition){let a=this.formData.alertList.bottom[t].condition;this.getConditionTrueCount(a,e)===a.length?this.formData.alertList.bottom[t].show=!0:this.formData.alertList.bottom[t].show=!1}this.count++}},deep:!0,immediate:!0},show(e){1==e&&this.loadData()}},methods:{getCount(){return this.count},getConditionTrueCount(e,t){let a=0;for(let i in e)switch(e[i][1]){case"=":case"==":case"eq":t[e[i][0]]===e[i][2]&&a++;break;case"!=":case"neq":t[e[i][0]]!==e[i][2]&&a++;break;case">":case"gt":t[e[i][0]]>e[i][2]&&a++;break;case">=":case"egt":t[e[i][0]]>=e[i][2]&&a++;break;case"<":case"lt":t[e[i][0]]<e[i][2]&&a++;break;case"<=":case"elt":t[e[i][0]]<=e[i][2]&&a++;break;case"in":e[i][2].includes(t[e[i][0]])&&a++;break;case"has":t[e[i][0]].includes(e[i][2])&&a++;break;case"between":e[i][2][0]<t[e[i][0]]<e[i][2][1]&&a++}return a},loadData(){return m(this,null,(function*(){var e,t;if(!this.api)return!1;this.formData="",this.loading=!0,this.ready=!1;let a=this;if(setTimeout((function(){a.loading=!1}),5e3),this.api){this.count=0;let a=yield this.$xyutil.request({url:this.api,method:"get",header:{CloudId:null==(e=this.header)?void 0:e.cloudId,Eid:null==(t=this.header)?void 0:t.eid}});this.loading=!1,"200"==a.code?this.readyProcess(a.data.formData):this.res=a}}))},readyProcess(e){let t=n.readyForm({formData:e});this.formData=o({},t.formData),this.ready=!0},submit(){this.subloading=!0;let e=this;setTimeout((function(){e.subloading=!1}),5e3);let t=!1;if(0==Object.keys(this.formData.formRules).length||0==this.formData.formRules.length)t=!0;else if(this.formData.formTabs.length>0){let e="";for(let t=0;t<this.formData.formTabs.length;t++)this.$refs[this.ref+"_"+this.formData.formTabs[t].name][0].validate((t=>{e+=t?"true":"false"}));-1==e.search("false")&&(t=!0)}else this.$refs[this.ref].validate((e=>{if(e)t=!0;else if(this.$store.state.app.uiAudio){let e=new Audio;e.src={NODE_ENV:"production",VUE_APP_I18N_LOCALE:"zh",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_IS_DEMO:"false",VUE_APP_BASE_DOMAIN:"https://uiadmin.net",VUE_APP_PUBLIC_PATH:"./",VUE_APP_CDN_DOMAIN:"https://cdn.jiangruyi.com",VUE_APP_DEPLOY_ALONE:"false",VUE_APP_BASE:"https://cdn.jiangruyi.com/vue/xyview-vue/dist/"}.VUE_APP_AUDIO_OPEN,e.play()}}));return t?this.submitForm():(this.subloading=!1,!1)},submitForm(){return m(this,null,(function*(){var e,t;this.res={};let a=this.formData.formValues;this.verifyData&&(a._verify=this.verifyData);let i=yield this.$xyutil.request({url:this.formData.config.submitApi?this.formData.config.submitApi:this.api,method:this.formData.formMethod,data:a,header:{CloudId:this.header.cloudId,Eid:this.header.eid}});if("200"==i.code)if(this.verifyData="",this.count=0,this.$xyutil.showToast({title:i.msg,icon:"success",duration:1e3}),null==(e=null==i?void 0:i.data)?void 0:e.url)0!=i.data.url.indexOf("http")?this.$router.push(i.data.url):window.open(i.data.url);else if(this.addNext)if(this.formData.formTabs.length>0)for(let l=0;l<this.formData.formTabs.length;l++)this.$refs[this.ref+"_"+this.formData.formTabs[l].name][0].resetFields();else this.$refs[this.ref].resetFields();else this.verifyData&&this.$refs.sv.close(),i.data.updateMenu&&(yield this.getMenu([])),(null==(t=null==i?void 0:i.data)?void 0:t.noback)||this.$emit("close",!0);else 401003==i.code?this.$refs.sv.open(i.data.verifyList):this.res=i;return this.subloading=!1,i}))},cancel(){this.$emit("close",!1)},getMenu(){return m(this,arguments,(function*(e=[]){const t=this.$message({message:"加载左侧导航菜单信息",duration:5e3});var a=[{path:"/",name:"root",redirect:"/home",meta:{title:"首页"},component:adminLayout,children:[{path:"/home",name:"home",meta:{title:"首页"},component:()=>r((()=>import("./home-ecb46edc.js")),["static/js/home-ecb46edc.js","index.js","static/css/index-fdd28e6e.css","static/js/flink-f7add791.js","static/css/flink-2af5a855.css","static/js/index-acb50d5d.js","static/css/index-693f2cf4.css","static/css/home-ae6427d2.css"])}]}];e.menuTree||(e={menuTree:[],menuList:[]});let i=this;if(!e.menuTree[0]){if(!this.$store.state.app.apiInfo.api.apiMenuTrees)return void alert("基础接口信息错误");let t=yield this.$xyutil.request({url:this.$store.state.app.apiInfo.api.apiBase+this.$store.state.app.apiInfo.api.apiMenuTrees,method:"get"});if("200"==t.code){let l=[];if(t.data.menu2routes)l=treeToList(t.data.listData.dataList,"children");else{treeToList(t.data.listData.dataList,"children");let e=yield this.$xyutil.request({url:this.$store.state.app.apiInfo.api.apiBase+this.$store.state.app.apiInfo.api.apiMenuLists,method:"get"});if("200"!=e.code)return alert(t.msg),!1;l=e.data.dataList}e={menuTree:t.data.listData.dataList,menuList:l},i.$store.dispatch("menu/setMenuList",e);let o=i.util.addMenuRoutes(e,this.$store.state.app.apiInfo);o&&(a[0].children=o),i.$router.addRoutes(a)}}t.close()}))}}},N=window.Vue.renderList,F=window.Vue.Fragment,X=window.Vue.openBlock,q=window.Vue.createElementBlock,W=window.Vue.createElementVNode,K=window.Vue.resolveComponent,G=window.Vue.withCtx,J=window.Vue.createBlock,Q=window.Vue.createCommentVNode,Z=window.Vue.withModifiers,ee=window.Vue.createVNode,te=window.Vue.toDisplayString,ae=window.Vue.createTextVNode,ie=window.Vue.normalizeStyle,le=window.Vue.vShow,oe=window.Vue.withDirectives,me=window.Vue.resolveDirective;window.Vue.pushScopeId,window.Vue.popScopeId;const re={class:"xy-builder-comp xy-builder-wrap-form","element-loading-text":"拼命加载中"},se={key:0},de=["innerHTML"],ne={class:"form-group form-group-default"},ue={class:"p-b tw5 ts-18 tw5"},pe={class:"p-t-xs ts-13 text-gray"},he=["innerHTML"],fe={class:"m-t m-b flex footer-buttons"};const ce=s(H,[["render",function(e,t,a,i,l,o){const m=K("el-alert"),r=K("XyBuilderformItem"),s=K("el-form"),d=K("el-tab-pane"),n=K("el-tabs"),u=K("el-col"),p=K("el-row"),h=K("xy-title"),f=K("el-button"),c=K("el-checkbox"),y=K("xy-safety-verify"),V=me("loading");return oe((X(),q("div",re,[""!=l.formData&&l.ready?(X(),q("div",se,[(X(!0),q(F,null,N(l.formData.alertList.top,((e,t)=>(X(),q(F,null,[e.show&&!0===e.show?(X(),J(m,{key:t,class:"m-b",type:e.type,"show-icon":!1,closable:!1,effect:e.effect?e.effect:"light"},{default:G((()=>[W("div",{class:"m-b-sm",innerHTML:e.desc},null,8,de)])),_:2},1032,["type","effect"])):Q("",!0)],64)))),256)),l.formData.formTabs.length>0?(X(),J(n,{key:0,value:l.formData.formTabs[0].name},{default:G((()=>[(X(!0),q(F,null,N(l.formData.formTabs,((e,i)=>(X(),q(F,null,[e.formItems&&e.formItems.length>0?(X(),J(d,{key:i+"_"+e.name,label:e.title,name:e.name},{default:G((()=>[ee(s,{onSubmit:t[0]||(t[0]=Z((()=>{}),["prevent"])),ref_for:!0,ref:l.ref+"_"+e.name,model:l.formData.formValues[e.name].tabValues,"label-position":l.formData.config.labelPosition||l.labelPosition,"label-width":l.labelWidth+""},{default:G((()=>[(X(!0),q(F,null,N(e.formItems,((t,i)=>(X(),J(r,{key:i,ref_for:!0,ref:"formitem_"+e.name+"_"+t.name,item:t,formValues:l.formData.formValues[e.name].tabValues,formRules:e.formRules,header:a.header,prop:t.name,showDev:a.showDev,config:l.formData.config},null,8,["item","formValues","formRules","header","prop","showDev","config"])))),128))])),_:2},1032,["model","label-position","label-width"])])),_:2},1032,["label","name"])):Q("",!0)],64)))),256))])),_:1},8,["value"])):(X(),J(s,{key:1,onSubmit:t[1]||(t[1]=Z((()=>{}),["prevent"])),ref:l.ref,size:"default",model:l.formData.formValues,"status-icon":!0,"label-position":l.formData.config.labelPosition||l.labelPosition,"label-width":l.formData.config.labelWidth||l.labelWidth},{default:G((()=>[ee(p,{type:"flex",gutter:0},{default:G((()=>[ee(u,{span:24,class:"form-top"},{default:G((()=>[W("div",ne,[ee(p,{class:"flex flex-wrap",type:"flex",gutter:20},{default:G((()=>[(X(!0),q(F,null,N(l.formData.formItems,((e,t)=>(X(),q(F,{key:t},[e.extra.inGroup?Q("",!0):(X(),J(u,{key:0,xs:24,sm:24,md:e.extra.span?e.extra.span:24,class:"form-item-col"},{default:G((()=>[ee(r,{ref_for:!0,ref:"formitem_"+e.name,item:e,formValues:l.formData.formValues,formRules:l.formData.formRules,header:a.header,prop:e.name,showDev:a.showDev,config:l.formData.config},null,8,["item","formValues","formRules","header","prop","showDev","config"])])),_:2},1032,["md"]))],64)))),128))])),_:1})])])),_:1})])),_:1}),ee(p,{gutter:20,class:"form-label-top flex flex-wrap"},{default:G((()=>[(X(!0),q(F,null,N(l.formData.formCols,((e,t)=>(X(),J(u,{xs:24,sm:24,md:24,lg:e.span.lg,key:t},{default:G((()=>[e.itemList.length>0?(X(!0),q(F,{key:0},N(l.formData.formGroups,((t,i)=>(X(),q(F,null,[e.itemList.includes(t.name)?(X(),q("div",{class:"form-group m-b",key:i},[W("div",ue,[ee(h,null,{default:G((()=>[ae(te(t.title),1)])),_:2},1024)]),(X(!0),q(F,null,N(l.formData.formItems,((e,i)=>(X(),q(F,null,[t.itemList.includes(e.name)?(X(),J(r,{ref_for:!0,ref:"formitem_"+e.name,key:i,item:e,formValues:l.formData.formValues,formRules:l.formData.formRules,header:a.header,prop:e.name,showDev:a.showDev,config:l.formData.config},null,8,["item","formValues","formRules","header","prop","showDev","config"])):Q("",!0)],64)))),256)),W("div",pe,[W("text",null,te(t.extra.tip),1)])])):Q("",!0)],64)))),256)):Q("",!0)])),_:2},1032,["lg"])))),128))])),_:1})])),_:1},8,["model","label-position","label-width"])),(X(!0),q(F,null,N(l.formData.alertList.bottom,((e,t)=>(X(),q(F,null,[e.show&&!0===e.show?(X(),J(m,{key:t,type:e.type,"show-icon":!1,closable:!1,effect:e.effect?e.effect:"light"},{default:G((()=>[W("div",{class:"m-b-sm",innerHTML:e.desc},null,8,he)])),_:2},1032,["type","effect"])):Q("",!0)],64)))),256)),l.res.msg?(X(),J(m,{key:2,type:"error",onClose:t[2]||(t[2]=e=>{l.res={}}),"show-icon":"",closable:""},{default:G((()=>[ae(te(l.res.msg),1)])),_:1})):Q("",!0),W("div",fe,[l.formData.config.hideSubmitButton?Q("",!0):(X(),q("div",{key:0,class:"item",style:ie({width:l.formData.config.footerButtonLength||"120px"})},[ee(f,{loading:l.subloading,type:"primary",class:"full",onClick:t[3]||(t[3]=e=>o.submit())},{default:G((()=>[ae(te(l.formData.config.submitButtonTitle||"确认"),1)])),_:1},8,["loading"])],4)),l.formData.config.hideCancelButton?Q("",!0):(X(),q("div",{key:1,class:"item",style:ie({width:l.formData.config.footerButtonLength||"120px"})},[ee(f,{type:"default",class:"full",onClick:t[4]||(t[4]=e=>o.cancel())},{default:G((()=>[ae(te(l.formData.config.cancelButtonTitle||"取消"),1)])),_:1})],4))]),oe(ee(c,{modelValue:l.addNext,"onUpdate:modelValue":t[5]||(t[5]=e=>l.addNext=e)},{default:G((()=>[ae("继续录入下一条")])),_:1},8,["modelValue"]),[[le,this.formData.config.continue&&"post"==this.formData.formMethod]])])):Q("",!0),ee(y,{modelValue:l.verifyData,"onUpdate:modelValue":t[6]||(t[6]=e=>l.verifyData=e),onVerifyRequest:o.submitForm,ref:"sv"},null,8,["modelValue","onVerifyRequest"])])),[[V,l.loading]])}],["__scopeId","data-v-730f5e64"]]);export{ce as default};

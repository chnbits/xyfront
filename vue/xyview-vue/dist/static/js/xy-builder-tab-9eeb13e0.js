var a=Object.defineProperty,e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o=(a,e,t)=>new Promise(((r,i)=>{var o=a=>{try{n(t.next(a))}catch(e){i(e)}},s=a=>{try{n(t.throw(a))}catch(e){i(e)}},n=a=>a.done?r(a.value):Promise.resolve(a.value).then(o,s);n((t=t.apply(a,e)).next())}));import{_ as s,b as n}from"../../index.js";import{l}from"./index-e8ee17d1.js";const d=window.Vue.defineAsyncComponent,p={name:"XyBuilderTab",props:{api:"",header:{type:Object,default:()=>({cloudId:0,eid:0})},pitem:{type:Object,default:()=>({})},predata:""},data:()=>({loading:!1,ready:!1,tabData:{tabList:[],tabType:"card",countList:[]},tabCurrent:"tab_0"}),watch:{tabCurrent(a){let e=a.split("_")[1];this.getQueryParams(e)}},components:{XyBuilderTab:d((()=>new Promise(((a,e)=>{n((()=>Promise.resolve().then((()=>O))),void 0).then((e=>{a(e)}))})))),XyBuilderInfo:d((()=>new Promise(((a,e)=>{n((()=>import("./xy-builder-info-f33d5a6a.js")),["static/js/xy-builder-info-f33d5a6a.js","index.js","static/css/index-fdd28e6e.css","static/js/button-3b836efa.js","static/js/index-e8ee17d1.js","static/css/xy-builder-info-c015a854.css"]).then((e=>{a(e)}))})))),XyBuilderList:d((()=>new Promise(((a,e)=>{n((()=>import("./xy-builder-list-04dd1086.js")),["static/js/xy-builder-list-04dd1086.js","index.js","static/css/index-fdd28e6e.css","static/js/index-e8ee17d1.js","static/js/button-3b836efa.js","static/css/xy-builder-list-350580b8.css"]).then((e=>{a(e)}))})))),XyBuilderForm:d((()=>new Promise(((a,e)=>{n((()=>import("./xy-builder-form-5305ae0b.js")),["static/js/xy-builder-form-5305ae0b.js","index.js","static/css/index-fdd28e6e.css","static/js/index-e8ee17d1.js","static/css/xy-builder-form-99c53591.css"]).then((e=>{a(e)}))}))))},created(){return o(this,null,(function*(){this.predata?this.readyProcess(this.predata):yield this.loadData(),this.getQueryParams(0)}))},methods:{getQueryParams(a){if(this.tabData.tabList[a].predata.stackList)for(let e of this.tabData.tabList[a].predata.stackList){let a="";e.pageData.api&&(a=e.pageData.api+e.pageData.apiParams);let t="";t="string"!=typeof e.pageData.queryParams?l.stringify(e.pageData.queryParams):0==e.pageData.queryParams.indexOf("?")?e.pageData.queryParams.substr(1):e.pageData.queryParams,t&&(a=a+"?"+t),e.pageData.apiBlank=a,e.pageData.show=!0}},tabClick(a,e){},readyProcess(a){a?(a.tabList.forEach((a=>{a.hasOwnProperty("show")||(a.show=!1),a.list.forEach((a=>{a.hasOwnProperty("predata")||(a.predata=""),a.hasOwnProperty("pageData")||(a.pageData={}),a.pageData.hasOwnProperty("count")||(a.pageData.count=0),a.pageData.hasOwnProperty("modalType")||(a.pageData.modalType="list"),a.pageData.hasOwnProperty("apiBlank")||(a.pageData.apiBlank=""),a.pageData.hasOwnProperty("api")||(a.pageData.api=""),a.pageData.hasOwnProperty("show")||(a.pageData.show=!1),a.pageData.hasOwnProperty("apiParams")||(a.pageData.apiParams=""),a.pageData.hasOwnProperty("queryParams")||(a.pageData.queryParams="")})),a.predata={stackList:a.list}})),this.tabData=((a,o)=>{for(var s in o||(o={}))t.call(o,s)&&i(a,s,o[s]);if(e)for(var s of e(o))r.call(o,s)&&i(a,s,o[s]);return a})({},a)):alert("error tabData")},loadData(a=""){return o(this,null,(function*(){if(""!=a&&(this.api=a),this.ready=!1,this.loading=!0,this.api){let a=yield this.$xyutil.request({url:this.api,method:"get",header:this.header});"200"==a.code?this.readyProcess(a.data.tabData):this.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3})}this.loading=!1}))}}},u=window.Vue.renderList,y=window.Vue.Fragment,h=window.Vue.openBlock,c=window.Vue.createElementBlock,b=window.Vue.resolveComponent,w=window.Vue.createVNode,m=window.Vue.withCtx,g=window.Vue.createBlock,D=window.Vue.resolveDirective,P=window.Vue.withDirectives,f=window.Vue.normalizeClass;const _=s(p,[["render",function(a,e,t,r,i,o){const s=b("XyBuilderStack"),n=b("el-tab-pane"),l=b("el-tabs"),d=D("loading");return h(),c("div",{class:f(["xy-builder-comp xy-builder-wrap-tab",i.loading?"data-loading":""])},[P((h(),g(l,{size:"default","element-loading-text":"拼命加载中",type:i.tabData.tabType||"",animated:!1,modelValue:i.tabCurrent,"onUpdate:modelValue":e[0]||(e[0]=a=>i.tabCurrent=a),onTabClick:o.tabClick},{default:m((()=>[(h(!0),c(y,null,u(i.tabData.tabList,((a,e)=>(h(),g(n,{label:a.title,name:"tab_"+e,key:e},{default:m((()=>[w(s,{ref_for:!0,ref:"xy_builder_tab_innner_"+e,header:t.header,api:"",show:a.show,predata:a.predata},null,8,["header","show","predata"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["type","modelValue","onTabClick"])),[[d,i.loading]])],2)}],["__scopeId","data-v-25ac8aca"]]),O=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{_ as default};

var e=(e,t,l)=>new Promise(((o,a)=>{var i=e=>{try{u(l.next(e))}catch(t){a(t)}},d=e=>{try{u(l.throw(e))}catch(t){a(t)}},u=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,d);u((l=l.apply(e,t)).next())}));import{_ as t}from"../../index.js";const l=(0,window.Vue.defineComponent)({setup:()=>({}),data:()=>({item:{extra:{height:500,toolbar:"formatselect fontsizeselect | link image media blockquote codesample | bold italic underline strikethrough | forecolor backcolor bullist numlist | code fullscreen"}},cateList:[],form:{cateId:"",title:"",content:"",cover:"",fromTitle:""},rules:[]}),created:function(){this.$route.query.cateId&&(this.cateId=this.$route.query.cateId),this.loadData()},methods:{loadData(){return e(this,null,(function*(){var e,t;let l=yield this.$util.request({url:"/v1/icms/post/add",data:{cateName:"article"},method:"get"});200==l.code?(this.cateList=l.data.cateList,this.form.cateId=null==(t=null==(e=this.cateList)?void 0:e[0])?void 0:t.id):this.$util.showToast({title:l.msg,icon:"loading",duration:3e3})}))},onSubmit(){return e(this,null,(function*(){let e=yield this.$util.request({url:"/v1/icms/post/add",data:this.form,method:"post"});200==e.code?(this.$util.showToast({title:e.msg,icon:"success",duration:2e3}),this.$router.back()):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}))}}}),o=window.Vue.createTextVNode,a=window.Vue.resolveComponent,i=window.Vue.withCtx,d=window.Vue.createVNode,u=window.Vue.createElementVNode,r=window.Vue.renderList,n=window.Vue.Fragment,c=window.Vue.openBlock,s=window.Vue.createElementBlock,m=window.Vue.createBlock,f=window.Vue.pushScopeId,h=window.Vue.popScopeId,p={class:"container"},w=(e=>(f("data-v-30698cb0"),e=e(),h(),e))((()=>u("div",null,[u("span",null,"发布文章")],-1)));const V=t(l,[["render",function(e,t,l,u,f,h){const V=a("el-breadcrumb-item"),b=a("el-breadcrumb"),v=a("el-option"),_=a("el-select"),y=a("el-form-item"),k=a("el-input"),g=a("xy-editor-tinymce"),x=a("el-button"),I=a("el-form"),$=a("el-card");return c(),s("div",p,[d(b,{class:"m-b","separator-class":"el-icon-arrow-right"},{default:i((()=>[d(V,{to:{path:"/icms"}},{default:i((()=>[o("首页")])),_:1}),d(V,{to:{path:"/icms"}},{default:i((()=>[o("文章列表")])),_:1}),d(V,null,{default:i((()=>[o("发布文章")])),_:1})])),_:1}),d($,{shadow:"never","body-style":{padding:"20px"}},{header:i((()=>[w])),default:i((()=>[d(I,{model:e.form,ref:"form",rules:e.rules,"label-width":"80px",inline:!1,size:"large"},{default:i((()=>[d(y,{label:"分类"},{default:i((()=>[d(_,{modelValue:e.form.cateId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.cateId=t),"value-key":"id",placeholder:"",clearable:"",filterable:""},{default:i((()=>[(c(!0),s(n,null,r(e.cateList,(e=>(c(),m(v,{key:e.value,label:e.title,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(y,{label:"标题"},{default:i((()=>[d(k,{modelValue:e.form.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.title=t)},null,8,["modelValue"])])),_:1}),d(y,{label:"正文"},{default:i((()=>[d(g,{item:e.item,modelValue:e.form.content,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.content=t)},null,8,["item","modelValue"])])),_:1}),d(y,{label:"封面图"},{default:i((()=>[d(k,{modelValue:e.form.cover,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.cover=t)},null,8,["modelValue"])])),_:1}),d(y,{label:"来源"},{default:i((()=>[d(k,{modelValue:e.form.fromTitle,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.fromTitle=t)},null,8,["modelValue"])])),_:1}),d(y,null,{default:i((()=>[d(x,{type:"primary",onClick:e.onSubmit},{default:i((()=>[o(" 立即发布 ")])),_:1},8,["onClick"]),d(x,{onClick:t[5]||(t[5]=t=>e.$router.back())},{default:i((()=>[o("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])}],["__scopeId","data-v-30698cb0"]]);export{V as default};

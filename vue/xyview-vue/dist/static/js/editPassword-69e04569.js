var e=(e,l,t)=>new Promise(((s,a)=>{var o=e=>{try{i(t.next(e))}catch(l){a(l)}},r=e=>{try{i(t.throw(e))}catch(l){a(l)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);i((t=t.apply(e,l)).next())}));import{_ as l,v as t}from"../../index.js";const s={mixins:[t],data:()=>({active:1,loading:!1,form:{oldPassword:"",newPassword:"",rePassword:""},rule:{oldPassword:[{required:!0,message:"请填写当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],rePassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}),created:function(){},methods:{verifyPassword(){return e(this,null,(function*(){"200"==(yield this.doVerifyPassword()).code&&this.active++}))},handleSubmit(){return e(this,null,(function*(){this.form.oldPassword=this.password,this.loading=!0;let e=this;setTimeout((function(){e.loading=!1}),5e3);let l=yield this.$util.request({url:"/v1/reg_username/user/restPassword",data:this.form,method:"put"});"200"==l.code?(this.$util.showToast({title:l.msg,icon:"success",duration:2e3}),this.active++):this.$util.showToast({title:l.msg,icon:"loading",duration:3e3}),this.loading=!1}))}}},a=window.Vue.createTextVNode,o=window.Vue.resolveComponent,r=window.Vue.withCtx,i=window.Vue.createVNode,d=window.Vue.createElementVNode,n=window.Vue.openBlock,u=window.Vue.createBlock,c=window.Vue.createCommentVNode,m=window.Vue.createElementBlock,p=window.Vue.pushScopeId,w=window.Vue.popScopeId,f=e=>(p("data-v-1fe5639d"),e=e(),w(),e),g={class:"box"},h={class:"p-t"},v={class:"content p-t-md"},y={class:"step-tabs"},b=f((()=>d("div",{class:"m-b-md ts-12 tw4",style:{color:"#2A2B2E"}},"请输入您的登录密码:",-1))),V={class:"m-t-lg"},k=f((()=>d("div",{class:"m-b-md ts-18 tw4"},"请输入您的登录密码",-1))),P={class:"m-t-lg"},_={key:2},x=f((()=>d("div",null,[d("i",{class:"xyicon xyicon-check3 ts-30 m-r-sm",style:{color:"#4AC711"}}),d("span",{class:"ts-20 tw4",style:{color:"#2A2B2E"}},"修改登录密码成功，请您牢记密码。")],-1))),C={class:"m-t-lg"},z=f((()=>d("span",{slot:"title",class:"ts-14"},[d("i",{class:"xyicon xyicon-help-o m-r-xs text-primary"}),d("span",null,"忘记密码？")],-1))),B=f((()=>d("div",{class:"lh-2 ts-12 p-l"},[a(" 1、如果您忘记当前密码，您可以前往登录页面重置密码。"),d("br"),a(" 2、您也可以选择其它验证方式修改密码。"),d("br"),a(" 3、如您遇到困难可以联系我们的客服协助解决。"),d("br")],-1)));const q=l(s,[["render",function(e,l,t,s,p,w){const f=o("el-breadcrumb-item"),q=o("el-breadcrumb"),E=o("el-step"),N=o("el-steps"),S=o("el-input"),T=o("el-form-item"),$=o("el-button"),A=o("el-link"),I=o("el-form"),U=o("router-link"),j=o("el-alert");return n(),m("div",null,[d("div",g,[d("div",h,[i(q,{"separator-class":"el-icon-arrow-right",class:"p-l m-b"},{default:r((()=>[i(f,{to:{path:"/user/center"}},{default:r((()=>[a("个人设置")])),_:1}),i(f,null,{default:r((()=>[a("绑定邮箱")])),_:1})])),_:1})]),d("div",v,[i(N,{active:p.active,simple:"","align-left":""},{default:r((()=>[i(E,{title:"验证当前密码",description:""}),i(E,{title:"输入新密码",description:""}),i(E,{title:"修改成功",description:""})])),_:1},8,["active"]),d("div",y,[1==p.active?(n(),u(I,{key:0,ref:"form","label-position":"left","label-width":"0px"},{default:r((()=>[b,i(T,{prop:"password"},{default:r((()=>[i(S,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:e.password,"onUpdate:modelValue":l[0]||(l[0]=l=>e.password=l),placeholder:"输入登录密码"},null,8,["modelValue"])])),_:1}),d("div",V,[i($,{class:"submit-btn primary-linear m-r",size:"default",loading:p.loading,type:"primary",onClick:w.verifyPassword},{default:r((()=>[a(" 下一步 ")])),_:1},8,["loading","onClick"]),i(A,{class:"back ts-14",onClick:l[1]||(l[1]=l=>e.$router.back())},{default:r((()=>[a("取消操作")])),_:1})])])),_:1},512)):c("",!0),2==p.active?(n(),u(I,{key:1,ref:"formVerifyPassword","label-position":"left","label-width":"140px",model:p.form,rules:p.rule},{default:r((()=>[k,i(T,{prop:"newPassword",label:"输入新的密码"},{default:r((()=>[i(S,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:p.form.newPassword,"onUpdate:modelValue":l[2]||(l[2]=e=>p.form.newPassword=e),placeholder:"输入新的密码"},null,8,["modelValue"])])),_:1}),i(T,{prop:"rePassword",label:"再次输入"},{default:r((()=>[i(S,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:p.form.rePassword,"onUpdate:modelValue":l[3]||(l[3]=e=>p.form.rePassword=e),placeholder:"再次输入"},null,8,["modelValue"])])),_:1}),d("div",P,[i($,{class:"submit-btn primary-linear m-r",size:"default",loading:p.loading,type:"primary",onClick:l[4]||(l[4]=e=>w.handleSubmit("form"))},{default:r((()=>[a(" 下一步 ")])),_:1},8,["loading"]),i(A,{class:"back ts-14",onClick:l[5]||(l[5]=e=>p.active--)},{default:r((()=>[a("返回上一步")])),_:1})])])),_:1},8,["model","rules"])):c("",!0),3==p.active?(n(),m("div",_,[x,d("div",C,[i(U,{to:"/user/login"},{default:r((()=>[i($,{class:"primary-linear",size:"small",type:"primary",round:""},{default:r((()=>[a("重新登录")])),_:1})])),_:1})])])):c("",!0)])])]),d("div",null,[i(j,{type:"primary"},{default:r((()=>[z,B])),_:1})])])}],["__scopeId","data-v-1fe5639d"]]);export{q as default};

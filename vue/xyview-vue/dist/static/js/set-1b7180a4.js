var e=(e,o,l)=>new Promise(((t,i)=>{var a=e=>{try{s(l.next(e))}catch(o){i(o)}},r=e=>{try{s(l.throw(e))}catch(o){i(o)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,r);s((l=l.apply(e,o)).next())}));import{_ as o}from"../../index.js";const l={data:()=>({verifyList:[],loading:!1,form:{paypwd:"",password:"",emailVerify:"",emailToken:"",mobileVerify:"",mobileToken:"",gauth:""},rule:{paypwd:[{required:!0,message:"请填写支付密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}),created:function(){this.loadData()},methods:{getVerifyToken(e){this.form.emailToken=e.token},getMobileVerifyToken(e){this.form.mobileToken=e.token},loadData(){return e(this,null,(function*(){let e=yield this.$util.request({url:"/v1/paypwd/pwd/set",method:"get"});"200"==e.code?this.verifyList=e.data.dataList:this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}))},handleSubmit(){return e(this,null,(function*(){this.loading=!0;let e=this;setTimeout((function(){e.loading=!1}),5e3);let o=yield this.$util.request({url:"/v1/paypwd/pwd/set",data:this.form,method:"post"});"200"==o.code?(this.$util.showToast({title:o.msg,icon:"success",duration:2e3}),this.$xyutil.navigateBack()):this.$util.showToast({title:o.msg,icon:"loading",duration:3e3}),this.loading=!1}))}}},t=window.Vue.createTextVNode,i=window.Vue.resolveComponent,a=window.Vue.withCtx,r=window.Vue.createVNode,s=window.Vue.createElementVNode,d=window.Vue.openBlock,n=window.Vue.createBlock,u=window.Vue.createCommentVNode,m=window.Vue.createElementBlock,f={class:"bg-white p-t p-b"},p={class:"container p-a-md"},c=s("div",{class:"title m-b"}," 设置支付密码 ",-1);const y=o(l,[["render",function(e,o,l,y,w,V){const g=i("el-breadcrumb-item"),h=i("el-breadcrumb"),b=i("el-input"),k=i("el-form-item"),v=i("xy-send-verify"),x=i("el-button"),_=i("el-form"),T=i("el-col"),L=i("el-row");return d(),m("div",f,[r(h,{"separator-class":"el-icon-arrow-right",class:"p-l m-b"},{default:a((()=>[r(g,{to:{path:"/user/center"}},{default:a((()=>[t("个人设置")])),_:1}),r(g,null,{default:a((()=>[t("设置支付密码")])),_:1})])),_:1}),s("div",p,[r(L,{type:"flex",justify:"center",align:"middle"},{default:a((()=>[r(T,{xs:22,sm:12,md:10,lg:10,class:"login-box bg-white"},{default:a((()=>[c,r(_,{ref:"form",model:w.form,rules:w.rule},{default:a((()=>[r(k,{prop:"paypwd"},{default:a((()=>[r(b,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:w.form.paypwd,"onUpdate:modelValue":o[0]||(o[0]=e=>w.form.paypwd=e),placeholder:"请输入6-18位支付密码"},null,8,["modelValue"])])),_:1}),w.verifyList.indexOf("email")>=0?(d(),n(k,{key:0,prop:"emailVerify"},{default:a((()=>[r(b,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:w.form.emailVerify,"onUpdate:modelValue":o[1]||(o[1]=e=>w.form.emailVerify=e),placeholder:"请输入邮箱验证码"},{append:a((()=>[r(v,{onVerifysuccess:V.getVerifyToken,url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"设置资金密码"},null,8,["onVerifysuccess"])])),_:1},8,["modelValue"])])),_:1})):u("",!0),w.verifyList.indexOf("mobile")>=0?(d(),n(k,{key:1,prop:"mobileVerify"},{default:a((()=>[r(b,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:w.form.mobileVerify,"onUpdate:modelValue":o[2]||(o[2]=e=>w.form.mobileVerify=e),placeholder:"请输入手机验证码"},{append:a((()=>[r(v,{onVerifysuccess:V.getMobileVerifyToken,url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"设置资金密码"},null,8,["onVerifysuccess"])])),_:1},8,["modelValue"])])),_:1})):u("",!0),w.verifyList.indexOf("gauth")>=0?(d(),n(k,{key:2,prop:"gauth"},{default:a((()=>[r(b,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:w.form.gauth,"onUpdate:modelValue":o[3]||(o[3]=e=>w.form.gauth=e),placeholder:"请输入谷歌验证码"},null,8,["modelValue"])])),_:1})):u("",!0),w.verifyList.indexOf("password")>=0?(d(),n(k,{key:3,prop:"password"},{default:a((()=>[r(b,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:w.form.password,"onUpdate:modelValue":o[4]||(o[4]=e=>w.form.password=e),placeholder:"请输入登录密码"},null,8,["modelValue"])])),_:1})):u("",!0),r(x,{class:"full submit-btn m-b-lg",size:"large",loading:w.loading,type:"primary",onClick:o[5]||(o[5]=e=>V.handleSubmit("form"))},{default:a((()=>[t(" 确认 ")])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])),_:1})])])}]]);export{y as default};

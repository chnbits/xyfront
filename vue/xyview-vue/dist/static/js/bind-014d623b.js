var e=(e,t,o)=>new Promise(((l,i)=>{var a=e=>{try{r(o.next(e))}catch(t){i(t)}},s=e=>{try{r(o.throw(e))}catch(t){i(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,s);r((o=o.apply(e,t)).next())}));import{_ as t,a as o}from"./googleplay-4587997f.js";import{_ as l}from"../../index.js";const i={data:()=>({verifyList:[],loading:!1,gauthSecret:"加载中...",gauthQrcode:"",form:{verify:"",password:"",emailVerify:"",emailToken:"",mobileVerify:"",mobileToken:""},rule:{verify:[{required:!0,message:"请填写谷歌验证码",trigger:"blur"},{type:"string",min:6,message:"验证码为6位",trigger:"blur"}]}}),created:function(){this.loadData()},methods:{getVerifyToken(e){this.form.emailToken=e.token},getMobileVerifyToken(e){this.form.mobileToken=e.token},loadData(){return e(this,null,(function*(){let e=yield this.$util.request({url:"/v1/gauth/user/bind",method:"get"});"200"==e.code?(this.verifyList=e.data.dataList,this.gauthSecret=e.data.gauthSecret,this.gauthQrcode=e.data.gauthQrcode):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}))},handleSubmit(){return e(this,null,(function*(){this.loading=!0;let e=this;setTimeout((function(){e.loading=!1}),5e3);let t=yield this.$util.request({url:"/v1/gauth/user/bind",data:this.form,method:"post"});"200"==t.code?(this.$util.showToast({title:t.msg,icon:"success",duration:2e3}),this.$xyutil.navigateBack()):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1}))}}},a=window.Vue.createTextVNode,s=window.Vue.resolveComponent,r=window.Vue.withCtx,d=window.Vue.createVNode,n=window.Vue.createElementVNode,u=window.Vue.toDisplayString,c=window.Vue.openBlock,m=window.Vue.createBlock,f=window.Vue.createCommentVNode,p=window.Vue.createElementBlock,y=window.Vue.pushScopeId,g=window.Vue.popScopeId,h=e=>(y("data-v-9e95f274"),e=e(),g(),e),V={class:"main"},v={class:"container p-t"},w=h((()=>n("div",{class:"top-tip"},"谷歌验证器是一款动态口令工具，工作原理类似短信动态验证。绑定后每30s生成一个动态验证码，验证码可用于登录、提现、修改安全设置等操作的安全验证。",-1))),x={style:{height:"500px"}},b=h((()=>n("div",{class:"des"},"iOS用户登录App Store搜索“Authenticator”下载，安卓用户登录应用商店或使用手机浏览器搜索“谷歌验证器”下载",-1))),k=h((()=>n("div",{class:"flex",style:{"margin-bottom":"60px"}},[n("img",{style:{"margin-right":"60px"},src:t,alt:"appstore"}),n("img",{src:o,alt:"googleplay"})],-1))),_=h((()=>n("div",{class:"des"},"打开谷歌验证器，扫描下方二维码或手动输入下述密钥添加验证令牌。",-1))),T={class:"gauth flex"},S={class:"qr"},L={class:"key"},N=h((()=>n("i",{class:"el-icon-copy-document"},null,-1))),$=h((()=>n("div",{class:"m-b"}," 谷歌验证码 ",-1)));const q=l(i,[["render",function(e,t,o,l,i,y){const g=s("el-breadcrumb-item"),h=s("el-breadcrumb"),q=s("el-step"),z=s("xy-qrcode"),j=s("xy-copy"),A=s("el-steps"),B=s("el-input"),C=s("el-form-item"),O=s("xy-send-verify"),Q=s("el-button"),U=s("el-form"),D=s("el-col"),I=s("el-row");return c(),p("div",V,[n("div",v,[d(h,{"separator-class":"el-icon-arrow-right",class:"p-l m-b"},{default:r((()=>[d(g,{to:{path:"/user/center"}},{default:r((()=>[a("个人设置")])),_:1}),d(g,null,{default:r((()=>[a("绑定谷歌验证码")])),_:1})])),_:1}),d(I,{type:"flex",justify:"center"},{default:r((()=>[d(D,{xs:22,sm:20,md:16,lg:14},{default:r((()=>[w,n("div",x,[d(A,{direction:"vertical",space1:"60",active:0},{default:r((()=>[d(q,{status:"process",title:"下载谷歌验证"},{description:r((()=>[b,k])),_:1}),d(q,{status:"process",title:"在谷歌验证器中添加密钥并备份"},{description:r((()=>[_,n("div",T,[n("div",S,[d(z,{value:i.gauthQrcode,options:{width:118}},null,8,["value"])]),n("div",null,[n("div",L,"Key："+u(i.gauthSecret),1),d(j,{class:"copy",content:i.gauthSecret},{default:r((()=>[N,a(" 复制秘钥 ")])),_:1},8,["content"])])])])),_:1}),d(q,{status:"process",title:"输入谷歌验证器中6位验证码",description:""})])),_:1})]),d(I,{class:"m-t",style:{"margin-left":"30px"},type:"flex",justify:"start",align:"middle"},{default:r((()=>[d(D,{xs:22,sm:22,md:18,lg:18,class:"login-box bg-white1 p-a-0"},{default:r((()=>[$,d(U,{ref:"form",model:i.form,rules:i.rule},{default:r((()=>[d(C,{prop:"verify"},{default:r((()=>[d(B,{size:"large",type:"text",prefix:"ios-lock-outline",modelValue:i.form.verify,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.verify=e),placeholder:"请输入谷歌验证码"},null,8,["modelValue"])])),_:1}),i.verifyList.indexOf("email")>=0?(c(),m(C,{key:0,prop:"emailVerify"},{default:r((()=>[d(B,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:i.form.emailVerify,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.emailVerify=e),placeholder:"请输入邮箱验证码"},{append:r((()=>[d(O,{onVerifysuccess:y.getVerifyToken,url:"/v1/email/verify/send",type:"邮箱",noNeedAccount:!0,title:"绑定谷歌验证"},null,8,["onVerifysuccess"])])),_:1},8,["modelValue"])])),_:1})):f("",!0),i.verifyList.indexOf("mobile")>=0?(c(),m(C,{key:1,prop:"mobileVerify"},{default:r((()=>[d(B,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:i.form.mobileVerify,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.mobileVerify=e),placeholder:"请输入手机验证码"},{append:r((()=>[d(O,{onVerifysuccess:y.getMobileVerifyToken,url:"/v1/sms/verify/send",type:"手机号",noNeedAccount:!0,title:"绑定谷歌验证"},null,8,["onVerifysuccess"])])),_:1},8,["modelValue"])])),_:1})):f("",!0),i.verifyList.indexOf("password")>=0?(c(),m(C,{key:2,prop:"password"},{default:r((()=>[d(B,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:i.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.password=e),placeholder:"请输入登录密码"},null,8,["modelValue"])])),_:1})):f("",!0),d(Q,{class:"full submit-btn",size:"large",loading:i.loading,type:"primary",onClick:t[4]||(t[4]=e=>y.handleSubmit("form"))},{default:r((()=>[a(" 绑定 ")])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1})])),_:1})])])}],["__scopeId","data-v-9e95f274"]]);export{q as default};

var e=(e,t,l)=>new Promise(((o,a)=>{var i=e=>{try{u(l.next(e))}catch(t){a(t)}},d=e=>{try{u(l.throw(e))}catch(t){a(t)}},u=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,d);u((l=l.apply(e,t)).next())}));import{_ as t}from"../../index.js";const l=(0,window.Vue.defineComponent)({setup:()=>({}),data:()=>({item:{extra:{height:500,toolbar:"formatselect fontsizeselect | link image media blockquote codesample | bold italic underline strikethrough | forecolor backcolor bullist numlist | code fullscreen"}},id:0,cateList:[],form:{cateId:0,title:"",content:""},rules:[]}),created:function(){this.id=this.$route.params.id,this.loadData()},watch:{$route(){this.id=this.$route.params.id,this.loadData()}},methods:{loadData(){return e(this,null,(function*(){let e=yield this.$util.request({url:"/v1/forum/post/edit/"+this.id,method:"get"});200==e.code?(this.form=e.data.info,this.cateList=e.data.cateList):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}))},onSubmit(){return e(this,null,(function*(){let e=yield this.$util.request({url:"/v1/forum/post/edit/"+this.id,data:this.form,method:"put"});200==e.code?(this.$util.showToast({title:e.msg,icon:"success",duration:2e3}),this.$router.back()):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}))}}}),o=window.Vue.createTextVNode,a=window.Vue.resolveComponent,i=window.Vue.withCtx,d=window.Vue.createVNode,u=window.Vue.createElementVNode,r=window.Vue.renderList,n=window.Vue.Fragment,s=window.Vue.openBlock,c=window.Vue.createElementBlock,m=window.Vue.createBlock,f=window.Vue.pushScopeId,h=window.Vue.popScopeId,w={class:"container"},p=(e=>(f("data-v-73196539"),e=e(),h(),e))((()=>u("div",null,[u("span",null,"修改帖子")],-1)));const V=t(l,[["render",function(e,t,l,u,f,h){const V=a("el-breadcrumb-item"),b=a("el-breadcrumb"),v=a("el-option"),_=a("el-select"),k=a("el-form-item"),g=a("el-input"),y=a("xy-editor-tinymce"),x=a("el-button"),$=a("el-form"),C=a("el-card");return s(),c("div",w,[d(b,{class:"m-b","separator-class":"el-icon-arrow-right"},{default:i((()=>[d(V,{to:{path:"/forum"}},{default:i((()=>[o("首页")])),_:1}),d(V,{to:{path:"/forum"}},{default:i((()=>[o("帖子列表")])),_:1}),d(V,null,{default:i((()=>[o("修改帖子")])),_:1})])),_:1}),d(C,{shadow:"never","body-style":{padding:"20px"}},{header:i((()=>[p])),default:i((()=>[d($,{model:e.form,ref:"form",rules:e.rules,"label-width":"80px",inline:!1,size:"large"},{default:i((()=>[d(k,{label:"节点"},{default:i((()=>[d(_,{modelValue:e.form.cateId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.cateId=t),"value-key":"id",placeholder:"",clearable:"",filterable:""},{default:i((()=>[(s(!0),c(n,null,r(e.cateList,(e=>(s(),m(v,{key:e.value,label:e.title,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(k,{label:"标题"},{default:i((()=>[d(g,{modelValue:e.form.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.title=t)},null,8,["modelValue"])])),_:1}),d(k,{label:"正文"},{default:i((()=>[d(y,{item:e.item,modelValue:e.form.content,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.content=t)},null,8,["item","modelValue"])])),_:1}),d(k,null,{default:i((()=>[d(x,{type:"primary",onClick:e.onSubmit},{default:i((()=>[o("立即保存")])),_:1},8,["onClick"]),d(x,{onClick:t[3]||(t[3]=t=>e.$router.back())},{default:i((()=>[o("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])}],["__scopeId","data-v-73196539"]]);export{V as default};

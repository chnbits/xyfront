import{_ as e}from"../../index.js";const t={data:()=>({loading:!1,form:{email:"",newPassword:"",verify:"",token:""},rule:{email:[{required:!0,message:"请填写邮箱",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}],verify:[{required:!0,message:"请填写验证码",trigger:"blur"}],token:[{required:!0,message:"请发送验证码",trigger:"blur"}]}}),created:function(){this.$route.query.account&&(this.form.email=this.$route.query.account)},methods:{getVerifyToken(e){this.form.token=e.token},handleSubmit(){return e=this,t=null,l=function*(){this.loading=!0;let e=this;setTimeout((function(){e.loading=!1}),5e3);let t=yield this.$util.request({url:"/v1/reg_email/user/restPassword",data:this.form,method:"put"});"200"==t.code?(this.$util.showToast({title:t.msg,icon:"success",duration:2e3}),this.$xyutil.switchTab({url:"/user/login"})):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1},new Promise(((o,i)=>{var r=e=>{try{a(l.next(e))}catch(t){i(t)}},s=e=>{try{a(l.throw(e))}catch(t){i(t)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,s);a((l=l.apply(e,t)).next())}));var e,t,l}}},l=window.Vue.resolveComponent,o=window.Vue.createVNode,i=window.Vue.createElementVNode,r=window.Vue.withCtx,s=window.Vue.createTextVNode,a=window.Vue.openBlock,n=window.Vue.createElementBlock,d={id:"wrap",class:"wrap"},u={class:"main"},m=i("div",{class:"main-banner hidden-md-and-up"},[i("h1",{class:"title m-t"}," 账号中心 ")],-1),c={class:"container main-content"},f=["src"],p=i("div",{class:"title m-b-lg"}," 邮箱重置密码 ",-1);const g=e(t,[["render",function(e,t,g,w,h,y){const V=l("xy-header"),v=l("el-col"),x=l("el-input"),b=l("el-form-item"),k=l("xy-send-verify"),_=l("el-button"),P=l("el-form"),q=l("el-row"),T=l("xy-footer");return a(),n("div",d,[o(V),i("div",u,[m,i("div",c,[o(q,{type:"flex",justify:"space-between",align:"middle"},{default:r((()=>[o(v,{xs:1,sm:1,md:8,lg:10,class:"left-box hidden-sm-and-down"},{default:r((()=>[i("img",{src:e.$store.state.app.loginPic,width:"500"},null,8,f)])),_:1}),o(v,{xs:24,sm:{span:12,offset:6},md:{span:13,offset:0},lg:{span:9,offset:0},class:"login-box bg-white"},{default:r((()=>[p,o(P,{ref:"form",model:h.form,rules:h.rule},{default:r((()=>[o(b,{prop:"email"},{default:r((()=>[o(x,{size:"large",type:"text",prefix:"ios-at-outline",modelValue:h.form.email,"onUpdate:modelValue":t[0]||(t[0]=e=>h.form.email=e),placeholder:"邮箱"},null,8,["modelValue"])])),_:1}),o(b,{prop:"verify"},{default:r((()=>[o(x,{size:"large",type:"text",prefix:"ios-lock-outline",modelValue:h.form.verify,"onUpdate:modelValue":t[1]||(t[1]=e=>h.form.verify=e),placeholder:"验证码"},{append:r((()=>[o(k,{onVerifysuccess:y.getVerifyToken,url:"/v1/email/verify/send",type:"邮箱",account:h.form.email,title:"重置密码"},null,8,["onVerifysuccess","account"])])),_:1},8,["modelValue"])])),_:1}),o(b,{prop:"newPassword"},{default:r((()=>[o(x,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:h.form.newPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>h.form.newPassword=e),placeholder:"新密码"},null,8,["modelValue"])])),_:1}),o(_,{class:"full submit-btn",size:"large",loading:h.loading,type:"primary",onClick:t[3]||(t[3]=e=>y.handleSubmit("form"))},{default:r((()=>[s(" 立即重置 ")])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])),_:1})])]),o(T)])}]]);export{g as default};

var t=Object.defineProperty,e=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(e,o,i)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,s=(t,e,o)=>new Promise(((i,l)=>{var n=t=>{try{s(o.next(t))}catch(e){l(e)}},a=t=>{try{s(o.throw(t))}catch(e){l(e)}},s=t=>t.done?i(t.value):Promise.resolve(t.value).then(n,a);s((o=o.apply(t,e)).next())}));import{H as r}from"../../index.js";import{h as d}from"./hot_list-7d314b48.js";import{c as u}from"./lists-601a3954.js";const c=window.Vue.defineComponent,m=window.Vue.createTextVNode,f=window.Vue.resolveComponent,w=window.Vue.withCtx,p=window.Vue.createVNode,h=window.Vue.toDisplayString,g=window.Vue.createElementVNode,y=window.Vue.openBlock,v=window.Vue.createBlock,b=window.Vue.createCommentVNode,_=window.Vue.resolveDirective,x=window.Vue.withDirectives,V=window.Vue.unref,k=window.Vue.Fragment,C=window.Vue.createElementBlock,$={class:"container"},j={class:"p-b ts-14 tw3 flex justify-between",style:{color:"#666"}},F={class:"flex"},I={class:"m-r"},O={class:"ts-16 force lh-2",style:{"min-height":"200px"}},T=["innerHTML"],P={class:"actions m-t flex flex-alignCenter"},D=g("i",{class:"xyicon xyicon-heart ts-14",style:{"margin-right":"3px"}},null,-1),R={class:"m-t-sm"},S=["content"],N=["content"],H=g("html",{lang:"zh-CN",class:"theme-light"},null,-1),M=c((z=((t,e)=>{for(var o in e||(e={}))l.call(e,o)&&a(t,o,e[o]);if(i)for(var o of i(e))n.call(e,o)&&a(t,o,e[o]);return t})({},{components:{"comment-lists":u,"hot-list":d},data:()=>({id:0,info:{title:"",content:"",actionStates:{}},showReplyForm:!1,loading:!1,dataListHot:[]}),mounted:function(){this.id=this.$route.params.id,this.loadData()},watch:{$route(t,e){this.id=this.$route.params.id,this.loadData()}},methods:{actionClick(t,e,o){return s(this,null,(function*(){let i=yield this.$util.request({url:"/v1/action/action/set",data:{dataId:t,dataModel:e,actionType:o},method:"post"});200==i.code?(this.$set(this.info.actionStates,o,i.data.currentValue),this.$util.showToast({title:i.msg,icon:"success",duration:2e3})):this.$util.showToast({title:i.msg,icon:"loading",duration:3e3})}))},loadData(){return s(this,null,(function*(){this.loading=!0;let t=yield this.$util.request({url:"/v1/forum/post/info/"+this.id,data:{},method:"get"});200==t.code?this.info=t.data.info:this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1}))}}}),e(z,o({__name:"info",setup:t=>(t,e)=>{const o=f("el-breadcrumb-item"),i=f("el-breadcrumb"),l=f("el-skeleton"),n=f("router-link"),a=f("el-button"),s=f("el-link"),c=f("el-card"),M=f("el-col"),z=f("el-row"),B=_("viewer");return y(),C(k,null,[g("div",null,[g("div",$,[p(i,{class:"m-b","separator-class":"el-icon-arrow-right"},{default:w((()=>[p(o,{to:{path:"/forum"}},{default:w((()=>[m("首页")])),_:1}),p(o,{to:{path:"/forum"}},{default:w((()=>[m(" 帖子列表 ")])),_:1}),p(o,null,{default:w((()=>[m("详情")])),_:1})])),_:1}),p(z,{class:"flex flex-wrap",type:"flex",gutter:20},{default:w((()=>[p(M,{xs:24,lg:17},{default:w((()=>[p(c,{class:"box-card",shadow:"never"},{header:w((()=>[p(l,{rows:1,count:1,animated:"",loading:t.loading},{default:w((()=>[g("span",null,h(t.info.title),1)])),_:1},8,["loading"])])),default:w((()=>[g("div",j,[p(l,{rows:1,count:1,animated:"",loading:t.loading},{default:w((()=>[g("ul",F,[g("li",I," 阅读："+h(t.info.viewCount),1),g("li",null," 发布："+h(t.$util.timeFormat(t.info.postTime)),1)]),g("div",null,[t.$store.state.user.userInfo.id==t.info.uid?(y(),v(n,{key:0,to:"/forum/post/edit/"+t.id},{default:w((()=>[m(" 修改 ")])),_:1},8,["to"])):b("",!0)])])),_:1},8,["loading"])]),g("div",O,[p(l,{rows:3,count:5,animated:"",loading:t.loading},{default:w((()=>[x(g("div",{innerHTML:t.info.content},null,8,T),[[B,{movable:!0}]])])),_:1},8,["loading"])]),g("div",P,[p(a,{type:"primary",size:"default",onClick:e[0]||(e[0]=e=>t.actionClick(t.id,"icms_post",5))},{default:w((()=>[m(h(t.info.actionStates[5]?"已关注":"关注问题"),1)])),_:1}),p(a,{type:"default",size:"default",plain:"",class:"m-r-md",onClick:e[1]||(e[1]=e=>{t.showReplyForm=!0})},{default:w((()=>[m("我来回答")])),_:1}),g("div",{onClick:e[2]||(e[2]=e=>t.actionClick(t.id,"icms_post",2))},[D,p(s,null,{default:w((()=>[m(h(t.info.actionStates[2]?"已":"")+"收藏 ",1)])),_:1})])])])),_:1}),g("div",R,[p(u,{title:"回复",urlPrefix:"/forum",showReplyForm:t.showReplyForm,"onUpdate:showReplyForm":e[3]||(e[3]=e=>t.showReplyForm=e),dataId:t.id,dataModel:"forum_post"},null,8,["showReplyForm","dataId"])])])),_:1}),p(M,{xs:24,lg:7},{default:w((()=>[p(d,{cateId:t.info.cateId},null,8,["cateId"])])),_:1})])),_:1})])]),p(V(r),null,{default:w((()=>[g("title",null,h(t.info.title)+"_"+h(t.$store.state.app.siteInfo.subTitle),1),g("meta",{name:"description",content:t.info.title+t.info.description},null,8,S),g("meta",{name:"keywords",content:t.info.tags},null,8,N),H])),_:1})],64)}}))));var z;export{M as default};

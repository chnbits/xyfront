import{a as C}from"../index-91ea30ae.js";const T={data(){return{show:"choose",type:"",form:{loading:!1,seed:"",bindType:"",account:"",password:"",verify:"",token:""},rule:{account:[{required:!0,message:"\u8BF7\u586B\u5199\u8D26\u53F7",trigger:"blur"}]}}},created:function(){this.type=this.$route.query.type,this.form.seed=this.$route.query.seed},methods:{getVerifyToken(r){this.form.token=r},async handleRegister(){this.loading=!0;let r=this;setTimeout(function(){r.loading=!1},5e3);let e="";switch(this.type){case"wxmp":e="/v1/wxmp/user/register";break;case"wxapp":e="/v1/wxapp/user/register";break;default:return}let l=await this.$util.request({url:e,data:this.form,method:"post"});l.code=="200"?(this.$store.commit("user/setToken",l.data.token),this.$store.commit("user/setUserInfo",l.data.userInfo),this.$util.showToast({title:l.msg,icon:"success",duration:2e3}),this.$xyutil.navigateTo("/my")):this.$util.showToast({title:l.msg,icon:"loading",duration:3e3}),this.loading=!1},async handleBind(r){this.form.bindType=r,this.loading=!0;let e=this;switch(setTimeout(function(){e.loading=!1},5e3),this.type){case"wxmp":break;case"wxapp":break;default:return}let l=await this.$util.request({url:"/v1/third_login/user/bind",data:this.form,method:"post"});l.code=="200"?(this.$store.commit("user/setToken",l.data.token),this.$store.commit("user/setUserInfo",l.data.userInfo),this.$util.showToast({title:l.msg,icon:"success",duration:2e3}),this.$xyutil.navigateTo("/my")):this.$util.showToast({title:l.msg,icon:"loading",duration:3e3}),this.loading=!1}}},d=window.Vue.resolveComponent,o=window.Vue.createVNode,s=window.Vue.createElementVNode,n=window.Vue.withCtx,z=window.Vue.toDisplayString,a=window.Vue.createTextVNode,h=window.Vue.openBlock,w=window.Vue.createBlock,x=window.Vue.createCommentVNode,B=window.Vue.createElementBlock,F=window.Vue.pushScopeId,I=window.Vue.popScopeId,c=r=>(F("data-v-4d7b9294"),r=r(),I(),r),E={id:"wrap",class:"wrap"},N={class:"main"},U={class:"container",style:{"padding-top":"100px","padding-bottom":"80px"}},S=c(()=>s("img",{src:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-f12e1180-fce8-465f-a4cd-9f2da88ca0e6/a5530bd3-6d32-483a-a8be-394e6016043f.png",width:"630"},null,-1)),q={class:"success-box text-center"},D=c(()=>s("h4",{class:"title"}," \u8D26\u53F7\u7ED1\u5B9A ",-1)),P=a(" \u7ED1\u5B9A\u5DF2\u6709\u8D26\u6237 "),R=a(" \u521B\u5EFA\u65B0\u8D26\u6237 "),j=c(()=>s("div",{class:"bottom flex space-between flex-alignCenter"},null,-1)),A=c(()=>s("div",{class:"title"}," \u7528\u6237\u7ED1\u5B9A\u5E76\u767B\u5F55 ",-1)),G={class:"subtitle"},K=a(" \u8FD8\u6CA1\u6709\u6CE8\u518C\u5417\uFF1F "),Y=a(" \u8BF7\u70B9\u51FB\u8FD9\u91CC "),H={class:"flex flex-alignCenter"},J=a(" \u7ED1\u5B9A "),L={class:"actions flex m-t"},M=a(" \u5FD8\u8BB0\u5BC6\u7801\uFF1F "),O=c(()=>s("div",{class:"title"}," \u7528\u6237\u7ED1\u5B9A\u5E76\u767B\u5F55 ",-1)),Q=a(" \u7ED1\u5B9A "),W={class:"actions flex m-t"},X=a(" \u5FD8\u8BB0\u5BC6\u7801\uFF1F ");function Z(r,e,l,$,t,u){const y=d("xy-header"),p=d("el-col"),m=d("el-button"),g=d("router-link"),f=d("el-input"),_=d("el-form-item"),v=d("xy-send-verify"),b=d("el-form"),V=d("el-row"),k=d("xy-footer");return h(),B("div",E,[o(y),s("div",N,[s("div",U,[o(V,{type:"flex",justify:"space-between",align:"middle"},{default:n(()=>[o(p,{md:10,lg:16,class:"left-box hidden-sm-and-down"},{default:n(()=>[S]),_:1}),t.show=="choose"?(h(),w(p,{key:0,xs:24,sm:{span:14,offset:5},md:15,lg:9,class:"login-box bg-white"},{default:n(()=>[s("div",q,[D,s("p",null," \u60A8\u7684\u5FAE\u4FE1\u672A\u7ED1\u5B9A"+z(r.$store.state.app.siteInfo.title)+"\u8D26\u6237\uFF0C\u8BF7\u9009\u62E9\u64CD\u4F5C ",1),o(m,{class:"full cert",size:"large",type:"primary",onClick:e[0]||(e[0]=i=>{t.show="mobileVerify"})},{default:n(()=>[P]),_:1}),o(m,{class:"full skip",size:"large",onClick:e[1]||(e[1]=i=>u.handleRegister())},{default:n(()=>[R]),_:1})]),j]),_:1})):x("",!0),t.show=="mobileVerify"?(h(),w(p,{key:1,xs:24,sm:{span:14,offset:5},md:15,lg:9,class:"login-box bg-white"},{default:n(()=>[A,s("div",G,[K,o(g,{to:"/user/register"},{default:n(()=>[Y]),_:1})]),o(b,{ref:"form",model:t.form,rules:t.rule},{default:n(()=>[o(_,{prop:"account"},{default:n(()=>[o(f,{size:"large",type:"text",prefix:"ios-person-outline",modelValue:t.form.account,"onUpdate:modelValue":e[2]||(e[2]=i=>t.form.account=i),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1}),s("div",H,[o(_,{prop:"verify",class:"flex-1"},{default:n(()=>[o(f,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:t.form.verify,"onUpdate:modelValue":e[3]||(e[3]=i=>t.form.verify=i),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"])]),_:1}),o(v,{class:"send-verity-button",slot1:"append",onVerifysuccess:u.getVerifyToken,url:"/v1/sms/verify/send",type:"\u624B\u673A\u53F7",account:t.form.account,title:"\u7528\u6237\u767B\u5F55"},null,8,["onVerifysuccess","account"])]),o(m,{class:"full submit-btn",size:"large",loading:t.form.loading,type:"primary",onClick:e[4]||(e[4]=i=>u.handleBind("mobildVerify"))},{default:n(()=>[J]),_:1},8,["loading"]),s("div",L,[s("div",{onClick:e[5]||(e[5]=i=>t.show="password")}," \u4F7F\u7528\u8D26\u53F7\u5BC6\u7801\u7ED1\u5B9A "),s("div",null,[o(g,{to:"/user/resetPassword"},{default:n(()=>[M]),_:1})])])]),_:1},8,["model","rules"]),s("div",{class:"bottom flex space-between flex-alignCenter",onClick:e[6]||(e[6]=i=>{t.show="choose"})})]),_:1})):x("",!0),t.show=="password"?(h(),w(p,{key:2,xs:22,sm:12,md:10,lg:10,class:"login-box bg-white"},{default:n(()=>[O,o(b,{ref:"form",model:t.form,rules:t.rule},{default:n(()=>[o(_,{prop:"account"},{default:n(()=>[o(f,{size:"large",type:"text",prefix:"ios-person-outline",modelValue:t.form.account,"onUpdate:modelValue":e[7]||(e[7]=i=>t.form.account=i),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\u5730\u5740\u6216\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1}),o(_,{prop:"password"},{default:n(()=>[o(f,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:t.form.password,"onUpdate:modelValue":e[8]||(e[8]=i=>t.form.password=i),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),o(m,{class:"full submit-btn",size:"large",loading:t.form.loading,type:"primary",onClick:e[9]||(e[9]=i=>u.handleBind("password"))},{default:n(()=>[Q]),_:1},8,["loading"]),s("div",W,[s("div",{onClick:e[10]||(e[10]=i=>t.show="mobileVerify")}," \u4F7F\u7528\u624B\u673A\u9A8C\u8BC1\u7801\u7ED1\u5B9A "),s("div",null,[o(g,{to:"/user/resetPassword"},{default:n(()=>[X]),_:1})])])]),_:1},8,["model","rules"]),s("div",{class:"bottom flex space-between flex-alignCenter",onClick:e[11]||(e[11]=i=>{t.show="choose"})})]),_:1})):x("",!0)]),_:1})])]),o(k)])}var te=C(T,[["render",Z],["__scopeId","data-v-4d7b9294"]]);export{te as default};

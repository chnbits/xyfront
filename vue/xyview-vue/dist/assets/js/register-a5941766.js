import{a as b}from"../index-91ea30ae.js";const k={components:{},data(){return{loading:!1,inviteSuffix:"",form:{countryCode:"+86",mobile:"",password:"",rePassword:"",verify:"",token:"",inviteCode:"",agreement:!1},rule:{mobile:[{required:!0,message:"\u8BF7\u586B\u5199\u624B\u673A\u53F7",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801",trigger:"blur"},{type:"string",min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4F4D",trigger:"blur"}],verify:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",trigger:"blur"}],token:[{required:!0,message:"\u8BF7\u53D1\u9001\u9A8C\u8BC1\u7801",trigger:"blur"}]}}},created:function(){switch(this.$store.state.app.siteInfo.regInvite){case 1:this.inviteSuffix="\uFF08\u53EF\u9009\uFF09";break;case 2:this.inviteSuffix="\uFF08\u5FC5\u586B\uFF09";break}this.form.inviteCode=this.$store.state.app.inviteCode},methods:{onCountrySelect({name:n,iso2:e,dialCode:f}){this.form.countryCode="+"+f},getVerifyToken(n){this.form.token=n.token},async handleSubmit(){this.$store.commit("app/setData",{key:"inviteCode",value:this.form.inviteCode}),this.loading=!0;let n=this;setTimeout(function(){n.loading=!1},5e3);let e=await this.$util.request({url:"/v1/reg_mobile/user/register",data:this.form,method:"post"});e.code=="200"?(this.$util.showToast({title:e.msg,icon:"success",duration:2e3}),this.$store.commit("user/setToken",e.data.token),this.$store.commit("user/setUserInfo",e.data.userInfo),this.$emit("reg-success")):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3}),this.loading=!1}}},s=window.Vue.resolveComponent,t=window.Vue.createVNode,i=window.Vue.withCtx,c=window.Vue.openBlock,p=window.Vue.createBlock,C=window.Vue.createCommentVNode,u=window.Vue.createTextVNode,_=window.Vue.toDisplayString,l=window.Vue.createElementVNode,x={class:"agreement"},S=u("\u6211\u5DF2\u9605\u8BFB\u5E76\u540C\u610F"),N=["href"],I=u(" \u548C "),T=["href"],U=u(" \u6CE8\u518C "),q={class:"actions flex"},z=l("div",null,null,-1),D=u(" \u5DF2\u6709\u8D26\u53F7\uFF1F "),B=u("\u767B\u5F55");function E(n,e,f,O,o,d){const g=s("xy-country-select"),a=s("el-input"),m=s("el-form-item"),h=s("xy-send-verify"),y=s("el-checkbox"),V=s("el-button"),v=s("router-link"),w=s("el-form");return c(),p(w,{ref:"form",model:o.form,rules:o.rule},{default:i(()=>[t(m,{prop:"mobile"},{default:i(()=>[t(a,{size:"large",type:"text",prefix:"ios-at-outline",modelValue:o.form.mobile,"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.mobile=r),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{prepend:i(()=>[t(g,{defaultCountry:"CN",enabledCountryCode:"",onOnSelect:d.onCountrySelect},null,8,["onOnSelect"])]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"verify"},{default:i(()=>[t(a,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:o.form.verify,"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.verify=r),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},{default:i(()=>[t(h,{slot:"append",onVerifysuccess:d.getVerifyToken,url:"/v1/sms/verify/send",type:"\u624B\u673A\u53F7",account:o.form.mobile,title:"\u7528\u6237\u6CE8\u518C"},null,8,["onVerifysuccess","account"])]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"password"},{default:i(()=>[t(a,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:o.form.password,"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.password=r),placeholder:"\u8BF7\u8F93\u51656-18\u4F4D\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),n.$store.state.app.siteInfo.regInvite>0?(c(),p(m,{key:0,prop:"inviteCode"},{default:i(()=>[t(a,{size:"large",type:"text",prefix:"ios-lock-outline",modelValue:o.form.inviteCode,"onUpdate:modelValue":e[3]||(e[3]=r=>o.form.inviteCode=r),placeholder:"\u8BF7\u8F93\u5165\u9080\u8BF7\u7801"+o.inviteSuffix},null,8,["modelValue","placeholder"])]),_:1})):C("",!0),l("div",x,[t(y,{modelValue:o.form.agreement,"onUpdate:modelValue":e[4]||(e[4]=r=>o.form.agreement=r)},{default:i(()=>[S]),_:1},8,["modelValue"]),l("a",{href:n.$util.baseDomain()+"/user_agreement/agreement/info.html?name=agreement",target:"_blacnk"}," \u300A"+_(n.$store.state.app.siteInfo.title)+"\u7528\u6237\u534F\u8BAE\u300B ",9,N),I,l("a",{href:n.$util.baseDomain()+"/user_agreement/agreement/info.html?name=privacy",target:"_blacnk"}," \u300A"+_(n.$store.state.app.siteInfo.title)+"\u9690\u79C1\u653F\u7B56\u300B ",9,T)]),t(V,{class:"full submit-btn",size:"large",loading:o.loading,type:"primary",onClick:e[5]||(e[5]=r=>d.handleSubmit("form"))},{default:i(()=>[U]),_:1},8,["loading"]),l("div",q,[z,l("div",null,[D,t(v,{to:"/user/login"},{default:i(()=>[B]),_:1})])])]),_:1},8,["model","rules"])}var P=b(k,[["render",E]]);export{P as default};

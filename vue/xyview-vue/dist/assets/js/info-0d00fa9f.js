import{_ as C,b as P}from"../index-726dc959.js";import{c as j}from"./lists-155236f6.js";const E=window.Vue.defineAsyncComponent;window.Vue.nextTick;const F={components:{"xy-video-play":E(()=>new Promise((a,i)=>{P(()=>import("./index.es-5e684228.js"),[]).then(v=>{a(v.videoPlay)})})),"comment-lists":j},data(){return{id:0,info:{title:""},activeTab:"chapters",chapterList:[],recommendList:[],chapterIndex:-1,loading:!1,showReplyForm:!0,loadedScript:!1,courseType:"video",defaultVideo:"",playerOptions:{width:"100%",height:"500px",color:"#409eff",title:"",src:this.defaultVideo,poster:"",muted:!1,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],autoPlay:!1,loop:!1,mirror:!1,ligthOff:!1,volume:.8,control:!0,controlBtns:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]},fileUrl:"",pageNum:1,pageTotalNum:1,loadedRatio:0}},computed:{player(){var a,i;return(i=(a=this.$refs)==null?void 0:a.videoPlayer)==null?void 0:i.player}},async created(){this.id=this.$route.params.id,this.loadData(),this.$route.query.chapter>=0&&(this.chapterIndex=this.$route.query.chapter),await this.loadScript(),this.loadedScript=!0},watch:{chapterIndex(a){this.updateChapter()},$route(a,i){this.id=this.$route.params.id,this.courseType=="video",this.loadData(),this.$route.query.chapter>=0&&(this.chapterIndex=this.$route.query.chapter)}},methods:{loadScript(){return new Promise((a,i)=>{a()})},prePage(){let a=this.pageNum;a=a>1?a-1:this.pageTotalNum,this.pageNum=a},nextPage(){let a=this.pageNum;a=a<this.pageTotalNum?a+1:1,this.pageNum=a},updateChapter(){var b,v;if(this.chapterIndex>=0&&this.chapterList.length>0){if(this.chapterList[this.chapterIndex].playFile.length>0){let e=this.chapterList[this.chapterIndex].playFile[0].url;var a=e.lastIndexOf("."),i=e.substring(a+1);switch(i){case"mp4":this.courseType="video",this.playerOptions.src=e,this.playerOptions.title=this.chapterList[this.chapterIndex].title,this.playerOptions.poster=this.chapterList[this.chapterIndex].cover,this.loadChapter(this.chapterList[this.chapterIndex].id);break;case"pdf":this.courseType="pdf",this.fileUrl=e;break;case"pptx":case"docx":case"xlsx":case"ppt":case"doc":case"xls":this.courseType="office",this.fileUrl=e;break;default:alert("\u6682\u4E0D\u652F\u6301\u7684\u683C\u5F0F");break}}else this.courseType="video",this.playerOptions.poster="",this.playerOptions.src=this.defaultVideo;((v=(b=this.chapterList[this.chapterIndex])==null?void 0:b.files)==null?void 0:v.length)>0}else this.courseType="video",this.playerOptions.poster=this.defaultPoster,this.playerOptions.src=""},async loadData(){this.loading=!0;let a=await this.$xyutil.request({url:"/v1/course/item/info/"+this.id,data:{recommend:1},method:"get"});a.code==200?(this.info=a.data.info,this.chapterList=a.data.chapterList,this.recommendList=a.data.recommendList,this.chapterList.length>0&&!(this.$route.query.chapter>=0)?this.chapterIndex=0:this.chapterIndex=this.$route.query.chapter,this.updateChapter()):this.$xyutil.showToast({title:a.msg,icon:"loading",duration:3e3}),this.loading=!1},async loadChapter(a){let i=await this.$xyutil.request({url:"/v1/course/chapter/info/"+a,method:"get"});i.code==200||this.$xyutil.showToast({title:i.msg,icon:"loading",duration:3e3})}}},c=window.Vue.createTextVNode,n=window.Vue.resolveComponent,d=window.Vue.withCtx,o=window.Vue.createVNode,s=window.Vue.toDisplayString,t=window.Vue.createElementVNode,S=window.Vue.mergeProps,l=window.Vue.openBlock,g=window.Vue.createBlock,y=window.Vue.createCommentVNode,p=window.Vue.createElementBlock,_=window.Vue.renderList,A=window.Vue.Fragment,U=window.Vue.pushScopeId,N=window.Vue.popScopeId,f=a=>(U("data-v-5ea9ce80"),a=a(),N(),a),T={class:"main-banner"},H={class:"container"},B=c("\u9996\u9875"),R=f(()=>t("div",{class:"course-title m-b-sm"},null,-1)),D={class:"player-wrap m-b"},Q={key:1,class:"pdf-box"},Z=["src"],M={class:"player-bottom flex space-between p-l p-r p-b-sm"},X={class:"text-left"},W=["href"],K=f(()=>t("i",{class:"xyicon xyicon-download1"},null,-1)),J=c(" \u4E0B\u8F7D "),G=[K,J],$={key:0,class:"text-left"},ee={class:"ts-14"},ae={class:"right-col p-t text-left p-l"},te={class:"chapter-list flex m-b-sm cursor-pointer"},de=f(()=>t("div",null,null,-1)),oe={class:"flex-1 m-l-sm"},ie={class:"flex space-between"},re={class:"title ts-16",style:{color:"#b4b4b4","line-height":"16px","font-size":"16px !important"}},ne=f(()=>t("div",null,[t("i",{class:"xyicon xyicon-right2 text-gray"})],-1)),le={class:"m-t-sm ts-12 text-666"},se=c(" \u6682\u65E0\u7B14\u8BB0 "),ce=c(" \u6682\u65E0\u8BC4\u4EF7 "),pe={class:"container p-t"},fe=f(()=>t("div",{class:"tw4 m-b ts-32 m-t text-center"}," \u63A8\u8350\u8BFE\u7A0B Hot ",-1)),ve=f(()=>t("div",{class:"text-center ts-16",style:{color:"#51656F","margin-bottom":"104px"}}," \u4F18\u8D28\u53D7\u6B22\u8FCE\u7684\u8BFE\u7A0B\u52A9\u60A8\u66F4\u597D\u4E0E\u8FD0\u8425 ",-1)),be={class:"cate-item"},me={class:"cate-item"},he=["src"],xe={class:"bottom hidden"},ge={class:"p-a"},ye={class:"ts-20 m-b"},ue={class:"m-b-md ts-16",style:{color:"#51656F"}},we={class:"flex space-between items-end"},ke=c("\u7ACB\u5373\u5B66\u4E60"),_e={class:"ts-14",style:{color:"#51656F"}};function Ae(a,i,b,v,e,ze){const u=n("el-breadcrumb-item"),z=n("el-breadcrumb"),I=n("xy-video-play"),V=n("vue-pdf-app"),w=n("el-col"),m=n("router-link"),h=n("el-tab-pane"),q=n("comment-lists"),L=n("el-tabs"),k=n("el-row"),O=n("el-button"),Y=n("el-empty");return l(),p("div",null,[t("div",T,[t("div",H,[o(z,{separator:"/"},{default:d(()=>[o(u,{to:{path:"/"}},{default:d(()=>[B]),_:1}),o(u,null,{default:d(()=>[c(s(e.info.title),1)]),_:1}),o(u,null,{default:d(()=>[c(s(e.chapterList[e.chapterIndex]?e.chapterList[e.chapterIndex].title:""),1)]),_:1})]),_:1}),R,o(k,{gutter:40,class:"course-content"},{default:d(()=>[o(w,{xs:24,sm:24,md:17,lg:16,offset:0},{default:d(()=>[t("div",D,[e.loadedScript&&e.courseType=="video"?(l(),g(I,S({key:0,class:"vjs-custom-skin"},e.playerOptions,{ref:"videoPlayer"}),null,16)):e.courseType=="pdf"?(l(),p("div",Q,[o(V,{style:{height:"1000px"},pdf:e.fileUrl},null,8,["pdf"])])):e.courseType=="office"?(l(),p("iframe",{key:2,width:"100%",height:"1000px",src:"https://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl},`
                            `,8,Z)):y("",!0)]),t("div",M,[t("div",X,[e.chapterIndex>=0&&e.chapterList[e.chapterIndex]?(l(),p("a",{key:0,class:"ts-13",target:"_blank",href:a.$xyutil.config.baseDomain()+"/api/v1/course/chapter/download/"+e.chapterList[e.chapterIndex].id,rel:"noopener noreferrer"},G,8,W)):y("",!0)]),e.chapterList[e.chapterIndex]?(l(),p("div",$,[t("span",ee,s(e.chapterIndex>=0?e.chapterList[e.chapterIndex].viewCountShow:0)+"\u6B21\u64AD\u653E ",1)])):y("",!0)])]),_:1}),o(w,{xs:24,sm:24,md:7,lg:8,offset:0},{default:d(()=>[t("div",ae,[o(L,{modelValue:e.activeTab,"onUpdate:modelValue":i[1]||(i[1]=r=>e.activeTab=r),"tab-position":"top"},{default:d(()=>[o(h,{label:"\u7AE0\u8282("+e.chapterList.length+")",name:"chapters"},{default:d(()=>[(l(!0),p(A,null,_(e.chapterList,(r,x)=>(l(),g(m,{to:"/course/item/info/"+e.id+"?chapter="+x,key:x},{default:d(()=>[t("div",te,[de,t("div",oe,[t("div",ie,[t("h4",re,s(r.title),1),ne]),t("div",le,s(r.viewCountShow)+"\u64AD\u653E",1)])])]),_:2},1032,["to"]))),128))]),_:1},8,["label"]),o(h,{label:"\u8BA8\u8BBA",name:"chats"},{default:d(()=>[o(q,{title:"\u5168\u90E8\u8BC4\u8BBA",urlPrefix:"/course",showReplyForm:e.showReplyForm,"onUpdate:showReplyForm":i[0]||(i[0]=r=>e.showReplyForm=r),dataId:e.id,dataModel:"course_item"},null,8,["showReplyForm","dataId"])]),_:1}),o(h,{label:"\u7B14\u8BB0",name:"notes"},{default:d(()=>[se]),_:1}),o(h,{label:"\u8BC4\u4EF7",name:"comments"},{default:d(()=>[ce]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})])]),t("div",pe,[fe,ve,o(k,{gutter:30,class:"cate-list flex-wrap"},{default:d(()=>[(l(!0),p(A,null,_(e.recommendList,(r,x)=>(l(),g(w,{xs:24,sm:12,md:8,lg:8,key:x},{default:d(()=>[t("div",be,[o(m,{to:"/course/item/info/"+r.id},{default:d(()=>[t("div",me,[t("img",{class:"cover",src:r.cover,alt:""},null,8,he),t("div",xe,s(r.title),1)])]),_:2},1032,["to"]),t("div",ge,[t("h4",ye,[o(m,{style:{color:"#51656F"},to:"/course/item/info/"+r.id},{default:d(()=>[c(s(r.title),1)]),_:2},1032,["to"])]),t("div",ue,s(a.$xyutil.timeFormat(r.createTime)),1),t("div",we,[o(m,{to:"/course/item/info/"+r.id},{default:d(()=>[o(O,{type:"primary",size:"default"},{default:d(()=>[ke]),_:1})]),_:2},1032,["to"]),t("div",_e," \u89C2\u770B\u6B21\u6570"+s(r.viewCount),1)])])])]),_:2},1024))),128))]),_:1}),e.recommendList.length==0?(l(),g(Y,{key:0,description:"\u6682\u65E0\u8BFE\u7A0B"})):y("",!0)])])}var qe=C(F,[["render",Ae],["__scopeId","data-v-5ea9ce80"]]);export{qe as default};

import{a as N}from"../index-91ea30ae.js";const T={components:{},data(){var i,t;return{active:1,loading:!1,form:{countryCode:(i=this.$store.state.user.userInfo.mobile)==null?void 0:i.identityGroup,mobile:(t=this.$store.state.user.userInfo.mobile)==null?void 0:t.identifier,verify:"",token:"",newPassword:"",rePassword:""},rule:{mobile:[{required:!0,message:"\u8BF7\u586B\u5199\u624B\u673A\u53F7",trigger:"blur"}],newPassword:[{required:!0,message:"\u8BF7\u586B\u5199\u65B0\u5BC6\u7801",trigger:"blur"},{type:"string",min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4F4D",trigger:"blur"}],rePassword:[{required:!0,message:"\u8BF7\u586B\u5199\u65B0\u5BC6\u7801",trigger:"blur"},{type:"string",min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4F4D",trigger:"blur"}],verify:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",trigger:"blur"}],token:[{required:!0,message:"\u8BF7\u53D1\u9001\u9A8C\u8BC1\u7801",trigger:"blur"}]}}},created:function(){var i;(i=this.$store.state.user.userInfo.mobile)!=null&&i.identifier||this.$util.showToast({title:"\u672A\u7ED1\u5B9A\u624B\u673A",icon:"loading",duration:3e3})},methods:{goStep2(){if(!this.form.mobile||!this.form.verify||!this.form.token){this.$util.showToast({title:"\u9A8C\u8BC1\u5931\u8D25",icon:"loading",duration:3e3});return}this.active++},onCountrySelect({name:i,iso2:t,dialCode:y}){this.form.countryCode="+"+y},getVerifyToken(i){this.form.token=i},async handleSubmit(){this.loading=!0;let i=this;setTimeout(function(){i.loading=!1},5e3);let t=await this.$util.request({url:"/v1/reg_mobile/user/restPassword",data:this.form,method:"put"});t.code=="200"?(this.$util.showToast({title:t.msg,icon:"success",duration:2e3}),this.active++):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1}}},n=window.Vue.createTextVNode,r=window.Vue.resolveComponent,l=window.Vue.withCtx,e=window.Vue.createVNode,o=window.Vue.createElementVNode,_=window.Vue.openBlock,v=window.Vue.createBlock,b=window.Vue.createCommentVNode,x=window.Vue.createElementBlock,z=window.Vue.pushScopeId,B=window.Vue.popScopeId,a=i=>(z("data-v-58e6e026"),i=i(),B(),i),q={class:"box"},E={class:"p-t"},U=n("\u4E2A\u4EBA\u8BBE\u7F6E"),A=n("\u4FEE\u6539\u5BC6\u7801"),O={class:"content p-t-md"},G={class:"step-tabs"},M=a(()=>o("div",{class:"m-b-md ts-12 tw4",style:{color:"#2A2B2E"}},"\u4E3A\u786E\u8BA4\u60A8\u672C\u4EBA\u64CD\u4F5C\uFF0C\u9700\u8981\u60A8\u8FDB\u884C\u624B\u673A\u9A8C\u8BC1\u7801\u9A8C\u8BC1\u8EAB\u4EFD\u3002",-1)),j={class:"flex"},D={class:"m-t-lg"},F=n(" \u4E0B\u4E00\u6B65 "),H=n("\u53D6\u6D88\u64CD\u4F5C"),J=a(()=>o("div",{class:"m-b-md ts-18 tw4"},"\u8BF7\u8F93\u5165\u60A8\u7684\u767B\u5F55\u5BC6\u7801",-1)),K={class:"m-t-lg"},L=n(" \u4E0B\u4E00\u6B65 "),Q=n("\u8FD4\u56DE\u4E0A\u4E00\u6B65"),R={key:2},W=a(()=>o("div",null,[o("i",{class:"xyicon xyicon-check3 ts-30 m-r-sm",style:{color:"#4AC711"}}),o("span",{class:"ts-20 tw4",style:{color:"#2A2B2E"}},"\u4FEE\u6539\u767B\u5F55\u5BC6\u7801\u6210\u529F\uFF0C\u8BF7\u60A8\u7262\u8BB0\u5BC6\u7801\u3002")],-1)),X={class:"m-t-lg"},Y=n("\u91CD\u65B0\u767B\u5F55"),Z=a(()=>o("span",{slot:"title",class:"ts-14"},[o("i",{class:"xyicon xyicon-help-o m-r-xs text-primary"}),o("span",null,"\u6536\u4E0D\u5230\u77ED\u4FE1\u9A8C\u8BC1\u7801\uFF1F")],-1)),$=a(()=>o("div",{class:"lh-2 ts-12 p-l"},[n(" 1\u3001\u7F51\u7EDC\u901A\u8BAF\u5F02\u5E38\u53EF\u80FD\u4F1A\u9020\u6210\u77ED\u4FE1\u4E22\u5931\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6\u6216\u7A0D\u540E\u518D\u8BD5\u3002"),o("br"),n(" 2\u3001\u8BF7\u6838\u5B9E\u624B\u673A\u662F\u5426\u5DF2\u6B20\u8D39\u505C\u673A\uFF0C\u6216\u8005\u5C4F\u853D\u4E86\u7CFB\u7EDF\u77ED\u4FE1\u3002"),o("br"),n(" 3\u3001\u5982\u679C\u624B\u673A\u5DF2\u4E22\u5931\u6216\u505C\u7528\uFF0C \u8BF7\u9009\u62E9\u5176\u4ED6\u9A8C\u8BC1\u65B9\u5F0F \u3002"),o("br"),n(" 4\u3001\u60A8\u4E5F\u53EF\u4EE5\u5C1D\u8BD5\u5C06SIM\u5361\u79FB\u52A8\u5230\u53E6\u4E00\u90E8\u624B\u673A\uFF0C\u7136\u540E\u91CD\u8BD5\u3002"),o("br")],-1));function ee(i,t,y,te,s,c){const w=r("el-breadcrumb-item"),V=r("el-breadcrumb"),f=r("el-step"),k=r("el-steps"),C=r("xy-country-select"),u=r("el-input"),m=r("el-form-item"),P=r("xy-send-verify"),p=r("el-button"),h=r("el-link"),g=r("el-form"),S=r("router-link"),I=r("el-alert");return _(),x("div",null,[o("div",q,[o("div",E,[e(V,{"separator-class":"el-icon-arrow-right",class:"p-l m-b"},{default:l(()=>[e(w,{to:{path:"/user/center"}},{default:l(()=>[U]),_:1}),e(w,null,{default:l(()=>[A]),_:1})]),_:1})]),o("div",O,[e(k,{active:s.active,simple:"","align-left":""},{default:l(()=>[e(f,{title:"\u9A8C\u8BC1\u624B\u673A\u53F7",description:""}),e(f,{title:"\u8F93\u5165\u65B0\u5BC6\u7801",description:""}),e(f,{title:"\u4FEE\u6539\u6210\u529F",description:""})]),_:1},8,["active"]),o("div",G,[s.active==1?(_(),v(g,{key:0,ref:"form","label-position":"left","label-width":"140px",model:s.form,rules:s.rule},{default:l(()=>[M,e(m,{prop:"mobile",label:"\u624B\u673A\u53F7"},{default:l(()=>[e(u,{disabled:"",size:"default",type:"text",prefix:"ios-at-outline",modelValue:s.form.mobile,"onUpdate:modelValue":t[0]||(t[0]=d=>s.form.mobile=d),placeholder:s.form.mobile?"\u624B\u673A\u53F7":"\u672A\u7ED1\u5B9A\u624B\u673A\u53F7"},{prepend:l(()=>[e(C,{defaultCountry:"CN",enabledCountryCode:"",onOnSelect:c.onCountrySelect},null,8,["onOnSelect"])]),_:1},8,["modelValue","placeholder"])]),_:1}),e(m,{prop:"verify",label:"\u9A8C\u8BC1\u7801"},{default:l(()=>[o("div",j,[e(u,{class:"m-r",size:"default",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:s.form.verify,"onUpdate:modelValue":t[1]||(t[1]=d=>s.form.verify=d),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),e(p,{type:"primary",size:"default"},{default:l(()=>[e(P,{onVerifysuccess:c.getVerifyToken,url:"/v1/sms/verify/send",type:"\u624B\u673A\u53F7",account:s.form.mobile,title:"\u4FEE\u6539\u5BC6\u7801"},null,8,["onVerifysuccess","account"])]),_:1})])]),_:1}),o("div",D,[e(p,{class:"submit-btn primary-linear m-r",size:"default",loading:s.loading,type:"primary",onClick:c.goStep2},{default:l(()=>[F]),_:1},8,["loading","onClick"]),e(h,{class:"back ts-14",onClick:t[2]||(t[2]=d=>i.$router.back())},{default:l(()=>[H]),_:1})])]),_:1},8,["model","rules"])):b("",!0),s.active==2?(_(),v(g,{key:1,ref:"formVerifyPassword","label-position":"left","label-width":"140px",model:s.form,rules:s.rule},{default:l(()=>[J,e(m,{prop:"newPassword",label:"\u8F93\u5165\u65B0\u7684\u5BC6\u7801"},{default:l(()=>[e(u,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:s.form.newPassword,"onUpdate:modelValue":t[3]||(t[3]=d=>s.form.newPassword=d),placeholder:"\u8F93\u5165\u65B0\u7684\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(m,{prop:"rePassword",label:"\u518D\u6B21\u8F93\u5165"},{default:l(()=>[e(u,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:s.form.rePassword,"onUpdate:modelValue":t[4]||(t[4]=d=>s.form.rePassword=d),placeholder:"\u518D\u6B21\u8F93\u5165"},null,8,["modelValue"])]),_:1}),o("div",K,[e(p,{class:"submit-btn primary-linear m-r",size:"default",loading:s.loading,type:"primary",onClick:t[5]||(t[5]=d=>c.handleSubmit("form"))},{default:l(()=>[L]),_:1},8,["loading"]),e(h,{class:"back ts-14",onClick:t[6]||(t[6]=d=>s.active--)},{default:l(()=>[Q]),_:1})])]),_:1},8,["model","rules"])):b("",!0),s.active==3?(_(),x("div",R,[W,o("div",X,[e(S,{to:"/user/login"},{default:l(()=>[e(p,{class:"primary-linear",size:"small",type:"primary",round:""},{default:l(()=>[Y]),_:1})]),_:1})])])):b("",!0)])])]),o("div",null,[e(I,{type:"primary"},{default:l(()=>[Z,$]),_:1})])])}var se=N(T,[["render",ee],["__scopeId","data-v-58e6e026"]]);export{se as default};

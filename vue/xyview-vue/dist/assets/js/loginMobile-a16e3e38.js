import{q as F}from"./qrlogin-dc2ff1e0.js";import{a as T}from"../index-91ea30ae.js";const D={components:{qrlogin:F},data(){var n,o,l;return{isDemo:!1,qrloginShow:!1,qrloginType:(l=(o=(n=this.$store.state.app.siteInfo)==null?void 0:n.moduleConfig)==null?void 0:o.qrlogin)==null?void 0:l.type,verifyData:"",form:{rememberLogin:!1,loading:!1,countryCode:"+86",moblie:"",verify:"",token:""},ruleLogin:{mobile:[{required:!0,message:"\u8BF7\u586B\u5199\u8D26\u53F7",trigger:"blur"}],verify:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",trigger:"blur"},{type:"string",min:6,message:"\u9A8C\u8BC1\u7801\u4E3A6\u4F4D",trigger:"blur"}]}}},created:function(){},methods:{qrsuccess(){this.$xyutil.switchTab({url:"/"})},onCountrySelect({name:n,iso2:o,dialCode:l}){this.form.countryCode="+"+l},getVerifyToken(n){this.form.token=n.token},handleSubmit:async function(){let n=this.form;this.verifyData&&(n._verify=this.verifyData),this.form.loading=!0;let o=this;setTimeout(function(){o.form.loading=!1},5e3);let l=await this.$util.request({url:"/v1/reg_mobile/user/login",data:n,method:"post"});if(l.code==200)this.$store.commit("user/setToken",l.data.token),this.$store.commit("user/setUserInfo",l.data.userInfo),this.$refs.sv.close(),this.$util.showToast({title:l.msg,icon:"success",duration:2e3}),this.verifyData="",this.$xyutil.switchTab({url:"/my"});else if(l.code==401003){this.$refs.sv.open(l.data.verifyList);return}else this.$util.showToast({title:l.msg,icon:"loading",duration:3e3});this.form.loading=!1}}},i=window.Vue.resolveComponent,s=window.Vue.createVNode,e=window.Vue.createElementVNode,r=window.Vue.withCtx,u=window.Vue.createTextVNode,I=window.Vue.withKeys,y=window.Vue.vShow,h=window.Vue.withDirectives,N=window.Vue.openBlock,E=window.Vue.createElementBlock,L=window.Vue.pushScopeId,U=window.Vue.popScopeId,d=n=>(L("data-v-ce599624"),n=n(),U(),n),B={id:"wrap",class:"wrap"},K={class:"main"},z=d(()=>e("div",{class:"main-banner hidden-md-and-up"},[e("h1",{class:"title m-t"}," \u8D26\u53F7\u4E2D\u5FC3 ")],-1)),M={class:"container main-content"},O=["src"],P=d(()=>e("div",{class:"title text-left"}," \u624B\u673A\u9A8C\u8BC1\u7801\u767B\u5F55 ",-1)),R={class:"actions flex m-b-sm"},j=d(()=>e("div",null,null,-1)),A=u("\u514D\u8D39\u6CE8\u518C>"),G={class:"flex flex-alignCenter"},H=u(" \u767B\u5F55 "),J={class:"actions flex m-t"},Q=u(" \u4F7F\u7528\u90AE\u7BB1\u5730\u5740\u6216\u624B\u673A\u53F7\u767B\u5F55 > "),W=u("\u8BB0\u4F4F\u5BC6\u7801"),X={class:"bottom flex space-between flex-alignCenter"},Y={class:"other-login"},Z=u(" \u5176\u4ED6\u767B\u5F55\u65B9\u5F0F "),$=d(()=>e("span",{class:"m-l-md m-r-md"},"|",-1)),ee=d(()=>e("a",null,[e("i",{class:"xyicon xyicon-wexin"})],-1)),oe=[ee],te=d(()=>e("span",{class:"item"},[e("a",null,[e("i",{class:"xyicon xyicon-qq"})])],-1)),se=u(" \u5FD8\u8BB0\u5BC6\u7801\uFF1F "),ne=d(()=>e("div",{class:"qrlogin-left"},[e("span",{class:"xyicon xyicon-privacy"}),u(" \u626B\u7801\u767B\u5F55\u66F4\u5B89\u5168 ")],-1)),ie={class:"qrlogin-modal"},le={class:"flex space-between m-b"},re=d(()=>e("div",{class:"ts-18"}," \u767B\u5F55 ",-1));function ce(n,o,l,de,t,a){const g=i("xy-header"),m=i("el-col"),_=i("router-link"),v=i("xy-country-select"),f=i("el-input"),p=i("el-form-item"),w=i("xy-send-verify"),x=i("el-button"),b=i("el-checkbox"),V=i("el-form"),q=i("qrlogin"),S=i("el-row"),k=i("xy-footer"),C=i("xy-safety-verify");return N(),E("div",B,[s(g),e("div",K,[z,e("div",M,[s(S,{type:"flex",justify:"space-between",align:"middle"},{default:r(()=>[s(m,{xs:1,sm:1,md:8,lg:10,class:"left-box hidden-sm-and-down"},{default:r(()=>[e("img",{src:n.$store.state.app.loginPic,width:"500"},null,8,O)]),_:1}),s(m,{xs:24,sm:{span:12,offset:6},md:{span:13,offset:0},lg:{span:9,offset:0},class:"login-box bg-white"},{default:r(()=>[P,s(V,{ref:"form",model:t.form,rules:t.ruleLogin},{default:r(()=>[e("div",R,[j,e("div",null,[s(_,{to:"/user/register"},{default:r(()=>[A]),_:1})])]),s(p,{prop:"mobile"},{default:r(()=>[s(f,{size:"large",type:"text",prefix:"ios-person-outline",modelValue:t.form.mobile,"onUpdate:modelValue":o[0]||(o[0]=c=>t.form.mobile=c),placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u53F7\u7801"},{prepend:r(()=>[s(v,{defaultCountry:"CN",enabledCountryCode:"",onOnSelect:a.onCountrySelect},null,8,["onOnSelect"])]),_:1},8,["modelValue"])]),_:1}),e("div",G,[s(p,{prop:"verify",class:"flex-1"},{default:r(()=>[s(f,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:t.form.verify,"onUpdate:modelValue":o[1]||(o[1]=c=>t.form.verify=c),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",onKeyup:I(a.handleSubmit,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),s(w,{class:"send-verity-button",onVerifysuccess:a.getVerifyToken,url:"/v1/sms/verify/send",type:"\u624B\u673A\u53F7",account:t.form.mobile,title:"\u7528\u6237\u767B\u5F55"},null,8,["onVerifysuccess","account"])]),s(x,{class:"full submit-btn",size:"large",loading:t.form.loading,type:"primary",onClick:a.handleSubmit},{default:r(()=>[H]),_:1},8,["loading","onClick"]),e("div",J,[e("div",null,[s(_,{to:"/user/login"},{default:r(()=>[Q]),_:1})]),e("div",null,[s(b,{modelValue:t.form.rememberLogin,"onUpdate:modelValue":o[2]||(o[2]=c=>t.form.rememberLogin=c)},{default:r(()=>[W]),_:1},8,["modelValue"])])])]),_:1},8,["model","rules"]),e("div",X,[e("div",Y,[Z,$,e("span",null,[e("span",{class:"item",onClick:o[3]||(o[3]=c=>{t.qrloginShow=!0})},oe),te])]),e("div",null,[s(_,{to:"/user/resetPassword"},{default:r(()=>[se]),_:1})])]),ne,h(e("div",{class:"qrlogin",onClick:o[4]||(o[4]=c=>{t.qrloginShow=!0})},null,512),[[y,!t.qrloginShow]]),h(e("div",ie,[e("div",le,[re,e("div",null,[e("span",{onClick:o[5]||(o[5]=c=>{t.qrloginShow=!1}),class:"cursor-pointer text-gray"},"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55")])]),s(q,{class:"text-center",qrloginShow:t.qrloginShow,type:t.qrloginType,onSuccess:a.qrsuccess},null,8,["qrloginShow","type","onSuccess"])],512),[[y,t.qrloginShow]])]),_:1})]),_:1})])]),s(k),s(C,{modelValue:t.verifyData,"onUpdate:modelValue":o[6]||(o[6]=c=>t.verifyData=c),onVerifyRequest:a.handleSubmit,ref:"sv"},null,8,["modelValue","onVerifyRequest"])])}var _e=T(D,[["render",ce],["__scopeId","data-v-ce599624"]]);export{_e as default};

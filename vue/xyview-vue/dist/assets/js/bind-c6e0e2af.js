import{_ as N,v as B}from"../index-726dc959.js";const E={mixins:[B],components:{},data(){return{active:1,verifyList:[],loading:!1,form:{countryCode:"+86",mobile:"",password:"",verify:"",token:"",email:"",emailVerify:"",emailToken:"",gauth:""},rule:{mobile:[{required:!0,message:"\u8BF7\u586B\u5199\u624B\u673A\u53F7",trigger:"blur"}],verify:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",trigger:"blur"}],token:[{required:!0,message:"\u8BF7\u53D1\u9001\u9A8C\u8BC1\u7801",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{async verifyPassword(){(await this.doVerifyPassword()).code=="200"&&this.active++},onCountrySelect({name:i,iso2:t,dialCode:v}){this.form.countryCode="+"+v},getVerifyToken(i){this.form.token=i.token},getEmailVerifyToken(){this.form.emailToken=res.token},async loadData(){let i=await this.$util.request({url:"/v1/reg_mobile/user/bind",method:"get"});i.code=="200"?this.verifyList=i.data.dataList:this.$util.showToast({title:i.msg,icon:"loading",duration:3e3})},async handleSubmit(){this.loading=!0;let i=this;setTimeout(function(){i.loading=!1},5e3);let t=await this.$util.request({url:"/v1/reg_mobile/user/bind",data:this.form,method:"post"});t.code=="200"?(this.$util.showToast({title:t.msg,icon:"success",duration:2e3}),this.active++):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1}}},a=window.Vue.createTextVNode,r=window.Vue.resolveComponent,l=window.Vue.withCtx,e=window.Vue.createVNode,s=window.Vue.createElementVNode,d=window.Vue.openBlock,f=window.Vue.createBlock,p=window.Vue.createCommentVNode,g=window.Vue.createElementBlock,I=window.Vue.pushScopeId,L=window.Vue.popScopeId,y=i=>(I("data-v-6051297b"),i=i(),L(),i),U={class:"box"},q={class:"p-t"},O=a("\u4E2A\u4EBA\u8BBE\u7F6E"),P=a("\u7ED1\u5B9A\u624B\u673A\u53F7"),A={class:"content p-t"},D={class:"step-tabs text-left"},M=y(()=>s("div",{class:"m-b-md ts-18 tw4"},"\u4E3A\u786E\u8BA4\u662F\u4F60\u672C\u4EBA\u64CD\u4F5C",-1)),j={class:"m-t-lg"},F=a(" \u4E0B\u4E00\u6B65 "),G=a("\u53D6\u6D88\u7ED1\u5B9A"),H={class:"flex"},J={class:"m-t-lg"},K=a(" \u786E\u5B9A "),Q=a("\u8FD4\u56DE\u4E0A\u4E00\u6B65"),R={key:2},W=y(()=>s("div",null,[s("i",{class:"xyicon xyicon-check3 ts-30 m-r-sm",style:{color:"#4AC711"}}),s("span",{class:"ts-20 tw4",style:{color:"#2A2B2E"}},"\u7ED1\u5B9A\u624B\u673A\u53F7\u6210\u529F\u3002")],-1)),X={class:"m-t-lg"},Y=a("\u91CD\u65B0\u767B\u5F55"),Z=y(()=>s("span",{slot:"title",class:"ts-14"},[s("i",{class:"xyicon xyicon-help-o m-r-xs text-primary"}),s("span",null,"\u6CA1\u6536\u5230\u77ED\u4FE1\u9A8C\u8BC1\u7801\uFF1F")],-1)),$=y(()=>s("div",{class:"lh-2 ts-12"},[a(" 1\u3001\u7F51\u7EDC\u901A\u8BAF\u5F02\u5E38\u53EF\u80FD\u4F1A\u9020\u6210\u77ED\u4FE1\u4E22\u5931\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6\u6216\u7A0D\u540E\u518D\u8BD5\u3002"),s("br"),a(" 2\u3001\u8BF7\u6838\u5B9E\u624B\u673A\u662F\u5426\u5DF2\u6B20\u8D39\u505C\u673A\uFF0C\u6216\u8005\u5C4F\u853D\u4E86\u7CFB\u7EDF\u77ED\u4FE1\u3002"),s("br"),a(" 3\u3001\u5982\u679C\u624B\u673A\u5DF2\u4E22\u5931\u6216\u505C\u7528\uFF0C \u8BF7\u9009\u62E9\u5176\u4ED6\u9A8C\u8BC1\u65B9\u5F0F \u3002"),s("br"),a(" 4\u3001\u60A8\u4E5F\u53EF\u4EE5\u5C1D\u8BD5\u5C06SIM\u5361\u79FB\u52A8\u5230\u53E6\u4E00\u90E8\u624B\u673A\uFF0C\u7136\u540E\u91CD\u8BD5\u3002"),s("br")],-1));function ee(i,t,v,te,o,m){const h=r("el-breadcrumb-item"),k=r("el-breadcrumb"),b=r("el-step"),C=r("el-steps"),c=r("el-input"),u=r("el-form-item"),_=r("el-button"),w=r("el-link"),V=r("el-form"),S=r("xy-country-select"),x=r("xy-send-verify"),T=r("router-link"),z=r("el-alert");return d(),g("div",null,[s("div",U,[s("div",q,[e(k,{"separator-class":"el-icon-arrow-right",class:"p-l m-b"},{default:l(()=>[e(h,{to:{path:"/user/center"}},{default:l(()=>[O]),_:1}),e(h,null,{default:l(()=>[P]),_:1})]),_:1})]),s("div",A,[e(C,{active:o.active,simple:"","align-left":""},{default:l(()=>[e(b,{title:"\u9A8C\u8BC1\u767B\u5F55\u5BC6\u7801",description:""}),e(b,{title:"\u9A8C\u8BC1\u65B0\u624B\u673A",description:""}),e(b,{title:"\u7ED1\u5B9A\u6210\u529F",description:""})]),_:1},8,["active"]),s("div",D,[o.active==1?(d(),f(V,{key:0,ref:"formVerifyPassword","label-position":"left","label-width":"0px"},{default:l(()=>[M,e(u,{prop:"password"},{default:l(()=>[e(c,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:i.password,"onUpdate:modelValue":t[0]||(t[0]=n=>i.password=n),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),s("div",j,[e(_,{class:"submit-btn primary-linear m-r",size:"default",loading:o.loading,type:"primary",onClick:m.verifyPassword},{default:l(()=>[F]),_:1},8,["loading","onClick"]),e(w,{class:"back ts-14",onClick:t[1]||(t[1]=n=>i.$router.back())},{default:l(()=>[G]),_:1})])]),_:1},512)):p("",!0),o.active==2?(d(),f(V,{key:1,ref:"form","label-position":"left","label-width":"140px",model:o.form,rules:o.rule},{default:l(()=>[e(u,{prop:"mobile",label:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{default:l(()=>[e(c,{size:"default",type:"text",prefix:"ios-at-outline",modelValue:o.form.mobile,"onUpdate:modelValue":t[2]||(t[2]=n=>o.form.mobile=n),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{prepend:l(()=>[e(S,{defaultCountry:"CN",enabledCountryCode:"",onOnSelect:m.onCountrySelect},null,8,["onOnSelect"])]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"verify",label:"\u9A8C\u8BC1\u7801"},{default:l(()=>[s("div",H,[e(c,{class:"m-r",size:"default",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:o.form.verify,"onUpdate:modelValue":t[3]||(t[3]=n=>o.form.verify=n),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),e(_,{type:"primary",size:"default"},{default:l(()=>[e(x,{onVerifysuccess:m.getVerifyToken,url:"/v1/sms/verify/send",type:"\u624B\u673A\u53F7",account:o.form.mobile,title:"\u624B\u673A\u7ED1\u5B9A"},null,8,["onVerifysuccess","account"])]),_:1})])]),_:1}),o.verifyList.indexOf("email")>=0?(d(),f(u,{key:0,prop:"emailVerify"},{default:l(()=>[e(c,{size:"default",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:o.form.emailVerify,"onUpdate:modelValue":t[4]||(t[4]=n=>o.form.emailVerify=n),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u9A8C\u8BC1\u7801"},{default:l(()=>[e(x,{slot:"append",onVerifysuccess:m.getEmailVerifyToken,url:"/v1/email/verify/send",type:"\u90AE\u7BB1",noNeedAccount:!0,title:"\u624B\u673A\u7ED1\u5B9A"},null,8,["onVerifysuccess"])]),_:1},8,["modelValue"])]),_:1})):p("",!0),o.verifyList.indexOf("gauth")>=0?(d(),f(u,{key:1,prop:"gauth"},{default:l(()=>[e(c,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:o.form.gauth,"onUpdate:modelValue":t[5]||(t[5]=n=>o.form.gauth=n),placeholder:"\u8BF7\u8F93\u5165\u8C37\u6B4C\u9A8C\u8BC1\u7801"},null,8,["modelValue"])]),_:1})):p("",!0),o.verifyList.indexOf("password")>=0?(d(),f(u,{key:2,prop:"password"},{default:l(()=>[e(c,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:o.form.password,"onUpdate:modelValue":t[6]||(t[6]=n=>o.form.password=n),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"])]),_:1})):p("",!0),s("div",J,[e(_,{class:"submit-btn primary-linear m-r",size:"default",loading:o.loading,type:"primary",onClick:t[7]||(t[7]=n=>m.handleSubmit("form"))},{default:l(()=>[K]),_:1},8,["loading"]),e(w,{class:"back ts-14",onClick:t[8]||(t[8]=n=>o.active--)},{default:l(()=>[Q]),_:1})])]),_:1},8,["model","rules"])):p("",!0),o.active==3?(d(),g("div",R,[W,s("div",X,[e(T,{to:"/user/login"},{default:l(()=>[e(_,{class:"primary-linear",size:"small",type:"primary",round:""},{default:l(()=>[Y]),_:1})]),_:1})])])):p("",!0)])]),e(z,{class:"p-l-md p-b",type:"primary"},{default:l(()=>[Z,$]),_:1})])])}var le=N(E,[["render",ee],["__scopeId","data-v-6051297b"]]);export{le as default};

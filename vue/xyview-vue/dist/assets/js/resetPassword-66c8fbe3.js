import{_ as C}from"../index-726dc959.js";const T={components:{},data(){return{regTab:"mobile",loading:!1,form:{countryCode:"+86",mobile:"",newPassword:"",verify:"",token:""},rule:{mobile:[{required:!0,message:"\u8BF7\u586B\u5199\u624B\u673A\u53F7",trigger:"blur"}],newPassword:[{required:!0,message:"\u8BF7\u586B\u5199\u65B0\u5BC6\u7801",trigger:"blur"},{type:"string",min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4F4D",trigger:"blur"}],verify:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",trigger:"blur"}],token:[{required:!0,message:"\u8BF7\u53D1\u9001\u9A8C\u8BC1\u7801",trigger:"blur"}]}}},created:function(){this.$route.query.account&&(this.form.mobile=this.$route.query.account)},methods:{handleClick(){switch(this.regTab){case"mobile":this.$xyutil.navigateTo("/reg_mobile/user/resetPassword");break;case"email":this.$xyutil.navigateTo("/reg_email/user/resetPasswordSend");break}},onCountrySelect({name:l,iso2:o,dialCode:m}){this.form.countryCode="+"+m},getVerifyToken(l){this.form.token=l.token},async handleSubmit(){this.loading=!0;let l=this;setTimeout(function(){l.loading=!1},5e3);let o=await this.$util.request({url:"/v1/reg_mobile/user/restPassword",data:this.form,method:"put"});o.code=="200"?(this.$util.showToast({title:o.msg,icon:"success",duration:2e3}),this.$xyutil.switchTab({url:"/user/login"})):this.$util.showToast({title:o.msg,icon:"loading",duration:3e3}),this.loading=!1}}},s=window.Vue.resolveComponent,e=window.Vue.createVNode,i=window.Vue.createElementVNode,n=window.Vue.withCtx,c=window.Vue.openBlock,p=window.Vue.createBlock,g=window.Vue.createCommentVNode,N=window.Vue.createTextVNode,P=window.Vue.createElementBlock,q={id:"wrap",class:"wrap"},S={class:"main"},B=i("div",{class:"main-banner hidden-md-and-up"},[i("h1",{class:"title m-t"}," \u8D26\u53F7\u4E2D\u5FC3 ")],-1),z={class:"container main-content"},E=["src"],O=i("div",{class:"title"}," \u5FD8\u8BB0\u5BC6\u7801 ",-1),U=N(" \u7ACB\u5373\u91CD\u7F6E ");function A(l,o,m,F,t,a){const w=s("xy-header"),_=s("el-col"),f=s("el-tab-pane"),b=s("el-tabs"),y=s("xy-country-select"),d=s("el-input"),u=s("el-form-item"),h=s("xy-send-verify"),V=s("el-button"),x=s("el-form"),k=s("el-row"),v=s("xy-footer");return c(),P("div",q,[e(w),i("div",S,[B,i("div",z,[e(k,{type:"flex",justify:"space-between",align:"middle"},{default:n(()=>[e(_,{xs:1,sm:1,md:8,lg:10,class:"left-box hidden-sm-and-down"},{default:n(()=>[i("img",{src:l.$store.state.app.loginPic,width:"500"},null,8,E)]),_:1}),e(_,{xs:24,sm:{span:12,offset:6},md:{span:13,offset:0},lg:{span:9,offset:0},class:"login-box bg-white"},{default:n(()=>[O,e(b,{stretch:"",modelValue:t.regTab,"onUpdate:modelValue":o[0]||(o[0]=r=>t.regTab=r),onTabClick:a.handleClick},{default:n(()=>[l.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")>=0?(c(),p(f,{key:0,class:"p-t",label:"\u624B\u673A\u53F7\u7801",name:"mobile"})):g("",!0),l.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")>=0?(c(),p(f,{key:1,class:"p-t",label:"",name:"email"})):g("",!0)]),_:1},8,["modelValue","onTabClick"]),e(x,{ref:"form",model:t.form,rules:t.rule},{default:n(()=>[e(u,{prop:"mobile"},{default:n(()=>[e(d,{size:"large",type:"text",prefix:"ios-at-outline",modelValue:t.form.mobile,"onUpdate:modelValue":o[1]||(o[1]=r=>t.form.mobile=r),placeholder:"\u624B\u673A\u53F7"},{prepend:n(()=>[e(y,{defaultCountry:"CN",enabledCountryCode:"",onOnSelect:a.onCountrySelect},null,8,["onOnSelect"])]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"verify"},{default:n(()=>[e(d,{size:"large",type:"text",prefix:"ios-lock-outline",modelValue:t.form.verify,"onUpdate:modelValue":o[2]||(o[2]=r=>t.form.verify=r),placeholder:"\u9A8C\u8BC1\u7801"},{default:n(()=>[e(h,{slot:"append",onVerifysuccess:a.getVerifyToken,url:"/v1/sms/verify/send",type:"\u624B\u673A\u53F7",account:t.form.mobile,title:"\u91CD\u7F6E\u5BC6\u7801"},null,8,["onVerifysuccess","account"])]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:n(()=>[e(d,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:t.form.newPassword,"onUpdate:modelValue":o[3]||(o[3]=r=>t.form.newPassword=r),placeholder:"\u65B0\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(V,{class:"full submit-btn",size:"large",loading:t.loading,type:"primary",onClick:o[4]||(o[4]=r=>a.handleSubmit("form"))},{default:n(()=>[U]),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1})]),_:1})])]),e(v)])}var j=C(T,[["render",A]]);export{j as default};

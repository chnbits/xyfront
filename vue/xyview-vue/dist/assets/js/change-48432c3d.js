import{_ as z,v as N}from"../index-726dc959.js";const I={mixins:[N],components:{},data(){var i;return{active:1,verifyList:[],loading:!1,formVerfyMobile:{countryCode:(i=this.$store.state.user.userInfo.mobile)==null?void 0:i.identityGroup,mobile:this.$store.state.user.userInfo.mobile.identifier,verify:"",token:""},form:{countryCode:"+86",mobile:"",password:"",verify:"",token:"",email:"",emailVerify:"",emailToken:"",gauth:""},rule:{mobile:[{required:!0,message:"\u8BF7\u586B\u5199\u65B0\u624B\u673A\u53F7",trigger:"blur"}],verify:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",trigger:"blur"}],token:[{required:!0,message:"\u8BF7\u53D1\u9001\u9A8C\u8BC1\u7801",trigger:"blur"}]}}},created:function(){this.loadData()},methods:{async verifyPassword(){(await this.doVerifyPassword()).code=="200"&&this.active++},getVerifyTokenVerfyMobile(i){this.formVerfyMobile.token=i.token},onVerifyCountrySelect({name:i,iso2:t,dialCode:b}){this.formVerfyMobile.countryCode="+"+b},async verifyMobile(){this.loading=!0;let i=this;setTimeout(function(){i.loading=!1},5e3);let t=await this.$util.request({url:"/v1/reg_mobile/user/verify",data:this.formVerfyMobile,method:"post"});t.code=="200"?(this.$util.showToast({title:t.msg,icon:"success",duration:2e3}),this.active++):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1},onCountrySelect({name:i,iso2:t,dialCode:b}){this.form.countryCode="+"+b},getVerifyToken(i){this.form.token=i.token},getEmailVerifyToken(){this.form.emailToken=res.token},async loadData(){let i=await this.$util.request({url:"/v1/reg_mobile/user/change",method:"get"});i.code=="200"?this.verifyList=i.data.dataList:this.$util.showToast({title:i.msg,icon:"loading",duration:3e3})},async handleSubmit(){this.loading=!0;let i=this;setTimeout(function(){i.loading=!1},5e3);let t=await this.$util.request({url:"/v1/reg_mobile/user/change",data:this.form,method:"put"});t.code=="200"?(this.$util.showToast({title:t.msg,icon:"success",duration:2e3}),this.active++):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1}}},a=window.Vue.createTextVNode,n=window.Vue.resolveComponent,l=window.Vue.withCtx,e=window.Vue.createVNode,s=window.Vue.createElementVNode,m=window.Vue.openBlock,_=window.Vue.createBlock,f=window.Vue.createCommentVNode,k=window.Vue.createElementBlock,U=window.Vue.pushScopeId,B=window.Vue.popScopeId,y=i=>(U("data-v-ba645e82"),i=i(),B(),i),E={class:"box"},O={class:"p-t"},q=a("\u4E2A\u4EBA\u8BBE\u7F6E"),L=a("\u4FEE\u6539\u624B\u673A\u53F7"),P={class:"content p-t"},A={class:"step-tabs"},D=y(()=>s("div",{class:"m-b-md ts-18 tw4"},"\u8BF7\u8F93\u5165\u60A8\u7684\u767B\u5F55\u5BC6\u7801",-1)),G={class:"m-t-lg"},j=a(" \u4E0B\u4E00\u6B65 "),F=a("\u53D6\u6D88\u64CD\u4F5C"),H=y(()=>s("div",{class:"m-b-md ts-12 tw4",style:{color:"#2A2B2E"}},"\u4E3A\u786E\u8BA4\u60A8\u672C\u4EBA\u64CD\u4F5C\uFF0C\u9700\u8981\u60A8\u8FDB\u884C\u624B\u673A\u9A8C\u8BC1\u7801\u9A8C\u8BC1\u8EAB\u4EFD\u3002",-1)),J={class:"flex"},K=y(()=>s("div",{class:"text-gray m-l-md"}," \u624B\u673A\u53F7\u7801\u4E0D\u53EF\u7528\uFF1F\u8BF7\u8054\u7CFB\u5BA2\u670D\u3002 ",-1)),Q={class:"flex"},R={class:"m-t-lg"},W=a(" \u4E0B\u4E00\u6B65 "),X=a("\u8FD4\u56DE\u4E0A\u4E00\u6B65"),Y={class:"flex"},Z={class:"m-t-lg"},$=a(" \u786E\u5B9A "),ee=a("\u8FD4\u56DE\u4E0A\u4E00\u6B65"),te={key:3},oe=y(()=>s("div",null,[s("i",{class:"xyicon xyicon-check3 ts-30 m-r-sm",style:{color:"#4AC711"}}),s("span",{class:"ts-20 tw4",style:{color:"#2A2B2E"}},"\u6362\u7ED1\u624B\u673A\u53F7\u6210\u529F\u3002")],-1)),le={class:"m-t-lg"},ie=a("\u91CD\u65B0\u767B\u5F55"),se=y(()=>s("span",{slot:"title",class:"ts-14"},[s("i",{class:"xyicon xyicon-help-o m-r-xs text-primary"}),s("span",null,"\u6CA1\u6536\u5230\u77ED\u4FE1\u9A8C\u8BC1\u7801\uFF1F")],-1)),re=y(()=>s("div",{class:"lh-2 ts-12"},[a(" 1\u3001\u7F51\u7EDC\u901A\u8BAF\u5F02\u5E38\u53EF\u80FD\u4F1A\u9020\u6210\u77ED\u4FE1\u4E22\u5931\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6\u6216\u7A0D\u540E\u518D\u8BD5\u3002"),s("br"),a(" 2\u3001\u8BF7\u6838\u5B9E\u624B\u673A\u662F\u5426\u5DF2\u6B20\u8D39\u505C\u673A\uFF0C\u6216\u8005\u5C4F\u853D\u4E86\u7CFB\u7EDF\u77ED\u4FE1\u3002"),s("br"),a(" 3\u3001\u5982\u679C\u624B\u673A\u5DF2\u4E22\u5931\u6216\u505C\u7528\uFF0C \u8BF7\u9009\u62E9\u5176\u4ED6\u9A8C\u8BC1\u65B9\u5F0F \u3002"),s("br"),a(" 4\u3001\u60A8\u4E5F\u53EF\u4EE5\u5C1D\u8BD5\u5C06SIM\u5361\u79FB\u52A8\u5230\u53E6\u4E00\u90E8\u624B\u673A\uFF0C\u7136\u540E\u91CD\u8BD5\u3002"),s("br")],-1));function ne(i,t,b,ae,o,d){const w=n("el-breadcrumb-item"),C=n("el-breadcrumb"),v=n("el-step"),T=n("el-steps"),u=n("el-input"),c=n("el-form-item"),p=n("el-button"),h=n("el-link"),V=n("el-form"),x=n("xy-country-select"),g=n("xy-send-verify"),M=n("router-link"),S=n("el-alert");return m(),k("div",null,[s("div",E,[s("div",O,[e(C,{"separator-class":"el-icon-arrow-right",class:"p-l m-b"},{default:l(()=>[e(w,{to:{path:"/user/center"}},{default:l(()=>[q]),_:1}),e(w,null,{default:l(()=>[L]),_:1})]),_:1})]),s("div",P,[e(T,{active:o.active,simple:"","align-left":""},{default:l(()=>[e(v,{title:"\u9A8C\u8BC1\u767B\u5F55\u5BC6\u7801",description:""}),e(v,{title:"\u9A8C\u8BC1\u65E7\u624B\u673A\u53F7",description:""}),e(v,{title:"\u9A8C\u8BC1\u65B0\u624B\u673A\u53F7",description:""}),e(v,{title:"\u4FEE\u6539\u6210\u529F",description:""})]),_:1},8,["active"]),s("div",A,[o.active==1?(m(),_(V,{key:0,ref:"formVerifyPassword","label-position":"left","label-width":"0px"},{default:l(()=>[D,e(c,{prop:"password"},{default:l(()=>[e(u,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:i.password,"onUpdate:modelValue":t[0]||(t[0]=r=>i.password=r),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),s("div",G,[e(p,{class:"submit-btn primary-linear m-r",size:"default",loading:o.loading,type:"primary",onClick:d.verifyPassword},{default:l(()=>[j]),_:1},8,["loading","onClick"]),e(h,{class:"back ts-14",onClick:t[1]||(t[1]=r=>i.$router.back())},{default:l(()=>[F]),_:1})])]),_:1},512)):f("",!0),o.active==2?(m(),_(V,{key:1,ref:"formVerfyMobile","label-position":"left","label-width":"140px",model:o.formVerfyMobile},{default:l(()=>[H,e(c,{prop:"mobile",label:"\u8BF7\u8F93\u5165\u65E7\u624B\u673A\u53F7"},{default:l(()=>[s("div",J,[e(u,{size:"default",type:"text",prefix:"ios-at-outline",disabled:"",modelValue:o.formVerfyMobile.mobile,"onUpdate:modelValue":t[2]||(t[2]=r=>o.formVerfyMobile.mobile=r),placeholder:"\u8BF7\u8F93\u5165\u65E7\u624B\u673A\u53F7"},{prepend:l(()=>[e(x,{defaultCountry:"CN",enabledCountryCode:"",onOnSelect:d.onVerifyCountrySelect},null,8,["onOnSelect"])]),_:1},8,["modelValue"]),K])]),_:1}),e(c,{prop:"verify",label:"\u9A8C\u8BC1\u7801"},{default:l(()=>[s("div",Q,[e(u,{class:"m-r",size:"default",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:o.formVerfyMobile.verify,"onUpdate:modelValue":t[3]||(t[3]=r=>o.formVerfyMobile.verify=r),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),e(p,{type:"primary",size:"default"},{default:l(()=>[e(g,{onVerifysuccess:d.getVerifyTokenVerfyMobile,url:"/v1/sms/verify/send",type:"\u624B\u673A\u53F7",verifyUser:1,account:o.formVerfyMobile.mobile,title:"\u624B\u673A\u6362\u7ED1"},null,8,["onVerifysuccess","account"])]),_:1})])]),_:1}),s("div",R,[e(p,{class:"submit-btn primary-linear m-r",size:"default",loading:o.loading,type:"primary",onClick:t[4]||(t[4]=r=>d.verifyMobile())},{default:l(()=>[W]),_:1},8,["loading"]),e(h,{class:"back ts-14",onClick:t[5]||(t[5]=r=>o.active--)},{default:l(()=>[X]),_:1})])]),_:1},8,["model"])):f("",!0),o.active==3?(m(),_(V,{key:2,ref:"form","label-position":"left","label-width":"140px",model:o.form,rules:o.rule},{default:l(()=>[e(c,{prop:"mobile",label:"\u8BF7\u8F93\u5165\u65B0\u624B\u673A\u53F7"},{default:l(()=>[e(u,{size:"default",type:"text",prefix:"ios-at-outline",modelValue:o.form.mobile,"onUpdate:modelValue":t[6]||(t[6]=r=>o.form.mobile=r),placeholder:"\u8BF7\u8F93\u5165\u65B0\u624B\u673A\u53F7"},{prepend:l(()=>[e(x,{defaultCountry:"CN",enabledCountryCode:"",onOnSelect:d.onCountrySelect},null,8,["onOnSelect"])]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"verify",label:"\u9A8C\u8BC1\u7801"},{default:l(()=>[s("div",Y,[e(u,{class:"m-r",size:"default",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:o.form.verify,"onUpdate:modelValue":t[7]||(t[7]=r=>o.form.verify=r),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),e(p,{type:"primary",size:"default"},{default:l(()=>[e(g,{onVerifysuccess:d.getVerifyToken,url:"/v1/sms/verify/send",type:"\u624B\u673A\u53F7",account:"form.mobile",title:"\u624B\u673A\u6362\u7ED1"},null,8,["onVerifysuccess"])]),_:1})])]),_:1}),o.verifyList.indexOf("email")>=0?(m(),_(c,{key:0,prop:"emailVerify"},{default:l(()=>[e(u,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:o.form.emailVerify,"onUpdate:modelValue":t[8]||(t[8]=r=>o.form.emailVerify=r),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u9A8C\u8BC1\u7801"},{default:l(()=>[e(g,{slot:"append",onVerifysuccess:d.getEmailVerifyToken,url:"/v1/email/verify/send",type:"\u90AE\u7BB1",noNeedAccount:!0,title:"\u624B\u673A\u6362\u7ED1"},null,8,["onVerifysuccess"])]),_:1},8,["modelValue"])]),_:1})):f("",!0),o.verifyList.indexOf("gauth")>=0?(m(),_(c,{key:1,prop:"gauth"},{default:l(()=>[e(u,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:o.form.gauth,"onUpdate:modelValue":t[9]||(t[9]=r=>o.form.gauth=r),placeholder:"\u8BF7\u8F93\u5165\u8C37\u6B4C\u9A8C\u8BC1\u7801"},null,8,["modelValue"])]),_:1})):f("",!0),o.verifyList.indexOf("password")>=0?(m(),_(c,{key:2,prop:"password"},{default:l(()=>[e(u,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:o.form.password,"onUpdate:modelValue":t[10]||(t[10]=r=>o.form.password=r),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"])]),_:1})):f("",!0),s("div",Z,[e(p,{class:"submit-btn primary-linear m-r",size:"default",loading:o.loading,type:"primary",onClick:t[11]||(t[11]=r=>d.handleSubmit("form"))},{default:l(()=>[$]),_:1},8,["loading"]),e(h,{class:"back ts-14",onClick:t[12]||(t[12]=r=>o.active--)},{default:l(()=>[ee]),_:1})])]),_:1},8,["model","rules"])):f("",!0),o.active==4?(m(),k("div",te,[oe,s("div",le,[e(M,{to:"/user/login"},{default:l(()=>[e(p,{class:"primary-linear",size:"small",type:"primary",round:""},{default:l(()=>[ie]),_:1})]),_:1})])])):f("",!0)])]),e(S,{class:"p-l-md p-b",type:"primary"},{default:l(()=>[se,re]),_:1})])])}var ue=z(I,[["render",ne],["__scopeId","data-v-ba645e82"]]);export{ue as default};

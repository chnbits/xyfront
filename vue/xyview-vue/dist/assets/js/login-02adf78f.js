import{q as k}from"./qrlogin-dc2ff1e0.js";import{a as C}from"../index-91ea30ae.js";const D={components:{qrlogin:k},data(){var c,e,i;return{isDemo:!1,qrloginShow:!0,qrloginType:(i=(e=(c=this.$store.state.app.siteInfo)==null?void 0:c.moduleConfig)==null?void 0:e.qrlogin)==null?void 0:i.type,verifyData:"",form:{rememberLogin:!1,loading:!1,account:"",password:""},ruleLogin:{account:[{required:!0,message:"\u8BF7\u586B\u5199\u8D26\u53F7",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801",trigger:"blur"},{type:"string",min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4F4D",trigger:"blur"}]}}},created:function(){this.isDemo==!0&&(this.form.account="jry",this.form.password="Windows9")},methods:{qrsuccess(){this.$xyutil.switchTab({url:"/"})},handleSubmit:async function(){let c=this.form;this.verifyData&&(c._verify=this.verifyData),this.form.loading=!0;let e=this;setTimeout(function(){e.form.loading=!1},5e3);let i=await this.$util.request({url:"/v1/core/user/login",data:c,method:"post"});if(i.code==200)this.$store.commit("user/setToken",i.data.token),this.$store.commit("user/setUserInfo",i.data.userInfo),this.verifyData&&this.$refs.sv.close(),this.$util.showToast({title:i.msg,icon:"success",duration:2e3}),this.verifyData="",this.$xyutil.switchTab({url:"/"});else if(i.code==401003){this.$refs.sv.open(i.data.verifyList);return}else this.$util.showToast({title:i.msg,icon:"loading",duration:3e3});this.form.loading=!1}}},n=window.Vue.resolveComponent,t=window.Vue.createVNode,s=window.Vue.createElementVNode,l=window.Vue.withCtx,T=window.Vue.withKeys,d=window.Vue.createTextVNode,N=window.Vue.vShow,L=window.Vue.withDirectives,p=window.Vue.openBlock,h=window.Vue.createElementBlock,U=window.Vue.createCommentVNode,B={id:"wrap",class:"wrap"},E={class:"main"},K=s("div",{class:"main-banner hidden-md-and-up"},[s("h1",{class:"title m-t"}," \u8D26\u53F7\u4E2D\u5FC3 ")],-1),I={class:"container main-content"},j=["src"],z=s("div",{class:"title m-b-lg"}," \u767B\u5F55 ",-1),P={class:"agreement"},R=d("\u8BB0\u4F4F\u767B\u5F55"),W=d(" \u767B\u5F55 "),A={class:"actions flex"},F=d("\u5FD8\u8BB0\u5BC6\u7801"),G=d(" \u8FD8\u6CA1\u6709\u8D26\u53F7\uFF1F "),H=d("\u6CE8\u518C"),J=s("i",{class:"xyicon xyicon-qrcode"},null,-1),M=s("div",{class:"triangle-bottomleft"},null,-1),O=[J,M],Q={key:0,class:"qrlogin-modal"},X={class:"flex space-between m-b"},Y=s("div",{class:"ts-18"}," \u767B\u5F55 ",-1);function Z(c,e,i,$,o,a){const w=n("xy-header"),u=n("el-col"),m=n("el-input"),_=n("el-form-item"),g=n("el-checkbox"),y=n("el-button"),v=n("xy-captcha"),f=n("router-link"),V=n("el-form"),x=n("qrlogin"),b=n("el-row"),q=n("xy-footer"),S=n("xy-safety-verify");return p(),h("div",B,[t(w),s("div",E,[K,s("div",I,[t(b,{type:"flex",justify:"space-between",align:"middle"},{default:l(()=>[t(u,{md:10,lg:11,class:"left-box hidden-sm-and-down"},{default:l(()=>[s("img",{src:c.$store.state.app.loginPic,width:"500"},null,8,j)]),_:1}),t(u,{xs:24,sm:{span:12,offset:5},md:{span:12,offset:2},lg:{span:9,offset:0},class:"login-box bg-white"},{default:l(()=>[z,t(V,{ref:"form",size:"large",model:o.form,rules:o.ruleLogin},{default:l(()=>[t(_,{prop:"account"},{default:l(()=>[t(m,{type:"text",prefix:"ios-person-outline",modelValue:o.form.account,"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.account=r),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u3001\u90AE\u7BB1\u6216\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),t(_,{prop:"password"},{default:l(()=>[t(m,{type:"password",prefix:"ios-lock-outline",modelValue:o.form.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.password=r),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onKeyup:T(a.handleSubmit,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),s("div",P,[t(g,{modelValue:o.form.rememberLogin,"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.rememberLogin=r)},{default:l(()=>[R]),_:1},8,["modelValue"])]),t(v,{onSuccess:a.handleSubmit},{default:l(()=>[t(y,{id:"Captcha",class:"full submit-btn",size:"large",loading:o.form.loading,type:"primary",onClick:a.handleSubmit},{default:l(()=>[W]),_:1},8,["loading","onClick"])]),_:1},8,["onSuccess"]),s("div",A,[s("div",null,[t(f,{to:"/user/resetPassword"},{default:l(()=>[F]),_:1})]),s("div",null,[G,t(f,{to:"/user/register"},{default:l(()=>[H]),_:1})])])]),_:1},8,["model","rules"]),L(s("div",{class:"qrlogin",onClick:e[3]||(e[3]=r=>{o.qrloginShow=!0})},O,512),[[N,!o.qrloginShow]]),o.qrloginShow?(p(),h("div",Q,[s("div",X,[Y,s("div",null,[s("span",{onClick:e[4]||(e[4]=r=>{o.qrloginShow=!1}),class:"cursor-pointer text-gray"},"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55")])]),t(x,{class:"text-center m-t-lg",qrloginShow:o.qrloginShow,type:o.qrloginType,onSuccess:a.qrsuccess},null,8,["qrloginShow","type","onSuccess"])])):U("",!0)]),_:1})]),_:1})])]),t(q),t(S,{modelValue:o.verifyData,"onUpdate:modelValue":e[5]||(e[5]=r=>o.verifyData=r),onVerifyRequest:a.handleSubmit,ref:"sv"},null,8,["modelValue","onVerifyRequest"])])}var te=C(D,[["render",Z]]);export{te as default};

import{h as C}from"./hot_list-e9f9cf51.js";import{c as D}from"./lists-155236f6.js";import{_ as F}from"../index-726dc959.js";const N={components:{"comment-lists":D,"hot-list":C},data(){return{id:0,info:{title:"",content:"",actionStates:{}},showReplyForm:!1,loading:!1,dataListHot:[]}},mounted:function(){this.id=this.$route.params.id,this.loadData()},watch:{$route(s,n){this.id=this.$route.params.id,this.loadData()}},methods:{async actionClick(s,n,u){let c=await this.$util.request({url:"/v1/action/action/set",data:{dataId:s,dataModel:n,actionType:u},method:"post"});c.code==200?(this.$set(this.info.actionStates,u,c.data.currentValue),this.$util.showToast({title:c.msg,icon:"success",duration:2e3})):this.$util.showToast({title:c.msg,icon:"loading",duration:3e3})},async loadData(){this.loading=!0;let s=await this.$util.request({url:"/v1/forum/post/info/"+this.id,data:{},method:"get"});s.code==200?this.info=s.data.info:this.$util.showToast({title:s.msg,icon:"loading",duration:3e3}),this.loading=!1}}},r=window.Vue.toDisplayString,e=window.Vue.createElementVNode,l=window.Vue.resolveComponent,o=window.Vue.withCtx,i=window.Vue.createVNode,d=window.Vue.createTextVNode,h=window.Vue.openBlock,R=window.Vue.createBlock,T=window.Vue.createCommentVNode,b=window.Vue.resolveDirective,B=window.Vue.withDirectives,I=window.Vue.createElementBlock,S={class:"container"},L={class:"p-b ts-14 tw3 flex justify-between",style:{color:"#666"}},E={class:"flex"},H={class:"m-r"},M=d(" \u4FEE\u6539 "),q={class:"ts-16 force lh-2",style:{"min-height":"200px"}},z=["innerHTML"],j={class:"actions m-t flex flex-alignCenter"},P=d("\u6211\u6765\u56DE\u7B54"),U=e("i",{class:"xyicon xyicon-heart ts-14",style:{"margin-right":"3px"}},null,-1),A={class:"m-t-sm"};function G(s,n,u,c,t,m){const _=l("el-skeleton"),p=l("router-link"),f=l("el-button"),v=l("el-link"),g=l("el-card"),y=l("comment-lists"),w=l("el-col"),V=l("hot-list"),x=l("el-row"),k=b("viewer");return h(),I("div",null,[e("div",S,[i(x,{class:"flex flex-wrap",type:"flex",gutter:20},{default:o(()=>[i(w,{xs:24,lg:17},{default:o(()=>[i(g,{class:"box-card",shadow:"never"},{header:o(()=>[i(_,{rows:1,count:1,animated:"",loading:t.loading},{default:o(()=>[e("span",null,r(t.info.title),1)]),_:1},8,["loading"])]),default:o(()=>[e("div",L,[i(_,{rows:1,count:1,animated:"",loading:t.loading},{default:o(()=>[e("ul",E,[e("li",H," \u9605\u8BFB\uFF1A"+r(t.info.viewCount),1),e("li",null," \u53D1\u5E03\uFF1A"+r(s.$util.timeFormat(t.info.postTime)),1)]),e("div",null,[s.$store.state.user.userInfo.id==t.info.uid?(h(),R(p,{key:0,to:"/forum/post/edit/"+t.id},{default:o(()=>[M]),_:1},8,["to"])):T("",!0)])]),_:1},8,["loading"])]),e("div",q,[i(_,{rows:3,count:5,animated:"",loading:t.loading},{default:o(()=>[B(e("div",{innerHTML:t.info.content},null,8,z),[[k,{movable:!0}]])]),_:1},8,["loading"])]),e("div",j,[i(f,{type:"primary",size:"default",onClick:n[0]||(n[0]=a=>m.actionClick(t.id,"icms_post",5))},{default:o(()=>[d(r(t.info.actionStates[5]?"\u5DF2\u5173\u6CE8":"\u5173\u6CE8\u95EE\u9898"),1)]),_:1}),i(f,{type:"default",size:"default",plain:"",class:"m-r-md",onClick:n[1]||(n[1]=a=>{t.showReplyForm=!0})},{default:o(()=>[P]),_:1}),e("div",{onClick:n[2]||(n[2]=a=>m.actionClick(t.id,"icms_post",2))},[U,i(v,null,{default:o(()=>[d(r(t.info.actionStates[2]?"\u5DF2":"")+"\u6536\u85CF ",1)]),_:1})])])]),_:1}),e("div",A,[i(y,{title:"\u56DE\u590D",urlPrefix:"/forum",showReplyForm:t.showReplyForm,"onUpdate:showReplyForm":n[3]||(n[3]=a=>t.showReplyForm=a),dataId:t.id,dataModel:"forum_post"},null,8,["showReplyForm","dataId"])])]),_:1}),i(w,{xs:24,lg:7},{default:o(()=>[i(V,{cateId:t.info.cateId},null,8,["cateId"])]),_:1})]),_:1})])])}var Q=F(N,[["render",G]]);export{Q as default};

import{_ as b}from"../index-726dc959.js";const x={data(){return{loading:!1,tabs:[{value:0,title:"\u5168\u90E8"},{value:2,title:"\u7CFB\u7EDF\u6D88\u606F"},{value:3,title:"\u516C\u544A\u6D88\u606F"}],dataList:[],dataPage:{total:0,page:0,limit:10}}},created:function(){this.loadData()},watch:{},methods:{async loadData(){this.loading=!0;let t=await this.$util.request({url:"/v1/msg/msg/my",data:{page:this.dataPage.page,limit:this.dataPage.limit},method:"get"});t.code==200?(this.dataList=t.data.dataList,this.dataPage=t.data.dataPage):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3}),this.loading=!1},handleSizeChange(t){this.dataPage.limit=t,this.loadData()},handleCurrentChange(t){this.dataPage.page=t,this.loadData()},getSelectedIds(){const t=this.$refs.mytable.selection;if(t.length==0)return this.$util.showToast({title:"\u8BF7\u9009\u62E9\u6D88\u606F",icon:"loading",duration:3e3}),!1;let e="";return t.forEach(p=>{e=e+","+p.id}),e},async readBatch(){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u5220\u9664\u9009\u4E2D\u6D88\u606F, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{let t=this.getSelectedIds();if(!t)return!1;let e=await this.$util.request({url:"/v1/msg/msg/readBatch",data:{ids:t},method:"put"});e.code==200?(this.loadData(),this.$util.showToast({title:e.msg,icon:"loading",duration:2e3})):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}).catch(()=>{})},async deleteBatch(){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u5220\u9664\u9009\u4E2D\u6D88\u606F, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{let t=this.getSelectedIds();if(!t)return!1;let e=await this.$util.request({url:"/v1/msg/msg/deleteBatch",data:{ids:t},method:"delete"});e.code==200?(this.loadData(),this.$util.showToast({title:e.msg,icon:"loading",duration:2e3})):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3})}).catch(()=>{})},async readAll(){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u6240\u6709\u6D88\u606F\u6807\u8BB0\u4E3A\u5DF2\u8BFB, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{let t=await this.$util.request({url:"/v1/msg/msg/readAll",method:"put"});t.code==200?(this.loadData(),this.$util.showToast({title:t.msg,icon:"loading",duration:2e3})):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3})}).catch(()=>{})},async deleteAll(){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u5220\u9664\u6240\u6709\u6D88\u606F\u8BB0\u5F55, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{let t=await this.$util.request({url:"/v1/msg/msg/deleteAll",method:"delete"});t.code==200?(this.loadData(),this.$util.showToast({title:t.msg,icon:"loading",duration:2e3})):this.$util.showToast({title:t.msg,icon:"loading",duration:3e3})}).catch(()=>{})}}},c=window.Vue.createTextVNode,d=window.Vue.resolveComponent,s=window.Vue.withCtx,i=window.Vue.createVNode,l=window.Vue.createElementVNode,h=window.Vue.openBlock,g=window.Vue.createElementBlock,m=window.Vue.createCommentVNode,_=window.Vue.toDisplayString,v=window.Vue.pushScopeId,C=window.Vue.popScopeId,k=t=>(v("data-v-37deee50"),t=t(),C(),t),T={class:"msg-msg-lists bg-white p-t p-l"},V={class:"action-list m-b"},B=c("\u6279\u91CF\u5DF2\u8BFB"),z=c("\u6279\u91CF\u5220\u9664"),S=c("\u5168\u90E8\u5DF2\u8BFB"),$=c("\u5168\u90E8\u5220\u9664"),P={class:"content-tabl p-b"},D=k(()=>l("div",{class:"lh-1 p-t-lg p-b-lg"},[l("div",{class:"ts-16 m-t-sm",style:{color:"#A5A5A5"}},[l("span",null,"\u6682\u65E0\u6D88\u606F")])],-1)),A={key:0},I={key:1},N={key:0,class:"newRed"},q=["onClick"],E={class:"flex flex-start"};function L(t,e,p,R,o,n){const r=d("el-button"),w=d("el-skeleton"),u=d("el-table-column"),f=d("el-table"),y=d("el-pagination");return h(),g("div",T,[l("div",V,[i(r,{class:"m-b-sm",text:"",bg:"",type:"default",size:"default",onClick:n.readBatch},{default:s(()=>[B]),_:1},8,["onClick"]),i(r,{class:"m-b-sm",text:"",bg:"",type:"default",size:"default",onClick:n.deleteBatch},{default:s(()=>[z]),_:1},8,["onClick"]),i(r,{class:"m-b-sm",text:"",bg:"",type:"danger",size:"default",onClick:n.readAll},{default:s(()=>[S]),_:1},8,["onClick"]),i(r,{class:"m-b-sm",text:"",bg:"",type:"danger",size:"default",onClick:n.deleteAll},{default:s(()=>[$]),_:1},8,["onClick"])]),l("div",P,[i(f,{ref:"mytable",data:o.dataList,"tooltip-effect":"dark"},{empty:s(()=>[i(w,{class:"text-left",loading:o.loading,rows:4,animated:""},{default:s(()=>[D]),_:1},8,["loading"])]),default:s(()=>[i(u,{type:"selection",width:"55"}),i(u,{prop:"cate",width:"100px",label:"\u7C7B\u522B","show-overflow-tooltip":""},{default:s(a=>[a.row.cate==2?(h(),g("span",A,"\u7CFB\u7EDF\u6D88\u606F")):m("",!0),a.row.cate==3?(h(),g("span",I,"\u516C\u544A\u6D88\u606F")):m("",!0)]),_:1}),i(u,{label:"\u6807\u9898",minWidth:"250px"},{default:s(a=>[a.row.isRead==0?(h(),g("span",N,"\xB7")):m("",!0),l("span",{class:"cursor-pointer",onClick:U=>t.$router.push({path:"/msg/msg/info/"+a.row.id})},_(a.row.title),9,q)]),_:1}),i(u,{prop:"createTime",label:"\u53D1\u9001\u65F6\u95F4",width:"200px"},{default:s(a=>[c(_(t.$util.timeFormat(a.row.createTime)),1)]),_:1})]),_:1},8,["data"]),l("div",E,[i(y,{class:"m-t-md",size:"default",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange,"current-page":o.dataPage.page,"onUpdate:current-page":e[0]||(e[0]=a=>o.dataPage.page=a),background:"","page-sizes":[10,20,30,50],"page-size":o.dataPage.limit,"onUpdate:page-size":e[1]||(e[1]=a=>o.dataPage.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:o.dataPage.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])}var F=b(x,[["render",L],["__scopeId","data-v-37deee50"]]);export{F as default};

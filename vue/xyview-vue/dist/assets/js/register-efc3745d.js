import{a as w}from"../index-91ea30ae.js";const y={data(){return{loading:!1,inviteSuffix:"",form:{email:"",password:"",rePassword:"",verify:"",token:"",inviteCode:"",agreement:!1},rule:{email:[{required:!0,message:"\u8BF7\u586B\u5199\u90AE\u7BB1",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801",trigger:"blur"},{type:"string",min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4F4D",trigger:"blur"}],verify:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",trigger:"blur"}],token:[{required:!0,message:"\u8BF7\u53D1\u9001\u9A8C\u8BC1\u7801",trigger:"blur"}]}}},created:function(){switch(this.$store.state.app.siteInfo.regInvite){case 1:this.inviteSuffix="\uFF08\u53EF\u9009\uFF09";break;case 2:this.inviteSuffix="\uFF08\u5FC5\u586B\uFF09";break}this.form.inviteCode=this.$store.state.app.inviteCode},methods:{getVerifyToken(r){this.form.token=r.token},async handleSubmit(){if(!this.form.agreement)return this.$util.showToast({title:"\u4F60\u9700\u8981\u540C\u610F\u7528\u6237\u534F\u8BAE",icon:"loading",duration:3e3}),!1;this.$store.commit("app/setData",{key:"inviteCode",value:this.form.inviteCode}),this.loading=!0;let r=this;setTimeout(function(){r.loading=!1},5e3);let e=await this.$util.request({url:"/v1/reg_email/user/register",data:this.form,method:"post"});e.code=="200"?(this.$util.showToast({title:e.msg,icon:"success",duration:2e3}),this.$store.commit("user/setToken",e.data.token),this.$store.commit("user/setUserInfo",e.data.userInfo),this.$emit("reg-success")):this.$util.showToast({title:e.msg,icon:"loading",duration:3e3}),this.loading=!1}}},n=window.Vue.resolveComponent,o=window.Vue.createVNode,s=window.Vue.withCtx,f=window.Vue.openBlock,c=window.Vue.createBlock,k=window.Vue.createCommentVNode,a=window.Vue.createTextVNode,p=window.Vue.toDisplayString,l=window.Vue.createElementVNode,b={class:"agreement"},x=a("\u6211\u5DF2\u9605\u8BFB\u5E76\u540C\u610F"),C=["href"],T=a(" \u548C "),I=["href"],N=a(" \u6CE8\u518C "),S={class:"actions flex"},U=l("div",null,null,-1),q=a(" \u5DF2\u6709\u8D26\u53F7\uFF1F "),z=a("\u767B\u5F55");function D(r,e,B,E,t,d){const u=n("el-input"),m=n("el-form-item"),_=n("xy-send-verify"),g=n("el-checkbox"),h=n("el-button"),V=n("router-link"),v=n("el-form");return f(),c(v,{ref:"form",model:t.form,rules:t.rule},{default:s(()=>[o(m,{prop:"email"},{default:s(()=>[o(u,{size:"large",type:"text",prefix:"ios-at-outline",modelValue:t.form.email,"onUpdate:modelValue":e[0]||(e[0]=i=>t.form.email=i),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),o(m,{prop:"verify"},{default:s(()=>[o(u,{size:"large",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:t.form.verify,"onUpdate:modelValue":e[1]||(e[1]=i=>t.form.verify=i),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},{default:s(()=>[o(_,{slot:"append",onVerifysuccess:d.getVerifyToken,url:"/v1/email/verify/send",type:"\u90AE\u7BB1",account:t.form.email,title:"\u7528\u6237\u6CE8\u518C"},null,8,["onVerifysuccess","account"])]),_:1},8,["modelValue"])]),_:1}),o(m,{prop:"password"},{default:s(()=>[o(u,{size:"large",type:"password",prefix:"ios-lock-outline",modelValue:t.form.password,"onUpdate:modelValue":e[2]||(e[2]=i=>t.form.password=i),placeholder:"\u8BF7\u8F93\u51656-18\u4F4D\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),r.$store.state.app.siteInfo.regInvite>0?(f(),c(m,{key:0,prop:"inviteCode"},{default:s(()=>[o(u,{size:"large",type:"text",prefix:"ios-lock-outline",modelValue:t.form.inviteCode,"onUpdate:modelValue":e[3]||(e[3]=i=>t.form.inviteCode=i),placeholder:"\u8BF7\u8F93\u5165\u9080\u8BF7\u7801"+t.inviteSuffix},null,8,["modelValue","placeholder"])]),_:1})):k("",!0),l("div",b,[o(g,{modelValue:t.form.agreement,"onUpdate:modelValue":e[4]||(e[4]=i=>t.form.agreement=i)},{default:s(()=>[x]),_:1},8,["modelValue"]),l("a",{href:r.$util.baseDomain()+"/user_agreement/agreement/info.html?name=agreement",target:"_blacnk"}," \u300A"+p(r.$store.state.app.siteInfo.title)+"\u7528\u6237\u534F\u8BAE\u300B ",9,C),T,l("a",{href:r.$util.baseDomain()+"/user_agreement/agreement/info.html?name=privacy",target:"_blacnk"}," \u300A"+p(r.$store.state.app.siteInfo.title)+"\u9690\u79C1\u653F\u7B56\u300B ",9,I)]),o(h,{class:"full submit-btn",size:"large",loading:t.loading,type:"primary",onClick:e[5]||(e[5]=i=>d.handleSubmit("form"))},{default:s(()=>[N]),_:1},8,["loading"]),l("div",S,[U,l("div",null,[q,o(V,{to:"/user/login"},{default:s(()=>[z]),_:1})])])]),_:1},8,["model","rules"])}var P=w(y,[["render",D]]);export{P as default};

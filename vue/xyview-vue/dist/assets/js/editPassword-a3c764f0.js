import{a as S}from"../index-91ea30ae.js";const T={data(){var i;return{active:1,loading:!1,form:{email:(i=this.$store.state.user.userInfo.email)==null?void 0:i.identifier,verify:"",token:"",newPassword:"",rePassword:""},rule:{email:[{required:!0,message:"\u8BF7\u586B\u5199\u90AE\u7BB1",trigger:"blur"}],newPassword:[{required:!0,message:"\u8BF7\u586B\u5199\u65B0\u5BC6\u7801",trigger:"blur"},{type:"string",min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4F4D",trigger:"blur"}],rePassword:[{required:!0,message:"\u8BF7\u586B\u5199\u65B0\u5BC6\u7801",trigger:"blur"},{type:"string",min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4F4D",trigger:"blur"}],verify:[{required:!0,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801",trigger:"blur"}],token:[{required:!0,message:"\u8BF7\u53D1\u9001\u9A8C\u8BC1\u7801",trigger:"blur"}]}}},created:function(){var i;(i=this.$store.state.user.userInfo.email)!=null&&i.identifier||this.$util.showToast({title:"\u672A\u7ED1\u5B9A\u90AE\u7BB1",icon:"loading",duration:3e3})},methods:{goStep2(){if(!this.form.email||!this.form.verify||!this.form.token){this.$util.showToast({title:"\u9A8C\u8BC1\u5931\u8D25",icon:"loading",duration:3e3});return}this.active++},getVerifyToken(i){this.form.token=i},async handleSubmit(){this.loading=!0;let i=this;setTimeout(function(){i.loading=!1},5e3);let s=await this.$util.request({url:"/v1/reg_email/user/restPassword",data:this.form,method:"post"});s.code=="200"?(this.$util.showToast({title:s.msg,icon:"success",duration:2e3}),this.active++):this.$util.showToast({title:s.msg,icon:"loading",duration:3e3}),this.loading=!1}}},a=window.Vue.createTextVNode,r=window.Vue.resolveComponent,l=window.Vue.withCtx,e=window.Vue.createVNode,o=window.Vue.createElementVNode,p=window.Vue.openBlock,v=window.Vue.createBlock,w=window.Vue.createCommentVNode,y=window.Vue.createElementBlock,z=window.Vue.pushScopeId,B=window.Vue.popScopeId,d=i=>(z("data-v-2a82f536"),i=i(),B(),i),I={class:"box"},N={class:"p-t"},q=a("\u4E2A\u4EBA\u8BBE\u7F6E"),E=a("\u4FEE\u6539\u5BC6\u7801"),U={class:"content p-t-md"},A={class:"step-tabs"},j=d(()=>o("div",{class:"m-b-md ts-12 tw4",style:{color:"#2A2B2E"}},"\u4E3A\u786E\u8BA4\u60A8\u672C\u4EBA\u64CD\u4F5C\uFF0C\u9700\u8981\u60A8\u8FDB\u884C\u90AE\u7BB1\u9A8C\u8BC1\u7801\u9A8C\u8BC1\u8EAB\u4EFD\u3002",-1)),D={class:"flex"},F={class:"m-t-lg"},G=a(" \u4E0B\u4E00\u6B65 "),H=a("\u53D6\u6D88\u64CD\u4F5C"),J=d(()=>o("div",{class:"m-b-md ts-18 tw4"},"\u8BF7\u8F93\u5165\u60A8\u7684\u767B\u5F55\u5BC6\u7801",-1)),K={class:"m-t-lg"},L=a(" \u4E0B\u4E00\u6B65 "),M=a("\u8FD4\u56DE\u4E0A\u4E00\u6B65"),O={key:2},Q=d(()=>o("div",null,[o("i",{class:"xyicon xyicon-check3 ts-30 m-r-sm",style:{color:"#4AC711"}}),o("span",{class:"ts-20 tw4",style:{color:"#2A2B2E"}},"\u4FEE\u6539\u767B\u5F55\u5BC6\u7801\u6210\u529F\uFF0C\u8BF7\u60A8\u7262\u8BB0\u5BC6\u7801\u3002")],-1)),R={class:"m-t-lg"},W=a("\u91CD\u65B0\u767B\u5F55"),X=d(()=>o("span",{slot:"title",class:"ts-14"},[o("i",{class:"xyicon xyicon-help-o m-r-xs text-primary"}),o("span",null,"\u6536\u4E0D\u5230\u9A8C\u8BC1\u7801\uFF1F")],-1)),Y=d(()=>o("div",{class:"lh-2 ts-12 p-l"},[a(" 1\u3001\u7F51\u7EDC\u901A\u8BAF\u5F02\u5E38\u53EF\u80FD\u4F1A\u9020\u6210\u90AE\u7BB1\u4E22\u5931\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6\u6216\u7A0D\u540E\u518D\u8BD5\u3002"),o("br"),a(" 2\u3001\u8BF7\u6838\u5B9E\u90AE\u7BB1\u90AE\u4EF6\u662F\u5426\u88AB\u62E6\u622A\uFF0C\u68C0\u67E5\u5783\u573E\u7BB1\u3002"),o("br"),a(" 3\u3001\u5982\u679C\u90AE\u7BB1\u5DF2\u7ECF\u505C\u7528\uFF0C \u8BF7\u9009\u62E9\u5176\u4ED6\u9A8C\u8BC1\u65B9\u5F0F \u3002"),o("br")],-1));function Z(i,s,$,ee,t,_){const b=r("el-breadcrumb-item"),x=r("el-breadcrumb"),f=r("el-step"),V=r("el-steps"),c=r("el-input"),u=r("el-form-item"),k=r("xy-send-verify"),m=r("el-button"),h=r("el-link"),g=r("el-form"),P=r("router-link"),C=r("el-alert");return p(),y("div",null,[o("div",I,[o("div",N,[e(x,{"separator-class":"el-icon-arrow-right",class:"p-l m-b"},{default:l(()=>[e(b,{to:{path:"/user/center"}},{default:l(()=>[q]),_:1}),e(b,null,{default:l(()=>[E]),_:1})]),_:1})]),o("div",U,[e(V,{active:t.active,simple:"","align-left":""},{default:l(()=>[e(f,{title:"\u9A8C\u8BC1\u90AE\u7BB1",description:""}),e(f,{title:"\u8F93\u5165\u65B0\u5BC6\u7801",description:""}),e(f,{title:"\u4FEE\u6539\u6210\u529F",description:""})]),_:1},8,["active"]),o("div",A,[t.active==1?(p(),v(g,{key:0,ref:"form","label-position":"left","label-width":"140px",model:t.form,rules:t.rule},{default:l(()=>[j,e(u,{prop:"email",label:"\u90AE\u7BB1"},{default:l(()=>[e(c,{disabled:"",size:"default",type:"text",prefix:"ios-at-outline",modelValue:t.form.email,"onUpdate:modelValue":s[0]||(s[0]=n=>t.form.email=n),placeholder:t.form.mobile?"\u90AE\u7BB1":"\u672A\u7ED1\u5B9A\u90AE\u7BB1"},null,8,["modelValue","placeholder"])]),_:1}),e(u,{prop:"verify",label:"\u9A8C\u8BC1\u7801"},{default:l(()=>[o("div",D,[e(c,{class:"m-r",size:"default",autocomplete:"off",type:"text",prefix:"ios-lock-outline",modelValue:t.form.verify,"onUpdate:modelValue":s[1]||(s[1]=n=>t.form.verify=n),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),e(m,{type:"primary",size:"default"},{default:l(()=>[e(k,{onVerifysuccess:_.getVerifyToken,url:"/v1/email/verify/send",type:"\u90AE\u7BB1",account:t.form.email,title:"\u4FEE\u6539\u5BC6\u7801"},null,8,["onVerifysuccess","account"])]),_:1})])]),_:1}),o("div",F,[e(m,{class:"submit-btn primary-linear m-r",size:"default",loading:t.loading,type:"primary",onClick:_.goStep2},{default:l(()=>[G]),_:1},8,["loading","onClick"]),e(h,{class:"back ts-14",onClick:s[2]||(s[2]=n=>i.$router.back())},{default:l(()=>[H]),_:1})])]),_:1},8,["model","rules"])):w("",!0),t.active==2?(p(),v(g,{key:1,ref:"formVerifyPassword","label-position":"left","label-width":"140px",model:t.form,rules:t.rule},{default:l(()=>[J,e(u,{prop:"newPassword",label:"\u8F93\u5165\u65B0\u7684\u5BC6\u7801"},{default:l(()=>[e(c,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:t.form.newPassword,"onUpdate:modelValue":s[3]||(s[3]=n=>t.form.newPassword=n),placeholder:"\u8F93\u5165\u65B0\u7684\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(u,{prop:"rePassword",label:"\u518D\u6B21\u8F93\u5165"},{default:l(()=>[e(c,{size:"default",type:"password",prefix:"ios-lock-outline",modelValue:t.form.rePassword,"onUpdate:modelValue":s[4]||(s[4]=n=>t.form.rePassword=n),placeholder:"\u518D\u6B21\u8F93\u5165"},null,8,["modelValue"])]),_:1}),o("div",K,[e(m,{class:"submit-btn primary-linear m-r",size:"default",loading:t.loading,type:"primary",onClick:s[5]||(s[5]=n=>_.handleSubmit("form"))},{default:l(()=>[L]),_:1},8,["loading"]),e(h,{class:"back ts-14",onClick:s[6]||(s[6]=n=>t.active--)},{default:l(()=>[M]),_:1})])]),_:1},8,["model","rules"])):w("",!0),t.active==3?(p(),y("div",O,[Q,o("div",R,[e(P,{to:"/user/login"},{default:l(()=>[e(m,{class:"primary-linear",size:"small",type:"primary",round:""},{default:l(()=>[W]),_:1})]),_:1})])])):w("",!0)])])]),o("div",null,[e(C,{type:"primary"},{default:l(()=>[X,Y]),_:1})])])}var oe=S(T,[["render",Z],["__scopeId","data-v-2a82f536"]]);export{oe as default};

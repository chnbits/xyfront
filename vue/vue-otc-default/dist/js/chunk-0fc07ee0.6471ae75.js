(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0fc07ee0"],{"114b":function(t,e,a){"use strict";a.r(e),a("c740"),a("4160"),a("caad"),a("c975"),a("a15b"),a("b0c0"),a("d3b7"),a("ac1f"),a("2532"),a("5319"),a("1276"),a("159b");var i=a("b85c"),r=a("5530"),l=(a("96cf"),a("1da1")),n=a("4328"),s=a.n(n),o={name:"XyBuilderList",props:{api:"",header:{type:Object,default:function(){return{cloudId:0,eid:0}}},show:!1,predata:"",value:0,config:{type:Object,default:function(){return{}}},pitem:{type:Object,default:function(){return{}}},showActions:!1,showDev:!1},components:{},data:function(){return{ready:!1,CDN_URL:Object({NODE_ENV:"production",VUE_APP_BASE_DOMAIN:"http://t27.test.com",VUE_APP_BASE_URL:"https://otc.demo.jiangruyi.com/api/",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_I18N_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/vue/vue-otc-default/dist/"}).VUE_APP_CDN_URL,hasCheckAll:!1,currentSelected:-1,currentSelecteds:[],loading:!1,page:1,limit:10,filterValues:{},listData:{alertList:{},dataList:[],dataListParams:[],topButtonList:[],rightButtonList:[],columns:[],dataPage:{total:0,limit:10,page:1},filterItems:[],filterValues:[],filterExtra:{},countList:[],config:{listExpandAll:!1,modalDefaultWidth:800}}}},watch:{show:function(t){1==t&&this.loadData("",!0)}},beforeCreate:function(){this.$options.components.XyBuilderTab=function(){return a.e("chunk-2d0b32fa").then(a.bind(null,"26ff"))},this.$options.components.XyBuilderInfo=function(){return a.e("chunk-1f320f4c").then(a.bind(null,"5d93"))},this.$options.components.XyBuilderForm=function(){return Promise.resolve().then(a.bind(null,"4d99"))},this.$options.components.XyBuilderStack=function(){return a.e("chunk-8c33654a").then(a.bind(null,"396d"))},this.$options.components.XyBuilderRemote=function(){return Promise.resolve().then(a.bind(null,"6d59"))}},created:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.predata?t.readyProcess(t.predata):t.loadData(),t.limit=t.listData.dataPage.limit;case 2:case"end":return e.stop()}}),e)})))()},methods:{getArrayIndex:function(t,e){return t.findIndex((function(t){return t.value===e}))},readyProcess:function(t){var e,a,i,l,n=this,s=this.util.builderutil.readyList({value:this.value,listData:t,filterValues:this.filterValues},this.$store.state.app.apiInfo);this.listData=Object(r.a)({},s.listData),this.filterValues=Object(r.a)({},s.filterValues),this.ready=!0,"checkbox"==(null===(e=this.listData)||void 0===e||null===(a=e.dataListParams)||void 0===a?void 0:a.selectType)?this.currentSelecteds=this.value:"radio"==(null===(i=this.listData)||void 0===i||null===(l=i.dataListParams)||void 0===l?void 0:l.selectType)&&(this.currentSelected=this.value),this.$nextTick((function(){var t,e,a,i;"checkbox"==(null===(t=n.listData)||void 0===t||null===(e=t.dataListParams)||void 0===e?void 0:e.selectType)?n.checkRows(n.listData.dataList):"radio"==(null===(a=n.listData)||void 0===a||null===(i=a.dataListParams)||void 0===i?void 0:i.selectType)&&n.listData.dataList.forEach((function(t){n.currentSelected==t.id&&n.$refs.dataTable.toggleRowSelection(t,!0)}))}))},getVal:function(t,e){if(-1==e.name.indexOf("."))return t.row[e.name];var a=e.name.split(".");switch(a.length){case 2:return t.row[a[0]][a[1]];case 3:return t.row[a[0]][a[1]][a[2]];case 4:return t.row[a[0]][a[1]][a[2]][a[3]]}},showByCondition:function(t,e){if(!t.pageData.hasOwnProperty("condition"))return!0;var a,r=Object(i.a)(t.pageData.condition);try{for(r.s();!(a=r.n()).done;){var l=a.value;switch(l[1]){case"=":if(e[l[0]]!==l[2])return!1;break;case">":if(!(e[l[0]]>l[2]))return!1;break;case">=":if(!(e[l[0]]>=l[2]))return!1;break;case"<":if(!(e[l[0]]<l[2]))return!1;break;case"<=":if(!(e[l[0]]<=l[2]))return!1;break;case"in":if(!l[2].includes(e[l[0]]))return!1;break;case"has":if(!e[l[0]].includes(l[2]))return!1}}}catch(t){r.e(t)}finally{r.f()}return!0},submit:function(){var t,e;"checkbox"==(null===(t=this.listData)||void 0===t||null===(e=t.dataListParams)||void 0===e?void 0:e.selectType)?this.$emit("input",this.currentSelecteds):this.$emit("input",this.currentSelected),this.$emit("close-model")},cancel:function(){this.$emit("close-model")},selectRow:function(t,e){var a,i,r,l;"radio"==(null===(a=this.listData)||void 0===a||null===(i=a.dataListParams)||void 0===i?void 0:i.selectType)?(this.$refs.dataTable.clearSelection(),this.$refs.dataTable.toggleRowSelection(e,!0),this.currentSelected=e.id):"checkbox"==(null===(r=this.listData)||void 0===r||null===(l=r.dataListParams)||void 0===l?void 0:l.selectType)&&e.children&&this.checkChildRows(e.children)},handleSelectionChange:function(t){var e,a;if("checkbox"==(null===(e=this.listData)||void 0===e||null===(a=e.dataListParams)||void 0===a?void 0:a.selectType)){var i=[];t.forEach((function(t){i.push(t.id)})),this.currentSelecteds=i}},selectAll:function(){var t,e,a,i;"radio"==(null===(t=this.listData)||void 0===t||null===(e=t.dataListParams)||void 0===e?void 0:e.selectType)?this.$refs.dataTable.clearSelection():"checkbox"==(null===(a=this.listData)||void 0===a||null===(i=a.dataListParams)||void 0===i?void 0:i.selectType)&&(this.hasCheckAll?(this.checkChildRows(this.listData.dataList,!1),this.hasCheckAll=!1):(this.checkChildRows(this.listData.dataList),this.hasCheckAll=!0))},getFilterParams:function(){var t={page:this.page,limit:this.limit};if(this.filterValues){var e=this.filterValues;if(this.listData.filterItems.length>0)for(var a in e)e.hasOwnProperty(a)&&(e[a].constructor&&e[a].constructor===Array&&(e[a]=e[a].join(",")),""!==e[a]&&(t[a]=e[a]))}return t},handleFilterExport:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function a(){var i,r,l,n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:l=s.a.stringify(e.getFilterParams()),n=e.$store.state.app.api.apiBase+e.listData.filterExtra.exportBtn[t].api+"?cloudId="+(null===(i=e.header)||void 0===i?void 0:i.cloudId)+"&token="+(null===(r=e.header)||void 0===r?void 0:r.token)+"&"+l,window.open(n);case 3:case"end":return a.stop()}}),a)})))()},changeCheckbox:function(t){var e=this;return Object(l.a)(regeneratorRuntime.mark((function a(){var i,r,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=4,e.util.request({url:t.column.extra.url?t.column.extra.url:"/v1/admin/core/index/setStatus",method:"PUT",data:{table:e.listData.dataListParams.tableName,field:t.column.name,status:scope.row[t.column.name],keyVal:scope.row.id},header:{CloudId:null===(i=e.header)||void 0===i?void 0:i.cloudId,Eid:null===(r=e.header)||void 0===r?void 0:r.eid}});case 4:200==(l=a.sent).code?e.$Message.success(l.msg):e.$Message.error(l.msg);case 6:case"end":return a.stop()}}),a)})))()},changeSwitch:function(t,e,a){var i=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var l,n,s,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i.listData.dataList[e.$index][a.name+"_loading"]=!0,r.next=3,i.util.request({url:(null===a||void 0===a||null===(l=a.extra)||void 0===l?void 0:l.url)||"/v1/admin/core/index/setStatus",method:"PUT",data:{table:i.listData.dataListParams.tableName,field:a.name,status:t,keyVal:e.row.id},header:{CloudId:null===(n=i.header)||void 0===n?void 0:n.cloudId,Eid:null===(s=i.header)||void 0===s?void 0:s.eid}});case 3:200==(o=r.sent).code?i.util.showToast({title:o.msg,icon:"success",duration:1e3}):(i.util.showToast({title:o.msg,icon:"error",duration:2e3}),i.listData.dataList[e.$index][a.name]=t?0:1),i.listData.dataList[e.$index][a.name+"_loading"]=!1;case 6:case"end":return r.stop()}}),r)})))()},pageChange:function(t){this.page=t,this.loadData()},limitChange:function(t){this.page=1,this.limit=t,this.loadData()},closeModel:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.pageData.show=!1,!t.pageData.noRefresh&&e&&this.loadData()},loadData:function(){var t=arguments,e=this;return Object(l.a)(regeneratorRuntime.mark((function a(){var i,r,l,n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:"",r=t.length>1&&void 0!==t[1]&&t[1],""!=i&&(e.api=i),e.loading=!0,e.ready=!1,l={},r||(l=e.getFilterParams()),!e.api){a.next=12;break}return a.next=10,e.util.request({url:e.api,method:"get",data:l,header:e.header});case 10:"200"==(n=a.sent).code?e.readyProcess(n.data.listData):e.util.showToast({title:n.msg,icon:"error",duration:2e3});case 12:e.loading=!1;case 13:case"end":return a.stop()}}),a)})))()},checkChildRows:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.forEach((function(t){e.$refs.dataTable.toggleRowSelection(t,a),t.children&&e.checkChildRows(t.children,a)}))},checkRows:function(t){var e=this;t.forEach((function(t){e.currentSelecteds&&e.currentSelecteds.indexOf(t.id)>=0&&e.$refs.dataTable.toggleRowSelection(t,!0),t.children&&e.checkRows(t.children)}))},dialogOpen:function(){if(this.$store.state.app.uiAudio){var t=new Audio;t.src=Object({NODE_ENV:"production",VUE_APP_BASE_DOMAIN:"http://t27.test.com",VUE_APP_BASE_URL:"https://otc.demo.jiangruyi.com/api/",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_I18N_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/vue/vue-otc-default/dist/"}).VUE_APP_AUDIO_OPEN,t.play()}},dialogClose:function(){if(this.$store.state.app.uiAudio){var t=new Audio;t.src=Object({NODE_ENV:"production",VUE_APP_BASE_DOMAIN:"http://t27.test.com",VUE_APP_BASE_URL:"https://otc.demo.jiangruyi.com/api/",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_I18N_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/vue/vue-otc-default/dist/"}).VUE_APP_AUDIO_CLOSE,t.play()}},topButtonModal:function(t){var e=this,a=this,r=this.listData.topButtonList[t],n={};if(r.pageData.querySuffix){var o,c=r.pageData.querySuffix,d=Object(i.a)(c);try{for(d.s();!(o=d.n()).done;){var u=o.value;1==u[2]?n[u[0]]=u[1]:"id"==u[1]&&(n[u[0]]=this.currentSelecteds.join(","))}}catch(t){d.e(t)}finally{d.f()}}var p=r.pageData.api+r.pageData.apiParams,h="";switch((h="string"!=typeof r.pageData.queryParams?s.a.stringify(r.pageData.queryParams):0==r.pageData.queryParams.indexOf("?")?r.pageData.queryParams.substr(1):r.pageData.queryParams)?(p=p+"?"+h,s.a.stringify(n)&&(p=p+"&"+s.a.stringify(n))):s.a.stringify(n)&&(p=p+"?"+s.a.stringify(n)),r.pageData.querySuffixParse=n,r.pageData.modalType){case"confirm":if(this.$store.state.app.uiAudio){var m=new Audio;m.src=Object({NODE_ENV:"production",VUE_APP_BASE_DOMAIN:"http://t27.test.com",VUE_APP_BASE_URL:"https://otc.demo.jiangruyi.com/api/",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_I18N_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/vue/vue-otc-default/dist/"}).VUE_APP_AUDIO_OPEN,m.play()}var f=this;this.$confirm(r.pageData.content,r.pageData.title,{confirmButtonText:r.pageData.okText,cancelButtonText:r.pageData.cancelText,dangerouslyUseHTMLString:!0,type:"warning"}).then(Object(l.a)(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.util.request({url:p,method:r.pageData.formMethod,header:{CloudId:f.cloudId,Eid:f.eid}});case 2:"200"==(a=t.sent).code?(f.$Message.success(a.msg),e.$store.state.app.uiAudio&&((i=new Audio).src="https://cdn.jsdelivr.net/gh/starideas/xyfront/audio/delete.mp3",i.play()),r.pageData.noRefresh||f.loadData()):f.util.showToast({title:a.msg,icon:"error",duration:2e3});case 4:case"end":return t.stop()}}),t)})))).catch((function(){if(e.$store.state.app.uiAudio){var t=new Audio;t.src=Object({NODE_ENV:"production",VUE_APP_BASE_DOMAIN:"http://t27.test.com",VUE_APP_BASE_URL:"https://otc.demo.jiangruyi.com/api/",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_I18N_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/vue/vue-otc-default/dist/"}).VUE_APP_AUDIO_CLOSE,t.play()}}));break;default:switch(this.pitem.pageData&&"modal"==this.pitem.pageData.pageType&&(r.pageData.pageType=this.pitem.pageData.pageType),r.pageData.pageType){case"page":var g="";this.$store.state.menu.menuList.menuTree[this.$store.state.menu.currentSite].routePrefix&&(g=this.$store.state.menu.menuList.menuTree[this.$store.state.menu.currentSite].routePrefix),this.$router.push({path:g+"/pages"+p});break;case"modal":r.pageData.apiBlank=p,r.pageData.show=!0}}a.$nextTick((function(){"auto"!==r.pageData.height&&(a.$refs["top_modal_"+r.name][0].$el.querySelector(".el-dialog").querySelector(".el-dialog__body").style.overflowY="scroll",a.$refs["top_modal_"+r.name][0].$el.querySelector(".el-dialog").querySelector(".el-dialog__body").style.height=r.pageData.height)}))},rightButtonModal:function(t,e,a){var r=this;return Object(l.a)(regeneratorRuntime.mark((function a(){var n,o,c,d,u,p,h,m,f,g,y,x,_,v;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=r,o=r.listData.rightButtonList[t],c="",d=new Object,o.pageData.apiSuffix){u=o.pageData.apiSuffix,p=Object(i.a)(u);try{for(p.s();!(h=p.n()).done;)m=h.value,c=c+"/"+e.row[m]}catch(t){p.e(t)}finally{p.f()}}else c="/"+e.row.id;if(o.pageData.querySuffix){f=o.pageData.querySuffix,g=Object(i.a)(f);try{for(g.s();!(y=g.n()).done;)1==(x=y.value)[2]?d[x[0]]=x[1]:d[x[0]]=e.row[x[1]]}catch(t){g.e(t)}finally{g.f()}}if(o.pageData.querySuffixParse=d,"replace"!=o.pageData.pageType){a.next=11;break}r.$router.replace({path:o.pageData.route+"/"+e.row.name}),a.next=31;break;case 11:a.t0=o.pageData.modalType,a.next="confirm"===a.t0?14:17;break;case 14:return r.$store.state.app.uiAudio&&((_=new Audio).src=Object({NODE_ENV:"production",VUE_APP_BASE_DOMAIN:"http://t27.test.com",VUE_APP_BASE_URL:"https://otc.demo.jiangruyi.com/api/",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_I18N_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/vue/vue-otc-default/dist/"}).VUE_APP_AUDIO_OPEN,_.play()),r.$confirm(o.pageData.content,o.pageData.title,{confirmButtonText:o.pageData.okText,cancelButtonText:o.pageData.cancelText,dangerouslyUseHTMLString:!0,type:"warning"}).then(Object(l.a)(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.pageData.api+c,""!=s.a.stringify(d)&&(e=e+"?"+s.a.stringify(d)),t.next=4,n.util.request({url:e,method:o.pageData.formMethod,header:n.header});case 4:"200"==(a=t.sent).code?(n.util.showToast({title:a.msg,icon:"success",duration:1e3}),r.$store.state.app.uiAudio&&((i=new Audio).src="https://cdn.jsdelivr.net/gh/starideas/xyfront/audio/delete.mp3",i.play()),o.pageData.noRefresh||n.loadData()):n.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 6:case"end":return t.stop()}}),t)})))).catch((function(){if(r.$store.state.app.uiAudio){var t=new Audio;t.src=Object({NODE_ENV:"production",VUE_APP_BASE_DOMAIN:"http://t27.test.com",VUE_APP_BASE_URL:"https://otc.demo.jiangruyi.com/api/",VUE_APP_I18N_FALLBACK_LOCALE:"zh",VUE_APP_I18N_LOCALE:"zh",VUE_APP_IS_DEMO:"false",BASE_URL:"https://cdn.jsdelivr.net/gh/starideas/xyfront/vue/vue-otc-default/dist/"}).VUE_APP_AUDIO_CLOSE,t.play()}})),a.abrupt("break",31);case 17:r.pitem.pageData&&"modal"==r.pitem.pageData.pageType&&(o.pageData.pageType=r.pitem.pageData.pageType),a.t1=o.pageData.pageType,a.next="page"===a.t1?21:"modal"===a.t1?25:28;break;case 21:return v="",r.$store.state.menu.menuList.menuTree[r.$store.state.menu.currentSite].routePrefix&&(v=r.$store.state.menu.menuList.menuTree[r.$store.state.menu.currentSite].routePrefix),r.$router.push({path:v+"/pages"+o.pageData.api+c,query:d}),a.abrupt("break",30);case 25:return""!=s.a.stringify(d)?o.pageData.apiBlank=o.pageData.api+c+"?"+s.a.stringify(d):o.pageData.apiBlank=o.pageData.api+c,o.pageData.show=!0,a.abrupt("break",30);case 28:return alert("未指定按钮pageType"),a.abrupt("break",30);case 30:return a.abrupt("break",31);case 31:n.$nextTick((function(){"auto"!==o.pageData.height&&(n.$refs["right_modal_"+o.name][0].$el.querySelector(".el-dialog").querySelector(".el-dialog__body").style.overflowY="scroll",n.$refs["right_modal_"+o.name][0].$el.querySelector(".el-dialog").querySelector(".el-dialog__body").style.height=o.pageData.height)}));case 32:case"end":return a.stop()}}),a)})))()}}},c=(a("519a"),a("2877")),d=Object(c.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xy-builder-comp xy-builder-wrap-list"},[t.listData.alertList&&t.listData.alertList.top?t._l(t.listData.alertList.top,(function(e,i){return a("el-alert",{key:i,attrs:{type:e.type,"show-icon":!1,closable:!1,effect:"dark"}},[a("div",{domProps:{innerHTML:t._s(e.desc)}})])})):t._e(),[t.listData.countList?a("el-row",{attrs:{type:"flex",justify:"start",align:"top"}},t._l(t.listData.countList,(function(e,i){return a("el-col",{key:i,attrs:{xs:12,xl:e.item.xl?e.item.xl:6,xxl:4}},[a("el-row",{staticClass:"count-item",style:{backgroundColor:e.item.bgColor},attrs:{type:"flex",justify:"center",align:"top"}},[a("el-col",{staticClass:"left"},[a("i",{staticClass:"icon",class:e.item.icon}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.item.title,expression:"it.item.title"}]},[t._v(t._s(e.item.title))])]),a("el-col",{staticClass:"right",style:{backgroundColor:e.item.bgColorRight||"#fff",color:e.item.bgColorRight?"#fff":""}},[a("div",{staticClass:"value"},[a("span",[t._v(t._s(e.current.value))]),a("span",{staticClass:"suffix"},[t._v(t._s(e.current.suffix))])]),a("div",{staticClass:"title"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.content.value,expression:"it.content.value"}],staticClass:"value"},[t._v(t._s(e.content.value))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.content.list,expression:"it.content.list"}],staticClass:"list"},t._l(e.content.list,(function(e,i){return a("div",{key:i,staticClass:"cell"},[t._v(" "+t._s(e.title)+"："+t._s(e.value)+" ")])})),0)])])],1)],1)})),1):t._e(),t._l(t.listData.topButtonList,(function(e,i){return[t.ready?a("transition",{key:"top_modal_"+i,attrs:{name:"el-zoom-in-top"}},[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],ref:"top_modal_"+e.name,refInFor:!0,attrs:{"close-on-click-modal":!!e.pageData.hasOwnProperty("modalClosable")&&e.pageData.modalClosable,"append-to-body":!0,visible:e.pageData.show,width:e.pageData.width||"800px",title:e.pageData.title},on:{open:t.dialogOpen,close:t.dialogClose,"update:visible":function(a){return t.$set(e.pageData,"show",a)}}},["form"==e.pageData.modalType?[a("XyBuilderForm",{ref:"top_form_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev},on:{close:function(a){return t.closeModel(e,a)}}})]:"list"==e.pageData.modalType?[a("XyBuilderlist",{ref:"top_list_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev}})]:"remote"==e.pageData.modalType?[a("XyBuilderRemote",{ref:"top_remote_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,outUrl:e.pageData.outUrl,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev},on:{close:function(a){return t.closeModel(e,a)}}})]:t._e()],2)],1):t._e()]})),a("div",{staticClass:"tool-box",style:{display:t.listData.filterItems&&t.listData.filterItems.length>2?"block":"flex",justifyContent:"space-between"}},[t._l(t.listData.topButtonList,(function(e,i){return a("div",{key:"button"+i,staticClass:"top-button-list"},["print"==e.pageData.modalType?a("el-button",{directives:[{name:"print",rawName:"v-print",value:"#table-box",expression:"'#table-box'"}],attrs:{type:e.style.type||"default",size:e.style.size||"small"}},[t._v(" "+t._s(e.title)+" ")]):a("el-button",{staticStyle:{"margin-bottom":"10px","margin-right":"10px"},attrs:{"empty-text":"当前没有数据",type:e.style.type||"default",size:e.style.size||"small",icon:e.style.icon},on:{click:function(e){return t.topButtonModal(i)}}},[t._v(" "+t._s(e.title)+" ")])],1)})),t.listData.filterItems&&t.listData.filterItems.length>0?a("div",{staticClass:"filter-list flex-1 flex",style:{justifyContent:t.listData.filterItems&&t.listData.filterItems.length>2?"flex-start":"flex-end"},attrs:{gutter:16}},[a("el-form",{ref:"formFilter",attrs:{"label-position":"left","label-width":"80px",inline:!0,size:"small",model:t.filterValues}},[t._l(t.listData.filterItems,(function(e,i){return[a("el-form-item",{key:i,staticClass:"filter-item",attrs:{label:e.title+":"}},["text"==e.type?[a("el-input",{attrs:{type:"text",placeholder:e.extra.placeholder},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.loadData())}},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"select"==e.type?[a("el-select",{attrs:{clearable:"",filterable:""},on:{"on-change":function(e){return t.loadData()}},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}},t._l(e.extra.options,(function(t,e,i){return a("el-option",{key:i,attrs:{label:t.title,value:t.value}})})),1)]:"radio"==e.type?[a("el-radio-group",{model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}},t._l(e.extra.options,(function(e,i,r){return a("el-radio",{key:r,attrs:{label:e.value}},[a("span",[t._v(t._s(e.title))])])})),1)]:"checkbox"==e.type?[a("el-checkbox-group",{model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}},t._l(e.extra.options,(function(e,i,r){return a("el-checkbox",{key:r,attrs:{label:e.value}},[t._v(" "+t._s(e.title)+" ")])})),1)]:"datepicker"==e.type?[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"timepicker"==e.type?[a("el-time-select",{attrs:{type:"time",placeholder:"选择时间","value-format":e.extra.format||"HH:mm:ss"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"timerangepicker"==e.type?[a("el-time-select",{attrs:{type:"timerange","is-range":"",placeholder:"选择时间区间","value-format":e.extra.format||"HH:mm:ss"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"datetimepicker"==e.type?[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"daterangepicker"==e.type?[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:"datetimerangepicker"==e.type?[a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择日期区间","start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"至",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.filterValues[e.name],callback:function(a){t.$set(t.filterValues,e.name,a)},expression:"filterValues[item.name]"}})]:t._e()],2)]})),[a("el-form-item",{staticClass:"filter-item ",attrs:{"label-width":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.loadData()}}},[t._v("查询")]),t.listData.filterExtra&&t.listData.filterExtra.exportBtn?t._l(t.listData.filterExtra.exportBtn,(function(e,i){return a("el-button",{key:i,staticClass:"m-l-xs",attrs:{type:e.type||"primary"},on:{click:function(e){return t.handleFilterExport(i)}}},[t._v(" "+t._s(e.title||"导出")+" ")])})):t._e()],2)]],2)],1):t._e()],2),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"viewer",rawName:"v-viewer",value:{movable:!0},expression:"{movable: true}"}],staticClass:"table-box",style:{minHeight:t.loading?"100px":"0"},attrs:{id:"table-box","element-loading-text":"拼命加载中"}},[!t.loading&&t.ready?a("el-table",{ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:t.listData.dataList,"row-key":"id","srow-key":t.listData.dataListParams?t.listData.dataListParams.expandKey:"id",border:"",stripe:"","default-expand-all":!(!t.listData.config||!t.listData.config.listExpandAll)&&t.listData.config.listExpandAll},on:{select:t.selectRow,"selection-change":t.handleSelectionChange,"select-all":t.selectAll}},[t.listData.dataListParams&&t.listData.dataListParams.selectable?a("el-table-column",{attrs:{type:"selection",width:"40"}}):t._e(),t._l(t.listData.columns,(function(e,i,r){return["html"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{domProps:{innerHTML:t._s(i.row[e.name])}})]}}],null,!0)})]:"group"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return t._l(e.extra.extend.fields,(function(e,r){return a("div",{key:r,staticClass:"group-colitem"},[a("div",{staticClass:"title"},[t._v(" "+t._s(e[1])+" : ")]),a("div",{staticClass:"value"},[t._v(" "+t._s(i.row[e[0]])+" ")])])}))}}],null,!0)})]:"checkbox1"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("el-checkbox-group",{on:{"on-change":function(e){return t.changeCheckbox(i)}},model:{value:i.row[e.name],callback:function(a){t.$set(i.row,e.name,a)},expression:"scope.row[colitem.name]"}},t._l(e.extra.options,(function(i,r,l){return a("el-checkbox",{key:l,attrs:{disabled:!!e.extra.disabled&&e.extra.disabled,label:i.value}},[t._v(" "+t._s(i.title)+" ")])})),1)]}}],null,!0)})]:"switch"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[t.listData.dataList[i.$index]?a("el-switch",{attrs:{size:"mini","av-loading":"listData.dataList[scope.$index][colitem.name + '_loading']","active-text1":e.extra.options[1].title,"inactive-text1":e.extra.options[0].title,"active-color":"#86c042","inactive-color":"#ddd","active-value":e.extra.options[1].value,"inactive-value":e.extra.options[0].value},on:{change:function(a){return t.changeSwitch(a,i,e)}},model:{value:t.listData.dataList[i.$index][e.name],callback:function(a){t.$set(t.listData.dataList[i.$index],e.name,a)},expression:"listData.dataList[scope.$index][colitem.name]"}}):t._e()]}}],null,!0)})]:"image"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:t.getVal(i,e)||t.CDN_URL+"/noimage.png",width:e.extra.extend&&e.extra.extend.width?e.extra.extend.width:"",height:e.extra.extend&&e.extra.extend.height?e.extra.extend.height:"35"}})]}}],null,!0)})]:"images"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return t._l(t.getVal(i,e),(function(i){return a("img",{key:i,staticStyle:{"vertical-align":"middle"},attrs:{src:i.url||t.CDN_URL+"/noimage.png",width:e.extra.extend&&e.extra.extend.width?e.extra.extend.width:"",height:e.extra.extend&&e.extra.extend.height?e.extra.extend.height:"35"},on:{click:function(e){return t.handleView(i.url)}}})}))}}],null,!0)})]:"audio"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("audio",{staticStyle:{"vertical-align":"middle",width:"150px",height:"30px"},attrs:{controls:"controls",preload:"none"}},[a("source",{attrs:{src:t.getVal(i,e)}}),t._v(" Your browser does not support the audio element. ")])]}}],null,!0)})]:"rate"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("el-rate",{staticStyle:{"vertical-align":"middle"},attrs:{"allow-half":"",disabled:"","show-text":!1,value:t.getVal(i,e)}})]}}],null,!0)})]:"progress"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e.extra.extend?a("el-progress",{staticStyle:{"vertical-align":"middle"},attrs:{type:e.extra.extend.type||"line",percentage:t.getVal(i,e),status:e.extra.extend&&e.extra.extend.status||"","text-inside":!0,"stroke-width":12}},[e.extra.extend.hideIcon?[t._v(" "+t._s(t.getVal(i,e))+"% ")]:t._e()],2):t._e()]}}],null,!0)})]:"tags"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return["string"==typeof e.name?[t._l(t.getVal(i,e),(function(i){return[e.extra.options[i]?a("el-tag",{key:i,attrs:{size:"mini",hit:!1,effect:e.extra.options[i].effect||"dark",type:e.extra.options[i].type||"",color:e.extra.options[i].color||"default"}},[t._v(" "+t._s(e.extra.options[i].title||i)+" ")]):t._e()]}))]:t._e()]}}],null,!0)})]:"tag"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e.extra.options[t.getArrayIndex(e.extra.options,t.getVal(i,e))]?[a("el-tag",{attrs:{hit:!1,size:"mini",effect:e.extra.options[t.getArrayIndex(e.extra.options,t.getVal(i,e))].effect||"dark",type:e.extra.options[t.getArrayIndex(e.extra.options,t.getVal(i,e))].type||"",color:e.extra.options[t.getArrayIndex(e.extra.options,t.getVal(i,e))].color||"default"}},[t._v(" "+t._s(e.extra.options[t.getArrayIndex(e.extra.options,t.getVal(i,e))].title||t.getVal(i,e))+" ")])]:[a("el-tag",{attrs:{size:"mini",hit:!1}},[t._v(" "+t._s(i.row[e.name])+" ")])]]}}],null,!0)})]:"password"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e.extra.show?[t._v(" "+t._s(t.getVal(i,e))+" ")]:[t._v("******")],a("i",{attrs:{type:"el-icon-view"},on:{click:function(t){e.extra.show=!e.extra.show}}})]}}],null,!0)})]:"url"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("a",{attrs:{target:"_blank",href:t.getVal(i,e)}},[t._v(t._s(t.getVal(i,e)))])]}}],null,!0)})]:"time"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t._f("formatTime")(a.row[e.name],e.extra.extend.format||""))+" ")]}}],null,!0)})]:"label"==e.extra.type?[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("span",{style:{color:e.extra.options[t.getArrayIndex(e.extra.options,t.getVal(i,e))].color||""}},[t._v(" "+t._s(e.extra.options[t.getArrayIndex(e.extra.options,t.getVal(i,e))].title||t.getVal(i,e))+" ")])]}}],null,!0)})]:"rightButtonList"==e.extra.type?[a("el-table-column",{key:r,attrs:{fixed:(!t.$store.state.menu||"fui"!=t.$store.state.menu.adminTheme)&&"right",prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._l(t.listData.rightButtonList,(function(r,l){return[i.row[e.name]?[i.row[e.name].includes(r.name)?[a("a",{key:"rbutton"+l,class:"default"==r.style.type?"":"text-"+r.style.type,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{type:r.style.type,size:r.style.size,icon:r.style.icon},on:{click:function(e){return t.rightButtonModal(l,i)}}},[t._v(" "+t._s(r.title)+" ")])]:t._e()]:[t.showByCondition(r,i.row)?a("a",{key:"rbutton"+l,class:"default"==r.style.type?"":"text-"+r.style.type,staticStyle:{"font-size":"13px","margin-right":"3px","margin-bottom":"5px"},attrs:{type:r.style.type,size:r.style.size,icon:r.style.icon},on:{click:function(e){return t.rightButtonModal(l,i)}}},[t._v(" "+t._s(r.title)+" ")]):t._e()]]}))]}}],null,!0)})]:[a("el-table-column",{key:r,attrs:{prop:e.name,label:e.title,width:e.extra.width,"min-width":e.extra.minWidth||"50px"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(t.getVal(a,e))+" ")]}}],null,!0)})]]}))],2):t._e()],1),a("div",{staticClass:"flex space-between flex-alignCenter"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.listData.dataPage.total>0,expression:"listData.dataPage.total > 0"}],staticClass:"text-left m-t-sm m-b-sm",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":t.limit,"current-page":t.page,total:t.listData.dataPage.total},on:{"current-change":t.pageChange,"size-change":t.limitChange,"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}}),a("div",{staticClass:"p-l-lg p-r-lg"},[t.$store.state.menu&&"fui"==t.$store.state.menu.adminTheme?a("dv-decoration-2",{staticStyle:{width:"50%",height:"3px"}}):t._e()],1)],1),t.ready?t._l(t.listData.rightButtonList,(function(e,i){return a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],key:"right_modal_"+i,ref:"right_modal_"+e.name,refInFor:!0,attrs:{"close-on-click-modal":!0===e.pageData.modalClosable,"append-to-body":!0,visible:e.pageData.show,width:e.pageData.width||700,title:e.pageData.title},on:{open:t.dialogOpen,close:t.dialogClose,"update:visible":function(a){return t.$set(e.pageData,"show",a)}}},["form"==e.pageData.modalType?[a("XyBuilderForm",{ref:"right_form_"+i,refInFor:!0,attrs:{api:e.pageData.apiBlank,show:e.pageData.show,header:t.header,pitem:e,showDev:t.showDev},on:{close:function(a){return t.closeModel(e,a)}}})]:"list"==e.pageData.modalType?[a("XyBuilderList",{ref:"right_list_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e,showDev:t.showDev}})]:"info"==e.pageData.modalType?[a("XyBuilderInfo",{ref:"right_info_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e,showDev:t.showDev}})]:"tab"==e.pageData.modalType?[a("XyBuilderTab",{ref:"right_info_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e}})]:"stack"==e.pageData.modalType?[a("XyBuilderStack",{ref:"right_stack_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,show:e.pageData.show,pitem:e,showDev:t.showDev}})]:"remote"==e.pageData.modalType?[a("XyBuilderRemote",{ref:"right_remote_"+i,refInFor:!0,attrs:{header:t.header,api:e.pageData.apiBlank,outUrl:e.pageData.outUrl,show:e.pageData.show,pitem:e,showDev:t.showDev},on:{close:function(a){return t.closeModel(e,a)}}})]:t._e()],2)})):t._e(),1==this.showActions?a("div",[a("el-divider"),a("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",size:"default"},on:{click:function(e){return t.submit()}}},[t._v(" 确认选择 ")]),a("el-button",{attrs:{type:"text",size:"default"},on:{click:function(e){return t.cancel()}}},[t._v(" 取消操作 ")])],1):t._e()],t.listData.alertList&&t.listData.alertList.bottom?t._l(t.listData.alertList.bottom,(function(e,i){return a("alert",{key:i,attrs:{type:e.type,"show-icon":!1,closable:!1,effect:"dark"}},[a("div",{domProps:{innerHTML:t._s(e.desc)}})])})):t._e()],2)}),[],!1,null,"4df0eed9",null);e.default=d.exports},"519a":function(t,e,a){"use strict";var i=a("c495");a.n(i).a},a15b:function(t,e,a){"use strict";var i=a("23e7"),r=a("44ad"),l=a("fc6a"),n=a("a640"),s=[].join,o=r!=Object,c=n("join",",");i({target:"Array",proto:!0,forced:o||!c},{join:function(t){return s.call(l(this),void 0===t?",":t)}})},c495:function(t,e,a){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-40c9d2b0","chunk-52583726"],{1146:function(t,e,a){"use strict";a.r(e),a("96cf");var s,i=a("1da1"),n={components:{XySafetyVerify:a("c43b").a},data:function(){return{safeSet:{},verifyData:"",mfa:0}},created:function(){this.loadSafeSet()},methods:{close:function(){this.mfa=this.safeSet["2fa"]},handle2fa:(s=Object(i.a)(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={action:this.mfa},this.verifyData&&(a._verify=this.verifyData),t.next=4,this.util.request({url:"/v1/user/user/loginVerifySet",data:a,method:"put"});case 4:if(200!=(s=t.sent).code){t.next=11;break}this.$refs.sv.close(),this.util.showToast({title:s.msg,icon:"success",duration:2e3}),this.verifyData="",t.next=16;break;case 11:if(401003==s.code)return this.$refs.sv.open(s.data.verifyList),t.abrupt("return");t.next=14;break;case 14:this.mfa=this.safeSet["2fa"],this.util.showToast({title:s.msg,icon:"loading",duration:3e3});case 16:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)}),loadSafeSet:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/user/user/safeSet",method:"get"});case 2:200==(a=e.sent).code?(t.safeSet=a.data.dataList,t.mfa=t.safeSet["2fa"]):t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},r=(a("1751"),a("2877")),l=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"center-box safe-box m-b"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("安全设置")])]),a("div",{staticClass:"content clearfix"},[a("div",{staticClass:"count-list"},[0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("手机绑定")]),a("span",{staticClass:"tip"},[t._v("短信验证用于登录和修改安全验证")])]),a("div",{staticClass:"fr"},[t.safeSet.mobile?t._e():a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/reg_mobile/user/bind"})}}},[t._v("绑定")]),t.safeSet.mobile?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/reg_mobile/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_email")?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("邮箱绑定")]),a("span",{staticClass:"tip"},[t._v("为了您的账户安全，请绑定邮箱")])]),a("div",{staticClass:"fr"},[t.safeSet.email?t._e():a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/reg_email/user/bind"})}}},[t._v("绑定")]),t.safeSet.email?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/reg_email/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("登录密码")]),a("span",{staticClass:"tip"},[t._v("登录时使用，是您的第一道安全防线")])]),a("div",{staticClass:"fr"},[t.safeSet.password&&t.safeSet.password.isset?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/user/resetPassword"})}}},[t._v("修改")]):t._e(),t.safeSet.password&&!t.safeSet.password.isset?a("el-button",{attrs:{type:"primary",size:"medium",plain:""}},[t._v("设置")]):t._e()],1)]),0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("paypwd")?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("资金密码")]),a("span",{staticClass:"tip"},[t._v("交易时使用，开启手机验证或者谷歌验证后方可进行设置")])]),a("div",{staticClass:"fr"},[t.safeSet.paypwd&&t.safeSet.paypwd.isset?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/paypwd/change"})}}},[t._v("修改")]):t._e(),t.safeSet.paypwd&&!t.safeSet.paypwd.isset?a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/paypwd/set"})}}},[t._v("设置")]):t._e()],1)]):t._e(),0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("gauth")?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("谷歌验证")]),a("span",{staticClass:"tip"},[t._v("为了您的账户安全，请绑定谷歌验证器")])]),a("div",{staticClass:"fr"},[t.safeSet.gauth?t._e():a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/gauth/user/bind"})}}},[t._v("绑定")]),t.safeSet.gauth?a("el-button",{staticClass:"ghost",attrs:{type:"primary",size:"medium",plain:""},on:{click:function(e){return t.util.navigateTo({url:"/gauth/user/change"})}}},[t._v("换绑")]):t._e()],1)]):t._e(),0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("gauth")||0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("reg_mobile")||0<=t.$store.state.app.siteInfo.versionFuncsAll.indexOf("email")?a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("二次验证")]),a("span",{staticClass:"tip"},[t._v("开启后，每次登录均需要通过短信或谷歌验证")])]),a("div",{staticClass:"fr"},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.handle2fa},model:{value:t.mfa,callback:function(e){t.mfa=e},expression:"mfa"}})],1)]):t._e()])]),a("XySafetyVerify",{ref:"sv",on:{"verify-request":t.handle2fa,cancel:t.close},model:{value:t.verifyData,callback:function(e){t.verifyData=e},expression:"verifyData"}})],1)}),[],!1,null,"6efb4a17",null).exports,c=a("30cc"),o={data:function(){return{loginHistory:[]}},created:function(){this.loadLoginHistory()},methods:{loadLoginHistory:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/user/user/loginHistory",method:"get"});case 2:200==(a=e.sent).code?t.loginHistory=a.data.dataList:t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},u=(a("53c3"),Object(r.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"center-box safe-box m-b"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("最近登录记录")])]),a("div",{staticClass:"content clearfix"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.loginHistory,stripe:""}},[a("el-table-column",{attrs:{prop:"loginTime",label:"时间","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("formatTime")(e.row.loginTime)))])]}}])}),a("el-table-column",{attrs:{prop:"clientIp",label:"IP地址","min-width":"180"}}),a("el-table-column",{attrs:{prop:"city",label:"地点"}})],1)],1)])}),[],!1,null,"31c98a6e",null).exports),d={components:{userSafeSet:l,otcPaytype:c.default,userLoginHoistory:u},data:function(){return{otcUser:{tradeCount:"0",tradeSum:"0",levelLimit:"0",goodRate:"0",todayLeft:"0",kycInfo:{level:0}}}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/coin_otc/user/my",data:{},method:"get"});case 2:200==(a=e.sent).code?t.otcUser=a.data.info:t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()}}},f=(a("3750"),Object(r.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",attrs:{id:"wrap"}},[a("xy-header"),a("div",{staticClass:"main"},[a("div",{staticClass:"container"},[a("el-row",{staticClass:"user-info m-b",attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{attrs:{xs:24,sm:3}},[a("div",{staticClass:"avatar-box flex"},[a("div",[a("img",{staticClass:"avatar",attrs:{src:t.$store.state.user.userInfo.avatar,alt:"avatar"}})]),a("div",[a("div",{staticClass:"nickname"},[t._v(t._s(t.$store.state.user.userInfo.nickname))]),a("div",{staticClass:"uid"},[t._v("UID: "+t._s(t.$store.state.user.userInfo.id))])])])]),a("el-col",{staticClass:"count-list flex",attrs:{xs:24,sm:5}},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("交易次数")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("toThousands")(t.otcUser.tradeCount)))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("好评率")]),a("div",{staticClass:"value"},[t._v(t._s(t.otcUser.goodRate)+"%")])])])],1),a("el-card",{staticClass:"center-box level-box m-b"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("身份认证")]),a("span",{staticClass:"kyc-level"},[t._v("KYC"+t._s(t.otcUser.kycInfo.level))])]),a("div",{staticClass:"content clearfix"},[a("div",{staticClass:"count-list flex"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("累计交易额")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("toThousands")(t.otcUser.tradeSum))+"CNY")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("当前等级日交易限额")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("toThousands")(t.otcUser.levelLimit))+"CNY")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[t._v("今日剩余可用")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("toThousands")(t.otcUser.todayLeft))+"CNY")])])]),a("div",{staticClass:"action"},[t.otcUser.kycInfo.level<3?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.util.navigateTo({url:"/user_cert/my"})}}},[t._v("提升额度")]):t._e()],1)])]),a("userSafeSet"),a("otcPaytype"),a("userLoginHoistory")],1)]),a("xy-footer")],1)}),[],!1,null,"7af0c7b1",null));e.default=f.exports},1751:function(t,e,a){"use strict";var s=a("e545");a.n(s).a},"30cc":function(t,e,a){"use strict";a.r(e),a("96cf");var s=a("1da1"),i={components:{XyBuilderForm:a("4d99").default},data:function(){return{dialogVisible:!1,addApi:"",dataList:[],formData:{}}},created:function(){this.loadData()},methods:{add:function(t){var e=this;return Object(s.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.addApi="/v1/coin_otc/paytype/add?paytype="+t,e.dialogVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},edit:function(t){var e=this;return Object(s.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.addApi="/v1/coin_otc/paytype/edit/"+t,e.dialogVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},loadData:function(){var t=this;return Object(s.a)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.util.request({url:"/v1/coin_otc/paytype/my",method:"get"});case 2:200==(a=e.sent).code?t.dataList=a.data.dataList:t.util.showToast({title:a.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)})))()},deleteOne:function(t){var e,a=this;this.$confirm("确认要删除吗","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"error",callback:(e=Object(s.a)(regeneratorRuntime.mark((function e(s){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.util.request({url:"/v1/coin_otc/paytype/delete/"+t,method:"deleteget"});case 2:200==(i=e.sent).code?a.util.showToast({title:i.msg,icon:"loading",duration:1e3}):a.util.showToast({title:i.msg,icon:"loading",duration:3e3});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}}},n=(a("4189"),a("2877")),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"center-box safe-box m-b"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("收款方式")])]),a("div",{staticClass:"content clearfix"},[a("div",{staticClass:"count-list"},[a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("银行卡")])]),a("div",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add("3")}}},[t._v("添加")])],1),a("div",{staticClass:"clear m-l"},[t._l(t.dataList,(function(e){return[3==e.paytype?a("div",{key:e.id},[a("span",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.bank))]),a("span",[t._v(t._s(e.account))]),a("el-button",{staticClass:"m-l-lg",attrs:{type:"text",size:"small"},on:{click:function(a){return t.edit(e.id)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteOne(e.id)}}},[t._v("删除")])],1):t._e()]}))],2)]),a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("支付宝")])]),a("div",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add("1")}}},[t._v("添加")])],1),a("div",{staticClass:"clear m-l"},[t._l(t.dataList,(function(e){return[1==e.paytype?a("div",{key:e.id},[a("span",[t._v(t._s(e.name))]),a("el-button",{staticClass:"m-l-lg",attrs:{type:"text",size:"small"},on:{click:function(a){return t.edit(e.id)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteOne(e.id)}}},[t._v("删除")])],1):t._e()]}))],2)]),a("div",{staticClass:"item clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"title"},[t._v("微信")])]),a("div",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add("2")}}},[t._v("添加")])],1),a("div",{staticClass:"clear m-l"},[t._l(t.dataList,(function(e){return[2==e.paytype?a("div",{key:e.id},[a("span",[t._v(t._s(e.name))]),a("el-button",{staticClass:"m-l-lg",attrs:{type:"text",size:"small"},on:{click:function(a){return t.edit(e.id)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteOne(e.id)}}},[t._v("删除")])],1):t._e()]}))],2)])])]),a("el-dialog",{attrs:{title:"添加收款方式",visible:t.dialogVisible,width:"540px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("XyBuilderForm",{key:t.addApi,ref:"'paytypeadd",attrs:{api:t.addApi,show:t.dialogVisible},on:{"close-model":function(e){t.dialogVisible=!1}}})],1)],1)}),[],!1,null,"22efab67",null);e.default=r.exports},3750:function(t,e,a){"use strict";var s=a("8beb");a.n(s).a},4189:function(t,e,a){"use strict";var s=a("ed55");a.n(s).a},"53c3":function(t,e,a){"use strict";var s=a("6927");a.n(s).a},6927:function(t,e,a){},"8beb":function(t,e,a){},e545:function(t,e,a){},ed55:function(t,e,a){}}]);